---
title: 'Query the status of a task'
sidebar_position: 3
type: docs
platform_selector: false
description: >
   Query the status of a cloud transcoding.
---

import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="GET"
    endpoint="https://api.sd-rtn.com/v1/projects/{appId}/rtsc/cloud-transcoder/tasks/{taskId}"
  >

After creating a <Vpd k="NAME" /> task, use the `Query` request to query the task status.

## Request

### Path parameters

<PathParameter name="appId" type="string" required={true}>
The App ID of your project from <Vg k="CONSOLE" />.
</PathParameter>
<PathParameter name="taskId" type="string" required={true}>
The transcoding task UUID used to identify the cloud transcoder for this request.
</PathParameter>

### Query parameters

<PathParameter name="builderToken" type="string" required={true}>
The `tokenName` you obtained in the response body of the `Acquire` method. See [Acquire a builder token](../rest-api/acquire).
</PathParameter>

## Response

### Response header

<PathParameter name="X-Request-ID" type="string">
UUID (Universally Unique Identifier), used to identify this request.

If the request fails, print out the value in the log to troubleshoot the problem. If the response status code of the request is not 2XX, then the response header may not contain this field.
</PathParameter>

### Response body

- If the returned status code is `200`, the request was successful. The response body contains the result of the request.

  <ParameterList title="OK">
      <Parameter name="taskId" type="string">
      A UUID used to identify the cloud transcoder for this request operation.
      </Parameter>
      <Parameter name="createTs" type="number">
      Unix timestamp (seconds) when the transcoding task was created.
      </Parameter>
      <Parameter name="status" type="string">
      The running status of the transcoding task:
      - `"IDLE"`: Task not started.  
      - `"PREPARED"`: The task has received a start request.  
      - `"STARTING"`: The task is starting.  
      - `"CREATED"`: Task initialization completed.  
      - `"STARTED"`: The task has started.  
      - `"IN_PROGRESS"`: Task in progress.  
      - `"STOPPING"`: The task is stopping.  
      - `"STOPPED"`: The task has stopped.  
      - `"EXIT"`: The task exited normally.  
      - `"FAILURE_STOP"`: The task exited abnormally.  
      </Parameter>
      <Parameter name="services" type="object">
        <Parameter name="cloudTranscoder" type="object">
          <Parameter name="config" type="object">
          Same as the fields you set in the `Create` request body.
          </Parameter>
          <Parameter name="createTs" type="number">
          Unix timestamp (in seconds) when the service was created.
          </Parameter>
          <Parameter name="details" type="object">
          Reserved field.
          </Parameter>
          <Parameter name="message" type="string">
          Reserved field.
          </Parameter>
          <Parameter name="serviceType" type="string">
          Should be `"cloudTranscoderV2"`.
          </Parameter>
          <Parameter name="status" type="string">
          The running status of the transcoding service in the transcoding task:  
          - `"serviceIdle"`: The service has not started.  
          - `"serviceReady"`: The service is ready to start.  
          - `"serviceStarted"`: The service has started.  
          - `"serviceInProgress"`: The service is currently running.  
          - `"serviceCompleted"`: The service has stopped, and all tasks have been completed.  
          - `"servicePartialCompleted"`: The service has stopped, but the task was only partially completed.  
          - `"serviceValidationFailed"`: The service failed due to invalid parameters.  
          - `"serviceAbnormal"`: The service exited unexpectedly.  
          - `"serviceUnknown"`: The service status is unknown.  
          <br/>
          This field is meant for the Agora technical team to investigate any issues. You do not need to focus on it.
          </Parameter>
        </Parameter>
        <Parameter name="eventHandlers" type="object">
        Reserved field.
        </Parameter>
        <Parameter name="execution" type="object">
          <Parameter name="workflows" type="object">
          Reserved field.
          </Parameter>
        </Parameter>
        <Parameter name="properties" type="object">
        Reserved field.
        </Parameter>
        <Parameter name="sequenceId" type="string">
        Reserved field.
        </Parameter>
        <Parameter name="variables" type="object">
        Reserved field.
        </Parameter>
        <Parameter name="workflows" type="object">
        Reserved field.
        </Parameter>      
      </Parameter>
  </ParameterList>

- If the returned status code is not `200`, the request failed. 

  <ParameterList title="Non 200">   
      <Parameter name="message" type="string">
      Describes why the request failed.
      </Parameter>
  </ParameterList>

</LeftColumn>

<RightColumn>

<Section title="Authorization">
This endpoint requires [Basic Auth](../rest-api/restful-authentication).
</Section>

<Section title="Request example">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
    ```bash
    curl --request get \
      --url 'https://api.sd-rtn.com/v1/projects/:appId/rtsc/cloud-transcoder/tasks/:taskId?builderToken=<actual_token_value>' \
      --header 'Authorization: Basic <credentials>' \
      --header 'Content-Type: <string>'
    ```
    </TabItem>
    <TabItem value="python" label="Python">

    ```python
    import requests

    url = "https://api.sd-rtn.com/v1/projects/:appId/rtsc/cloud-transcoder/tasks/:taskId?builderToken=<actual_token_value>"

    headers = {
        "Authorization": "Basic <credentials>",
        "Content-Type": "<string>"
    }

    response = requests.request("get", url, headers=headers)

    print(response.text)
    ```
    </TabItem>

    <TabItem value="node" label="Node.js">

    ```js
    const url = 'https://api.sd-rtn.com/v1/projects/:appId/rtsc/cloud-transcoder/tasks/:taskId?builderToken=<actual_token_value>';
    const options = {
      method: 'get',
      headers: {Authorization: 'Basic <credentials>', 'Content-Type': '<string>'}
    };

    fetch(url, options)
      .then(res => res.json())
      .then(json => console.log(json))
      .catch(err => console.error(err));
    ```
    </TabItem>
  </Tabs>

  </Section>
<Section title="Response example">

  <Tabs groupId="response">
    <TabItem value="ok" label="200" default>

    ```json
    {
      "createTs": 1661420011,
      "eventHandlers": {},
      "execution": {
        "workflows": {}
      },
      "properties": {},
      "sequenceId": "0",
      "services": {
        "cloudTranscoder": {
          "config": {},
          "createTs": 1661420011,
          "message": "OnSlaveServiceQueryUpdated",
          "serviceType": "cloudTranscoderV2",
          "status": "serviceInProgress"
        }
      },
      "status": "IN_PROGRESS",
      "taskId": "c0077139e34d0949c719189a393aa***",
      "variables": {},
      "workflows": {}
    }
    ```
  </TabItem>
  <TabItem value="error" label="Non-200">
    ```json
    {
      "message": "Describes why the request failed."
    }
    ```
    </TabItem>
  </Tabs>
</Section>
</RightColumn>
</RestAPILayout>