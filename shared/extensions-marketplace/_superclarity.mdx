import Prerequisites from '@docs/shared/extensions-marketplace/common/_prerequities.mdx';

This extension provides the video <Vg k="RTEE_CLARITY" /> feature for <Vg k="VSDK" />.

<PlatformWrapper platform="web" >

## Understand the tech

To use the <Vg k="RTEE_CLARITY" /> extension in your project, you create an extension instance and register it. After you create an `ILocalVideoTrack` or `IRemoteVideoTrack`, you create a processor and pipe it to track.

## Prerequisites

The development environment requirements are as follows:

<Prerequisites />

- Agora Video SDK for Web (v4.16.1 or later)
- Implemented <Link to="../../../video-calling/get-started/get-started-sdk"><Vg k="GET_STARTED"/> for <Vg k="VIDEO"/></Link>.


## Project setup

To implement <Vg k="RTEE_CLARITY" /> features in your app, open the SDK quickstart for Video Calling project you created previously.

1. Download and install the `agora-extension-super-clarity` package.
 
1. Import these packages into your code.

    ```typescript
    import AgoraRTC from "agora-rtc-sdk-ng";
    import { SuperClarityExtension, SuperClarityEvents } from "agora-extension-super-clarity";
    import type { ISCProcessor } from "agora-extension-super-clarity";
    ```

## Integrate the extension

This section describes the call sequence you implement to use <Vg k="RTEE_CLARITY" /> features in your app.

1. Create an extension instance and register it.

    ```typescript
    // Create an extension instance
    const extension = new SuperClarityExtension();
    // Register the instance
    AgoraRTC.registerExtensions([extension]);
    ```

1. Create a processor and pipe your `ILocalVideoTrack` or `IRemoteVideoTrack` to it.

    ```typescript
    // Create a processor
    const processor = extension.createProcessor();
    processor.on(SuperClarityEvents.ERROR, (msg) => {
      console.error("processor error", msg);
    });
    processor.on(SuperClarityEvents.FIRST_VIDEO_FRAME, (msg) => {
      console.log("processor first video frame", msg);
    });
    processor.on(SuperClarityEvents.SKIPFRAME, (msg) => {
      console.warning("processor skip one frame", msg);
    });
    processor.on(SuperClarityEvents.STATS, (msg) => {
      console.log("processor stats info", msg);
    });

    // Pipe the track to the processor
    track.pipe(processor).pipe(track.processorDestination);
    ```

1. Enable or disable the processor.

    ```typescript
    // Enable the processor
    const enable = async () => {
      const enabled = processor.enabled;
      if (!enabled) {
        await processor.enable();
      }
    };

    // Disable the processor
    const disable = async () => {
      const enabled = processor.enabled;
      if (enabled) {
        await processor.disable();
      }
    };
    ```

1. Unpipe and release the processor when it is not longer required.

    ```typescript
    // Unpipe and release the processor resources
    const release = async () => {
      processor.unpipe();
      track.unpipe();
      track.pipe(track.processorDestination);
      await processor.release();
    }
    ```

## Reference

This section contains content that completes the information in this page, or points you to documentation that explains other aspects to this product.

### API reference

- <Link to="{{global.API_REF_WEB_ROOT}}/interfaces/iagorartc.html#registerextensions">registerExtensions</Link>

- <Link to="{{global.API_REF_WEB_ROOT}}/interfaces/iremotevideotrack.html#pipe">pipe</Link>

- <Link to="{{global.API_REF_WEB_ROOT}}/interfaces/iremotevideotrack.html#unpipe">unpipe</Link>

</PlatformWrapper>

<PlatformWrapper notAllowed="web" >
**This extension is currently not available for <Vpl k="NAME" />**.
</PlatformWrapper>