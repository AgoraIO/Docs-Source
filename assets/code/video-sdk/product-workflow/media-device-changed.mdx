<PlatformWrapper platform="react-js">
<ProductWrapper notAllowed="voice-calling">

    ```typescript
    const OnMicrophoneChangedHook: React.FC = () => {
        const agoraContext = useAgoraContext();
        
        useEffect(() => {
            const onMicrophoneChanged = (changedDevice: DeviceInfo) => {
                if (changedDevice.state === "ACTIVE") {
                    agoraContext.localMicrophoneTrack?.setDevice(changedDevice.device.deviceId)
                    .catch((error: IAgoraRTCError) => console.error(error));
                } else if (changedDevice.device.label === agoraContext.localMicrophoneTrack?.getTrackLabel()) {
                    AgoraRTC.getMicrophones()
                    .then((devices) => agoraContext.localMicrophoneTrack?.setDevice(devices[0].deviceId))
                    .catch((error) => console.error(error));
                }
            };
            AgoraRTC.onMicrophoneChanged = onMicrophoneChanged;
            
            return () => {
                AgoraRTC.onMicrophoneChanged = undefined;
            };
        }, [agoraContext.localMicrophoneTrack]);
        return null;
    };
    
    const OnCameraChangedHook: React.FC = () => {
        const agoraContext = useAgoraContext();
        
        useEffect(() => {
            const onCameraChanged = (changedDevice: DeviceInfo) => {
                if (changedDevice.state === "ACTIVE") {
                    agoraContext.localCameraTrack?.setDevice(changedDevice.device.deviceId)
                    .catch((error) => console.error(error));
                } else if (changedDevice.device.label === agoraContext.localCameraTrack?.getTrackLabel()) {
                    AgoraRTC.getCameras()
                    .then((devices) => agoraContext.localCameraTrack?.setDevice(devices[0].deviceId))
                    .catch((error) => console.error(error));
                }
            };
            
            AgoraRTC.onCameraChanged = onCameraChanged;
            return () => {
                AgoraRTC.onCameraChanged = undefined;
            };
        }, [agoraContext.localCameraTrack]);
        return null;
    };
    ```
    - <Link to="{{Global.API_REF_WEB_ROOT}}/interfaces/iagorartc.html#onmicrophonechanged">onMicrophoneChanged</Link>
    - <Link to="{{Global.API_REF_WEB_ROOT}}/interfaces/iagorartc.html#oncamerachanged">onCameraChanged</Link>

</ProductWrapper>
<ProductWrapper product="voice-calling">

    ```typescript
    const OnMicrophoneChangedHook: React.FC = () => {
        const agoraContext = useAgoraContext();
        
        useEffect(() => {
            const onMicrophoneChanged = (changedDevice: DeviceInfo) => {
                if (changedDevice.state === "ACTIVE") {
                    agoraContext.localMicrophoneTrack?.setDevice(changedDevice.device.deviceId)
                    .catch((error: IAgoraRTCError) => console.error(error));
                } else if (changedDevice.device.label === agoraContext.localMicrophoneTrack?.getTrackLabel()) {
                    AgoraRTC.getMicrophones()
                    .then((devices) => agoraContext.localMicrophoneTrack?.setDevice(devices[0].deviceId))
                    .catch((error) => console.error(error));
                }
            };
            AgoraRTC.onMicrophoneChanged = onMicrophoneChanged;
            
            return () => {
                AgoraRTC.onMicrophoneChanged = undefined;
            };
        }, [agoraContext.localMicrophoneTrack]);
        return null;
    };
    
    ```
    - <Link to="{{Global.API_REF_WEB_ROOT}}/interfaces/iagorartc.html#onmicrophonechanged">onMicrophoneChanged</Link>

</ProductWrapper>

</PlatformWrapper>