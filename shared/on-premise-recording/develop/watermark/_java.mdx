<PlatformWrapper platform="linux-java">

<details>
<summary>Complete sample code for watermarks</summary>

```java
if (recorderConfig.getWaterMark() != null && !recorderConfig.getWaterMark().isEmpty()) {
  WatermarkConfig[] watermarks = new WatermarkConfig[recorderConfig.getWaterMark().size()];

  for (int i = 0; i < watermarks.length; i++) {
    WatermarkInfo info = recorderConfig.getWaterMark().get(i);
    watermarks[i] = new WatermarkConfig();
    watermarks[i].setIndex(i + 1);

    WatermarkSourceType type = Utils.convertToWatermarkSourceType(info.getType());
    watermarks[i].setType(type);

    if (type == WatermarkSourceType.LITERA) {
      WatermarkLitera litera = new WatermarkLitera();
      litera.setWmLitera(info.getLitera());
      litera.setFontFilePath(info.getFontFilePath());
      litera.setFontSize(info.getFontSize());
      watermarks[i].setLiteraSource(litera);

    } else if (type == WatermarkSourceType.TIMESTAMPS) {
      WatermarkTimestamp timestamp = new WatermarkTimestamp();
      timestamp.setFontFilePath(info.getFontFilePath());
      timestamp.setFontSize(info.getFontSize());
      watermarks[i].setTimestampSource(timestamp);

    } else if (type == WatermarkSourceType.PICTURE) {
      watermarks[i].setImageUrl(info.getImgUrl());
    }

    WatermarkOptions options = new WatermarkOptions();
    options.setMode(Constants.WatermarkFitMode.FIT_MODE_COVER_POSITION);
    options.setZOrder(info.getZorder());

    Rectangle portrait = new Rectangle();
    portrait.setX(info.getX());
    portrait.setY(info.getY());
    portrait.setWidth(info.getWidth());
    portrait.setHeight(info.getHeight());

    Rectangle landscape = new Rectangle();
    landscape.setX(info.getX());
    landscape.setY(info.getY());
    landscape.setWidth(info.getWidth());
    landscape.setHeight(info.getHeight());

    options.setPositionInPortraitMode(portrait);
    options.setPositionInLandscapeMode(landscape);
    watermarks[i].setOptions(options);
  }

  agoraMediaRtcRecorder.enableAndUpdateVideoWatermarks(watermarks);
}
```
</details>

To enable or update a watermark in composite recording mode, call `enableAndUpdateVideoWatermarks` and pass `watermarkConfigs`. The `watermarkConfigs` is an array of watermark configuration objects. Each object defines one watermark, including its type, content, position, and appearance. To remove all watermarks, call `disableVideoWatermarks`.

<Admonition type="info" info="info">
In the individual recording mode, use `enableAndUpdateVideoWatermarksByUid` and `disableVideoWatermarksByUid` instead.
</Admonition>

### Add a text watermark

To use a text watermark:

1. Call the `enableAndUpdateVideoWatermarks()` method and set the `watermarkConfigs` parameter.

2. Set the watermark type to `LITERA`:

   ```java
   watermarks[i].setType(Constants.WatermarkSourceType.LITERA);
   ```

3. Configure the text content, font file path, and font size:

   ```java
   WatermarkLitera textWatermark = new WatermarkLitera();
   textWatermark.setWmLitera("Agora Watermark Example");
   textWatermark.setFontFilePath("path/to/font.ttf"); // Optional
   textWatermark.setFontSize(24);

   watermarks[i].setLiteraSource(textWatermark);
   ```

### Add a timestamp watermark

To enableAndUpdateVideoWatermarks a timestamp watermark:

1. Call the `enableAndUpdateVideoWatermarks()` method and set the `watermarkConfigs` parameter.

2. Set the watermark type to `TIMESTAMPS`:

   ```java
   watermarks[i].setType(Constants.WatermarkSourceType.TIMESTAMPS);
   ```

3. Configure the font file path and font size for the timestamp watermark:

   ```java
   WatermarkTimestamp watermarkTimestamp = new WatermarkTimestamp();
   watermarkTimestamp.setFontFilePath("path/to/font.ttf"); // Optional: uses default font if not set
   watermarkTimestamp.setFontSize(20);

   watermarks[i].setTimestampSource(watermarkTimestamp);
   ```

### Add an image watermark

To use a picture watermark:

1. Call the `enableAndUpdateVideoWatermarks()` method and set the `watermarkConfigs` parameter.

2. Set the watermark type to `PICTURE`:

   ```java
   watermarks[i].setType(Constants.WatermarkSourceType.PICTURE);
   ```

3. Set the path to the image watermark:

   ```java
   watermarks[i].setImageUrl("path/to/watermark.png");
   ```

### Position the watermark

You can position watermarks using either fixed pixels or relative ratios, and control how they appear in portrait and landscape modes.

#### Fixed position (pixels)

##### Portrait mode

```java
WatermarkOptions options = new WatermarkOptions();
options.setMode(Constants.WatermarkFitMode.FIT_MODE_COVER_POSITION);
options.setZOrder(1); // Higher values render on top

Rectangle portraitPosition = new Rectangle();
portraitPosition.setX(50);
portraitPosition.setY(50);
portraitPosition.setWidth(200);
portraitPosition.setHeight(100);

options.setPositionInPortraitMode(portraitPosition);
watermarks[i].setOptions(options);
```

##### Landscape mode

```java
Rectangle landscapePosition = new Rectangle();
landscapePosition.setX(50);
landscapePosition.setY(50);
landscapePosition.setWidth(200);
landscapePosition.setHeight(100);

options.setPositionInLandscapeMode(landscapePosition);
watermarks[i].setOptions(options);
```

#### Relative position (ratio)

```java
WatermarkOptions options = new WatermarkOptions();
options.setMode(Constants.WatermarkFitMode.FIT_MODE_USE_IMAGE_RATIO);
options.setZOrder(1);

WatermarkRatio ratio = new WatermarkRatio();
ratio.setXRatio(0.5);
ratio.setYRatio(0.5);
ratio.setWidthRatio(0.6);

options.setWatermarkRatio(ratio);
watermarks[i].setOptions(options);
```

</PlatformWrapper>