
<PlatformWrapper platform="android">

### Add network permissions

Multipath requires permission to access and manage the device network state. You must add the following permissions to the Android projectâ€™s `/app/src/main/AndroidManifest.xml` file:

```xml
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
```

### Multipath APIs

The <Vpd k="SDK" /> supports enabling and configuring multipath transmission capabilities through the following parameters in `ChannelMediaOptions`:

```java
public class ChannelMediaOptions {
  // ...
  public Boolean enableMultipath;
  public Integer uplinkMultipathMode;
  public Integer downlinkMultipathMode;
  public Integer preferMultipathType;
}
```

Use `enableMultipath` to enable multipath transmission. Once enabled, the SDK supports two transmission modes:

- **Dynamic mode** (default): Dynamically selects the optimal transmission path based on network conditions. This mode is suitable for traffic-sensitive scenarios with high user experience requirements, such as conferences and education. In this mode, you can use `preferMultipathType` to specify a preferred network path, such as Wi-Fi or mobile network.

- **Full redundancy mode**: Sends data simultaneously across all available network paths. This mode is suitable for scenarios where traffic use is less sensitive but a highly reliable user experience is required, such as outdoor production, broadcasting, and parallel operation. This mode incurs additional fees. [Contact technical support](mailto:support@agora.io) to enable it.

You can configure the transmission mode separately for uplink (`uplinkMultipathMode`) and downlink (`downlinkMultipathMode`).

When multipath is enabled, the SDK reports transmission statistics for each path in real time through the `onMultipathStats` callback. These statistics include traffic consumption for each network type and real-time performance metrics for each path, making it easier to monitor and optimize network performance.


```java
public static class MultipathStats {
  public int lanTxBytes;
  public int lanRxBytes;
  public int wifiTxBytes;
  public int wifiRxBytes;
  public int mobileTxBytes;
  public int mobileRxBytes;
  public int activePathNum;
  public PathStats[] pathStats;
}
```

### Sample code

The following sample code shows how to enable and configure multipath network transmission:

```java
private String multipathModeStr = "";
private int activePathNum = 0;

// Enable multipath network transmission
mediaOptions.enableMultipath = true;

multipathModeStr = spinner_multipath_mode.getSelectedItem().toString();
Constants.MultipathMode multipathMode = Constants.MultipathMode.valueOf(multipathModeStr);

// Set uplink transmission mode
mediaOptions.uplinkMultipathMode = Constants.MultipathMode.getValue(multipathMode);

// Set downlink transmission mode
mediaOptions.downlinkMultipathMode = Constants.MultipathMode.getValue(multipathMode);

// In dynamic transmission mode, use preferMultipathType to specify the preferred path
mediaOptions.preferMultipathType = Constants.MultipathType.MULTIPATH_TYPE_WIFI.getValue();

// Report multipath transmission statistics
@Override
public void onMultipathStats(MultipathStats stats) {
  super.onMultipathStats(stats);
  activePathNum = stats.activePathNum;
}
```

</PlatformWrapper>