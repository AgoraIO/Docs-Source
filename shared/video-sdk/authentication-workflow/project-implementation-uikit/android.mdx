<PlatformWrapper platform="android">

1.  **Specify the token server URL**

    In the `MainActivity` class, declare the following variable to hold the token server URL.

    ``` java
    // The base URL to your token server.
    private String serverUrl = "<Token Server URL>"; // For example, "https://app-name.herokuapp.com"
    ```

    Make sure you specify the token-server URL in exactly the same format as shown in the example.

2.  **Set the token URL for AgoraVideoViewer**

    To set the token URL, you create an `AgoraSettings` object, set its `TokenURL` property and pass this object to the constructor when initializing `AgoraVideoViewer`. To do this, replace the code in the `try {…​}` block of the `initializeAndJoinChannel() `` method with the following:

    ``` java
    AgoraSettings settings = new AgoraSettings();
    settings.setTokenURL(serverUrl);
    agView = new AgoraVideoViewer(this, new AgoraConnectionData(appId, null),
        AgoraVideoViewer.Style.FLOATING, settings, null);
    ```

3.  **Fetch a token from the server when you join a channel**

    In the `joinChannel()` method, replace the `agView.join` call with the following:

    ``` java
    agView.join(channelName, true, Constants.CLIENT_ROLE_BROADCASTER, 0);
    ```
</PlatformWrapper>
