---
title: 'Dify chatbot'
sidebar_position: 4
type: docs
description: >
  Enable voice conversations with Dify applications using TEN Agent.
---

This guide shows you how to enable voice interactions with your Dify applications in <Vpd k="NAME" />. By connecting speech recognition and synthesis to your Dify chatbot, users can have natural voice conversations with applications built on the Dify platform.

## Prerequisites

Before starting, ensure you have:
- <Vpd k="NAME" /> playground running. See the [Agent quickstart](../get-started/quickstart).
- API keys for your voice services:
    - STT service like [Deepgram](https://deepgram.com/)
    - TTS service like [Fish.Audio](https://fish.audio/)
    - Agora RTC credentials from [Agora Console](https://www.agora.io/)
- Dify API Key for your application from your Dify workspace.

    You can use any application created on the Dify platform, including agents or chat assistants. Each application has its own unique API key in the Dify dashboard.

## Set up your Dify bot with voice

Connect your Dify application to voice capabilities:

1. Open the playground at `http://localhost:3000`

2. Select the `voice_assistant` graph type

3. Configure modules:
    1. Click **Module Picker**
    1. Select your preferred STT and TTS modules
    1. For the LLM module, select **Dify Chat Bot**
    1. Click **Save Changes**

4. Configure Dify properties:
    1. Click the settings button next to the graph selector
    1. Enter your Dify API Key
    1. Click **Save Changes**

5. Start your voice-enabled application:
    1. Click **Connect** to initialize the agent
    1. Wait a few seconds for startup
    1. Begin speaking to your Dify application

## Azure STT integration

For Azure speech recognition:

1. Select the `voice_assistant_integrated_stt` graph type
2. Configure Azure credentials in the RTC module
3. Follow the remaining configuration steps above

## Troubleshooting

Common issues and solutions:

| Issue | Solution |
|-------|----------|
| **No response from Dify** | <ul><li>Verify your Dify API Key is correct</li><li>Check that your Dify application has a valid model configured</li><li>Ensure the application is published in Dify</li></ul> |
| **Knowledge retrieval issues** | <ul><li>Verify datasets are properly uploaded and indexed in Dify</li><li>Check retrieval settings in your Dify application</li><li>Test the application directly in Dify to isolate the issue</li></ul> |
| **Audio problems** | <ul><li>Confirm STT and TTS modules are properly configured</li><li>Verify Agora credentials in your `.env` file</li><li>Check browser microphone permissions</li></ul> |
| **Application behavior** | <ul><li>Adjust application settings in Dify dashboard</li><li>Modify prompts and context in Dify</li><li>Update datasets or tools as needed</li></ul> |
