---
title: 'Cancel call'
sidebar_position: 6
platform_selector: false
description: >
 Cancel a previous inbound call setup request using the returned details.
---

import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

<RestAPILayout>
 <LeftColumn
   title={frontMatter.title}
   method="POST"
   endpoint="https://sipcm.agora.io/v1/api/pstn"
 >

Cancel a previous inbound call setup request using the details returned by an Inbound PSTN or Inbound SIP API call. If the call is in progress, it will be stopped.

## Request

### Request body

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="BODY" required={true}>
 <Parameter name="action" type="string" possibleValues="inbound, outbound, inboundsip, endcall, cancelcall" required={true}>
   The action type. Use "cancelcall" to cancel an inbound call setup.
 </Parameter>
 <Parameter name="appId" type="string" required={true}>
   The App ID of your Agora project.
 </Parameter>
 <Parameter name="sip" type="string" required={false}>
   The SIP address returned by the inbound SIP API. Required when canceling an inbound SIP call.
 </Parameter>
 <Parameter name="did" type="string" required={false}>
   The phone number returned by the inbound PSTN API. Required when canceling an inbound PSTN call.
 </Parameter>
 <Parameter name="pin" type="string" required={false}>
   The PIN returned by the inbound PSTN API. Required when canceling an inbound PSTN call.
 </Parameter>
</ParameterList>

## Response

- If the returned status code is `200`, the call setup was successfully canceled.

 <ParameterList title="OK">
   <Parameter name="success" type="boolean">
     Indicates whether the call setup was successfully canceled.
   </Parameter>
 </ParameterList>

- If the returned status code is `404`, the call setup was not found.

 <ParameterList title="Not Found">
   <Parameter name="code" type="integer">
   Error response code:
   - `404` Call setup not found or already completed
   </Parameter>
 </ParameterList>

</LeftColumn>

<RightColumn>

<Section title="Authorization">
[Contact](mailto:support@agora.io) Agora support for an authorization header to include in your requests.
</Section>

<Section title="Request example">

 <Tabs groupId="code-examples">
   <TabItem value="curl" label="curl" default>
     ```bash
     curl -X POST https://sipcm.agora.io/v1/api/pstn \
       -H "Content-Type: application/json" \
       -H "Authorization: [Your-Authorization-Header]" \
       -d '{
         "action": "cancelcall",
         "appId": "[Your-Agora-App-ID]",
         "sip": "sip:pstn_783410988998@2.4.6.7:5080",
         "did": "17377583411",
         "pin": "445566"
       }'
     ```
   </TabItem>
   <TabItem value="python" label="Python">

   ```python
   import requests
   import json

   url = "https://sipcm.agora.io/v1/api/pstn"

   headers = {
       "Content-Type": "application/json",
       "Authorization": "[Your-Authorization-Header]"
   }

   data = {
       "action": "cancelcall",
       "appId": "[Your-Agora-App-ID]",
       "sip": "sip:pstn_783410988998@2.4.6.7:5080",
       "did": "17377583411",
       "pin": "445566"
   }

   response = requests.post(url, headers=headers, json=data)

   if response.status_code == 200:
       result = response.json()
       if result['success']:
           print("Call setup canceled successfully")
       else:
           print("Failed to cancel call setup")
   elif response.status_code == 404:
       print("Call setup not found or already completed")
   else:
       print(f"Error: {response.status_code}")
   ```
   </TabItem>

   <TabItem value="node" label="Node.js">

   ```js
   const axios = require('axios');

   const url = 'https://sipcm.agora.io/v1/api/pstn';

   const headers = {
       'Content-Type': 'application/json',
       'Authorization': '[Your-Authorization-Header]'
   };

   const data = {
       action: 'cancelcall',
       appId: '[Your-Agora-App-ID]',
       sip: 'sip:pstn_783410988998@2.4.6.7:5080',
       did: '17377583411',
       pin: '445566'
   };

   axios.post(url, data, { headers })
       .then(response => {
           if (response.data.success) {
               console.log('Call setup canceled successfully');
           } else {
               console.log('Failed to cancel call setup');
           }
       })
       .catch(error => {
           if (error.response && error.response.status === 404) {
               console.log('Call setup not found or already completed');
           } else {
               console.error('Error:', error.message);
           }
       });
   ```
   </TabItem>
 </Tabs>

</Section>

<Section title="Response example">

```json
{  
 "success": true
}
```

</Section>
</RightColumn>
</RestAPILayout>