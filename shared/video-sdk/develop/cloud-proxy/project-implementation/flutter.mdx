<PlatformWrapper platform="flutter">

1.  **Enable the connection to <Vg k="CP"/>**

    To access <Vg k="AGORA_BACKEND" /> in a restricted network environment, call `setCloudProxy` and set the force UDP transmission mode. To implement this logic, in `setupVideoSDKEngine`, add the following code after calling `agoraEngine.initialize`:

    ``` dart
    // Start cloud proxy service in forced UDP mode.
    await agoraEngine.setCloudProxy(CloudProxyType.udpProxy);
    ```

1.  **Setup the cloud proxy callback**

    The <Vg k="VSDK" /> triggers `onConnectionStateChanged` callback to indicate the successful initiation of cloud proxy service. To set up this callback, in `setupVideoSDKEngine`, add the following code after `RtcEngineEventHandler(`:

    ``` dart
    onConnectionStateChanged: (RtcConnection connection, ConnectionStateType state,
        ConnectionChangedReasonType reason) {
        if (reason == ConnectionChangedReasonType.connectionChangedSettingProxyServer){
            showMessage("Proxy settings changed");
        }
    },
    ```
</PlatformWrapper>