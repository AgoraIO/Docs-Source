@startuml 
!include agora_skin.iuml

actor "User" as USR

box "Your app"
participant "Video SDK" as APP
end box

box "Agora"
participant "SD-RTN" as API
end box

USR -> APP: Start speech-to-text

group Acquire a token
APP -> API: HTTP POST request a builderToken
APP <- API: Receive a builderToken in response
end

group Start a task
APP -> APP:     Create JSON configuration for speech-to-text
APP -> API: HTTP POST to start task. \nContains the builderToken and JSON configuration
APP <- API: Receive task status and Id
APP <- API: Receive the speech-to-text data stream in a callback
APP -> APP: Display the text
end

group Query task status
APP -> API: HTTP GET to query task status\n Contains the taskId
APP <- API: Receive the current status
end

USR -> APP: Stop speech to text
group Stop the task
APP -> API: HTTP DELETE to stp the task \ncontains the taskId
APP <- API: Receive a response confirming success
end

@enduml
