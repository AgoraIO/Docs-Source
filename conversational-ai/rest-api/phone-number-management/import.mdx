---
title: 'Import number'
sidebar_position: 2
type: docs
platform_selector: false
description: >
  Import a pre-configured phone number to use for inbound or outbound calls.
---


import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';


<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="POST"
    endpoint="https://api.agora.io/api/conversational-ai-agent/v2/phone-numbers"
  >

Use this endpoint to import a pre-configured phone number that can be used for inbound or outbound calls.

## Request

### Request body

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="Request Body" required={true}>
  <Parameter name="provider" type="string" required={true} possibleValues="byo, twilio">
    Number provider:
    * `byo`: BYO (Bring Your Own)
    * `twilio`: Twilio
  </Parameter>
  
  <Parameter name="phone_number" type="string" required={true}>
    Telephone number in E.164 format.
  </Parameter>
  
  <Parameter name="label" type="string" required={true}>
    A label used to identify the number.
  </Parameter>
  
  <Parameter name="inbound" type="boolean" defaultValue="true" required={false}>
    Whether the number supports inbound calls.
  </Parameter>
  
  <Parameter name="outbound" type="boolean" defaultValue="true" required={false}>
    Whether the number supports outbound calls.
  </Parameter>
  
  <Parameter name="inbound_config" type="object" required={true}>
    SIP inbound call configuration.
    
    <Parameter name="allowed_addresses" type="array" required={false}>
      List of allowed IP addresses. For example: `112.126.15.64/27`
    </Parameter>
  </Parameter>
  
  <Parameter name="outbound_config" type="object" required={true}>
    SIP outbound call configuration.
    
    <Parameter name="address" type="string" required={false}>
      SIP address. For example: `xxx:xxx@sip.example.com`
    </Parameter>
    
    <Parameter name="transport" type="string" required={false}>
      Transport protocol. For example: `tls`
    </Parameter>
  
    <Parameter name="prefix" type="string" required={false}>
      Number prefix. For example: `6036`
    </Parameter>
  </Parameter>
</ParameterList>

## Response

- If the returned status code is `201`, the request was successful.  The response body contains the result of the request.

  <ParameterList title="Response Body">
    <Parameter name="phone_number" type="string">
      A telephone number in E.164 format, used as a unique identifier.
    </Parameter>
    
    <Parameter name="label" type="string">
      A label used to identify the number.
    </Parameter>
    
    <Parameter name="provider" type="string">
      Number provider.
    </Parameter>
    
    <Parameter name="inbound" type="boolean">
      Whether the number supports inbound calls.
    </Parameter>
    
    <Parameter name="outbound" type="boolean">
      Whether the number supports outbound calls.
    </Parameter>
    
    <Parameter name="associated_pipeline" type="object">
      The associated pipeline information. Returns `null` if no pipeline is associated.
      
      <Parameter name="pipeline_id" type="string">
        Pipeline ID.
      </Parameter>
      
      <Parameter name="pipeline_name" type="string">
        Pipeline name.
      </Parameter>
    </Parameter>
  </ParameterList>

- If the returned status code is not `201`, the request failed. The response body includes the error code and description. Refer to [status codes](/conversational-ai/rest-api/reference#response-status-codes) to understand the possible reasons for failure.
   
  <ParameterList title="Error Response">
    <Parameter name="detail" type="string">
      The type of error that occurred.
    </Parameter>

    <Parameter name="reason" type="string">
      The reason for the error.
    </Parameter>
  </ParameterList>

  **Common error codes:**
  - `400` `invalid_phone_format`:  Invalid phone number format (not in E.164 format).
  - `401` `unauthorized`: Authentication failed, please check your credentials.
  - `409` `phone_number_exists`: Phone number already exists, duplicate import not allowed.
  - `422` `unprocessable_content`: Request format error or parameter validation failed.
  - `500` `internal_server_error`: Internal server error. 

</LeftColumn>

<RightColumn>

<Section title="Authorization">
This endpoint requires [Basic Auth](/conversational-ai/rest-api/restful-authentication).
</Section>

<Section title="Request example">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
    ```bash
    curl --request POST \
      --url https://api.agora.io/api/conversational-ai-agent/v2/phone-numbers \
      --header 'Authorization: Basic <credentials>' \
      --header 'Content-Type: application/json' \
      --data '
    {
      "provider": "byo",
      "phone_number": "+19876543210",
      "label": "Sales Hotline",
      "inbound": true,
      "outbound": true,
      "inbound_config": {
        "allowed_addresses": [
          "112.126.15.64/27"
        ]
      },
      "outbound_config": {
        "address": "xxx:xxx@sip.example.com",
        "transport": "tls"
      }
    }'  
    ```
    </TabItem>
    <TabItem value="python" label="Python">

    ```python
    import requests

    url = "https://api.agora.io/api/conversational-ai-agent/v2/phone-numbers"

    payload = {
        "provider": "byo",
        "phone_number": "+19876543210",
        "label": "Sales Hotline",
        "inbound": True,
        "outbound": True,
        "inbound_config": { "allowed_addresses": ["112.126.15.64/27"] },
        "outbound_config": {
            "address": "xxx:xxx@sip.example.com",
            "transport": "tls"
        }
    }
  
    headers = {
      "Authorization": "Basic <credentials>",
      "Content-Type": "application/json"
    }

    response = requests.post(url, json=payload, headers=headers)

    print(response.text) 
    ```
    </TabItem>

    <TabItem value="node" label="Node.js">

    ```js
    const url = 'https://api.agora.io/api/conversational-ai-agent/v2/phone-numbers';
    const options = {
      method: 'POST',
      headers: {
        Authorization: 'Basic <credentials>',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        provider: 'byo',
        phone_number: '+19876543210',
        label: 'Sales Hotline',
        inbound: true,
        outbound: true,
        inbound_config: {allowed_addresses: ['112.126.15.64/27']},
        outbound_config: {address: 'xxx:xxx@sip.example.com', transport: 'tls'}
      })
    };

    fetch(url, options)
      .then(res => res.json())
      .then(json => console.log(json))
      .catch(err => console.error(err));  
    ```
    </TabItem>
  </Tabs>

</Section>

<Section title="Response example">

<Tabs>
<TabItem value="201" label="201">

Not bound to pipeline

  ```json
  {
    "phone_number": "+11234567890",
    "label": "Customer Support Line",
    "provider": "byo",
    "inbound": true,
    "outbound": true,
    "associated_pipeline": null
  }
  ```

Bound to pipeline

  ```json
  {
    "phone_number": "+11234567890",
    "label": "Customer Support Line",
    "provider": "byo",
    "inbound": true,
    "outbound": true,
    "associated_pipeline": {
      "pipeline_id": "agent_0987654321fedcba",
      "pipeline_name": "Support Bot"
    }
  }
  ```
</TabItem>

<TabItem value="Non-200" label="Non-200">
  ```json
  {
    "detail": "Invalid phone number format (not E.164 format).",
    "reason": "invalid_phone_format"
  }
  ```
</TabItem>
</Tabs>

</Section>

</RightColumn>
</RestAPILayout>