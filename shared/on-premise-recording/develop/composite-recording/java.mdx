<PlatformWrapper platform="linux-java">

1. To initialize the recorder, set the `enableMix` parameter to `true` when initializing the recorder to enable composite recording.

2. To subscribe to audio and video streams, use `subscribeAllAudio()` and `subscribeAllVideo()` to capture all streams.

3. To join the channel, use `joinChannel()` with the appropriate token, channel name, and user ID.

4. After joining the channel:

   * Call `setRecorderConfig()` to set video resolution, frame rate, duration, and output path.
   * Call `enableAndUpdateVideoWatermarks()` to add video watermarks.
   * Call `setVideoMixingLayout()` to configure how multiple video streams appear in the output.

5. Start and stop recording with:

   * Use `startRecording()` to begin recording.
   * Use `stopRecording()` to end the session.

To implement these steps, add the following code in your app:

```java
// Initialize the recorder with enableMix set to true
agoraMediaRtcRecorder.initialize(agoraService, true);

// Subscribe to all audio and video streams
agoraMediaRtcRecorder.subscribeAllAudio();
VideoSubscriptionOptions options = new VideoSubscriptionOptions();
options.setEncodedFrameOnly(false);
options.setType(Constants.VideoStreamType.VIDEO_STREAM_HIGH);
agoraMediaRtcRecorder.subscribeAllVideo(options);

// Join the channel
agoraMediaRtcRecorder.joinChannel(
    recorderConfig.getToken(),
    recorderConfig.getChannelName(),
    recorderConfig.getUserId()
);

// Configure the recorder
agoraMediaRtcRecorder.setRecorderConfig(recorderConfig);
agoraMediaRtcRecorder.enableAndUpdateVideoWatermarks(watermarks);
agoraMediaRtcRecorder.setVideoMixingLayout(layout);

// Start recording
agoraMediaRtcRecorder.startRecording();

// ...

// Stop recording
agoraMediaRtcRecorder.stopRecording();
```

</PlatformWrapper>