import ProjectImplement from '@docs/shared/video-sdk/enhance-call-quality/pre-call-tests/project-implementation/index.mdx';
import Reference from '@docs/shared/video-sdk/enhance-call-quality/pre-call-tests/reference/index.mdx';
import NotAvailable from '@docs/shared/common/not-available.mdx'

In video calling scenarios that demand high communication quality, pre-call detection helps identify and troubleshoot issues beforehand, ensuring seamless real-time interaction.

<PlatformWrapper notAllowed="react-js">

This page shows you how to use <Vg k="VSDK"/> to run pre-call tests to identify and troubleshoot communication quality issues in your <Vpl k="CLIENT" />.

## Understand the tech

Pre-call testing typically covers two aspects: 

<PlatformWrapper notAllowed="web">

- **Equipment quality test**

    To test whether the local microphone, speaker, and camera are working properly, you run an echo test. The basic process of conducting an echo test is as follows:

    ![Echo Test](/images/video-sdk/pre-call-echo-test.svg)

- **Network quality analysis**

    The quality of the last mile network affects the smoothness and clarity of the audio and video that the user sends and receives. Last mile refers to the last leg of communication network between the edge server of the SD-RTN and the end-user devices. Network quality analysis enables you to get feedback on the available bandwidth, packet loss rate, network jitter, and round-trip delay of the upstream and downstream last-mile networks. The following figure shows the basic process of running a last-mile probe test.

    ![Last Mile Test](/images/video-sdk/pre-call-last-mile-test.svg)

</PlatformWrapper>

<PlatformWrapper platform="web">
- **Equipment quality test**

    Device quality testing involves testing whether the local microphone, speaker, and camera are working properly.

- **Network quality analysis**

    The quality of the last mile network affects the smoothness and clarity of the audio and video that the user sends and receives. Last mile refers to the last leg of communication network between the edge server of the SD-RTN and the end-user devices. Network quality analysis enables you to get feedback on the available bandwidth, packet loss rate, network jitter, and round-trip delay of the upstream and downstream last-mile networks. It enables you to examine if current network conditions are good enough to meet the requirements of the currently selected audio bitrate or the target video bitrate.
    
</PlatformWrapper>

<Admonition type="info" title="information">
Best practice is to run the device test first and then perform a network test.
</Admonition>

## Prerequisites
Ensure that you have implemented the [SDK quickstart](../get-started/get-started-sdk) project.

## Implement pre-call testing
This section shows you how to implement pre-call testing in your project.

<ProjectImplement/>

## Reference

This section contains content that completes the information on this page, or points you to documentation that explains other aspects to this product.

### Troubleshooting device and network issues

If you encounter problems while running pre-call tests, first ensure that you have implemented the API calls properly. To troubleshoot device and network issues, refer to the following table:

| Problem | Solution |
|:---|:---------------|
| Can't hear sound when testing audio devices. | <ul><li>Check that the recording device and the playback device are working properly, and are not occupied by other programs.</li><li>Check that the network connection is normal.</li></ul> |
| Cannot see the screen when testing video devices. | <ul><li>Check that the video device is working properly and not occupied by other programs.</li><li>Check whether the network connection is normal.</li></ul>  |
| Poor uplink network quality detected (packet loss > 5%; network jitter > 100ms) | <ul><li>Check that the local network is working properly.</li><li>Ensure that the bitrate of the published audio and video streams does not exceed the available uplink bandwidth by reducing the resolution or lowering the frame rate.</li></ul> |
| Poor downlink network quality detected (packet loss > 5%; network jitter > 100ms) | <ul><li>Check that the local network is working properly.</li><li>Ensure that the total bandwidth of the local subscription does not exceed the available downstream bandwidth by:<ul><li>Reducing the number of subscribed audio and video streams on the receiving end or reducing the bitrate of published audio and video streams on the sending end.</li><li>Enabling dual-stream mode on the sending side and requesting to receive small streams on the receiving side to reduce bandwidth consumption.</li><li>Enabling the video stream fallback function or the multiple streams by priority fallback function at the receiving end.</li></ul></li></ul> |

<Reference/>

</PlatformWrapper>
<PlatformWrapper platform="react-js">
<NotAvailable/>
</PlatformWrapper>
