import Authorization from '@docs/shared/common/channel-management-api/authorization.mdx';
import CodeBlock from '@theme/CodeBlock';
import MultiCodeBlock, { CodeGroup, CodeItem } from '@app/mdx-components/MultiCodeBlock';
import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="PUT"
    endpoint="https://api.agora.io/dev/v1/kicking-rule"
  >
This method updates the expiration time of a specified banning rule.

### Request

**Request header**

<Authorization/>

<ParameterList title="BODY" required={true}>
  <Parameter name="appid" type="string" required={true}>
      The App ID of the project. You can get it through one of the following methods:
    <ul>
      <li>Copy from the <Link to="{{Global.AGORA_CONSOLE_URL}}"><Vg k="CONSOLE" /></Link></li>
      <li> Call the [Get all projects](../../agora-console-rest-api#get-all-projects) API, and read the value of the `vendor_key` field in the response body.</li>
    </ul>
  </Parameter>
  <Parameter name="id" type="number" required={true}>
    The ID of the rule that you want to update.
  </Parameter>
  <Parameter name="time" type="number" required={true}>
    The time duration (in minutes) to ban the user. The value range is [1,1440].
    
    **Note**:
    <ul>
      <li>If the set value is between `0` and `1`, Agora automatically sets the value to `1`.</li>
      <li>If the set value is greater than `1440`, Agora automatically sets the value to `1440`.</li>
      <li>If the set value is `0`, the banning rule does not take effect. The server sets all users that conform to the rule offline, and users can log in again to rejoin the channel.</li>
      <li>Use either `time` or `time_in_seconds`. If you set both parameters, the `time_in_seconds` parameter takes effect; if you set neither of these parameters, the Agora server automatically sets the banning time duration to 60 minutes, that is, 3600 seconds.</li>
    </ul>  
  </Parameter>
</ParameterList>
### Response

If the status code is `200`, the request succeeds, and the response body includes the following parameters:

<ParameterList title="OK">
  <Parameter name="status" type="string" required={true}>
    The status of this request. `success` means the request succeeds.
  </Parameter>
  <Parameter name="result" type="object" required={true}>
    The result of the update:
    <ul>
      <li>`id`: String. The rule ID.</li>
      <li>`ts`: String. The UTC time when the rule expires.</li>
    </ul>
  </Parameter>
</ParameterList>

If the status code is not `200`, the request fails. See the `message` field in the response body for the reason for this failure. For details about possible response status codes, see [Response status codes](../../response-status-code).

</LeftColumn>
<RightColumn>

<Section title="Authorization">
The endpoint requires [RESTful authentication](/video-calling/channel-management-api/restful-authentication).
</Section>
<Section title="Request example">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
    ```bash
    curl --request PUT \\
      --url http://api.sd-rtn.com/dev/v1/kicking-rule \\
      --header 'Accept: application/json' \\
      --header 'Authorization: ' \\
      --header 'Content-Type: application/json' \\
      --data '{
      "appid": "4855xxxxxxxxxxxxxxxxxxxxxxxxeae2",
      "id": 1953,
      "time": 60
    }'
    ```
    </TabItem>
    <TabItem value="python" label="Python" default>
    ```python
    import http.client

    conn = http.client.HTTPConnection("api.sd-rtn.com")

    payload = "{
      "appid": "4855xxxxxxxxxxxxxxxxxxxxxxxxeae2",
      "id": 1953,
      "time": 60
    }"

    headers = {
        'Authorization': "",
        'Content-Type': "application/json",
        'Accept': "application/json"
    }

    conn.request("PUT", "/dev/v1/kicking-rule", payload, headers)

    res = conn.getresponse()
    data = res.read()

    print(data.decode("utf-8"))
    ```
    </TabItem>
    <TabItem value="node" label="Node.js" default>
    ```js
    const url = 'http://api.sd-rtn.com/dev/v1/kicking-rule';
    const options = {
      method: 'PUT',
      headers: {
        Authorization: '',
        'Content-Type': 'application/json',
        Accept: 'application/json'
      },
      body: '{"appid":"4855xxxxxxxxxxxxxxxxxxxxxxxxeae2","id":1953,"time":60}'
    };

    try {
      const response = await fetch(url, options);
      const data = await response.json();
      console.log(data);
    } catch (error) {
      console.error(error);
    }
    ```
    </TabItem>
  </Tabs>

</Section>
<Section title="Response example">
<CodeBlock language="json" showLineNumbers>
  {`{
  "status": "success",
  "result": {
    "id": 1953,
    "ts": "2018-01-09T08:45:54.545Z"
  }
}`}
</CodeBlock>
</Section>
</RightColumn>
</RestAPILayout>
