## Implement token authentication

1.  Generate the token for your app.

2.  Enter the Signaling token and the Signaling user ID into the `x-agora-token` and `x-agora-uid` fields of the HTTP request header, respectively.

### Sample code

The following sample codes implement token authentication and send a request with the Signaling API to get Signaling user events.

-   Java

    ``` java
    import java.io.IOException;
    import java.net.URI;
    import java.net.http.HttpClient;
    import java.net.http.HttpRequest;
    import java.net.http.HttpResponse;
    import java.util.Base64;


    // Token authentication example in Java using the Signaling user events RESTful API
    public class Base64Encoding {

        public static void main(String[] args) throws IOException, InterruptedException {

            // Signaling Token
            String token = "Your Signaling token";
            // User ID used to generate the Signaling token
            String uid = "test_user";

            HttpClient client = HttpClient.newHttpClient();


            // Create request object
            HttpRequest request = HttpRequest.newBuilder()
                    .uri(URI.create("https://api.agora.io/dev/v2/project/<Your App ID>/rtm/vendor/user_events"))
                    .GET()
                    // Add the x-agora-token field to the header
                    .header("x-agora-token", token )
                    // Add the x-agora-uid field to the header
                    .header("x-agora-uid", uid)
                    .header("Content-Type", "application/json")
                    .build();
            // Send request
            HttpResponse<String> response = client.send(request,
                    HttpResponse.BodyHandlers.ofString());

            System.out.println(response.body());
        }
    }
    ```

-   Golang

    ``` go
    package main


    import (
      "fmt"
      "strings"
      "net/http"
      "io/ioutil"
    )

    // Token authentication example in Golang using the Signaling user events RESTful API
    func main() {

      // Signaling Token
      token := "Your Signaling Token"
      // User ID used to generate the Signaling token
      uid := "test_user"


      url := "https://api.agora.io/dev/v2/project/<Your App ID>/rtm/vendor/user_events"
      method := "GET"

      payload := strings.NewReader(``)

      client := &http.Client {
      }
      req, err := http.NewRequest(method, url, payload)

      if err != nil {
        fmt.Println(err)
        return
      }
      // Add the x-agora-token field to the header
      req.Header.Add("x-agora-token", token)
      // Add the x-agora-uid field to the header
      req.Header.Add("x-agora-uid", uid)
      req.Header.Add("Content-Type", "application/json")

      // Send request
      res, err := client.Do(req)
      if err != nil {
        fmt.Println(err)
        return
      }
      defer res.Body.Close()

      body, err := ioutil.ReadAll(res.Body)
      if err != nil {
        fmt.Println(err)
        return
      }
      fmt.Println(string(body))
    }
    ```

-   PHP

    ``` php
    <?php
    // Token authentication example in PHP using the Signaling user events RESTful API

    // Signaling Token
    $token = "Your Signaling Token";
    // User ID used to generate the Signaling token
    $uid = "test_user";
    // Add the x-agora-token field to the header
    $token_header = "x-agora-token: " . $token;
    // Add the x-agora-uid field to the header
    $uid_header = "x-agora-uid: " . $uid;

    $curl = curl_init();
    // Send request
    curl_setopt_array($curl, array(
      CURLOPT_URL => 'https://api.agora.io/dev/v2/project/<Your App ID>/rtm/vendor/user_events',
      CURLOPT_RETURNTRANSFER => true,
      CURLOPT_ENCODING => '',
      CURLOPT_MAXREDIRS => 10,
      CURLOPT_TIMEOUT => 0,
      CURLOPT_FOLLOWLOCATION => true,
      CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
      CURLOPT_CUSTOMREQUEST => 'GET',

      CURLOPT_HTTPHEADER => array(
        $token_header,
        $uid_header,
        'Content-Type: application/json'
      ),
    ));

    $response = curl_exec($curl);

    if($response === false) {
        echo "Error in cURL : " . curl_error($curl);
    }

    curl_close($curl);

    echo $response;
    ```

-   C#

    ```csharp
    using System;
    using System.IO;
    using System.Net;
    using System.Text;
    // Token authentication example in C# using the Signaling user events RESTful API
    namespace Examples.System.Net
    {
        public class WebRequestPostExample
        {
            public static void Main()
            {

                // Signaling Token
                string token = "Your Signaling Token";
                // User ID used to generate the Signaling token
                string uid = "userA";
                // Add the x-agora-token field to the header
                string tokenHeader = "x-agora-token: " + token;
                // Add the x-agora-uid field to the header
                string uidHeader = "x-agora-uid: " + uid;

                WebRequest request = WebRequest.Create("https://api.agora.io/dev/v2/project/<Your App ID>/rtm/vendor/user_events");
                request.Method = "GET";

                // Add header to the request
                request.Headers.Add(tokenHeader);
                request.Headers.Add(uidHeader);

                request.ContentType = "application/json";

                // Get response
                WebResponse response = request.GetResponse();
                Console.WriteLine(((HttpWebResponse)response).StatusDescription);


                using (Stream dataStream = response.GetResponseStream())
                {
                    StreamReader reader = new StreamReader(dataStream);
                    string responseFromServer = reader.ReadToEnd();
                    Console.WriteLine(responseFromServer);
                }

                response.Close();
            }
        }
    }
    ```

-   node.js

    ``` javascript
    // Token authentication example in node.js using the Signaling user events RESTful API
    const https = require('https')


    // Signaling Token
    token = "Your Signaling Token"
    // User ID used to generate the Signaling token
    uid = "test_user"

    // Set request parameters
    const options = {
      hostname: 'api.agora.io',
      port: 443,
      path: '/dev/v2/project/<Your App ID>/rtm/vendor/user_events',
      method: 'GET',
      headers: {
        // Add the x-agora-token field to the header
        'x-agora-token':token,
        // Add the x-agora-uid field to the header
        'x-agora-uid': uid,
        'Content-Type': 'application/json'
      }
    }

    const req = https.request(options, res => {
      console.log(`Status code: ${res.statusCode}`)
      res.on('data', d => {
        process.stdout.write(d)
      })
    })

    req.on('error', error => {
      console.error(error)
    })

    req.end()
    ```

-   Python

    ``` python
    import http.client
    # Token authentication example in Python using the Signaling user events RESTful API

    # Create connection object with base URL
    conn = http.client.HTTPSConnection("api.agora.io")
    # Create header
    headers = {}
    # Add the x-agora-token field to the header
    headers['x-agora-token'] = "Your Signaling Token"
    # Add the x-agora-uid field to the header, which is the user ID used to generate the Signaling token
    headers['x-agora-uid'] = "test_user"
    headers['Content-Type'] = 'application/json'
    payload = ""
    # Send request
    conn.request("GET", "/dev/v2/project/<Your App ID>/rtm/vendor/user_events", payload, headers)

    res = conn.getresponse()
    data = res.read()
    print(data.decode("utf-8"))
    ```
