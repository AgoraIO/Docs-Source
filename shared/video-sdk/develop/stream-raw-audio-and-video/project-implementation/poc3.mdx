import ImportLibrary from '@docs/assets/code/video-sdk/raw-video-audio/import-library.mdx';
import SetVariables from '@docs/assets/code/video-sdk/raw-video-audio/set-variables.mdx';
import RegVideoAudioFrameObservers from '@docs/assets/code/video-sdk/raw-video-audio/register-video-audio-frame-observers.mdx';
import UnregVideoAudioFrameObservers from '@docs/assets/code/video-sdk/raw-video-audio/unregister-video-audio-frame-observers.mdx';

<PlatformWrapper platform="">

1.  **Add the required imports**

    <ImportLibrary />

1.  **Add the required variables**

    <SetVariables />

1.  **Setup the audio frame observer**

<PlatformWrapper platform="ios">
    `AgoraAudioFrameDelegate` gives you access to each audio frame after it is captured or before it is played back.

    Have a look at [`ModifyAudioFrameDelegate`](https://github.com/AgoraIO/video-sdk-samples-ios/blob/main/stream-raw-audio-and-video/ModifyAudioFrameDelegate.swift) for details on how to use `AgoraAudioFrameDelegate` to set up an audio frame observer.
</PlatformWrapper>

1.  **Setup the video frame observer**

<PlatformWrapper platform="ios">
    The `AgoraVideoFrameDelegate` gives you access to each local video frame after it is captured, and to each remote video frame before it is played back. To capture and process the video frames, implement the `onCaptureVideoFrame`, `onScreenCaptureVideoFrame`, and `onRenderVideoFrame` callbacks.

    Have a look at [`ModifyVideoFrameDelegate`](https://github.com/AgoraIO/video-sdk-samples-ios/blob/main/stream-raw-audio-and-video/ModifyVideoFrameDelegate.swift) for details on how to set up a video frame observer using `AgoraVideoFrameDelegate`.
</PlatformWrapper>

1.  **Register the video and audio frame observers**

<PlatformWrapper platform="ios">
    To receive the callbacks that you declared in `AgoraVideoFrameDelegate` and `AgoraAudioFrameDelegate`, you must register the video and audio frame observers with the Agora Engine, before joining a channel. To specify the format of the audio frames captured by each `AgoraAudioFrameDelegate` callback, use the `setRecordingAudioFrameParametersWithSampleRate`, `setPlaybackAudioFrameParametersWithSampleRate` and `setMixedAudioFrameParametersWithSampleRate` methods.

    To do these, add the following lines to the `init()` method of `AgoraManager`:

    <RegVideoAudioFrameObservers />

</PlatformWrapper>

1.  **Unregister the video and audio observers when you leave a channel**

<PlatformWrapper platform="ios">
    When you leave a channel, unregister the frame observers by running the following lines before calling `agoraEngine.leaveChannel(nil)`:

    <UnregVideoAudioFrameObservers />

</PlatformWrapper>

</PlatformWrapper>