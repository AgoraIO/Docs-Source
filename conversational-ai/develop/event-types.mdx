---
title: Notification event types
sidebar_position: 3
platform_selector: false
description: >
  Conversational AI Engine webhook notification event types.
---

After enabling Agora message notifications, the Agora notification server sends channel event notifications to your server through HTTPS POST requests. The data format is `JSON`, the character encoding is `UTF-8`, and the signature algorithm can be either `HMAC/SHA1` or `HMAC/SHA256`.

This page explains the types of events returned in channel event callbacks and their meanings.

## Request header

The message notification callback header contains the following fields:

| Field | Value|
|:------|:-----|
| `Content-Type` | Application/json |
| `Agora-Signature` | The signature value generated by Agora using the customer key and `HMAC/SHA1` algorithm. Use the customer key and `HMAC/SHA1` algorithm to verify the signature value. See Verify the signature for details. |
| `Agora-Signature-V2` | The signature value generated by Agora using the customer key and `HMAC/SHA256` algorithm. Use the customer key and `HMAC/SHA256` algorithm to verify the signature value. See Verify the signature for details. |

## Request body

The message notification callback request body contains the following fields:

| Field      | Type        | Description |
|:------------|:------------|:-------------|
| `noticeId`  | String     | Notification ID. Identifies an event notification from the Agora server. |
| `productId` | Number     | Business ID. A value of `17` indicates a <Vpd k="NAME" /> notification. |
| `eventType` | Number     | The event type of the notification. See [Event types](#event-types) for details. |
| `notifyMs`  | Number     | The Unix timestamp (ms) when the Agora message server sends the event notification to your server. This value is updated when the notification is retried. |
| `sid`       | String     | The session ID. |
| `payload`   | JSON Object | The specific content of the notification event. `payload` varies depending on the event type. For details, see [Event types](#event-types). |

Following is a sample message notification callback request body:

```json
{
    "sid": "C866467GVJJ54687",
    "noticeId": "2000001428:4330:107",
    "productId": 17,
    "eventType": 101,
    "notifyMs": 1611566412672,
    "payload": {...}
}
```

## Event types

The Agora message notification service notifies the following Conversational AI Engine events:

| `eventType` | Event name  | Event description          |
|:-----------|:------------|:----------------------------|
| [101](#101-agent-joined) | agent joined | The agent joins the channel. |
| [102](#102-agent-left)   | agent left   | The agent leaves the channel. |
| [110](#110-agent-error)  | agent error  | Agent error. |


### 101 agent joined

An `eventType` of `101` indicates that an agent has joined a channel. The `payload` contains the following fields:

| Field    | Data Type | Description                                      |
|:-----------|:-----------|:----------------------------------------------|
| `agent_id`  | String    | Agent ID.                                   |
| `start_ts`  | Number    | Timestamp of when the agent was created.   |
| `channel`   | String    | The name of the channel the agent is in.   |

### 102 agent left

An `eventType` of `102` indicates that an agent has left a channel. The `payload` contains the following fields:

| Field    | Data Type | Description                                      |
|:-----------|:-----------|:----------------------------------------------|
| `agent_id`  | String    | Agent ID.                                   |
| `start_ts`  | Number    | Timestamp of when the agent was created.   |
| `stop_ts`   | Number    | Timestamp when the agent left the channel. |
| `channel`   | String    | The name of the channel the agent was in.   |
| `status`    | String    | Agent status.                              |
| `message`   | String    | The reason why the agent left the channel. |

### 110 agent error

An `eventType` of `110` indicates that an agent has encountered an error. The `payload` contains the following fields:

| Field    | Data Type | Description                                      |
|:-----------|:-----------|:----------------------------------------------|
| `agent_id`  | String    | Agent ID.                                   |
| `start_ts`  | Number    | Timestamp of when the agent was created.   |
| `channel`   | String    | The name of the channel that the agent is in.   |
| `turn_id`   | String    | Subtitle conversation turn. For details, see [Live Subtitle API Reference](../develop/subtitles#api-reference). |
| `errors`    | Array     | The error message. Contains the following fields: <ul><li>`module`: The module where the error occurred.</li><li>`turn_id`: Subtitle dialogue turn.</li><li>`code`: Error code. Refer to the error code document of the vendor corresponding to the error module for detailed information.</li><li>`message`: The error message.</li></ul> |
