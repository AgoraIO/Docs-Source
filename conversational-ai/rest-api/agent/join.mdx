---
title: "Start a conversational AI agent"
sidebar_position: 1
type: docs
platform_selector: false
description: >
  Create and start a Conversational AI agent instance.
---
import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

import Examples from '@docs/shared/conversational-ai/rest-api/join-examples.mdx';

<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="POST"
    endpoint="https://api.agora.io/api/conversational-ai-agent/v2/projects/{appid}/join"
  >

Use this endpoint to create and start a <Vpd k="AGENT" /> instance.

## Request

### Path parameters

<PathParameter name="appid" type="string" required={true}>
  The App ID of the project.
</PathParameter>

### Request body

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="BODY" required={true}>
  <Parameter name="name" type="string" required={true}>
    The unique identifier of the agent. The same identifier cannot be used repeatedly.
  </Parameter>

  <Parameter name="properties" type="object" required={true}>
    Configuration details of the agent.
    <Parameter name="channel" type="string" required={true}>
      The name of the channel to join.
    </Parameter>
    <Parameter name="token" type="string" required={true}>
      The authentication token used by the agent to join the channel.
    </Parameter>
    <Parameter name="agent_rtc_uid" type="string" required={true}>
      The user ID of the agent in the channel. A value of `0` means that a random UID is generated and assigned. Set the `token` accordingly.
    </Parameter>
    <Parameter name="remote_rtc_uids" type="array[string]" required={true}>
      A list of user IDs that the agent subscribes to in the channel. Only subscribed users can interact with the agent.      
      <Admonition type="info"> 
      Currently, only one user ID is supported.
      </Admonition>
    </Parameter> 
    
    <Parameter name="enable_string_uid" type="boolean" defaultValue="false" required={false}>
      Whether to enable String uid:
      <ul>
        <li>`true`: Both agent and subscriber user IDs use strings.</li>
        <li>`false`: Both agent and subscriber user IDs must be integers.</li>
      </ul>
    </Parameter>

    <Parameter name="idle_timeout" type="integer" defaultValue="30" required={false}>
      Sets the timeout after all the users specified in `remote_rtc_uids` are detected to have left the channel. When the timeout value is exceeded, the agent automatically stops and exits the channel. A value of `0` means that the agent does not exit until it is stopped manually.
      
      <Admonition type="tip" title="Agent lifecycle best practice">
        For precise and reliable control over the agent's lifecycle, use the [`leave`](/conversational-ai/rest-api/agent/leave) API to terminate the agent as soon as its task is complete.
      </Admonition>
    </Parameter>

    <Parameter name="geofence" required={false}>
      Regional access restriction configuration. Use this to limit which Agora servers the Conversational AI Engine can access based on geographic regions.
  
      <Parameter name="area" type="string" required={true} possibleValues="GLOBAL, NORTH_AMERICA, EUROPE, ASIA, INDIA, JAPAN">
        The allowed region for server access.
      </Parameter>
      <Parameter name="exclude_area" type="string" required={false} possibleValues="NORTH_AMERICA, EUROPE, ASIA, INDIA, JAPAN">
        The excluded region. Only available when `area` is set to `GLOBAL`.
      </Parameter>
    </Parameter>

    <Parameter name="advanced_features" type="object" required={false}>
      Advanced features configuration.

      <Parameter name="enable_aivad" type="boolean" defaultValue="false" required={false} deprecated={true}>
        Whether to enable the intelligent interruption handling function (AIVAD). This feature is currently available only for English.

        <Admonition type="caution">
        This field is deprecated. Use `turn_detection.config.end_of_speech.mode.semantic` instead.
        </Admonition>
      </Parameter>

      <Parameter name="enable_mllm" type="boolean" defaultValue="false" required={false}>
        Enable Multimodal Large Language Model for voice-to-voice processing. Enabling MLLM automatically disables ASR, LLM, and TTS since the MLLM handles end-to-end voice processing directly. When you set this parameter to true, `enable_aivad` is also disabled. See `turn_detection.type` for turn detection options available with MLLM.
      </Parameter>

      <Parameter name="enable_rtm" type="boolean" defaultValue="false" required={false}>
        Whether to enable the Signaling (RTM) service. When enabled, the agent can combine the capabilities provided by Signaling to implement advanced functions, such as delivering [custom information](/conversational-ai/develop/custom-information).
        <Admonition type="info">
        Before enabling the Signaling service, make sure the token includes both RTC and RTM privileges. When an agent joins an RTM channel, it reuses the token specified in the `token` field. For more information, see ["How can I generate a token with both RTC and Signaling privileges?"](/help/integration-issues/rtc_rtm_token).
        </Admonition>
      </Parameter>

      <Parameter name="enable_sal" type="boolean" defaultValue="false" required={false}>
        Enable Selective Attention Locking (SAL). When enabled, configure the `sal` field to set up speaker recognition or locking modes. See the `sal` parameter for configuration details.
      </Parameter>

      <Parameter name="enable_tools" type="boolean" defaultValue="false" required={false}>
        Enable tool invocation. When enabled, the agent can invoke tools provided by the MCP server to implement advanced functionality.
      </Parameter>
    </Parameter>

    <Parameter name="asr" type="object" required={false}>
      Automatic Speech Recognition (ASR) configuration.

      <Parameter name="language" type="string" defaultValue="en-US" required={false}>
        The BCP-47 language tag identifying the primary language used for agent interaction. If `params` contains a vendor-specific language code, it takes precedence over this setting.
      </Parameter>

      <Parameter name="vendor" type="string" defaultValue="ares" possibleValues="ares,microsoft,deepgram,openai,google,amazon,assemblyai,sarvam" required={false}>
      ASR provider:
      - `ares`: [Adaptive Recognition Engine for Speech](/conversational-ai/models/asr/ares)
      - `microsoft`: [Microsoft Azure](/conversational-ai/models/asr/microsoft)
      - `deepgram`: [Deepgram](/conversational-ai/models/asr/deepgram)
      - `openai`: [OpenAI (Beta)](/conversational-ai/models/asr/openai)
      - `speechmatics`: [Speechmatics](/conversational-ai/models/asr/speechmatics)
      - `assemblyai`: [AssemblyAI (Beta)](/conversational-ai/models/asr/assembly-ai)
      - `amazon`: [Amazon Transcribe (Beta)](/conversational-ai/models/asr/amazon)
      - `google`: [Google (Beta)](/conversational-ai/models/asr/google)
      - `sarvam`: [Sarvam (Beta)](/conversational-ai/models/asr/sarvam)
      
      </Parameter>

      <Parameter name="params" type="object" required={true}>
        The configuration parameters for the ASR vendor. See [ASR Overview](/conversational-ai/models/asr/overview) for details.
      </Parameter>
    </Parameter>
  
    <Parameter name="tts" type="object" required={true}>
      Text-to-speech (TTS) module configuration.

      <Parameter name="vendor" type="string" required={true} possibleValues="microsoft,elevenlabs,minimax,cartesia,openai,humeai,rime,fishaudio,google,amazon,sarvam">
        TTS provider. 
        - `microsoft`: [Microsoft Azure](/conversational-ai/models/tts/microsoft)
        - `elevenlabs`: [ElevenLabs](/conversational-ai/models/tts/elevenlabs)
        - `minimax`: [MiniMax](/conversational-ai/models/tts/minimax)
        - `cartesia` : [Cartesia (Beta)](/conversational-ai/models/tts/cartesia)
        - `openai`: [OpenAI (Beta)](/conversational-ai/models/tts/openai)
        - `humeai`: [Hume AI (Beta)](/conversational-ai/models/tts/humeai)
        - `rime`: [Rime (Beta)](/conversational-ai/models/tts/rime)
        - `fishaudio`: [Fish Audio (Beta)](/conversational-ai/models/tts/fish-audio)
        - `google`: [Google (Beta)](/conversational-ai/models/tts/google)
        - `amazon`: [Amazon Polly (Beta)](/conversational-ai/models/tts/amazon)
        - `sarvam`: [Sarvam (Beta)](/conversational-ai/models/tts/sarvam)

      </Parameter>

      <Parameter name="params" type="object" required={true}>
        The configuration parameters for the TTS vendor. See [TTS Overview](/conversational-ai/models/tts/overview) for details.
      </Parameter>

      <Parameter name="skip_patterns" type="array[integer]" required={false}>
        Controls whether the TTS module skips bracketed content when reading LLM response text. This prevents the agent from vocalizing structural prompt information like tone indicators, action descriptions, and system prompts, creating a more natural and immersive listening experience. Enable this feature by specifying one or more values:
        
        - `1`: Skip content in Chinese parentheses `（）`
        - `2`: Skip content in Chinese square brackets `【】`
        - `3`: Skip content in parentheses `( )`
        - `4`: Skip content in square brackets `[ ]`
        - `5`: Skip content in curly braces `{ }`

        <Admonition type="info">
        - **Nested brackets**: When input text contains nested brackets and multiple bracket types are configured to be skipped, the system processes only the outermost brackets. The system matches from the beginning of the text and skips the first outermost bracket pair that meets the skip rule, including all nested content.
        - **Agent memory**: The agent's short-term memory always contains the complete, unfiltered LLM text, regardless of live captioning settings.
        - **Real-time transcript**: When enabled, transcript excludes filtered content during TTS playback but restores the complete text after each sentence finishes.
        </Admonition>
      </Parameter>
    </Parameter>

    <Parameter name="llm" type="object" required={true}>
      Large language model (LLM) configuration.

      <Parameter name="url" type="string" required={true}>
        The LLM callback address.
      </Parameter>

      <Parameter name="api_key" type="string" defaultValue="" required={false}>
        The LLM verification API key. The default value is an empty string. Ensure that you enable the API key in a production environment.
      </Parameter>

      <Parameter name="system_messages" type="array[object]" required={false}>
        A set of predefined information used as input to the LLM, including prompt words and examples.
      </Parameter>

      <Parameter name="params" type="object" required={false}>
        Additional LLM configuration parameters, such as the `model` used, and the maximum token limit. For details about each supported LLM, refer to [Supported LLMs](/conversational-ai/models/llm/overview#supported-llms).
      </Parameter>

      <Parameter name="max_history" type="integer" defaultValue="32" possibleValues="[1, 1024]" required={false}>
        The number of conversation history messages cached in the LLM. History includes user and agent dialog messages, tool call information, and timestamps. Agent and user messages are recorded separately.
      </Parameter>

      <Parameter name="input_modalities" type="array[string]" defaultValue='["text"]' required={false}>
        LLM input modalities: 
        - `["text"]`: Text only
        - `["text", "image"]`: Text plus image; requires the selected LLM to support visual input
      </Parameter>

      <Parameter name="output_modalities" type="array[string]" defaultValue='["text"]' required={false}>
        LLM output modalities: 
        - `["text"]`: The output text is converted to speech by the TTS module and then published to the RTC channel.
        - `["audio"]`: Voice only. Voice is published directly to the RTC channel.
        - `["text", "audio"]`: Text plus voice. Write your own logic to process the output of LLM as needed.
      </Parameter>

      <Parameter name="greeting_configs" type="object" required={false}>
        Agent greeting broadcast configuration.

        <Parameter name="mode" type="string" defaultValue="single_every" required={false} possibleValues="single_every, single_first">
          Determines when the agent sends greeting messages to users joining the channel.

            - `single_every`: Broadcasts a greeting every time a user joins the channel.
            - `single_first`: Broadcasts a greeting only once to the first user who joins the channel.
        </Parameter>
      </Parameter>

      <Parameter name="greeting_message" type="string" required={false}>
        Agent greeting. If provided, the first user in the channel is automatically greeted with the message upon joining.
      </Parameter>

      <Parameter name="failure_message" type="string" required={false}>
        Prompt for agent activation failure. If provided, it is returned through TTS when the custom LLM call fails.
      </Parameter>

      <Parameter name="vendor" type="string" required={false}>
        LLM provider, supports the following settings:
        - `custom`: Custom LLM. When you set this option, the agent includes the following fields, in addition to `role` and `content` when making requests to the custom LLM:
          - `turn_id`: A unique identifier for each conversation turn. It starts from `0` and increments with each turn. One user-agent interaction corresponds to one `turn_id`.
          - `timestamp`: The request timestamp, in milliseconds.
        - `azure`: Use this value for Azure OpenAI
      </Parameter>

      <Parameter name="style" type="string" defaultValue="openai" possibleValues="openai,gemini,anthropic,dify" required={false}>
        The request style for chat completion:
        - `openai`: For OpenAI and OpenAI-compatible APIs
        - `gemini`: For Google Gemini and Google Vertex API format
        - `anthropic`: For Anthropic Claude API format
        - `dify`: For Dify API format

        For details, refer to [Supported LLMs](/conversational-ai/models/llm/overview#supported-llms).
      </Parameter>

      <Parameter name="template_variables" type="object" required={false}>
        Template parameter configuration used to insert variables into the agent's `system_messages`, `greeting_message`, `failure_message`, and `parameters.silence_config.content` text. Uses key-value pairs, where the key is the variable name and the value is the variable's value. Template variables, combined with prompt customization and SIP outbound calling functionality, enable dynamic content injection, automating processes such as automatic hang-up, voicemail recognition, automatic message leaving, and call transfer.

        To insert defined variables in the prompt text, use the syntax `{{variable_name}}`. The system automatically replaces each variable with the corresponding value defined in `template_variables`.

        <Admonition type="caution">
        Variable values cannot reference other variables. For example, if you define `"farewell": "Looking forward to seeing you again, {{name}}"`, the `{{name}}` variable will not be resolved.
        </Admonition>
      </Parameter>

      <Parameter name="mcp_servers" type="array" required={false} collapse={false}>
        MCP (Model Context Protocol) server configuration. By configuring MCP servers, agents can call tools provided by external services to implement advanced functionality.
        
        <Parameter name="name" type="string" required={true}>
          A unique identifier for the MCP server. Maximum 48 characters. Accepts only English letters and numbers.
        </Parameter>
        
        <Parameter name="endpoint" type="string" required={true}>
          The endpoint address of the MCP server. The agent uses this to communicate with the MCP server.
        </Parameter>
        
        <Parameter name="transport" type="string" required={false} possibleValues="streamable_http">
          Transport protocol type. 
          - `streamable_http`: Streaming HTTP protocol
        </Parameter>
        
        <Parameter name="headers" type="object" required={false}>
          HTTP header information to include when requesting the MCP server, such as authentication information.
        </Parameter>
        
        <Parameter name="allowed_tools" type="array" required={false}>
          A list of tools that the agent is allowed to invoke. The agent can only use tools on this list.
          
          **Behavior:**
          - **Empty or omitted**: All tools are enabled.
          - **Empty array `[]`**: No tools are enabled.
          - **`["*"]`**: All tools are enabled.
          - **Specific tools `["aa", "bb", "cc"]`**: Only `aa`, `bb`, and `cc` are enabled.
          - **Mix with wildcard `["aa", "bb", "*"]`**: All tools are enabled (wildcard takes precedence).
        </Parameter>
        
        <Parameter name="timeout_ms" type="integer" required={false}>
          The MCP server request timeout in milliseconds. After timeout, the agent stops waiting for the MCP server's response and continues executing subsequent logic.
        </Parameter>
      </Parameter>

      <Parameter name="filler_words" type="object" collapse={false} required={false}>
        Filler word configuration. Plays filler words while waiting for LLM responses to reduce user anxiety and improve conversation flow.
        
        Filler word playback follows these rules:
        - **Playback order**: When multiple filler words or LLM responses are waiting to be played, they are played in the order they arrive.
        - **Interruption control**: Inherits the interruption mode setting from global configuration in `turn_detection.config`.
        
        <Parameter name="enable" type="boolean" required={false} defaultValue="false">
          Whether to enable filler words:
          - `true`: Enable filler words.
          - `false`: Disable filler words.
        </Parameter>
        
        <Parameter name="trigger" type="object" required={false}>
          Filler word trigger configuration. Defines when to trigger filler word playback.
          
          <Parameter name="mode" type="string" required={false} possibleValues="fixed_time">
            Filler word trigger mode:
            - `fixed_time`: Fixed time trigger. Triggers filler word playback when LLM response wait time exceeds the threshold.
          </Parameter>
          
          <Parameter name="{mode}_config" type="object" required={false}>
            Filler word trigger configuration parameters. The parameter name and structure vary depending on the trigger mode.
            
            <Admonition type="info">
            - The configuration type must match `mode`. For example, when `mode` is `fixed_time`, you must provide `fixed_time_config`.
            - You cannot provide multiple mode configurations simultaneously.
            </Admonition>
            
            **Configuration example:**           

            ```json
            "fixed_time_config": {
              "response_wait_ms": 1500
            }
            ```
            
            <Parameter name="response_wait_ms" type="integer" defaultValue="1500" possibleValues="[100, 10000]" required={false}>
              LLM response wait threshold in milliseconds. Triggers filler word playback when the LLM waits this duration without generating a response, such as when waiting for RAG retrieval or tool call results.
            </Parameter>
          </Parameter>
        </Parameter>
        
        <Parameter name="content" type="object" required={false}>
          Filler word content configuration. Defines the source and selection rules for filler words.
          
          <Parameter name="mode" type="string" required={false} possibleValues="static">
            Filler word content mode:
            - `static`: Static filler words. Uses a predefined list of filler words.
          </Parameter>
          
          <Parameter name="{mode}_config" type="object" required={false}>
            Filler word content configuration parameters. The parameter name and structure vary depending on the content mode.
            
            <Admonition type="info">
            - The configuration type must match `mode`. For example, when `mode` is `static`, you must provide `static_config`.
            - You cannot provide multiple mode configurations simultaneously.
            </Admonition>
            
            **Static filler word configuration example:**

            ```json
            "static_config": {
              "phrases": [
                "Please wait.",
                "Okay.",
                "Uh-huh."
              ],
              "selection_rule": "shuffle"
            }
            ```
            
            <Parameter name="phrases" type="array[string]" required={false}>
              List of filler word phrases.
              
              **Limits:**
              - Maximum 100 filler words.
              - Each filler word must not exceed 50 English words.
            </Parameter>
            
            <Parameter name="selection_rule" type="string" required={false} possibleValues="shuffle, round_robin">
              Filler word selection rule:
              - `shuffle`: Random shuffle. Already-used filler words are not repeated until all filler words have been used once. After all filler words are played, they are reshuffled randomly and a new round begins.
              - `round_robin`: Round-robin. Selects and plays filler words sequentially from the list. After all filler words are played once, a new cycle begins.
            </Parameter>
          </Parameter>
        </Parameter>
      </Parameter>

    </Parameter>

    <Parameter name="mllm" type="object" required={false}>
      Multimodal Large Language Model (MLLM) configuration for real-time audio and text processing.

      <Parameter name="url" type="string" required={true}>
        The MLLM WebSocket URL for real-time communication.
      </Parameter>

      <Parameter name="api_key" type="string" required={true}>
        The API key used for MLLM authentication.
      </Parameter>

      <Parameter name="messages" type="array[object]" required={false}>
        Array of conversation items used for short-term memory management. Uses the same structure as `item.content` from the <a href="https://platform.openai.com/docs/api-reference/realtime-client-events/conversation/item/create">OpenAI Realtime API</a>.
      </Parameter>

      <Parameter name="params" type="object" required={false}>
        Additional MLLM configuration parameters.
        - **Modalities override**: The `modalities` setting in params is overridden by `input_modalities` and `output_modalities`.
        - **Turn detection override**: The `turn_detection` setting in params is overridden by the `turn_detection` section outside of `mllm`.

        See [MLLM Overview](/conversational-ai/models/mllm/overview) for details.
      </Parameter>

      <Parameter name="input_modalities" type="array[string]" defaultValue='["audio"]' required={false}>
        MLLM input modalities:
        - `["audio"]`: Audio only
        - `["audio", "text"]`: Audio plus text
      </Parameter>

      <Parameter name="output_modalities" type="array[string]" defaultValue='["text", "audio"]' required={false}>
        MLLM output modalities:
        - `["text", "audio"]`: Text plus audio
      </Parameter>

      <Parameter name="greeting_message" type="string" required={false}>
        Agent greeting message. If provided, the first user in the channel is automatically greeted with this message upon joining.
      </Parameter>

      <Parameter name="vendor" type="string" required={false} possibleValues="openai,vertexai">
        MLLM provider. Currently supports:
        - `openai`: [OpenAI Realtime API](/conversational-ai/models/mllm/openai)
        - `vertexai`: Use this for [Google Gemini Live](/conversational-ai/models/mllm/gemini)
      </Parameter>

      <Parameter name="style" type="string" defaultValue="openai" possibleValues="openai" required={false}>
        The request style for MLLM completion:
        - `openai`: For OpenAI Realtime API format 
      </Parameter>
    </Parameter>  

    <Parameter name="avatar" type="object" required={false}>  
      Avatar configuration.

      <Parameter name="enable" type="boolean" defaultValue="false" required={false}>  
        Whether to enable the avatar function for the agent. To enable, set to `true` and configure the `vendor` and `params` fields.
      </Parameter> 

      <Parameter name="vendor" type="string" possibleValues="akool,heygen" required={false}>  
        Avatar vendor. Supports the following values:  
        - `akool`: [Akool (Beta)](/conversational-ai/models/avatar/akool)
        - `heygen`: [HeyGen (Beta)](/conversational-ai/models/avatar/heygen)
      </Parameter> 

      <Parameter name="params" type="object" required={false}>  
        The configuration parameters for the avatar vendor. See [AI Avatar Overview](/conversational-ai/models/avatar/overview) for details.
      </Parameter> 
    </Parameter>  

    <Parameter name="turn_detection" type="object" required={false} collapse={false}>
      Conversation turn detection settings. Controls the logic for voice activity detection and conversation turn determination. The previous version of `turn_detection` is deprecated. Refer to [Deprecated parameters](#deprecated-parameters) for details. Agora recommends switching to the latest parameters.

      This configuration supports multiple combinations of detection modes:
      - **Start of Speech (SoS)**: Supports three modes: VAD, Keyword, and Disable.
      - **End of Speech (EoS)**: Supports VAD and Semantic modes.

      <Parameter name="mode" type="string" defaultValue="default" possibleValues="default" required={false}>
        Conversation turn detection mode:
        - `default`: Uses standard conversation turn detection configuration.
      </Parameter>

      <Parameter name="config" type="object" required={false}>
        Detailed configuration for conversation turn detection.
        
        <Parameter name="speech_threshold" type="number" defaultValue="0.5" possibleValues="(0.0, 1.0)" required={false}>
          Voice activity detection sensitivity. Determines the sound level in the audio signal that is considered voice activity. Lower values make it easier for the agent to detect speech, and higher values ignore weak sounds.
        </Parameter>
        
        <Parameter name="start_of_speech" type="object" required={false}>
          Start of Speech (SoS) detection configuration. Determines when a user begins speaking.
          
          <Parameter name="mode" type="string" required={true} possibleValues="vad, keywords, disabled">
            Start of speech detection mode:
            - `vad`: Based on VAD (Voice Activity Detection). Uses audio signal detection.
            - `keywords`: (Beta) Based on keyword trigger. Conversation begins when the agent detects a specified keyword.
            - `disabled`: Disables start of speech detection. Does not actively trigger new conversation turns.
          </Parameter>
          
          <Parameter name="{mode}_config" type="object" required={false}>
            Start of speech detection configuration parameters. The structure and supported fields vary depending on the detection mode.
            
            <Admonition type="info">
            - The configuration type must match `mode`. For example, when `mode` is `vad`, you must provide `vad_config`.
            - You cannot provide multiple mode configurations simultaneously.
            </Admonition>
            
            **Configuration examples:**
            
            - `vad_config`

              ```json
              "vad_config": {
                "interrupt_duration_ms": 160,
                "speaking_interrupt_duration_ms": 160,
                "prefix_padding_ms": 800
              }
              ```

            - `keywords_config`

              ```json
              "keywords_config": {
                "interrupt_duration_ms": 160,
                "prefix_padding_ms": 800,
                "triggered_keywords": ["Are you there", "hello"]
              }       
              ```

            - `disabled_config`

              ```json
              "disabled_config": {
                  "strategy": "append"
              }              
              ```              
            
            <Parameter name="strategy" type="string" required={false} possibleValues="append, ignored">
              Voice processing strategy when the agent is interacting (speaking or thinking):
              - `append`: Append mode. Human voice does not interrupt the agent. The agent processes the human voice input after the current interaction ends.
              - `ignored`: Ignore mode. The agent ignores human voice input. If the agent receives human voice while speaking or thinking, the agent discards the input without storing it in context.
            </Parameter>
          </Parameter>
        </Parameter>
        
        <Parameter name="end_of_speech" type="object" required={false}>
          End of Speech (EoS) detection configuration. Determines when a user ends their speech.
          
          <Parameter name="mode" type="string" required={false} possibleValues="vad, semantic">
            End of speech detection mode. Possible values:
            - `vad`: Based on VAD (Voice Activity Detection). Detects silence duration.
            - `semantic`: Based on semantic triggering. Uses semantic understanding to determine when conversation ends.
          </Parameter>
          
          <Parameter name="{mode}_config" type="object" required={false}>
            End of speech detection configuration parameters. The structure and supported fields vary depending on the detection mode.
            
            <Admonition type="info">
            - The configuration type must match `mode`. For example, when `mode` is `vad`, you must provide `vad_config`.
            - You cannot provide multiple mode configurations simultaneously.
            </Admonition>
            
            **Configuration examples:**

            - `vad_config`

              ```json
              "vad_config": {
                "silence_duration_ms": 640
              }
              ```
            
            - `semantic_config`

              ```json
              "semantic_config": {
                  "silence_duration_ms": 320,
                  "max_wait_ms": 3000
              }
              ```
            
            <Parameter name="silence_duration_ms" type="integer" defaultValue="320" possibleValues="[0, 2000]" required={false}>
              Silence duration threshold in milliseconds. The minimum silence duration at the end of a speech segment,  to ensure that a brief pause does not prematurely end the speech segment.
            </Parameter>
            
            <Parameter name="max_wait_ms" type="integer" defaultValue="3000" possibleValues="[0, 10000]" required={false}>
              Maximum wait time in milliseconds. The maximum time to wait for semantic determination. After timeout, the conversation end is determined based on the current state.
            </Parameter>
          </Parameter>
        </Parameter>
      </Parameter>
    </Parameter>

    <Parameter name="sal" type="object" required={false}>
      Selective Attention Locking (SAL) configuration. **(Beta)**

      <Parameter name="sal_mode" type="string" defaultValue="locking" possibleValues="locking, recognition" required={false}>

        Selective attention lock mode. Supports the following options:

        - `locking`: Speaker Lock Mode. The agent locks onto the speaker, blocking 95% of ambient human voices and noise. You can enable this mode in two ways:

          - Seamless mode: When a user speaks loudly and clearly at the beginning of a conversation, the intelligent agent automatically recognizes the user as the speaker.
          - Personalized mode: When creating an agent, a speaker's voiceprint URL is pre-registered through the `sample_urls` field. The agent then locates the speaker based on the pre-registered voiceprint.

        - `recognition`: Voiceprint recognition mode. You can pre-register only one voiceprint URL using the `sample_urls` field. The agent identifies different speakers and suppresses other background voices and environmental noise. The target speaker is identified through the `vpids` field in the `metadata` field and sent to the LLM. Set `llm.vendor` to "custom" and refer to [Custom LLM](/conversational-ai/develop/custom-llm) for instructions on how to make the LLM process speaker information.
      </Parameter>

      <Parameter name="sample_urls" type="object" required={false}>
        The registered voiceprint URL as a key-value pair, where the key is the voiceprint name and the value is the download URL for the speaker's voiceprint. Only one voiceprint URL is supported.  
        Example:

        ```json
        {
          "speaker1": "https://example.com/speaker1.pcm"
        }
        ```

        <Admonition type="info">
          - Do not set the incoming voiceprint name to "unknown"; this is a reserved keyword used to identify unknown speakers.
          - For a registered voiceprint, ensure that:
            - Size: The voiceprint file does not exceed 2 MB.
            - Duration: Contains 10 to 15 seconds of audio, with at least 8 seconds of effective audio excluding silent segments.
            - Format: 16kHz sampling rate, 16-bit depth, mono PCM audio file. The file name extension must be ".pcm".            
        </Admonition>
      </Parameter>
    </Parameter>

    <Parameter name="labels" type="object" required={false}>
      Custom labels in key-value pair format, where the key is the label name and the value is the label value. Enables agents to carry custom business information.

      These labels are bound to the agent and returned in the `payload` field of all message notification callbacks from the conversational AI engine. Use them to implement custom business logic, such as tagging activity IDs, customer groups, and business scenarios.
    </Parameter>

    <Parameter name="rtc" type="object" required={false}>
      RTC media encryption configuration.
      <Parameter name="encryption_key" type="string" required={false}>
        The encryption key for RTC media content. The key has no length limit. Agora recommends using a 32-byte key. If no encryption key is set or if the key is empty, built-in encryption is not used.
      </Parameter>
      <Parameter name="encryption_salt" type="string" required={false}>
        The salt value used for encryption. This is a Base64-encoded string that is 32 bytes long after decoding. This parameter only takes effect when `encryption_mode` is set to `7` (`AES_128_GCM2`) or `8` (`AES_256_GCM2`). Ensure that the salt parameter is not empty for these encryption modes.
      </Parameter>
      <Parameter name="encryption_mode" type="integer" possibleValues="1,2,3,4,5,6,7,8" required={false}>
        The built-in encryption mode. 
          - `1`: `AES_128_XTS` - 128-bit AES encryption, XTS mode.
          - `2`: `AES_128_ECB` - 128-bit AES encryption, ECB mode.
          - `3`: `AES_256_XTS` - 256-bit AES encryption, XTS mode.
          - `4`: `SM4_128_ECB` - 128-bit SM4 encryption, ECB mode.
          - `5`: `AES_128_GCM` - 128-bit AES encryption, GCM mode.
          - `6`: `AES_256_GCM` - 256-bit AES encryption, GCM mode.
          - `7`: `AES_128_GCM2` - 128-bit AES encryption, GCM mode. Requires setting `encryption_salt`.
          - `8`: `AES_256_GCM2` - 256-bit AES encryption, GCM mode. Requires setting `encryption_salt`.

        Agora recommends using either `7` (`AES_128_GCM2`) or `8` (`AES_256_GCM2`) mode. Both modes support cryptographic salts to enhance security.
      </Parameter>            

    </Parameter>

    <Parameter name="parameters" type="object" required={false}>
      Agent configuration parameters.
      <Parameter name="silence_config" type="object" required={false}>
        Settings related to agent silence behavior.
        <Admonition type="info">
        `silence_config` does not apply when you integrate a `mllm`.
        </Admonition>
        <Parameter name="timeout_ms" type="integer" possibleValues="0 to 60000" defaultValue="0" required={false}>
          Specifies the maximum duration (in milliseconds) that the agent can remain silent. 
          After the agent is successfully created and the user joins the channel, any time during which the agent is not listening, thinking, or speaking is considered silent time. When the silent time reaches the specified value, the agent broadcasts a silent reminder message. This feature is useful for prompting users when they become inactive.
          - `0`: Disables the silent reminder feature.
          - `(0, 60000]`: Enables the silent reminder. You must also set `content`; otherwise, the configuration is invalid.
        </Parameter>
        <Parameter name="action" type="string" defaultValue="speak" required={false}>
          Specifies how the agent behaves when the silent timeout is reached. Valid values:
          - `speak`: Uses the TTS module to announce the silent prompt (`content`).
          - `think`: Appends the silent prompt (`content`) to the context and passes it to the LLM.
        </Parameter>
        <Parameter name="content" type="string" required={false}>
          Specifies the silent prompt message. The message use depends on the value of `action` parameter.
        </Parameter>
      </Parameter>

      <Parameter name="farewell_config" type="object" required={false}>
        Graceful hang-up settings for the agent.
        
        <Parameter name="graceful_enabled" type="boolean" defaultValue="false" required={false}>
          Enable graceful leave:
          * `true`: Enabled. When enabled, calling the POST method to stop the agent ensures that the agent is in an `IDLE` state before leaving the channel.
          * `false`: Disabled.
        </Parameter>
        
        <Parameter name="graceful_timeout_seconds" type="integer" possibleValues="[0, 120]" defaultValue="30" required={false}>
          Graceful exit timeout (in seconds). Represents the maximum time to wait for the agent to enter an `IDLE` state before exiting the channel. After this time, the agent will exit the channel immediately, even if it is not in an idle state. This field is only effective when `graceful_enabled` is `true`.   
        </Parameter>        
      </Parameter>

      <Parameter name="data_channel" type="string" defaultValue="datastream" required={false}>
      Agent data transmission channel:
      - `rtm`: Use RTM transmission. This configuration takes effect only when `advanced_features.enable_rtm` is `true`.
      - `datastream`: Use RTC data stream transport.
      </Parameter>

      <Parameter name="enable_metrics" type="boolean" defaultValue="false" required={false}>
  Whether to receive agent performance data:
      - `true`: Receive agent performance data.
      - `false`: Do not receive agent performance data.
      
      This setting only takes effect when `advanced_features.enable_rtm` is `true`. See [Listen to agent events](/conversational-ai/develop/webhooks) to learn how to use client components to receive agent performance data.
      </Parameter>

      <Parameter name="enable_error_message" type="boolean" defaultValue="false" required={false}>
      Whether to receive agent error events:
      - `true`: Receive agent error events.
      - `false`: (Default) Do not receive agent error events.
      
      This setting only takes effect when `advanced_features.enable_rtm` is `true`. See [Listen to agent events](/conversational-ai/develop/webhooks) to learn how to use client components to receive agent error events.
      </Parameter>      
    </Parameter>    
  </Parameter>
</ParameterList>

## Response

- If the returned status code is `200`, the request was successful. The response body contains the result of the request.

  <ParameterList title="OK">
    <Parameter name="agent_id" type="string">
      Unique id of the agent instance
    </Parameter>
    
    <Parameter name="create_ts" type="integer">
      Timestamp of when the agent was created
    </Parameter>
    
    <Parameter 
      name="status" 
      type="string" 
      possibleValues="IDLE, STARTING, RUNNING, STOPPING, STOPPED, RECOVERING, FAILED"
    >
      Current status.
      <ul>
        <li>`IDLE` (0): Agent is idle.</li>
        <li>`STARTING` (1): The agent is being started.</li>
        <li>`RUNNING` (2): The agent is running.</li>
        <li>`STOPPING` (3): The agent is stopping.</li>
        <li>`STOPPED` (4): The agent has exited.</li>
        <li>`RECOVERING` (5): The agent is recovering.</li>
        <li>`FAILED` (6): The agent failed to execute.</li>
      </ul>
    </Parameter>
  </ParameterList>

- If the returned status code is not `200`, the request failed. The response body includes the `detail` and `reason` for failure. Refer to [status codes](/conversational-ai/rest-api/reference) to understand the possible reasons for failure.


### Reference

#### Deprecated parameters

The following turn detection configuration is deprecated. To create more natural conversations and reduce unintended interruptions, Agora recommends using the latest version of `turn_detection` above.

<ParameterList title="Turn detection">

  <Parameter name="turn_detection" type="object" required={false} collapse={true}>
  
    Conversation turn detection settings. 
    <span id="turn-detection"></span>

    <Parameter name="type" type="string" defaultValue="agora_vad" possibleValues="agora_vad, server_vad,semantic_vad" required={false}>
      Turn detection mechanism.
      - `agora_vad`:  Agora VAD. Compatible with both cascade (ASR/LLM/TTS) and MLLM modes.
      - `server_vad`: The model detects the start and end of speech based on audio volume and responds at the end of user speech. Only available when `mllm` is enabled and OpenAI Realtime or Gemini Live is selected. The detection behavior is controlled by the LLM provider.
      - `semantic_vad`: Uses a turn detection model in conjunction with VAD to semantically estimate whether the user has finished speaking, then dynamically sets a timeout based on this probability for more natural conversations. Only available when `mllm` is enabled and OpenAI is selected.
    </Parameter>

    <Parameter name="interrupt_mode" type="string" deprecated={true} defaultValue="interrupt" required={false}>
      Sets the agent's behavior when human voice interrupts the agent while it is interacting (speaking or thinking). Choose from the following values:

        - `interrupt`: The agent immediately stops the current interaction and processes the human voice input.
        - `append`: The agent completes the current interaction, then processes the human voice input.
        - `ignore`: The agent discards the human voice input without processing or storing it in the context.
        - `keywords`: The agent stops its current interaction after detecting any of the keywords specified in `turn_detection.interrupt_keywords`.
        - `adaptive`: The agent dynamically increases the voice continuity threshold while speaking to reduce accidental interruptions.

        <Admonition type="info">
        - Only the `interrupt` mode is supported when you integrate an `mllm`.
        - `keyword` interruption mode and graceful interruption feature (`advanced_features.enable_aivad`) are mutually exclusive and cannot be enabled simultaneously.
        </Admonition>
    </Parameter>        

    <Parameter name="interrupt_duration_ms" type="number" defaultValue="160" deprecated={true} required={false}>
      The amount of time in milliseconds that the user's voice must exceed the VAD threshold before an interruption is triggered.
    </Parameter>

    <Parameter name="interrupt_keywords" type="array[string]" deprecated={true} required={false}>
        Specifies the list of keywords that trigger an interruption when the `turn_detection.interrupt_mode` is set to `"keyword"`.

        When the agent detects any of these keywords in the user's speech, it immediately stops its current interaction and processes the new input.

        <Admonition type="info">
        - Keyword recognition capabilities, such as support for multiple languages or dialects, depend on the ASR provider you choose.  
        - You can configure up to 128 keywords.
        </Admonition>
    </Parameter>   

    <Parameter name="prefix_padding_ms" type="integer" defaultValue="800" deprecated={true} required={false}>
      The extra forward padding time in milliseconds before the processing system starts to process the speech input. This padding helps capture the beginning of the speech.
    </Parameter>

    <Parameter name="silence_duration_ms" type="integer" defaultValue="640" deprecated={true} required={false}>
      The duration of audio silence in milliseconds. If no voice activity is detected during this period, the agent assumes that the user has stopped speaking.
    </Parameter>

    <Parameter name="threshold" type="number" defaultValue="0.5" possibleValues="(0.0, 1.0)" deprecated={true} required={false}>
      Identification sensitivity determines the level of sound in the audio signal that is considered voice activity. Lower values make it easier for the agent to detect speech, and higher values ignore weak sounds.
    </Parameter>

    <Parameter name="create_response" type="boolean" defaultValue="true" required={false}>
      Whether to automatically generate a response when a VAD stop event occurs. Only available in `server_vad` and `semantic_vad` modes when using OpenAI Realtime API.
    </Parameter>

    <Parameter name="interrupt_response" type="boolean" defaultValue="true" required={false}>
      Whether to automatically interrupt any ongoing response when a VAD start event occurs. Only available in `server_vad` and `semantic_vad` modes when using OpenAI Realtime API.
    </Parameter>

    <Parameter name="eagerness" type="string" defaultValue="auto" possibleValues="auto,low,high" required={false}>
      The eagerness of the model to respond:
      - `auto`: Equivalent to medium
      - `low`: Wait longer for the user to continue speaking
      - `high`: Respond more quickly
      
      Only available in `semantic_vad` mode when using OpenAI Realtime API.
    </Parameter>  
  </Parameter>    
</ParameterList>
</LeftColumn>

<RightColumn>

<Section title="Authorization">
This endpoint requires [Basic Auth](/conversational-ai/rest-api/restful-authentication).
</Section>

<Section title="Request examples">
<Examples />
</Section>

<Section title="Response example">

  ```json
  {
    "agent_id": "1NT29X10YHxxxxxWJOXLYHNYB",
    "create_ts": 1737111452,
    "status": "RUNNING"
  }
  ```

</Section>
</RightColumn>
</RestAPILayout>