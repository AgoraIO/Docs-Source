import CodeBlock from '@theme/CodeBlock';

The following figure illustrates the essential steps:

<ProductWrapper notAllowed="voice-calling">
<PlatformWrapper platform = "ios">
<details>
<summary>Quick start sequence</summary>

![](/images/video-sdk/quick-start-sequence.svg)
</details>
</PlatformWrapper>

<PlatformWrapper platform = "macos">
<details>
<summary>Quick start sequence</summary>

![](/images/video-sdk/quick-start-sequence-macos.svg)
</details>
</PlatformWrapper>
</ProductWrapper>

<ProductWrapper product="voice-calling">
![](/images/video-sdk/quickstart-voice-call-sequence.svg)
</ProductWrapper>

This guide includes [complete sample code](#complete-sample-code) that demonstrates implementing basic real-time interaction. To understand the core API calls in the sample code, review the following implementation steps.

### Import <Vg k="COMPANY"/> components

Add the following import to your swift file:

```swift
import AgoraRtcKit
```

### Initialize the engine

To initialize the SDK, call `sharedEngineWithConfig` to create and initialize an instance of `AgoraRtcEngineKit`:
<ProductWrapper notAllowed="voice-calling">
```swift
var agoraKit: AgoraRtcEngineKit!

// Initialize the Agora engine
func initializeAgoraVideoSDK() {
    agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
}
```
</ProductWrapper>
<ProductWrapper product="voice-calling">
```swift
var agoraKit: AgoraRtcEngineKit!

// Initialize the Agora engine
func initializeAgoraVoiceSDK() {
    agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
}
```
</ProductWrapper>
<Admonition type="caution" title="Note">
Before initializing the SDK, ensure that the user fully understands and agrees to the relevant privacy policy.
</Admonition>

<ProductWrapper notAllowed="voice-calling">

### Enable the video module

Follow the steps below to set up the video module.

1. To enable the video module, call `enableVideo`.
1. To initialize the local view and set the local video display properties, call `setupLocalVideo`.
1. To enable local video preview, call `startPreview`.

```swift
// Configures and starts displaying the local video feed
func setupLocalVideo() {
    // Enable video functionality (audio is enabled by default)
    agoraKit.enableVideo()
    let videoCanvas = AgoraRtcVideoCanvas()
    videoCanvas.view = localView
    videoCanvas.uid = 0  // UID 0 is assigned to the local user
    videoCanvas.renderMode = .hidden
    agoraKit.setupLocalVideo(videoCanvas)
    agoraKit.startPreview()
}
```

### Join a channel and publish media tracks

To join a channel, and set the user role, call `joinChannel`. Fill in the temporary token you obtained from <Vg k="CONSOLE"/>, and the channel name you filled in to generate the token.

<ProductWrapper product="broadcast-streaming">

```swift
// Join the channel with specified options
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    // In a live streaming use-case, set the channel use-case to liveBroadcasting
    options.channelProfile = .liveBroadcasting
    // Set the user role as broadcaster (default is audience)
    options.clientRoleType = .broadcaster
    // Publish audio captured by microphone
    options.publishMicrophoneTrack = true
    // Publish video captured by camera
    options.publishCameraTrack = true
    // Auto subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Auto subscribe to all video streams
    options.autoSubscribeVideo = true
    // Set the audience latency level
    options.audienceLatencyLevel = .lowLatency
    // Use a temporary Token to join the channel
    // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
    // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
    agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
}
```

You can also set the latency level after joining a channel by calling the `setClientRole` method with `role` set to `AgoraClientRole.audience` and `options.lowLatency` set to `true`.

```swift
// Set the user role to audience 
let role = AgoraClientRole.audience
let options = AgoraClientRoleOptions()
// Set the low latency level
options.lowLatency = true

agoraKit.setClientRole(role, options: options)
```

</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">

```swift
// Join the channel with specified options
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    // In a live streaming use-case, set the channel use-case to liveBroadcasting
    options.channelProfile = .liveBroadcasting
    // Set the user role as broadcaster (default is audience)
    options.clientRoleType = .broadcaster
    // Publish audio captured by microphone
    options.publishMicrophoneTrack = true
    // Publish video captured by camera
    options.publishCameraTrack = true
    // Auto subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Auto subscribe to all video streams
    options.autoSubscribeVideo = true
    // Set the audience latency level
    options.audienceLatencyLevel = .ultraLowLatency
    // Use a temporary Token to join the channel
    // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
    // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
    agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
}
```

You can also set the latency level after joining a channel by calling the `setClientRole` method with `role` set to `AgoraClientRole.audience` and `options.ultraLowLatency` set to `true`.


```swift
// Set the user role to audience 
let role = AgoraClientRole.audience
let options = AgoraClientRoleOptions()
// Set the ultra low latency level
options.ultraLowLatency = true

agoraKit.setClientRole(role, options: options)
```
</ProductWrapper>

<ProductWrapper product="video-calling">

```swift
// Join the channel with specified options
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    // In video calling, set the channel use-case to communication
    options.channelProfile = .communication
    // Set the user role as broadcaster (default is audience)
    options.clientRoleType = .broadcaster
    // Publish audio captured by microphone
    options.publishMicrophoneTrack = true
    // Publish video captured by camera
    options.publishCameraTrack = true
    // Auto subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Auto subscribe to all video streams
    options.autoSubscribeVideo = true
    // Use a temporary Token to join the channel
    // Replace Authentication token and demo with your project's Token and channel name
    // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
    // Join the channel with a temporary token
    agoraKit.joinChannel(
        byToken: token,
        channelId: channelName,
        uid: 0,
        mediaOptions: options
    )
}
```
</ProductWrapper>

### Display the remote video
To initialize the remote user view, call `setupRemoteVideo` and set the local display properties for the remote user. Use the `didJoinedOfUid` callback to get the UID of the remote user.

```swift
func setupRemoteVideo(uid: UInt, view: UIView?) {
    let videoCanvas = AgoraRtcVideoCanvas()
    videoCanvas.uid = uid
    videoCanvas.view = view // Assign view for joining, set to nil for leaving
    videoCanvas.renderMode = .hidden
    agoraKit.setupRemoteVideo(videoCanvas)
}
```

### Implement common callbacks

Define necessary callbacks based on the use-case. The following sample code demonstrates how to implement the `didJoinChannel`, `didOfflineOfUid`, and `didJoinedOfUid` callbacks:

```swift
// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \(channel) with UID: \(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        setupRemoteVideo(uid: uid, view: remoteView)
    }
    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        setupRemoteVideo(uid: uid, view: nil)
    }
}
```

To learn about the other SDK events, see <Link to="{{Global.API_REF_IOS_ROOT_RTC_KIT}}/agorartcenginedelegate">`AgoraRtcEngineDelegate`</Link>.

</ProductWrapper>
<ProductWrapper product="voice-calling">

### Join the channel

To join the channel, call `joinChannel`. Provide the temporary token obtained from the console and the channel name used when acquiring the token. Additionally, set the user role before joining the channel:

```swift
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    options.channelProfile = .communication
    // Set user role to broadcaster; to set user role to audience, keep the default value
    options.clientRoleType = .broadcaster
    // Publish microphone audio 
    options.publishMicrophoneTrack = true
    // Automatically subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Join the channel using a temporary token and channel name
    // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
    agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
}
```

### Implement Common Callbacks

Define necessary callbacks based on the use-case. The following sample code demonstrates how to implement the `didJoinChannel`, `didJoinedOfUid`, and `didOfflineOfUid` callbacks:

```swift
// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \(channel) with UID: \(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("User \(uid) joined after \(elapsed) milliseconds")
    }
    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("User \(uid) left:  Reason -> \(reason)")
    }
}
```
</ProductWrapper>

### Start and stop <Vpd k="PRODUCT"/>

When the user launches the app, it joins the channel and starts <Vpd k="PRODUCT"/>. When the user closes the app, it leaves the channel and ends <Vpd k="PRODUCT"/>.

1. To start <Vpd k="PRODUCT"/>, call the following methods:
    <ProductWrapper product="voice-calling">
    ```swift
    // Initialize the Agora engine
    initializeAgoraVoiceSDK()
    // Join the channel
    joinChannel()
    ```
    </ProductWrapper>
    <ProductWrapper notAllowed="voice-calling">
    ```swift
    // Initialize the Agora engine
    initializeAgoraVideoSDK()
    
    // Start the local video preview
    setupLocalVideo()
    
    // Join an Agora channel
    joinChannel()
    ```
    </ProductWrapper>


1. To leave the channel and release SDK resources when the app is closed, call the following methods:

    <ProductWrapper product="voice-calling">
    ```swift
    // Leave the channel and release session-related resources
    agoraKit.leaveChannel(nil)
    // Release all resources used by the Agora SDK
    AgoraRtcEngineKit.destroy()
    ```
    </ProductWrapper>

    <ProductWrapper notAllowed="voice-calling">
    ```swift
    // Stop local video preview
    agoraKit.stopPreview()
    // Leave the channel and release session-related resources
    agoraKit.leaveChannel(nil)
    // Release all resources used by the Agora SDK
    AgoraRtcEngineKit.destroy()
    ```
    </ProductWrapper>

<Admonition type="caution" title="caution">After destroying the engine, you can no longer use SDK methods and callbacks. To use the real-time interaction functions again, create a new engine. See [Initialize the engine](#initialize-the-engine) for details.</Admonition>

### Complete sample code

A complete code sample demonstrating the basic process of real-time interaction is provided for your reference. Copy the following code into your `ViewController.swift` file:

<PlatformWrapper platform='ios'>
<details>
<summary>Complete sample code for real-time <Vpd k="PRODUCT"/> </summary>

<ProductWrapper product="video-calling">
<CodeBlock language="swift" showLineNumbers>
{`import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    
    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token
    
    // UI view for displaying the local video stream
    var localView: UIView!
    // UI view for displaying the remote video stream
    var remoteView: UIView!
    // Instance of the Agora RTC engine
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Initialize the Agora engine
        initializeAgoraVideoSDK()       
        // Set up the user interface
        setupUI()
        // Start the local video preview
        setupLocalVideo()
        // Join an Agora channel
        joinChannel()
    }

    // Clean up resources when the view controller is deallocated
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    // Initializes the Video SDK instance
    func initializeAgoraVideoSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }
    
    // Sets up the UI layout for local and remote video views
    func setupUI() {
        // Create the local video view covering the full screen
        localView = UIView(frame: UIScreen.main.bounds)
        
        // Create the remote video view positioned in the top-right corner
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        
        // Add video views to the main view
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)
    }
    
    // Configures and starts displaying the local video feed
    func setupLocalVideo() {
        // Enable video functionality (audio is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.uid = 0  // UID 0 is assigned to the local user
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In video calling, set the channel use-case to communication
        options.channelProfile = .communication
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        // Join the channel with a temporary token
        agoraKit.joinChannel(
            byToken: token,
            channelId: channelName,
            uid: 0,
            mediaOptions: options
        )
    }
    
    func setupRemoteVideo(uid: UInt, view: UIView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view // Assign view for joining, set to nil for leaving
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        setupRemoteVideo(uid: uid, view: remoteView)
    }

    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        setupRemoteVideo(uid: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {

    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token
    
    // UI view for displaying the local video stream
    var localView: UIView!
    // UI view for displaying the remote video stream
    var remoteView: UIView!
    // Instance of the Agora RTC engine
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Initialize the Agora engine
        initializeAgoraVideoSDK()
        // Set up the user interface
        setupUI()
        // Start the local video preview
        setupLocalVideo()
        // Join an Agora channel
        joinChannel()
    }

    // Clean up resources when the view controller is deallocated
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    // Initializes the Video SDK instance
    func initializeAgoraVideoSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }
    
    // Sets up the UI layout for local and remote video views
    func setupUI() {
        // Create the local video view covering the full screen
        localView = UIView(frame: UIScreen.main.bounds)
        
        // Create the remote video view positioned in the top-right corner
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        
        // Add video views to the main view
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)
    }
    
    // Configures and starts displaying the local video feed
    func setupLocalVideo() {
        // Enable video functionality (audio is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.uid = 0  // UID 0 is assigned to the local user
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming use-case, set the channel use-case to liveBroadcasting
        options.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience ultra-low latency level
        options.audienceLatencyLevel = .ultraLowLatency
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        // Join the channel with a temporary token
        agoraKit.joinChannel(
            byToken: token,
            channelId: channelName,
            uid: 0,
            mediaOptions: options
        )
    }
    
    func setupRemoteVideo(uid: UInt, view: UIView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view // Assign view for joining, set to nil for leaving
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Assign the remote user’s video stream to the remote view
        setupRemoteVideo(uid: uid, view: remoteView)
    }

    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Remove the remote video feed when the user disconnects
        setupRemoteVideo(uid: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="broadcast-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {

    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token
    
    // UI view for displaying the local video stream
    var localView: UIView!
    // UI view for displaying the remote video stream
    var remoteView: UIView!
    // Instance of the Agora RTC engine
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Initialize the Agora engine
        initializeAgoraVideoSDK()
        // Set up the user interface
        setupUI()
        // Start the local video preview
        setupLocalVideo()
        // Join an Agora channel
        joinChannel()
    }

    // Clean up resources when the view controller is deallocated
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    // Initializes the Video SDK instance
    func initializeAgoraVideoSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }
    
    // Sets up the UI layout for local and remote video views
    func setupUI() {
        // Create the local video view covering the full screen
        localView = UIView(frame: UIScreen.main.bounds)
        
        // Create the remote video view positioned in the top-right corner
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        
        // Add video views to the main view
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)
    }
    
    // Configures and starts displaying the local video feed
    func setupLocalVideo() {
        // Enable video functionality (audio is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.uid = 0  // UID 0 is assigned to the local user
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming use-case, set the channel use-case to liveBroadcasting
        options.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience latency level
        options.audienceLatencyLevel = .lowLatency
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        // Join the channel with a temporary token
        agoraKit.joinChannel(
            byToken: token,
            channelId: channelName,
            uid: 0,
            mediaOptions: options
        )
    }
    
    func setupRemoteVideo(uid: UInt, view: UIView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view // Assign view for joining, set to nil for leaving
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Assign the remote user’s video stream to the remote view
        setupRemoteVideo(uid: uid, view: remoteView)
    }

    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Remove the remote video feed when the user disconnects
        setupRemoteVideo(uid: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="voice-calling">
<CodeBlock language="swift" showLineNumbers>
{`import UIKit
import AgoraRtcKit

class ViewController: UIViewController {

    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token

    var statusLabel: UILabel!
    // Instance of the Agora RTC engine
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Initialize the Agora engine
        initializeAgoraVoiceSDK()
        // Set up user interface
        setupUI();
        // Join an Agora channel
        joinChannel()
    }
    
    func setupUI() {
        let mainView = UIView(frame: view.bounds)
        mainView.backgroundColor = .black

        statusLabel = UILabel(frame: mainView.bounds)
        statusLabel.text = "Waiting for other user"
        statusLabel.textColor = .white
        statusLabel.textAlignment = .center
        statusLabel.autoresizingMask = [.flexibleWidth, .flexibleHeight]

        mainView.addSubview(statusLabel)
        view.addSubview(mainView)
    }


    // Clean up resources when the view controller is deallocated
    deinit {
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    // Initializes the Voice SDK instance
    func initializeAgoraVoiceSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In voice calling, set the channel use-case to communication
        options.channelProfile = .communication
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Use a temporary token to join the channel
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(
            byToken: token,
            channelId: channelName,
            uid: 0,
            mediaOptions: options
        )
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
        statusLabel.text = "You Successfully joined. Waiting for other users"
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("User \\(uid) joined after \\(elapsed) milliseconds")
        statusLabel.text = "User \\(uid) joined"
    }

    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("User \\(uid) left:  Reason -> \\(reason)")
        statusLabel.text = "User \\(uid) left"
    }
}`}
</CodeBlock>
</ProductWrapper>
</details>
</PlatformWrapper>

<PlatformWrapper platform='macos'>
<details>
<summary>Complete sample code for <Vpd k="PRODUCT"/></summary>

<ProductWrapper product="voice-calling">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import Cocoa
import AgoraRtcKit

class ViewController: NSViewController {
    private var statusLabel: NSTextField!
    
    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token

    var agoraKit: AgoraRtcEngineKit!


    override func viewDidLoad() {
        super.viewDidLoad()
        // Initialize the Agora engine
        initializeAgoraVoiceSDK()
        // Set up the user interface
        setupUI()
        // Join an Agora channel
        joinChannel()
    }
    
    func setupUI(){
        let mainView = NSView(frame: view.bounds)
        mainView.wantsLayer = true

        statusLabel = NSTextField(labelWithString: "Waiting for other user")
        statusLabel.alignment = .center
        statusLabel.font = .systemFont(ofSize: 20)
        statusLabel.translatesAutoresizingMaskIntoConstraints = false

        mainView.addSubview(statusLabel)
        view.addSubview(mainView)

        NSLayoutConstraint.activate([
            statusLabel.centerXAnchor.constraint(equalTo: mainView.centerXAnchor),
            statusLabel.centerYAnchor.constraint(equalTo: mainView.centerYAnchor)
        ])
    }
    
    // Initializes the Voice SDK instance
    func initializeAgoraVoiceSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }
    
    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In voice calling, set the channel use-case to communication
        options.channelProfile = .communication
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        // Join the channel with a temporary token
        agoraKit.joinChannel(
            byToken: token,
            channelId: channelName,
            uid: 0,
            mediaOptions: options
        )
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
        statusLabel.stringValue = "You Successfully joined. Waiting for other users"
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("User \\(uid) joined after \\(elapsed) milliseconds")
        statusLabel.stringValue = "User \\(uid) joined"
    }
    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("User \\(uid) left:  Reason -> \\(reason)")
        statusLabel.stringValue = "User \\(uid) left"
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import Cocoa
import AgoraRtcKit

class ViewController: NSViewController {
    
    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token

    // UI view for displaying the local video stream
    var localView: NSView!
    // UI view for displaying the remote video stream
    var remoteView: NSView!
    // Instance of the Agora RTC engine
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Initialize the Agora engine
        initializeAgoraVideoSDK()
        // Set up the user interface
        setupUI()
        // Start the local video preview
        setupLocalVideo()
        // Join an Agora channel
        joinChannel()
    }

    // Clean up resources when the view controller is deallocated
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    // Initializes the Video SDK instance
    func initializeAgoraVideoSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }
    
    func setupUI() {
        guard let screenFrame = NSScreen.main?.frame else { return } // Ensure screen is available

        // Create the local video view covering the full screen
        localView = NSView(frame: screenFrame)
        
        // Create the remote video view positioned in the top-right corner
        remoteView = NSView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 250, height: 250))
        
        // Add video views to the main view
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)
    }

    
    // Configures and starts displaying the local video feed
    func setupLocalVideo() {
        // Enable video functionality (audio is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.uid = 0  // UID 0 is assigned to the local user
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming use-case, set the channel use-case to liveBroadcasting
        options.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience latency level
        options.audienceLatencyLevel = .ultraLowLatency
        // Use a temporary Token to join the channel
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
    
    func setupRemoteVideo(uid: UInt, view: NSView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view // Assign view for joining, set to nil for leaving
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Assign the remote user’s video stream to the remote view
        setupRemoteVideo(uid: uid, view: remoteView)
    }

    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Remove the remote video feed when the user disconnects
        setupRemoteVideo(uid: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="broadcast-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import Cocoa
import AgoraRtcKit

class ViewController: NSViewController {
    
    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token

    // UI view for displaying the local video stream
    var localView: NSView!
    // UI view for displaying the remote video stream
    var remoteView: NSView!
    // Instance of the Agora RTC engine
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Initialize the Agora engine
        initializeAgoraVideoSDK()
        // Set up the user interface
        setupUI()
        // Start the local video preview
        setupLocalVideo()
        // Join an Agora channel
        joinChannel()
    }

    // Clean up resources when the view controller is deallocated
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    // Initializes the Video SDK instance
    func initializeAgoraVideoSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }
    
    func setupUI() {
        guard let screenFrame = NSScreen.main?.frame else { return } // Ensure screen is available

        // Create the local video view covering the full screen
        localView = NSView(frame: screenFrame)
        
        // Create the remote video view positioned in the top-right corner
        remoteView = NSView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 250, height: 250))
        
        // Add video views to the main view
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)
    }

    
    // Configures and starts displaying the local video feed
    func setupLocalVideo() {
        // Enable video functionality (audio is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.uid = 0  // UID 0 is assigned to the local user
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming use-case, set the channel use-case to liveBroadcasting
        options.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience latency level
        options.audienceLatencyLevel = .lowLatency
        // Use a temporary Token to join the channel
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }

    
    func setupRemoteVideo(uid: UInt, view: NSView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view // Assign view for joining, set to nil for leaving
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Assign the remote user’s video stream to the remote view
        setupRemoteVideo(uid: uid, view: remoteView)
    }

    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Remove the remote video feed when the user disconnects
        setupRemoteVideo(uid: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="video-calling">

<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import Cocoa
import AgoraRtcKit

class ViewController: NSViewController {
    
    let appId = "<Your app ID>" // Replace with your actual App ID
    let channelName = "demo"    // Replace with your actual channel name
    let token = "<Authentication token>" // Replace with your token

    // UI view for displaying the local video stream
    var localView: NSView!
    // UI view for displaying the remote video stream
    var remoteView: NSView!
    // Instance of the Agora RTC engine
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Initialize the Agora engine
        initializeAgoraVideoSDK()
        // Set up the user interface
        setupUI()
        // Start the local video preview
        setupLocalVideo()
        // Join an Agora channel
        joinChannel()
    }

    // Clean up resources when the view controller is deallocated
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    // Initializes the Video SDK instance
    func initializeAgoraVideoSDK() {
        // Create an instance of AgoraRtcEngineKit and set the delegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: appId, delegate: self)
    }
    
    func setupUI() {
        guard let screenFrame = NSScreen.main?.frame else { return } // Ensure screen is available

        // Create the local video view covering the full screen
        localView = NSView(frame: screenFrame)
        
        // Create the remote video view positioned in the top-right corner
        remoteView = NSView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 250, height: 250))
        
        // Add video views to the main view
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)
    }

    
    // Configures and starts displaying the local video feed
    func setupLocalVideo() {
        // Enable video functionality (audio is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.uid = 0  // UID 0 is assigned to the local user
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In video calling, set the channel use-case to communication
        options.channelProfile = .communication
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        // Join the channel with a temporary token
        agoraKit.joinChannel(
            byToken: token,
            channelId: channelName,
            uid: 0,
            mediaOptions: options
        )
    }
    
    func setupRemoteVideo(uid: UInt, view: NSView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view // Assign view for joining, set to nil for leaving
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}

// Extension for handling Agora SDK callbacks
extension ViewController: AgoraRtcEngineDelegate {
    
    // Triggered when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Successfully joined channel: \\(channel) with UID: \\(uid)")
    }
    
    // Triggered when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Assign the remote user’s video stream to the remote view
        setupRemoteVideo(uid: uid, view: remoteView)
    }

    // Triggered when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Remove the remote video feed when the user disconnects
        setupRemoteVideo(uid: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>
</details>

</PlatformWrapper>
