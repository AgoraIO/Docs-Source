<PlatformWrapper platform="web">

### Spatial audio for remote users

When subscribing to a remote user, realize the user's spatial sound effect as follows:

1. Call the `createProcessor` method to create a `SpatialAudioProcessor` instance.

2. To inject a plug-in into the remote user's audio track, call the `pipe` method and specify the `processorDestination` properties.

    ```javascript
    async function subscribe(user, mediaType) {
        await client.subscribe(user, mediaType);
        console.log("subscribe success");
        if (mediaType === "audio") {
            const processor = extension.createProcessor();
            const track = user.audioTrack;
            track.pipe(processor).pipe(track.processorDestination);
            track.play();
        }
    }
    ```

The complete API call sequence to implement spatial audio for users is as follows:


### Spatial audio effect for media player

When playing audio files such as background sound, accompaniment, and NPC voice locally, realize the spatial audio effect of the audio file:

1. Call the `createProcessor` method to create a `SpatialAudioProcessor` instance.

2. To inject a plugin into the audio track of a local audio file, call the `pipe` method and specify the `processorDestination` properties.

    ```javascript
    var localPlayerSound = [
        // './resources/1.mp3',
        "./resources/2.mp3",
        // './resources/3.mp3',
        // './resources/4.mp3',
    ];

    async function localPlayerStart() {
        for (let i = 0; i < localPlayerSound.length; i++) {
            const processor = extension.createProcessor();
            const track = await AgoraRTC.createBufferSourceAudioTrack({source: localPlayerSound[i]});
            track.startProcessAudioBuffer({loop: true});
            track.pipe(processor).pipe(track.processorDestination);
            track.play();
        }
    }
    ```

</PlatformWrapper>