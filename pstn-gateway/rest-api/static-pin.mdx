---
title: 'Static PIN'
sidebar_position: 4
platform_selector: false
description: >
 Configure an external REST endpoint to validate static PINs for PSTN access.
---

import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

<RestAPILayout>
 <LeftColumn
   title={frontMatter.title}
   method="POST"
   endpoint="https://example.customer.com/api/pinlookup"
 >

Configure an external REST endpoint to validate static PINs for PSTN access. When provisioned, the service calls your external endpoint with the dialed number and entered PIN. Your endpoint can accept the PIN and return channel details, or return a 404 error for invalid PINs.

## Request

### Request body

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="BODY" required={true}>
 <Parameter name="did" type="string" required={true}>
   The phone number that was dialed by the user.
 </Parameter>
 <Parameter name="pin" type="string" required={true}>
   The PIN code entered by the user.
 </Parameter>
</ParameterList>

## Response

- If the returned status code is `200`, the PIN is valid. The response body contains the channel connection details.
- If the returned status code is `404`, the PIN is invalid and the user will not be connected to any channel.

 <ParameterList title="OK">
   <Parameter name="token" type="string">
     A generated Agora access token for the channel, or the appId if tokens are not enabled.
   </Parameter>
   <Parameter name="uid" type="string">
     A unique identifier for the user joining the channel.
   </Parameter>
   <Parameter name="channel" type="string">
     The Agora channel name to connect the user to.
   </Parameter>
   <Parameter name="appid" type="string">
     The Agora App ID for your project.
   </Parameter>
 </ParameterList>

 <ParameterList title="Not Found">
    <Parameter name="code" type="integer">
   Error response code:
   - `404` PIN not found or invalid
   </Parameter>
 </ParameterList>

</LeftColumn>

<RightColumn>

<Section title="Implementation Notes">
This API allows you to provide users with static PINs that do not expire. Configure your endpoint URL during service provisioning with Agora support.
</Section>

<Section title="Request example">

 <Tabs groupId="code-examples">
   <TabItem value="curl" label="curl" default>
     ```bash
     curl -X POST https://example.customer.com/api/pinlookup \
       -H "Content-Type: application/json" \
       -d '{
         "did": "17177440111",
         "pin": "334455"
       }'
     ```
   </TabItem>
   <TabItem value="python" label="Python">

   ```python
   import requests
   import json

   # This is an example of how Agora will call your endpoint
   url = "https://example.customer.com/api/pinlookup"

   headers = {
       "Content-Type": "application/json"
   }

   data = {
       "did": "17177440111",
       "pin": "334455"
   }

   response = requests.post(url, headers=headers, json=data)

   if response.status_code == 200:
       result = response.json()
       print(f"PIN valid. Channel: {result['channel']}, UID: {result['uid']}")
   elif response.status_code == 404:
       print("PIN not found or invalid")
   else:
       print(f"Unexpected error: {response.status_code}")
   ```
   </TabItem>

   <TabItem value="node" label="Node.js">

   ```js
   const axios = require('axios');

   // This is an example of how Agora will call your endpoint
   const url = 'https://example.customer.com/api/pinlookup';

   const headers = {
       'Content-Type': 'application/json'
   };

   const data = {
       did: '17177440111',
       pin: '334455'
   };

   axios.post(url, data, { headers })
       .then(response => {
           console.log(`PIN valid. Channel: ${response.data.channel}, UID: ${response.data.uid}`);
       })
       .catch(error => {
           if (error.response && error.response.status === 404) {
               console.log('PIN not found or invalid');
           } else {
               console.error('Unexpected error:', error.message);
           }
       });
   ```
   </TabItem>
 </Tabs>

</Section>

<Section title="Response example">

<Tabs groupId="response-examples">
 <TabItem value="200" label="200" default>

   ```json
   {  
     "token": "006d2776fef40dc864dc7a438e3b871IACGnkorQsr0iCpBmzNwKEdzKuAv1b1zRcMy0cOradw6mHN/il8AAAAAIgCQqbAFeaVzZgQAAQDw0oBmAgDw0oBmAwDw0oBmBADw0oBm",
     "uid": "123",
     "channel": "test",
     "appid": "fs9f52d9dcc1f406b93d97ff1f43c554f"
   }
   ```
 </TabItem>
 <TabItem value="404" label="404">

   ```json
   {  
     "error": "PIN not found"
   }
   ```
 </TabItem>
</Tabs>

</Section>
</RightColumn>
</RestAPILayout>