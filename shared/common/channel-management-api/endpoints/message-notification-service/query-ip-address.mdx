import Authorization from '@docs/shared/common/channel-management-api/authorization.mdx';

When using Agora real-time audio and video, you can use the <Vg k="NCS_LONG" /> service to receive channel events.

After activating the service, when a channel event occurs, the <Vg k="NCS_LONG" /> server will deliver the event notification to your message receiving server.

If your server is behind a firewall, you need to call the IP address query API to retrieve the IP addresses of <Vg k="NCS_LONG" /> and configure your firewall to trust all these IP addresses.

Agora occasionally adjusts the <Vg k="NCS_LONG" /> IP addresses. Best practice is to call this endpoint at least every 24 hours and automatically update the firewall configuration.

### Prototype

* Method: `GET`
* Endpoint: `https://api.agora.io/v2/ncs/ip`

### Request parameters

**Request header**

<Authorization/>

### Request example

### Response parameters

For details about possible response status codes, see [Response status codes](../../response-status-code).
If the status code is not `200`, the request fails. See the `message` field in the response body for the reason for this failure.

If the status code is `200`, the request succeeds, and the response body includes the following parameters:

| Parameter | Type    | Description                                                  |
| :-------- | :------ | :----------------------------------------------------------- |
| `data`    | Object  |  <ul><li>`service`<ul><li>`hosts` <ul><li>`primaryIP`: The IP address of the <Vg k="NCS_LONG" /> server. When you receive a response, you need to add the IP address (or list of IP addresses) from this field to the whitelist.</li></ul></li></ul></li></ul> |

### Response example

```json
{
  "data": {
    "service": {
      "hosts": [
        {
          "primaryIP": "xxx.xxx.xxx.xxx"
        },
        {
          "primaryIP": "xxx.xxx.xxx.xxx"
        }
      ]
    }
  }
}
```