<PlatformWrapper platform="react-native">

### Implement the user interface

Add the following elements for <Vpd k="NAME"/> in the layout file of your project:

- A start-call button
- An end-call button

To create these elements, we will define the styles in a `StyleSheet` to be used later. Replace the code in `App.tsx` with the following:

```typescript
import {StyleSheet} from 'react-native';

const styles = StyleSheet.create({
  button: {
    paddingHorizontal: 25,
    paddingVertical: 4,
    fontWeight: 'bold',
    color: '#ffffff',
    backgroundColor: '#0055cc',
    margin: 5,
  },
  main: {flex: 1, alignItems: 'center'},
  scroll: {flex: 1, backgroundColor: '#ddeeff', width: '100%'},
  scrollContainer: {alignItems: 'center'},
  videoView: {width: '80%', height: 150},
  btnContainer: {flexDirection: 'row', justifyContent: 'center'},
  head: {fontSize: 20},
});
```

### Handle the system logic

When your app launches, ensure that the system libraries and permissions classes necessary to insert <Vpd k="NAME"/> feature into the app are granted.

1. **Import system and <Vg k="VSDK" /> classes**

    Replace the import statement of `App.tsx` with the following:

    ```typescript
    import React, {useRef, useState} from 'react';
    import {SafeAreaView, ScrollView, StyleSheet, Text, View} from 'react-native';
    import {PermissionsAndroid, Platform} from 'react-native';
    import {
    ClientRoleType,
    createAgoraRtcEngine,
    IRtcEngine,
    RtcSurfaceView,
    } from 'react-native-agora-rtc-ng';
    ```

1. **Add project permissions**

     - *Android*

        Add the following code to the `App.tsx` file to set a permissions prompt to use the microphone on an Android device:

        ```typescript
        const getPermission = async () => {
            if (Platform.OS === 'android') {
                await PermissionsAndroid.requestMultiple([
                    PermissionsAndroid.PERMISSIONS.RECORD_AUDIO,
                ]);
            }
        };
        ```
     -  *iOS*

        Add project permissions for microphone.

        Open **Info** in the project navigation panel, then add the following properties to the [Information Property List](https://help.apple.com/xcode/mac/current/#/dev3f399a2a6):

        | Key                          | Type   | Value                  |
        |------------------------------|--------|------------------------|
        | NSMicrophoneUsageDescription | String | Access the microphone. |

### Implement the  <Vpd k="NAME"/> logic

When a user opens this <Vpl k="CLIENT" />, you initialize the <Vg k="ENGINE" />. When the user taps a button, the <Vpl k="CLIENT" /> joins or leaves a channel.

The following figure shows the <Vpd k="SDK" /> call sequence of implementing   <Vpd k="PRODUCT" />.

![video call logic ios](/images/voice-sdk/voice-call-logic-android.svg)

To implement this logic, take the following steps:

1. **Create an App Component and Join a channel**

    Add the following code to the `App.tsx` file to create the variables to initialize <Vg k="ENGINE" /> and join a channel.

    ```typescript
        const appId = ''; // Enter Agora App ID
        const token = ''; // Leave empty if using unsecured project
        const channelName = '';
        const uid = 0;

        const App = () => {
            const engineRef = useRef<IRtcEngine>();
            const [users, setUsers] = useState<number[]>([]);
            const [joined, setJoined] = useState(false);

            const join = async () => {
                try {
                    await getPermission(); // use helper function to get permissions on Android
                    engineRef.current = createAgoraRtcEngine();
                    const engine = engineRef.current;
                    engine.registerEventHandler({
                        onJoinChannelSuccess: () => {
                            setUsers(p => [...p, 0]);
                            setJoined(true);
                        },
                        onUserJoined: (_connection, remoteUid) => {
                            setUsers(p => [...p, remoteUid]);
                        },
                        onUserOffline: (_connection, remoteUid) => {
                            setUsers(p => p.filter(u => u !== remoteUid));
                        },
                    });
                    engine.initialize({
                        appId: appId,
                    });
                    engine.joinChannel(token, channelName, '', uid);
                } catch (e) {
                    console.log(e);
                }
            };
            // Next steps
        };

        export default App;

    ```

1. **Leave the channel**

    Call `leaveChannel` to leave the current channel according to your scenario. For example, when the <Vpd k="NAME"/> ends, when you need to close the app, or when your app runs in the background.

    Add the following code to replace `// Next steps` line in `App.tsx`:

    ```typescript
    const leave = () => {
        try {
        setUsers([]);
        engineRef.current?.leaveChannel();
        engineRef.current?.unregisterEventHandler({
            onJoinChannelSuccess: () => {},
            onUserJoined: () => {},
            onUserOffline: () => {},
        });
        engineRef.current?.release();
        } catch (e) {
        console.log(e);
        }
    };
    ```

1. **Render UI elements**

    Add the following code after `const leave = () => {` code block in `App.tsx`:

    ```typescript
    return (
        <SafeAreaView style={styles.main}>
        <Text style={styles.head}>Agora NG SDK Demo</Text>
        <View style={styles.btnContainer}>
            <Text onPress={join} style={styles.button}>
            Join
            </Text>
            <Text onPress={leave} style={styles.button}>
            Leave
            </Text>
        </View>
        </SafeAreaView>
    );
    ```
</PlatformWrapper>