<PlatformWrapper platform="linux-cpp">

1. Initialize the recorder with `enable_mix` set to `true` to enable composite recording mode.
2. Subscribe to audio and video streams using `subscribeAllAudio()` and `subscribeAllVideo()`.
3. Join the channel using `joinChannel()`.
4. Set recording parameters** after joining the channel:

   * Use `setRecorderConfig()` to configure video resolution, bitrate, and storage path.
   * Use `enableAndUpdateVideoWatermarks()` to apply watermarks (optional).
   * Use `setVideoMixingLayout()` to define the layout of the video streams in the merged output.
5. Start and stop recording with:

   * `startRecording()`
   * `stopRecording()`

To implement these steps, add the following code in your app:

```cpp
// Initialize the recorder in composite mode
recorder->initialize(service, true);

// Subscribe to all audio and video streams
recorder->subscribeAllAudio();
recorder->subscribeAllVideo();

// Join the channel
recorder->joinChannel(config.token.c_str(), config.ChannelName.c_str(), config.UserId.c_str());

// Set recording configuration
recorder->setRecorderConfig(recorder_config);

// Apply watermarks (optional)
recorder->enableAndUpdateVideoWatermarks(watermarks, config.waterMarks.size());

// Set the video mixing layout
recorder->setVideoMixingLayout(layout);

// Start recording
recorder->startRecording();

// ...

// Stop recording
recorder->stopRecording();
```

</PlatformWrapper>