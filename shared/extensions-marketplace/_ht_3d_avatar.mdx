import Prerequisites from '@docs/shared/extensions-marketplace/common/_prerequities.mdx';
import ProjectImplementation from '@docs/shared/extensions-marketplace/ht_3d_avatar/project-implementation/index.mdx';
import Reference from '@docs/shared/extensions-marketplace/ht_3d_avatar/reference/index.mdx';

The <Vg k="RTEE_HT3D" /> extension encapsulates the Hongtu HTAvatar core API. Using the `setExtensionProperty` or `setExtensionPropertyWithVendor` methods provided by <Vg k="VSDK" /> and passing in the specified `key` and `value` parameters, you can quickly integrate 3D portrait special effects capabilities.

<PlatformWrapper notAllowed="android, ios">

**This feature is not yet available for <Vpl k="NAME" />.**

</PlatformWrapper>

<PlatformWrapper platform="android, ios">

This page shows you how to integrate and use the <Vg k="RTEE_HT3D" /> extension.

## Understand the tech

Take `setExtensionProperty` for example , the `key` parameter corresponds exactly to the API name of Hongtu, and the `value` parameters wrap some or all parameters of the API in JSON format. Therefore, `setExtensionProperty` as long as the specified `key` and `value` are passed in when calling, the corresponding Hongtu API can be called to realize the related functions of portrait 3D special effects. `setExtensionPropertyWithVendor` the same way.

## Prerequisites

The development environment requirements are as follows:

<Prerequisites />
- Implemented <Link to="../../../video-calling/get-started/get-started-sdk"><Vg k="GET_STARTED"/> for <Vg k="VIDEO"/></Link>.

## Integrate the extension

<ProjectImplementation />

## Reference


<Vg k="RTEE_HT3D" /> interface description

### Method key overview

When calling the `setExtensionProperty` or `setExtensionPropertyWithVendor` method of <Vg k="VSDK" />, the following keys and corresponding functions are supported:

#### Initialization

| Key | Description |
| :---- | :---- |
| [htARInitOffline](#htarinitoffline) | Initialization, offline authentication. |

#### Destroy

| Key | Description |
| :---- | :---- |
| [htARReleaseBufferRenderer](#htarreleasebufferrenderer) | Resource release function. |

#### Functional interface

| Key | Description |
| :---- | :---- |
| [htARRenderEnable](#htarrenderenable)| Turn on/off the AR special effects function. |
| [htARSetModel](#htarsetmodel) | Switch AR model function. |
| [htARMirror](#htarmirror) | Set whether the image has a mirror function |
| [htARImageFormat](#htarimageformat) | Set image format function |
| [htARRotation](#htarrotation) | Set image rotation angle function |
| [htARMaxFaces](#htarmaxfaces) | Set the maximum number of supported faces function |
| [htARCopyResource](#htarcopyresource)| Copy the resource path to the sandbox function |


### Value description of method keys

#### htARInitOffline

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `license` | String type, AR offline authentication key. |

#### htARReleaseBufferRenderer

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `enable` | BOOL type, whether to confirm the release of resources. |

#### htARRenderEnable

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `enable` | BOOL type, whether to enable the AR function. |

#### htARSetModel

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `name` | String type, the name of the model. |

#### htARMirror

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `isMirror` | BOOL type, whether to set the mirror display of prop special effects, the default is true |

#### htARImageFormat

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `imageFormat` | Int type, enumeration value of image format. For details on the specific value, see [HTEARImageFormat](https://gitee.com/htai-open/agora-htavatar-extension/blob/master/iOS/ALL_ARCHITECTURE/Release/HTEffectAR.framework/Headers/HTEffectARInterface.h). |

#### htARRotation

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `rotation` | Int type, enumeration value of image rotation angle. For details on the specific value, see [HTEAROrientation](https://gitee.com/htai-open/agora-htavatar-extension/blob/master/iOS/ALL_ARCHITECTURE/Release/HTEffectAR.framework/Headers/HTEffectARInterface.h). |

#### htARMaxFaces

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `maxFaces` | Int type, the maximum number of faces that can be supported. The value is [1, 5] |


#### htARCopyResource

value contains the following parameters:

| value parameter | description |
| :------- | :---- |
| `path` | String type, the path that needs to be copied to the sandbox. |

<Reference />

</PlatformWrapper>