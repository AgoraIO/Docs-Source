<PlatformWrapper platform="web">

1.  **Enable the connection to <Vg k="CP"/>**

    To access <Vg k="AGORA_BACKEND" /> in a restricted network environment, call `startProxyServer` and pass `3` as a parameter to set the force UDP transmission mode. In `agora_manager_cloud_proxy.js`, add the following code after
    `const config = agoraManager.config;`:

    ``` javascript
    const agoraEngine = agoraManager.getAgoraEngine();
    if (config.cloudProxy == true) {
      // Start cloud proxy service in the forced UDP mode.
      agoraEngine.startProxyServer(3);
      agoraEngine.on("is-using-cloud-proxy", (isUsingProxy) => {
        // Display the proxy server state based on the isUsingProxy Boolean variable.
        if (isUsingProxy == true) {
          console.log("Cloud proxy service activated");
        } else {
          console.log("Proxy service failed");
        }
      });
    }
    ```

2.  **Setup the cloud proxy callback function**

    The <Vg k="VSDK" /> triggers `is-using-cloud-proxy` callback to indicate whether the media stream is forwarded by the <Vg k="COMPANY" /> cloud proxy
    service. To setup this callback, in `agora_manager_cloud_proxy.js`, add the following code after `agoraEngine.startProxyServer(3);`:

    ``` javascript
    agoraEngine.on("is-using-cloud-proxy" , isUsingProxy =>
    {
      // Display the proxy server state based on the isUsingProxy Boolean variable.
      if(isUsingProxy == true)
      {
        console.log("Cloud proxy service activated");
      }
      else
      {
        console.log("Proxy service failed")
      }
    });
    ```

3.  **Stop the proxy server after leaving the channel**

    Stop the proxy server with a call to `stopProxyServer`. In
    `agora_manager_cloud_proxy.js`, add the following code in
    `AgoraManagerCloudProxy`:

    ``` javascript
    // Stop the proxy service when you leave the channel.
    const stopProxyServer = () => {
      agoraEngine.stopProxyServer();
    }
    ```

    In `cloud_proxy.js`, call it after `await agoraManager.leave(channelParameters);`:

    ```javascript
    agoraManager.stopProxyServer();
    ```

</PlatformWrapper>
