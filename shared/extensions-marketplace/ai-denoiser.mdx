
import ProjectImplement from '@docs/shared/extensions-marketplace/ai-noise-suppression/project-implementation/index.mdx';
import Reference from '@docs/shared/extensions-marketplace/ai-noise-suppression/reference/index.mdx';

With an AI-powered  deep learning noise reduction algorithms, you integrate the <Vg k="RTEE_NS" /> into your <Vpl k="CLIENT" /> in order to suppress hundreds of background noise types, and reduce distortion for human voices when multiple people speak simultaneously.

<PlatformWrapper notAllowed="web">
<PlatformWrapper notAllowed="ios">
<PlatformWrapper notAllowed="android">
This platform is not supported for this extension.
</PlatformWrapper>
</PlatformWrapper>
</PlatformWrapper>


<PlatformWrapper notAllowed="flutter">
<PlatformWrapper notAllowed="react-native">
<PlatformWrapper notAllowed="electron">
<PlatformWrapper notAllowed="unity">
<PlatformWrapper notAllowed="windows">
<PlatformWrapper notAllowed="macos">

In scenarios such as online meetings, online chat rooms, video consultations with doctors, and online gaming, the <Vg k="RTEE_NS" /> extension makes virtual communication as smooth as face-to-face communication.

Try this feature out with the <a href="https://webdemo.agora.io/aiDenoiser/index.html">online demo</a>.

- Noise types suppressed <a name="type"></a>

    The <Vg k="RTEE_NS" /> extension suppresses the following types of noise:

    - Television
    - Kitchen
    - Street, such as birds chirping, traffic, and subway noise.
    - Machine, such as noise coming from fans, air conditioners, vacuum cleaners, and copiers.
    - Office, such as keyboard clicks and mouse clicks.
    - Household, such as noise coming from doors, creaking chairs, crying babies, and house renovations.
    - Constant knocking
    - Beeps and clapping sounds.
    - Music
    - Reverberation
    - Howling

- Noise reduction strategies

    The <Vg k="RTEE_NS" /> extension supports the following noise reduction strategies:
    - **Default**: Reduces noise to a comfortable level without distorting the human voice.
    - **Custom**: If you need a more enhanced or custom noise reduction strategy for your business scenario, [submit a ticket](https://agora-ticket.agora.io/) to Agora technical support.


## Understand the tech

<Vg k="RTEE_NS" /> accesses voice data when it is captured from the user's local device, modifies it, then plays the updated data to local and remote video channels.

![img](/images/video-sdk/extension-callflow.svg)

## Prerequisites

To use the <Vg k="RTEE_NS" /> extension, you must meet the following requirements:

- Implemented <Link to="../get-started/get-started-sdk">Get Started with <Vpd k="NAME"/></Link>.
- [Noise type](#type) matches your business scenario.  For example, if you want the microphone to collect background music, the extension is not applicable because it categorizes such background music as noise.
<PlatformWrapper platform="web">
- You have the latest version of Desktop Chrome (recommended), Edge, or Firefox.
</PlatformWrapper>
<PlatformWrapper platform="ios">
- Minimum device requirements
    - iOS iPhone 6S
    - iPadOS
    - iPad Pro (2nd generation)
    - iPad mini (5th generation)
    - iPad Air (3rd generation)
    - macOS MacBook Pro 2015
- Ensure that the dynamical extension library `AgoraAiNoiseSuppressionExtension.xcframework` is integrated into your project.

When <Vg k="RTEE_NS" /> is enabled, if <Vg k="VSDK" /> detects that the device performance is not sufficient, it:

- Disables <Vg k="RTEE_NS" />
- Enables traditional noise reduction
- Throws the -1054(WARN_APM_AINS_CLOSED) error code.

</PlatformWrapper>

## Implementation

Follow these steps to integrate the <Vg k="RTEE_NS" /> extension and implement the noise reduction feature:

<ProjectImplement />

## API reference

<PlatformWrapper platform="web">
### IAIDenoiserExtension

#### createProcessor

```typescript
createProcessor(): IAIDenoiserProcessor;
```

Creates an `IAIDenoiserProcessor` instance.

#### onloaderror

```typescript
onloaderror?: () => void;
```

Reports when the Wasm and JS files fail to load.

### IAIDenoiserProcessor
#### kind

```typescript
get kind(): 'video' | 'audio';
```

The processor type, which is categorized as video or audio.

#### enabled

```typescript
get enabled(): boolean;
```

Whether the extension is enabled:
- true: The extension is enabled.
- false: The extension is disabled.

#### enable

```typescript
enable(): void | Promise<void>;
```

Enables the <Vg k="RTEE_NS" /> extension.

#### disable

```typescript
disable(): void | Promise<void>;
```

Disables the <Vg k="RTEE_NS" /> extension.

#### dump

```typescript
dump(): void;
```

Dumps audio data in order to help troubleshoot noise reduction issues.

Calling this method triggers the `ondump` callback nine times, returning nine WAV files (see the description below) for the audio data processed by the extension 30 seconds before and 60 seconds after the method call, then triggers the `ondumpend` callback to inform you that the audio data ends dumping.

**Audio file description**

- Format: WAV
- Length: The length of each audio file is 30 seconds.
- Name: The second half of the file name indicates the created time, and the first half identifies the stage of the audio data through the following prefixes:
   - input: Indicates the audio data is not processed yet.
   - ns_out: Indicates the audio data is processed by the noise reduction algorithm.
   - agc_out: Indicates the audio data is processed by the speech enhancement algorithm.

**Notes**

- If you disable the <Vg k="RTEE_NS" /> extension before the `ondump` callback is triggered nine times, the dumping process ends immediately and the `ondumpend `callback is triggered. In this case, fewer than nine audio data files are returned.
- If the actual audio data processed by the extension is less than 30 seconds long, the returned audio file is less than 30 seconds long.

#### ondump

```typescript
ondump?: (blob: Blob, name: string) => void;
```

Reports that audio data is dumped.

This callback returns the following parameters:

- `blob`: The audio data file.
- `name`: The `name `of the audio data file.

#### ondumpend

```typescript
ondumpend?: () => void;
```

Reports that audio data ends dumping.

#### onoverload

```typescript
onoverload?: () => void;
```

Reports that the noise reduction process takes too long.  This callback could be triggered by mistake and is for reference only.

### Type definition

#### AIDenoiserExtensionOptions

```typescript
export interface AIDenoiserExtensionOptions {
  assetsPath: string
}
```

Options for initializing the <Vg k="RTEE_NS" /> extension:
- `assetsPath`: The host URL of the .wasm and .js files required by the <Vg k="RTEE_NS" /> extension.

</PlatformWrapper>
<PlatformWrapper platform="ios">
<Reference/>
</PlatformWrapper>

</PlatformWrapper>
</PlatformWrapper>
</PlatformWrapper>
</PlatformWrapper>
</PlatformWrapper>
</PlatformWrapper>

<PlatformWrapper platform="web">
### Considerations

Currently, the <Vg k="RTEE_NS" /> extension has the following limitations:

- If the sample rate of the input signal is not 16 KHz, the extension downsamples the signal to 16 KHz, removes noise, and resamples the output signal to the original sample rate. This means the audio data above 8 KHz is removed in the output signal.
- In some unknown scenarios, the extension could cause audio quality to decrease by a certain degree.
- When multiple people speak at the same time, the audio quality of lowest human voices could be decreased by a certain degree.
- If only some of the audio tracks on the current web page enable the extension, the audio tracks that do not enable the extension could be affected because the extension turns on AEC and AGC and turns off NS in the browser.
- While the extension supports Safari later than 14.1, Agora does not recommend using the extension on Safari because of Safari's performance issues.
- This extension does not support browsers on mobile devices.
</PlatformWrapper>