---
title: "SDK Quickstart"
sidebar_position: 4
platform_selector: false
description: >
  Get started with cloud transcoding with the Go SDK.
---

import Prerequisites from '@docs/shared/cloud-transcoding/prerequisites.mdx'


This guide shows you how to use the Agora Go SDK to create your first cloud transcoding <Vpl k="CLIENT"/>.

## Understand the tech

The Agora Go SDK simplifies integration with Agora's RESTful APIs. It offers the following features:

* **Simplified API communication**: The SDK handles RESTful API requests and responses, reducing boilerplate code.

* **High availability**: Automatically switches domains when network issues occur (e.g., DNS resolution failures, timeouts).

* **Developer-friendly APIs**: Provides intuitive methods for creating and stopping <Vg k="CT"/> tasks.

* **Performance and scalability**: Written in Go, the SDK is fast, concurrent, and scalable.

## Prerequisites

<Prerequisites/>

4. [Go](https://go.dev/dl/) 1.18 or later.


## Project setup

1. Create a project

    1. Create a folder named `test-transcoder`.

    2. Open a terminal, navigate to the folder, and run:

        ```bash
        go mod init test-transcoder
        ```

    3. Inside the folder, create a `main.go` file. You'll add your code here.

2. Install the Go SDK

    Run the following commands to install the <Vg k="COMPANY"/> Go SDK and tidy your dependencies:

    ```bash
    go get -u github.com/AgoraIO-Community/agora-rest-client-go
    go mod tidy
    ```

3. Import dependencies

    Add the following imports to your `main.go` file:

    ```go
    import (
    "context"
    "log"
    "time"

    "github.com/AgoraIO-Community/agora-rest-client-go/agora"
    "github.com/AgoraIO-Community/agora-rest-client-go/agora/auth"
    "github.com/AgoraIO-Community/agora-rest-client-go/agora/domain"
    agoraLogger "github.com/AgoraIO-Community/agora-rest-client-go/agora/log"
    "github.com/AgoraIO-Community/agora-rest-client-go/services/cloudtranscoder"
    cloudTranscoderAPI "github.com/AgoraIO-Community/agora-rest-client-go/services/cloudtranscoder/api"
    )
    ```

## Implement cloud transcoding

This section walks you through creating a simple cloud transcoding task using the Go SDK.

### 1. Define required constants

In `main.go`, define the required constants:

```go
const (
  appId             = "<your_app_id>"
  token             = "<your_token>"
  username          = "<your_customer_key>"
  password          = "<your_customer_secret>"
  inputChannelName  = "show"
  inputUId          = 0
  inputToken        = "<your_token>"
  outputChannelName = "show"
  outputUId         = 0
  outputToken       = "<your_token>"
  instanceId        = "quickstart"
)
```

<Admonition type="info" title="Info">
In this example, the input and output streams use the same channel (`show`) and token for simplicity. All input streams must come from the same channel. Output streams can be sent to one or more channels.
</Admonition>

### 2. Initialize a client

Add the following to create and configure the client:

```go
config := &agora.Config{
  AppID:      appId,
  Credential: auth.NewBasicAuthCredential(username, password),
  DomainArea: domain.CN, // Options: CN, EU, AP, US
  Logger:     agoraLogger.NewDefaultLogger(agoraLogger.DebugLevel),
}

client, err := cloudtranscoder.NewClient(config)
if err != nil {
  log.Fatal(err)
}
```


### 3. Retrieve an authentication token

Before creating a task, call the `Acquire` method to obtain a unique `tokenName`:

```go
acquireResp, err := client.Acquire(context.TODO(), &cloudTranscoderAPI.AcquireReqBody{
  InstanceId: instanceId,
})
if err != nil {
  log.Fatalln(err)
}
if !acquireResp.IsSuccess() {
  log.Fatalf("acquire failed: %+v\n", acquireResp)
}

tokenName := acquireResp.SuccessResp.TokenName
if tokenName == "" {
  log.Fatalln("tokenName is empty")
}

log.Printf("tokenName: %s\n", tokenName)
```

### 4.  Start transcoding

Use the `Create` method to start a task:

```go
createResp, err := client.Create(context.TODO(), tokenName, &cloudTranscoderAPI.CreateReqBody{
  Services: &cloudTranscoderAPI.CreateReqServices{
    CloudTranscoder: &cloudTranscoderAPI.CloudTranscoderPayload{
      ServiceType: "cloudTranscoderV2",
      Config: &cloudTranscoderAPI.CloudTranscoderConfig{
        Transcoder: &cloudTranscoderAPI.CloudTranscoderConfigPayload{
          IdleTimeout: 300,
          AudioInputs: []cloudTranscoderAPI.CloudTranscoderAudioInput{
            {
              Rtc: &cloudTranscoderAPI.CloudTranscoderRtc{
                RtcChannel: inputChannelName,
                RtcUID:     inputUId,
                RtcToken:   inputToken,
              },
            },
          },
          Outputs: []cloudTranscoderAPI.CloudTranscoderOutput{
            {
              Rtc: &cloudTranscoderAPI.CloudTranscoderRtc{
                RtcChannel: outputChannelName,
                RtcUID:     outputUId,
                RtcToken:   outputToken,
              },
              AudioOption: &cloudTranscoderAPI.CloudTranscoderOutputAudioOption{
                ProfileType: "AUDIO_PROFILE_MUSIC_STANDARD",
              },
            },
          },
        },
      },
    },
  },
})
if err != nil {
  log.Fatalln(err)
}
if !createResp.IsSuccess() {
  log.Fatalf("create failed: %+v\n", createResp)
}

taskId := createResp.SuccessResp.TaskID
if taskId == "" {
  log.Fatalln("taskId is empty")
}

log.Printf("taskId: %s\n", taskId)

// Optional: Wait for a short period before stopping
time.Sleep(10 * time.Second)
```

### 5. Stop transcoding

Use the `Delete` method to stop the task:

```go
deleteResp, err := client.Delete(context.TODO(), taskId, tokenName)
if err != nil {
  log.Println(err)
  return
}
if deleteResp.IsSuccess() {
  log.Printf("delete success: %+v\n", deleteResp)
} else {
  log.Printf("delete failed: %+v\n", deleteResp)
}
```

## Reference

This section contains content that completes the information on this page, or points you to documentation that explains other aspects to this product.

### Complete code example

<details>
<summary>main.go</summary>
```go
package main

import (
	"context"
	"log"
	"time"

	"github.com/AgoraIO-Community/agora-rest-client-go/agora"
	"github.com/AgoraIO-Community/agora-rest-client-go/agora/auth"
	"github.com/AgoraIO-Community/agora-rest-client-go/agora/domain"
	agoraLogger "github.com/AgoraIO-Community/agora-rest-client-go/agora/log"
	"github.com/AgoraIO-Community/agora-rest-client-go/services/cloudtranscoder"
	cloudTranscoderAPI "github.com/AgoraIO-Community/agora-rest-client-go/services/cloudtranscoder/api"
)

const (
	appId             = "<your_app_id>"
	token             = "<your_token>"
	username          = "<your_customer_key>"
	password          = "<your_customer_secret>"
	inputChannelName  = "show"
	inputUId          = 0
	inputToken        = "<your_token>"
	outputChannelName = "show"
	outputUId         = 0
	outputToken       = "<your_token>"
	instanceId        = "quickstart"
)

func main() {
	config := &agora.Config{
		AppID:      appId,
		Credential: auth.NewBasicAuthCredential(username, password),
		DomainArea: domain.CN,
		Logger:     agoraLogger.NewDefaultLogger(agoraLogger.DebugLevel),
	}

	client, err := cloudtranscoder.NewClient(config)
	if err != nil {
		log.Fatal(err)
	}

	acquireResp, err := client.Acquire(context.TODO(), &cloudTranscoderAPI.AcquireReqBody{
		InstanceId: instanceId,
	})
	if err != nil || !acquireResp.IsSuccess() {
		log.Fatalf("acquire failed: %+v\n", acquireResp)
	}
	tokenName := acquireResp.SuccessResp.TokenName

	createResp, err := client.Create(context.TODO(), tokenName, &cloudTranscoderAPI.CreateReqBody{
		Services: &cloudTranscoderAPI.CreateReqServices{
			CloudTranscoder: &cloudTranscoderAPI.CloudTranscoderPayload{
				ServiceType: "cloudTranscoderV2",
				Config: &cloudTranscoderAPI.CloudTranscoderConfig{
					Transcoder: &cloudTranscoderAPI.CloudTranscoderConfigPayload{
						IdleTimeout: 300,
						AudioInputs: []cloudTranscoderAPI.CloudTranscoderAudioInput{
							{
								Rtc: &cloudTranscoderAPI.CloudTranscoderRtc{
									RtcChannel: inputChannelName,
									RtcUID:     inputUId,
									RtcToken:   inputToken,
								},
							},
						},
						Outputs: []cloudTranscoderAPI.CloudTranscoderOutput{
							{
								Rtc: &cloudTranscoderAPI.CloudTranscoderRtc{
									RtcChannel: outputChannelName,
									RtcUID:     outputUId,
									RtcToken:   outputToken,
								},
								AudioOption: &cloudTranscoderAPI.CloudTranscoderOutputAudioOption{
									ProfileType: "AUDIO_PROFILE_MUSIC_STANDARD",
								},
							},
						},
					},
				},
			},
		},
	})
	if err != nil || !createResp.IsSuccess() {
		log.Fatalf("create failed: %+v\n", createResp)
	}

	taskId := createResp.SuccessResp.TaskID
	time.Sleep(10 * time.Second)

	deleteResp, err := client.Delete(context.TODO(), taskId, tokenName)
	if err != nil || !deleteResp.IsSuccess() {
		log.Printf("delete failed: %+v\n", deleteResp)
	} else {
		log.Printf("delete success: %+v\n", deleteResp)
	}
}
```
</details>

