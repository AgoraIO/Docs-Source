
This document describes how to push streams to an RTMP gateway using the SRT protocol.

## Understand the tech

SRT is an open source protocol developed by Haivision and promoted by the SRT Alliance to provide secure, high quality, low latency video streaming. Compared to RTMP, SRT is more suitable for live streaming under weak network conditions.

When using the SRT protocol to push streams to an RTMP gateway, the supported codecs include:

- Video: H.264, H.265 
- Audio: AAC, OPUS

## Configure the SRT protocol push flow with OBS

![Configure SRT Protocol Push Flow with OBS](/images/media-gateway/config-srt-protocol-push-flow-with-obs.png)

In the Server column, fill in the streaming domain name in the format of **srt://\{streaming domain name\}:6001**. You can use the <Vg k="COMPANY" /> unified domain name or bind your own domain name.
 
- If you use the domain name of <Vg k="COMPANY" />, you need to fill in **srtlive-rtcpush-prod-\{region\}.agoramdn.com**. The \{region\} field needs to be filled in according to the actual region. The supported regions are as follows:
   - cn: Mainland China
   - ap: Asia except mainland China 
   - na: North America 
   - eu: Europe

    If you use your own domain name, please contact <Vg k="COMPANY" /> technical support for configuration. You can use it only after the configuration is successful.

Enter the streaming code in the **Streaming Code** column.

<Admonition type="info">
If you use your own domain name, in addition to filling in the custom domain name in the server column, you also need to add relevant parameters in the streaming code column, in the format of \{streaming code\}?h=\{streaming domain name\}.

This is because the srt protocol itself does not transmit domain name information to the server, so it needs to be carried in through parameters.
</Admonition>

## Configure SRT Protocol Streaming with ffmpeg

Use the unified domain name of <Vg k="COMPANY" />:

  ```
  ffmpeg -re -i input.mp4 -c copy -f mpegts 'srt://srtlive-rtcpush-prod-{region}.agoramdn.com:6001?streamid={streamkey}'
  ```

Use a custom domain name (for example, example.com):

  ```
  ffmpeg -re -i input.mp4 -c copy -f mpegts 'srt://example.com:6001?streamid=#!::r={streamkey},h=example.com'
  ```
