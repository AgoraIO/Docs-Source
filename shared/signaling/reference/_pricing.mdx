

## How <Vg k="SIG" /> usage is measured

<Vg k="SIG" /> is priced based on the total number of messages, peak connections, and storage usage of your account in a calendar month. 

### Number of messages

The measurement rules for the number of messages sent and received are as follows:

* Any 1 message published in the Message Channel counts as 1 message
* Any 1 message received in the Message Channel counts as 1 message. 

For example, if a client sends 1 message to a Message Channel, and the channel is subscribed by 10 people, it is counted as 1 sent message and 10 received messages, for a total of 11 messages.

* Any 1 message published in a Topic in the Stream Channel counts as 1 message.
* Any 1 message received in a Topic in the Stream Channel counts as 1 message. 

For example, if a client sends a message to a Topic in the Stream Channel, and this Topic is subscribed by 10 people, it is counted as 1 sent message and 10 received messages, for a total of 11 messages.

<Admonition type="info" title="Note"> Even if message filtering is enabled on the client, it does not have any impact on message metering. The client-side message filtering function is only for the convenience of developers, and the messages are actually delivered.<ul><li>The asynchronous callback generated by publishing a message in the Message Channel or Stream Channel is not counted in the number of messages.</li> <li>Messages sent using the RESTful API are also counted as messages.</li>
<li>If a client does not subscribe to a channel or topic, it does not receive any messages.</li></ul></Admonition>

### Presence
Each Presence event notification published is counted as one message, such as the client’s entry into the channel, leaving the channel, timeout notification, and status change notification.
Each Presence event notification received in the channel counts as one message. For example, if a client enters a channel, and 10 other clients subscribe to the channel and listen to the Presence event notifications in the channel, then this counts as 1 sent Presence event notification, and the remaining 10 clients receive a total of 10 presence event notifications. That is a total of 11 messages.

<Admonition type="info" title="Note"><ul><li>The client message filtering function has no impact on the presence event notification count.</li><li>If a client does not want to send the Presence event when joining the Stream Channel or subscribing to the Message Channel, setting `withPresence` to `false` does not affect the calculation of the number of messages.</li><li>If a client does not join a Stream Channel or subscribe to a Message Channel, it does not receive the Presence event notification of the channel.</li></ul></Admonition>

### Storage
Setting, querying, updating, and deleting any piece of Channel Metadata in the Message Channel or Stream Channel is counted as 1 message.
Any 1 Channel Metadata change event notification received in a Message Channel or Stream Channel is counted as 1 message. For example, if a client sets 1 Channel Metadata on a channel, the channel is subscribed by 10 people, and these users listen to the Channel Metadata change notification, it is deemed that 1 message has been published and 10 messages have been received, for a total of 11 messages. 

Setting, querying, updating, and deleting any piece of User Metadata is counted as 1 message.
Receiving 1 change notification of User Metadata is counted as 1 message. For example, if the client sets 1 User Metadata for a user, and the User Metadata is subscribed by 10 people, it is deemed that 1 message has been published and 10 messages have been received, for a total of 11 messages.

<Admonition type="info" title="Note">Client message filtering has no impact on Channel Metadata or User Metadata change notification counts. The client message filtering settings are as follows:<ul><li>Set `withMetadata` to `false` if the client does not want to receive Channel Metadata or User Metadata change notifications when joining a Stream Channel or subscribing to a Message Channel.</li><li>If a client does not join the Stream Channel or subscribe to a Message Channel, it does not receive the Channel Metadata change notification of the channel.</li><li>If the client does not subscribe to other users’ User Metadata, it will not receive other users’ User Metadata change notifications.</li></ul></Admonition>

### Locks
Any operations such as lock setting, query, release, deprivation, and deletion are counted as 1 message.
Any 1 lock change event notification received in a Message Channel or Stream Channel is counted as one message. For example, if the client sets a lock on a channel, and the channel is subscribed by 10 people, and these users listen to the lock change notification, it is regarded as publishing 1 message and receiving 10 messages, for a total of 11 messages.

<Admonition type="info" title="Note">In <Vg k="SIG" />, a message is calculated in 1 KB. Therefore, if you send a message package with a size of 10 KB to a channel or Topic subscribed by 100 people, it will be counted as 10 inbound messages and 1,000 outbound messages to give a total of 1,010 messages.</Admonition>

### Storage occupancy

Storage in <Vg k="SIG" /> generates cloud storage occupancy. <Vg k="SIG" /> measures the total storage occupancy, and bills the amount for the month by sampling the customer's actual cloud storage occupancy at 1-hour intervals in a natural month and then accumulating them. The calculation formula is as follows:

![Signaling storage calculation formula](/images/signaling/signaling-storage-calculation-formula.png)

### Peak connections

The number of peak connections is the maximum number of real-time clients simultaneously connected to <Vg k="SIG" /> at any point in a calendar month. For example, if you have 10,000 customers, and a maximum of 500 clients connect to <Vg k="SIG" /> simultaneously in a given month, the PCU value is 500. This means you only pay for 500 peak connections. The total number of clients or devices connected to <Vg k="SIG" /> in a month does not affect billing.