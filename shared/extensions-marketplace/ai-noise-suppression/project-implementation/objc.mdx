

1. Refer to the [Use an Extension](../develop/use-an-extension#project-setup) to see how to integrate the  <Vg k="RTEE_NS" /> extension in your project.

2. Enable the <Vg k="RTEE_NS" /> feature.

    In `ViewController` class, add the following line in `initializeAgoraEngine` after `config.appId = appID`:

    ```swift
    agoraEngine.setParameters("{\"che.audio.enable.nsng\":true}")
    ```

3. Set the <Vg k="RTEE_NS" /> mode:

    To set the mode of the <Vg k="RTEE_NS" /> feature to hybrid mode('2'), which uses both the traditional and deep-learning noise reduction, add the following code before `agoraEngine = AgoraRtcEngineKit.sharedEngine(with: config, delegate: self)`. Optionally, pass in '1' instead of '2' to change the mode to use deep-learning noise reduction only. To disable the deep-learning noise reduction, pass in '0'.

    ```swift
    agoraEngine.setParameters("{\"che.audio.ns.mode\":2}")
    ```

4. Dump audio data from the noise reduction process

    Best practice is to dump audio data, this significantly improves the efficiency of troubleshooting. The <Vg k="RTEE_NS" /> extension dumps an audio file in the WAV format in a specified path.

     1. To dump an audio file, set the following parameters before `agoraEngine = AgoraRtcEngineKit.sharedEngine(with: config, delegate: self)`:
        ```swift
        agoraEngine.setParameters("{\"che.audio.start_debug_recording\":\"folder_path\"}")
        ```

    2. To stop dumping the audio file, add these parameters after `agoraEngine.setParameters("{\"che.audio.start_debug_recording\":\"folder_path\"}")`:
    ```swift
    agoraEngine.setParameters("{\"che.audio.stop_debug_recording\":true}")
    ```

5. Enable <Vg k="RTEE_NS" /> with the custom strategy

    The default noise reduction effect is _soft_. To flexibly adjust the noise reduction effect, you can additionally change the following parameters before joining a channel:
    - lowerBound: The limit of noise suppression gain mapping index. The default value is 80.
    - lowerMask: The limit of noise suppression gain mapping value. The default value is 50.
    - statisticalbound: The limit of statistical noise suppression gain. The default value is 5.
    - finallowermask: The gain limit of the whole noise suppression framework. The default value is 30.

    To make the reduction effect more aggressive than the default values, set lower than default value parameters before `agoraEngine = AgoraRtcEngineKit.sharedEngine(with: config, delegate: self)`:
        ```swift
        agoraEngine.setParameters("{\"che.audio.nsng.lowerBound\":10}")
        agoraEngine.setParameters("{\"che.audio.nsng.lowerMask\":10}")
        agoraEngine.setParameters("{\"che.audio.nsng.statisticalbound\":0}")
        agoraEngine.setParameters("{\"che.audio.nsng.finallowermask\":10}")
        ```
