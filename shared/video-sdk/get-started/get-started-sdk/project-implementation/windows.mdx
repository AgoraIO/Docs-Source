<PlatformWrapper platform="windows">

### Implement the user interface

In the interface, create windows for local and remote video, and add buttons to join and leave a channel. To create this UI, take the following steps:

   1. **Create the required variables**
   
    To create windows for the local and remote view, you use the `CWnd` class. To add buttons to the UI, you use the `CButton` class. To specify objects of these classe, in **Solution Explorer**, open the **Source Files** folder and then open the `AgoraImplementationDlg.cpp` file. In the file, add the following before `class CAboutDlg : public CDialogEx`:

    ```cpp
    CWnd RemoteView;
    CWnd LocalView;
    CButton joinButton;
    CButton leaveButton;
    ```

    2. **Add the UI elements to the UI**
    
    In `AgoraImplementationDlg.cpp`, locate the `OnInitDialog` function definition and add the following contents before `return true;`:

    ```cpp
	RemoteView.Create(NULL,NULL, WS_CHILD | WS_VISIBLE,
		CRect(0, 0, 20, 20), this, 1234);
	RemoteView.MoveWindow(800, 300, 350, 350, TRUE);

	LocalView.Create(NULL, NULL , WS_CHILD | WS_VISIBLE,
		CRect(0, 0, 20, 20), this, 12345);
	LocalView.MoveWindow(300, 300, 350, 350, TRUE);


	joinButton.Create(_T("Join"), WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,
		CRect(10, 10, 100, 30), this, 1);
	joinButton.MoveWindow(500, 700, 200, 50, TRUE);

	leaveButton.Create(_T("Leave"), WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,
		CRect(10, 10, 100, 30), this, 2);
	leaveButton.MoveWindow(250, 700, 200, 50, TRUE);
    ```

The UI looks like: 

![image](/images/video-sdk/Quick-start-window-UI.png)

### Implement the  <Vpd k="PRODUCT" /> logic


1. **Import the Video SDK classes**
    
    In `AgoraImplementationDlg.cpp`, add the following to the list of header files:

    ```cpp
    #include "IAgoraRtcEngine.h"
    ```

1. **Specify the Agora namespaces**
    
    In `AgoraImplementationDlg.cpp`, add the following namespace declarations after `#include "IAgoraRtcEngine.h"`

    ```cpp
    #pragma comment(lib, "agora_rtc_sdk.dll.lib")
    using namespace agora;
    using namespace agora::rtc;
    ```

1. **Add the required variables**

    In `AgoraImplementationDlg.cpp`, add the following declarations after `CButton leaveButton;`:

    ```cpp
    IRtcEngine* agoraEngine = nullptr;
    CHAR appID[] = "0cc8ea75bf504ed08d3e8f5ef3c371bf";
    CHAR Token[] = "";
    CHAR Channel[] = "";
    ```
1. **Setup the Agora Video SDK**

   When the user launches this application, you call `InitAgoraEngine` to create and initialize an instance of Video SDK. To setup an engine instance of Video SDK, do the following:

    1. In `AgoraImplementationDlg.h`, add the following code after `afx_msg void OnPaint()`:
      
      ```cpp
      	void InitAgoraEngine();
      ```
    1. In `AgoraImplementationDlg.cpp`, add the following before `void AgoraImplementationDlg::OnPaint()`
      
      ```cpp
      void CAgoraImplementationDlg::InitAgoraEngine()
      {
        AgoraEngineEventHandler m_eventHandler;
        agoraEngine = createAgoraRtcEngine();
        RtcEngineContext context;
        std::string strAppID = "0cc8ea75bf504ed08d3e8f5ef3c371bf";
        context.appId = strAppID.c_str();
        context.eventHandler = &m_eventHandler;
        //set channel profile in the engine to the CHANNEL_PROFILE_LIVE_BROADCASTING.
        context.channelProfile = CHANNEL_PROFILE_LIVE_BROADCASTING;
        //initialize the Agora RTC engine context.
        agoraEngine->initialize(context);
      }
      ```
1. **Setup an event handler to receive callbacks**

   <Vg k = "COMPANY"/> video SDK provides `IRtcEngineEventHandler` to implement callback functions. To setup an event handler, add the following to `AgoraImplementationDlg.cpp`:

   ```cpp
    class AgoraEngineEventHandler: public IRtcEngineEventHandler
    {
    };
    ```
    
1. **Set the local video view**

   When the user successfully joins a channel, <Vg k = "VSDK"/> triggers `onJoinChannelSuccess`. You catch this callback and setup the local video view to display the local video. To implement this callback in your <Vg k = "CLIENT"/>, in `AgoraImplementationDlg.cpp`, add the following code to the `AgoraEngineEventHandler` class:

   ```cpp
   public:
	virtual void onJoinChannelSuccess(const char* channel, uid_t uid, int elapsed) override
	{
		//start preview in the engine.
		agoraEngine->startPreview();
		VideoCanvas canvas;
		canvas.renderMode = media::base::RENDER_MODE_FIT;
		canvas.uid = 0;
		canvas.view = LocalView.GetSafeHwnd();
		//setup local video in the engine to the canvas. 
		agoraEngine->setupLocalVideo(canvas);
	}
   ```

1. **Setup the remote video view**
   
   When a remote user joins the channel, <Vg k = "VSDK"/> triggers `onUserJoined`. You catch this callback and retrieve the remote user ID and display the remote video. To Implement this workflow, in `AgoraImplementationDlg.cpp`, add the following code to the `AgoraEngineEventHandler` class after `onJoinChannelSuccess`:

   ```cpp
   virtual void onUserJoined(uid_t uid, int elapsed) override
	{
		VideoCanvas canvas;
		canvas.uid = uid;
		canvas.view = RemoteView.GetSafeHwnd();
		agoraEngine->setupRemoteVideo(canvas);
	}
   ```

4. **Join the channel to start <Vpd k = "PRODUCT"/>**

   When the user presses **Join**, you <Vg k = "CLIENT"/> listens to the button click event and calls `OnBnClickedButtonJoinchannel` to join the channel. To implement this workflow, take the following steps:

    1. Declare the `OnBnClickedButtonJoinchannel` function. In `AgoraImplementationDlg.h`, add the following before `#ifdef AFX_DESIGN_TIME`;`
   
    ```cpp
   	afx_msg void OnBnClickedButtonJoinchannel();
    ```

    1. Give the definition of the `OnBnClickedButtonJoinchannel` function. In `AgoraImplementationDlg.cpp`, add the following code before `void AgoraImplementationDlg::OnPaint()`:

    ```cpp
    void CAgoraImplementationDlg::OnBnClickedButtonJoinchannel()
    {
        //enable video in the engine.
        agoraEngine->enableVideo();
        // Join te channel.
        agoraEngine->joinChannel(Token, Channel, NULL, 0);
    }
    ```

6. **Leave the channel**

   When the user presses **Leave**, you <Vg k = "CLIENT"/> listens to the button click event and calls `OnBnClickedButtonLeaveChannel` to leave the channel. To implement this workflow, take the following steps:

    1. Declare the `OnBnClickedButtonLeaveChannel` function. In `AgoraImplementationDlg.h`, add the following before `#ifdef AFX_DESIGN_TIME`;`
   
    ```cpp
   	afx_msg void OnBnClickedButtonLeaveChannel();
    ```

    1. Give the definition of the `OnBnClickedButtonLeaveChannel` function. In `AgoraImplementationDlg.cpp`, add the following code before `void AgoraImplementationDlg::OnPaint()`:

    ```cpp
    void CAgoraImplementationDlg::OnBnClickedButtonLeaveChannel()
    {
        if(agoraEngine != NULL)
           // Release the IRtcEngine object.
           agoraEngine->release();
        agoraEngine = NULL;
    }
    ```
</PlatformWrapper>