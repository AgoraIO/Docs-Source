<PlatformWrapper platform="react-native">

You can use extended fields to implement customized push settings, collapse the notification bar, force push, and send silent messages.

## Set custom push fields

When creating a push message, you can add custom fields to the message to meet personalized business needs.

```typescript
msg.attributes = {
  // Message extension fields.
   "em_push_ext": {
        "custom": {
            "key1": "value1",
            "key2": "value2"
        }
    },
};
```

The data structure of the custom field is as follows:

```json
{
    "em_push_ext": {
        "custom": {
            "key1": "value1",
            "key2": "value2"
        }
    }
}
```

| Parameters              | Description                |
| :--------------- | :----------------- |
|  ` em_push_ext` | Agora message push extension fixed value, cannot be modified .     |
|  ` custom `          | Message extension, use the extension method to add custom fields to the push, the value is fixed. |
|  ` key1 ` / ` key2 `     | Customize the specific content of the message push extension. |

## Set certain group members to receive push notifications

In offline push do not disturb mode, if you want only certain group members to receive offline push notifications when sending messages in a group, you can achieve this by setting the message extension field.

```typescript
msg.attributes = {
  em_apns_ext: {
     "em_at_list": "All"
    },
};
```

The data structure of this extension field is as follows:

```json
{
    "em_apns_ext": {
        "em_at_list": "All"
    }
}
```

| Parameters              | Description                |
| :--------------- | :----------------- |
|  ` em_apns_ext` |     Built -in message extension fields. |
|  ` em_at_list` |           Built-in extension field key, the corresponding value is an array type, indicating the user ID of the group member who receives the push notification. Setting it to ` All` means pushing the notification to all group members   . |

## Set the notification bar to collapse

You can collapse multiple messages in the notification bar. The sample code is as follows:

```typescript
msg.attributes = {
  em_apns_ext: {
    em_push_collapse_key: "collapseKey",
  },
};
```

The data structure of the notification bar collapse field is as follows:

```json
{
    "em_apns_ext": {
        "em_push_collapse_key": "collapseKey"
    }
}
```

| Parameters              | Description                |
| :--------------- | :----------------- |
|  ` em_apns_ext` |     Built -in message extension fields.   |
|  ` em_push_collapse_key `    | Specifies a set of messages that can be collapsed (e.g. with collapse_key: "Updates Available") so that only the last message is sent when delivery is resumed, thus avoiding sending too many identical messages when the device comes back online or becomes active.    |

### Force Push

After setting up forced push, the user will ignore the recipient's do not disturb setting when sending messages, and the message will be pushed to the recipient normally regardless of whether it is in the do not disturb time period.

```typescript
// The following takes text messages as an example. The setting methods for other types of messages are the same.
msg.attributes = {
  // Whether to force push. This field is a built-in field, and the values ​​are as follows: `true`: forced push; (default) `false`: non-forced push.
  em_force_notification: true,
};
```

### Send a silent message

Sending silent messages means that the sender sets the message not to be pushed when sending a message. That is, when the user is offline, the IM service will not push message notifications to the user's device through the third-party vendor's message push service. Therefore, the user will not receive message push notifications. When the user goes online again, he will receive all the messages during the offline period.

Both silent message sending and do not disturb mode do not push messages. The difference is that silent message sending is set by the sender when sending the message, while do not disturb mode is set by the receiver not to receive push notifications within a specified time period.

```typescript
// The following takes text messages as an example. The setting methods for other types of messages are the same.
msg.attributes = {
  // Whether to send a silent message. This field is a built-in field, and the values ​​are as follows: `true`: send a silent message; (default) `false`: push the message.
  em_ignore_notification: true,
};
```

</PlatformWrapper>