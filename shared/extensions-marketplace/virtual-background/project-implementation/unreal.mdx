<PlatformWrapper platform='unreal'>

This section explains how to add a virtual background to the local video.

### Set a blurred background

To blur the video background, use the following code:

```cpp
void UMyUserWidget::SetBackgroundBlur(VirtualBackgroundSource& virtualBackgroundSource)
{
    VirtualBackgroundSource virtualBackgroundSource;
    SegmentationProperty segmentationProperty;

    // Set background blur
    virtualBackgroundSource.background_source_type = VirtualBackgroundSource::BACKGROUND_BLUR;
    virtualBackgroundSource.blur_degree = VirtualBackgroundSource::BACKGROUND_BLUR_DEGREE::BLUR_DEGREE_HIGH;

    // Set processing properties for background
    segmentationProperty.modelType = SegmentationProperty::SEG_MODEL_AI;
    segmentationProperty.greenCapacity = 0.5F;

    // Disable virtual background
    agoraEngine->enableVirtualBackground(false, virtualBackgroundSource, segmentationProperty);
    UE_LOG(LogTemp, Log, TEXT("Color background enabled"));

    UE_LOG(LogTemp, Log, TEXT("Blur background enabled"));
}
```

### Set a color background

To apply a solid color as the virtual background, use a hexadecimal color code. For example, `0x0000FF` for blue:

```cpp
void UMyUserWidget::SetBackgroundColor(VirtualBackgroundSource& virtualBackgroundSource)
{
    VirtualBackgroundSource virtualBackgroundSource;
    SegmentationProperty segmentationProperty;

    // Set a solid background color
    virtualBackgroundSource.background_source_type = VirtualBackgroundSource::BACKGROUND_COLOR;
    virtualBackgroundSource.color = 0x0000FF;
    
    // Set processing properties for background
    segmentationProperty.modelType = SegmentationProperty::SEG_MODEL_AI;
    segmentationProperty.greenCapacity = 0.5F;

    // Disable virtual background
    agoraEngine->enableVirtualBackground(false, virtualBackgroundSource, segmentationProperty);
    UE_LOG(LogTemp, Log, TEXT("Color background enabled"));
}
```

### Set an image background

To set a custom image as the virtual background, specify the absolute path to the image file.

```cpp
void UMyUserWidget::SetBackgroundImage(VirtualBackgroundSource& virtualBackgroundSource)
{
    VirtualBackgroundSource virtualBackgroundSource;
    SegmentationProperty segmentationProperty;

    // Set a background image
    virtualBackgroundSource.background_source_type = VirtualBackgroundSource::BACKGROUND_IMG;
    virtualBackgroundSource.source = "<absolute path to an image file>";

    // Set processing properties for background
    segmentationProperty.modelType = SegmentationProperty::SEG_MODEL_AI;
    segmentationProperty.greenCapacity = 0.5F;

    // Disable virtual background
    agoraEngine->enableVirtualBackground(false, virtualBackgroundSource, segmentationProperty);
    UE_LOG(LogTemp, Log, TEXT("Image background enabled"));
}
```

### Reset the background

To disable the virtual background and revert to the original video state, use the following code:


```cpp
void UMyUserWidget::ResetVirtualBackground()
{
    // Set a default or reset state for the virtual background
    VirtualBackgroundSource virtualBackgroundSource;
    SegmentationProperty segmentationProperty;

    // For example, setting a default background color
    virtualBackgroundSource.background_source_type = VirtualBackgroundSource::BACKGROUND_COLOR;
    virtualBackgroundSource.color = 0xFFFFFF;

    // Set processing properties for background
    segmentationProperty.modelType = SegmentationProperty::SEG_MODEL_AI;
    segmentationProperty.greenCapacity = 0.5F;

    // Disable virtual background
    agoraEngine->enableVirtualBackground(false, virtualBackgroundSource, segmentationProperty);
}
```

</PlatformWrapper>