<PlatformWrapper platform="unity">


1. **Define variables to manage audio effects and access the UI elements**

    In your script file, add the following declarations to `NewBehaviourScript`:

    ```csharp
    internal int soundEffectId = 1; // Unique identifier for the sound effect file
    internal int soundEffectStatus = 0;
    internal int voiceEffectIndex = 0;
    internal bool audioPlaying = false; // Manage the audio mixing state
    internal bool isChecked = false;
    ```

1. **Enable the user to start and stop audio mixing**
                
    ```csharp
    public void StartAudioMixing(TMP_Text audioMixingBtnText)
    {
        audioPlaying = !audioPlaying;
        if (audioPlaying) {
            audioMixingBtnText.text = "Stop Audio File";
            agoraEngine.StartAudioMixing(configData.audioFilePath, false, -1);
        }
        else {
            agoraEngine.StopAudioMixing();
            audioMixingBtnText.text = "Play Audio";
        }
    }
    ```

1. **Pre-load sound effects and set an audio profile**

    ```csharp
    public override void SetupAgoraEngine()
    {
        base.SetupAgoraEngine();

        // Pre-load sound effects to improve performance
        agoraEngine.PreloadEffect(soundEffectId, configData.soundEffectFilePath);

        // Specify the audio scenario and audio profile
        agoraEngine.SetAudioProfile(AUDIO_PROFILE_TYPE.AUDIO_PROFILE_DEFAULT, AUDIO_SCENARIO_TYPE.AUDIO_SCENARIO_CHATROOM);

        // Specify the audio scenario and audio profile
        RtcEngine.SetAudioProfile(AUDIO_PROFILE_TYPE.AUDIO_PROFILE_DEFAULT, AUDIO_SCENARIO_TYPE.AUDIO_SCENARIO_CHATROOM);
    }
    ```

1. **Play, pause, or resume playing the sound effect**

    ```csharp
    public void PlaySoundEffect(TMP_Text playEffectBtnText)
    {
        if (soundEffectStatus == 0)
        { // Stopped
            agoraEngine.PlayEffect(
                    soundEffectId,   // The ID of the sound effect file.
                    configData.soundEffectFilePath,   // The path of the sound effect file.
                    0,  // The number of sound effect loops. -1 means an infinite loop. 0 means once.
                    1,   // The pitch of the audio effect. 1 represents the original pitch.
                    0.0, // The spatial position of the audio effect. 0.0 represents that the audio effect plays in the front.
                    100, // The volume of the audio effect. 100 represents the original volume.
                    true,// Whether to publish the audio effect to remote users.
                    0    // The playback starting position of the audio effect file in ms.
            );
            playEffectBtnText.text = "Pause Sound Effect";
            soundEffectStatus = 1;
        }
        else if (soundEffectStatus == 1)
        {   // Playing
            agoraEngine.PauseEffect(soundEffectId);
            soundEffectStatus = 2;
            playEffectBtnText.text = "Resume Sound Effect";
        }
        else if (soundEffectStatus == 2)
        {   // Paused
            agoraEngine.ResumeEffect(soundEffectId);
            soundEffectStatus = 1;
            playEffectBtnText.text = "Pause Sound Effect";
        }
    }
    ```

1. **Apply various voice and audio effects**

    ```csharp
    public void ApplyVoiceEffect(TMP_Text voiceEffectBtnText)
    {
        voiceEffectIndex++;
        // Turn off all previous effects
        agoraEngine.SetVoiceBeautifierPreset(VOICE_BEAUTIFIER_PRESET.VOICE_BEAUTIFIER_OFF);
        agoraEngine.SetAudioEffectPreset(AUDIO_EFFECT_PRESET.AUDIO_EFFECT_OFF);
        agoraEngine.SetVoiceConversionPreset(VOICE_CONVERSION_PRESET.VOICE_CONVERSION_OFF);

        if (voiceEffectIndex == 1)
        {
            agoraEngine.SetVoiceBeautifierPreset(VOICE_BEAUTIFIER_PRESET.CHAT_BEAUTIFIER_MAGNETIC);
            voiceEffectBtnText.text = "Effect: Chat Beautifier";
        }
        else if (voiceEffectIndex == 2)
        {
            agoraEngine.SetVoiceBeautifierPreset(VOICE_BEAUTIFIER_PRESET.SINGING_BEAUTIFIER);
            voiceEffectBtnText.text = "Effect: Singing Beautifier";
        }
        else if (voiceEffectIndex == 3)
        {
            agoraEngine.SetAudioEffectPreset(AUDIO_EFFECT_PRESET.VOICE_CHANGER_EFFECT_HULK);
            voiceEffectBtnText.text = "Effect: Hulk";
        }
        else if (voiceEffectIndex == 4)
        {
            agoraEngine.SetVoiceConversionPreset(VOICE_CONVERSION_PRESET.VOICE_CHANGER_BASS);
            voiceEffectBtnText.text = "Effect: Voice Changer";
        }
        else if (voiceEffectIndex == 5)
        {
            // Sets the local voice equalization.
            // The first parameter sets the band frequency. The value ranges between 0 and 9.
            // Each value represents the center frequency of the band: 
            // 31, 62, 125, 250, 500, 1k, 2k, 4k, 8k, and 16k Hz.
            // The second parameter sets the gain of each band between -15 and 15 dB.
            // The default value is 0.
            agoraEngine.SetLocalVoiceEqualization(AUDIO_EQUALIZATION_BAND_FREQUENCY.AUDIO_EQUALIZATION_BAND_31, 3);
            agoraEngine.SetLocalVoicePitch(0.5);
            voiceEffectBtnText.text = "Effect: Voice Equalization";
        }
        else if (voiceEffectIndex > 5)
        { // Remove all effects
            voiceEffectIndex = 0;
            agoraEngine.SetLocalVoicePitch(1.0);
            agoraEngine.SetLocalVoiceEqualization(AUDIO_EQUALIZATION_BAND_FREQUENCY.AUDIO_EQUALIZATION_BAND_31, 3);
            voiceEffectBtnText.text = "Apply Voice Effect";
        }
    }
    ```

1. **Set the audio route**

    ```csharp
    public void playbackSpeaker(bool value)
    {
        RtcEngine.SetDefaultAudioRouteToSpeakerphone(false); // Disables the default audio route.
        RtcEngine.SetEnableSpeakerphone(value); // Enables or disables the speakerphone temporarily.
    }
    ```

</PlatformWrapper>
