import NotAvailable from '@docs/shared/common/not-available.mdx'

<PlatformWrapper platform="web">
Preloading channels allows viewers to see the picture in the shortest possible time when joining a channel, without an obvious loading process.

The following diagram illustrates the best practice when preloading channels:

![preload channels best practice](/images/video-sdk/preload-channels-best-practice.png)

## Implementation

Follow these steps to implement chanel preloading:

1. Preload channel list

    On the channel list page, preload the channels within the user's view area with the `preload` method.

        - If the total number of channels does not exceed 10, preload all channels.
        - If the total number of channels exceeds 10, preload only the first 10 channels. If the user scrolls the channel list, then when the scrolling stops preload the new channels in the user's view area.

    The `token` parameter of the `preload` method can use a [wildcard token](../get-started/authentication-workflow#generate-wildcard-tokens) to speed up the subsequent joining of the channel.

1. Preload individual channels

    Implement preloading for different mouse interactions:

    - Before entering the channel

        When a user hovers over the channel, it is recommended that they join it and subscribe to audio and video before entering. The specific operations include the following:

        - Call `join` to join the channel and subscribe to the host's audio and video streams.
        - Render the video in advance in a small preview window.

        The `token` parameter of the `join` method can use a [wildcard token](../get-started/authentication-workflow#generate-wildcard-tokens) to speed up joining the channel.

    - Entering the channel

        In order to reduce the time it takes to render the first frame of the host's video, you can enable sending the host's media stream to the Agora backend when a user enters the channel. To use this function, [contact technical support](mailto:support@agora.io). The following table compares the steps from when a user enters the channel to when the host's media stream is rendered, before and after enabling this function:

        | Before | After |
        |---|---|
        |<ol><li>The user joins the channel.</li><li>The channel sends the host/media information.</li><li>The user subscribes to the media stream in the channel.</li><li>The Agora backend starts sending the media stream in the channel.</li><li>The user waits for the Agora backend to send the media stream, receives it, and renders it locally.</li></ol>|<ol><li>The user joins the channel.</li><li>The Agora backend immediately sends the media stream in the channel.</li><li>The channel sends the host/media information.</li><li>After the user subscribes to the media stream, they can immediately receive and render the media stream locally.</li></ol>|

        ![first-frame-rendring](/images/video-sdk/first-frame-rendering.png)

        <Admonition type="info" title="Note">Since media streams are sent when joining a channel, additional fees will be incurred.</Admonition>

        When a user clicks on the channel in the list, the recommended actions are as follows:

            - Switch the app interface from the channel list page to the single channel page. It is recommended that you add a page switching animation.
            - Call `IRemoteAudioTrack.play` and `IRemoteVideoTrack.play`. The video needs to be passed in the specified DOM element.

    - Leaving without entering

        When a user hovers over a channel but does not click to enter, it is recommended to call `leave`.

## Precautions

- Wildcard tokens can speed up the process of joining a channel but cause room overflow. Decide whether to use wildcard tokens based on your specific needs.
- Preloading channels will incur additional charges.

</PlatformWrapper>

<PlatformWrapper notAllowed="web">
<NotAvailable />
</PlatformWrapper>


