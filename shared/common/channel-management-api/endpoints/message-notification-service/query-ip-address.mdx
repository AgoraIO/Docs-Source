If your server that receives notification callbacks is behind a firewall, you need to call the IP address query API to retrieve the IP addresses of <Vg k="NCS_LONG" /> and configure your firewall to trust all these IP addresses.

Agora occasionally adjusts the <Vg k="NCS_LONG" /> IP addresses. Best practice is to call this endpoint at least every 24 hours and automatically update the firewall configuration.

### Prototype

* Method: `GET`
* Endpoint: `https://api.agora.io/v2/ncs/ip`

### Request header

Authorization: You must generate a Base64-encoded credential with the Customer ID and Customer Secret provided by Agora, and then pass the credential to the Authorization field in the HTTP request header. 

### Request body

This API has no body parameters.

### Response body

When the request succeeds, the response body looks like the following:

```json
{
    "data": {
        "service": {
            "hosts": [
                {
                    "primaryIP": "xxx.xxx.xxx.xxx"
                },
                {
                    "primaryIP": "xxx.xxx.xxx.xxx"
                }
            ]
        }
    }
}
```

Each primary IP field shows an IP address of <Vg k="NCS_LONG" /> server. When you receive a response, you need to note the primary IP fields and add all these IP addresses to your firewall's allowed IP list.

### Considerations

* <Vg k="NCS_LONG" /> does not guarantee that notification callbacks arrive at your server in the same order as events occur.
* Your server needs to be able to handle messages arriving out of order.
* To improve the reliability of <Vg k="NCS_LONG" />, there can be more than one notification callback for each event, and your server needs to be able to handle repeated messages.

