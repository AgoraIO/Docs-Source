<PlatformWrapper platform="react-js">

The following figure shows the  <Vpd k="PRODUCT" /> API call sequence.

<ProductWrapper product="video-calling">
![Interface](/images/video-sdk/video-call-logic-web.png)
</ProductWrapper>
<ProductWrapper product={["interactive-live-streaming", "broadcast-streaming"]}>
![Interface](/images/video-sdk/ils-call-logic-web.svg)
</ProductWrapper>

Best practice is to separate the <Vg k="PRODUCT" /> workflows from your UI implementation. The <Vg k="VSDK" />
  sample
project implements the <Vg k="PRODUCT" />  business logic in the `AgoraManager` object. This class encapsulates the
`agoraEngine`, an instance of the`AgoraRTC`, and core functionality such as logging in to <Vg k="AGORA_BACKEND" />,
  joining a channel, listening for events from other users and logging out.

The following code examples show how to implement these steps in your <Vpl k="CLIENT" />:

1. Create the variables you need to handle <Vg k="ENGINE" />, local hardware and tracks, remote tracks and user events:

    ```javascript
      const [agoraEngine, setAgoraEngine] = useState(null);
      const [microphoneAndCameraTracks, setMicrophoneAndCameraTracks] = useState(null);
      const [localAudioTrack, setLocalAudioTrack] = useState(null);
      const [localVideoTrack, setLocalVideoTrack] = useState(null);
      const [remoteVideoTrack, setRemoteVideoTrack] = useState(null);
      const [remoteUid, setRemoteUid] = useState(null);
      const [joined, setJoined] = useState(false);
      const [showVideo, setShowVideo] = useState(false);
    ```

1.  Create an instance of the <Vg k="ENGINE" />, handle local hardware and remote tracks:

      ```javascript
        const setupVideoSDKEngine = async () =>
      {
        const engine = AgoraRTC.createClient({ mode: "rtc", codec: "vp8" });
        const tracks = await AgoraRTC.createMicrophoneAndCameraTracks();
        if(engine && tracks)
        {
          setAgoraEngine(engine);
          setMicrophoneAndCameraTracks(tracks);
          engine.on("user-published", async (user, mediaType) => {
          await engine.subscribe(user, mediaType);
          if (mediaType === "video") {
            setRemoteVideoTrack(user.videoTrack);
            setRemoteUid(user.uid);
          }
        });

        engine.on("user-unpublished", (user, mediaType) => {
          if (mediaType === "video" && user.uid === remoteUid) {
            setRemoteVideoTrack(null);
            setRemoteUid(null);
          }
        });
      }
      return engine;
      };

      ```

1. Join and leave a channel:

    ```javascript
      const joinCall = async () => {
      try {
        await agoraEngine.join(appId, channelName, token, 0);
        setLocalAudioTrack(microphoneAndCameraTracks[0]);
        setLocalVideoTrack(microphoneAndCameraTracks[1]);
        await agoraEngine.publish([microphoneAndCameraTracks[0], microphoneAndCameraTracks[1]]);
        setJoined(true);
        setShowVideo(true);
      } catch (error) {
        console.error("Failed to join or publish:", error);
      }
    };

    const leaveCall = async () => {
      try {
        await agoraEngine.unpublish([localAudioTrack, localVideoTrack]);
        await agoraEngine.leave();
        setJoined(false);
        setShowVideo(false);
      } catch (error) {
        console.error("Failed to unpublish or leave:", error);
      }
    };
    ```

  1. Setup your `AgoraManager` instance with your security information:

      ```javascript
      const GetStartedComponent = (props) => {
      const agoraManager = AgoraManager({
        appId: props.appId || appId,
        channelName: props.channelName || channelName,
        token: props.token || token
      });
      const [initialized, setInitialized] = useState(false);
      ```
</PlatformWrapper>