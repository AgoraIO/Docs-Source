<PlatformWrapper platform="linux-cpp">

To configure the layout, call the `setVideoMixingLayout` method and pass a `VideoMixingLayout` object that defines:

- Canvas dimensions and frame rate
- Background color or image
- Layouts for each user’s video

```cpp
struct VideoMixingLayout  recorderLayout;
recorderLayout.canvasWidth = 1280;
recorderLayout.canvasHeight = 720;
recorderLayout.canvasFps = 25;
 
UserMixerLayout layout[2];
layout[0].userId = "1234";
layout[0].config.x = 0;
layout[0].config.y = 0;
layout[0].config.width = 640;
layout[0].config.height = 360;
 
layout[1].userId = "5678";
layout[1].config.x = 720;
layout[1].config.y = 270;
layout[1].config.width = 540;
layout[1].config.height = 320;
 
recorderLayout.userLayoutConfigNum = 2;
recorderLayout.userLayoutConfigs = layout;
recorder->setVideoMixingLayout(recorderLayout);
```

The sample code creates the following composite layout:  
![](/images/on-premise-recording/composite-layout.svg)

## API reference

#### `VideoMixingLayout` struct 

```cpp
struct VideoMixingLayout
{
    int canvasWidth;   // Width of the composite canvas
    int canvasHeight;  // Height of the composite canvas
    int canvasFps;     // Frame rate of the composite canvas
    uint32_t backgroundColor;     // Background color of the composite canvas
    const char* backgroundImage;  // Path to the background image of the composite canvas
    uint32_t userLayoutConfigNum; // Total number of video streams in the composite layout
    const UserMixerLayout* userLayoutConfigs;  // Configuration for each video stream in the composite layout
};
```

#### `UserMixerLayout` and `MixerLayoutConfig` structs

Each user stream layout is defined by a `UserMixerLayout` struct, which includes a `MixerLayoutConfig` to specify size, position, and appearance.

```cpp
struct UserMixerLayout
{
    user_id_t userId;          // UID of the user stream to include in the mix, used to distinguish between video streams
    MixerLayoutConfig config;  // Configuration for this user's video stream
};
```

```cpp
struct MixerLayoutConfig {
    int32_t x;      // Horizontal offset of the video stream relative to the canvas
    int32_t y;      // Vertical offset of the video stream relative to the canvas
    int32_t width;  // Width of the video stream
    int32_t height; // Height of the video stream
    int32_t zOrder; // Z-order of the video stream (controls stacking order)
    float alpha;    // Transparency of the video stream
    bool mirror;    // Whether to mirror the video stream
    const char* image_path; // Path to a background image for the video stream
    int rotation;           // Clockwise rotation of the video: 0 (no rotation), 1: 90°, 2: 180°, 3: 270°
};
```

</PlatformWrapper>