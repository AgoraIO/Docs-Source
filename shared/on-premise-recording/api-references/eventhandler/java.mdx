## IAgoraMediaRtcRecorderEventHandler class


Receives callback events from the media recorder.

| API | Description |
|---|---|
|[`onConnected`](#onconnected) | Triggered when the SDK successfully connects to the Agora channel. |
|[`onDisconnected`](#ondisconnected) | Triggered when the connection state becomes `CONNECTION_STATE_DISCONNECTED(1)`. |
|[`onReconnected`](#onreconnected) | Triggered when the connection state recovers to `CONNECTION_STATE_CONNECTED(3)`. |
|[`onConnectionLost`](#onconnectionlost) | Triggered when the SDK loses connection to the Agora channel. |
|[`onUserJoined`](#onuserjoined) | Callback when a remote user joins the channel. |
|[`onUserLeft`](#onuserleft) | Callback triggered when a remote user leaves the channel. |
|[`onFirstRemoteVideoDecoded`](#onfirstremotevideodecoded) | Callback when the first frame of remote video is decoded. |
|[`onFirstRemoteAudioDecoded`](#onfirstremoteaudiodecoded) | Callback when the first frame of remote audio is decoded. |
|[`onAudioVolumeIndication`](#onaudiovolumeindication) | Callback that reports which users are speaking, the volume of each speaker, and whether the local user is speaking. |
|[`onActiveSpeaker`](#onactivespeaker) | Triggered when an active speaker is detected. |
|[`onUserVideoStateChanged`](#onuservideostatechanged) | Callback when the remote video state changes. |
|[`onUserAudioStateChanged`](#onuseraudiostatechanged) | Callback when the remote user's audio state changes. |
|[`onRemoteVideoStats`](#onremotevideostats) | Callback for remote video statistics. |
|[`onRemoteAudioStats`](#onremoteaudiostats) | Callback for remote audio statistics. |
|[`onRecorderStateChanged`](#onrecorderstatechanged) | Callback when the local audio/video recording state changes. |
|[`onRecorderInfoUpdated`](#onrecorderinfoupdated) | Callback when recording information is updated. |
|[`onEncryptionError`](#onencryptionerror) | Triggered when an encryption error occurs. |
|[`onError`](#onerror) | Error callback. |
|[`onTokenPrivilegeWillExpire`](#ontokenprivilegewillexpire) | Callback triggered 30 seconds before the Token expires. |
|[`onTokenPrivilegeDidExpire`](#ontokenprivilegedidexpire) | Callback triggered when the Token has expired. |
|[`onVideoSizeChanged`](#onvideosizechanged) | Callback when the remote video size changes. |

### onConnected

```java
default void onConnected(String channelId, String userId)
```

Triggered when the SDK successfully connects to the Agora channel.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID. |

### onDisconnected

```java
default void onDisconnected(String channelId, String userId, Constants.ConnectionChangedReasonType reason)
```

Triggered when the SDK connection state changes to `CONNECTION_STATE_DISCONNECTED(1)`.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID. |
| `reason` | `Constants.ConnectionChangedReasonType` | Reason for the connection state change. See [`ConnectionChangedReasonType`](#connectionchangedreasontype). |

### onReconnected

```java
default void onReconnected(String channelId, String userId, Constants.ConnectionChangedReasonType reason)
```

Triggered when the connection state recovers to `CONNECTION_STATE_CONNECTED(3)`.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID. |
| `reason` | `Constants.ConnectionChangedReasonType` | Reason for the connection state change. See [`ConnectionChangedReasonType`](#connectionchangedreasontype). |


### onConnectionLost

```java
default void onConnectionLost(String channelId, String userId)
```

Triggered when the SDK loses connection to the Agora channel.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID. |

### onUserJoined

```java
default void onUserJoined(String channelId, String userId)
```

Callback when a remote user joins the channel.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID. |

### onUserLeft

```java
default void onUserLeft(String channelId, String userId, Constants.UserOfflineReasonType reason)
```

Callback triggered when a remote user leaves the channel.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID. |
| `reason` | `Constants.UserOfflineReasonType` | Reason why the remote user left. See [`UserOfflineReasonType`](#userofflinereasontype). |

### onFirstRemoteVideoDecoded

```java
default void onFirstRemoteVideoDecoded(String channelId, String userId, int width, int height, int elapsed)
```

Callback triggered when the first frame of remote video is successfully decoded by the SDK for recording.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | Remote user ID. |
| `width` | `int` | Width of the video stream (in pixels). |
| `height` | `int` | Height of the video stream (in pixels). |
| `elapsed` | `int` | Time elapsed (ms) from the user joining the channel to this callback. |

### onFirstRemoteAudioDecoded

```java
default void onFirstRemoteAudioDecoded(String channelId, String userId, int elapsed)
```

Callback triggered when the first frame of remote audio is decoded.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID of the remote user sending the audio stream. |
| `elapsed` | `int` | Time elapsed (ms) from the remote user joining the channel to this callback. |

### onAudioVolumeIndication

```java
default void onAudioVolumeIndication(String channelId, SpeakVolumeInfo[] speakers, int speakerNumber)
```

Callback that reports which users are speaking, the volume of each speaker, and whether the local user is speaking.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `speakers` | `SpeakVolumeInfo[]` | Array of user IDs and volume information. See [`SpeakVolumeInfo`](#speakvolumeinfo). |
| `speakerNumber` | `int` | Total number of speakers. |

### onActiveSpeaker

```java
default void onActiveSpeaker(String channelId, String userId)
```

Callback triggered when an active speaker is detected.  

You can use this callback to highlight the active speaker in your app UI.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID of the active speaker. `userId` is `0` if the local user is the active speaker. |

### onUserVideoStateChanged

```java
default void onUserVideoStateChanged(String channelId, String userId, Constants.RemoteVideoState state, Constants.RemoteVideoStateReason reason, int elapsed)
```

Callback triggered when the video state of a remote user changes.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID of the remote user whose video state changed. |
| `state` | `Constants.RemoteVideoState` | The current video state. See [`RemoteVideoState`](#remotevideostate). |
| `reason` | `Constants.RemoteVideoStateReason` | Reason for the state change. See [`RemoteVideoStateReason`](#remotevideostatereason). |
| `elapsed` | `int` | Time elapsed (ms) from the user joining the channel to this callback. |

### onUserAudioStateChanged

```java
default void onUserAudioStateChanged(String channelId, String userId, Constants.RemoteAudioState state, Constants.RemoteAudioStateReason reason, int elapsed)
```

Callback triggered when the audio state of a remote user changes.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID of the remote user whose audio state changed. |
| `state` | `Constants.RemoteAudioState` | The current audio state. See [`RemoteAudioState`](#remoteaudiostate). |
| `reason` | `Constants.RemoteAudioStateReason` | Reason for the state change. See [`RemoteAudioStateReason`](#remoteaudiostatereason). |
| `elapsed` | `int` | Time elapsed (ms) from the user joining the channel to this callback. |

### onRemoteVideoStats

```java
default void onRemoteVideoStats(String channelId, String userId, RemoteVideoStatistics stats)
```

Callback for remote video statistics.  

Triggered when remote video statistics are received and computed.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID of the remote user. |
| `stats` | `RemoteVideoStatistics` | Statistics of the remote video. See [`RemoteVideoStatistics`](#remotevideostatistics). |

### onRemoteAudioStats

```java
default void onRemoteAudioStats(String channelId, String userId, RemoteAudioStatistics stats)
```

Callback for remote audio statistics.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | User ID of the remote user. |
| `stats` | `RemoteAudioStatistics` | Statistics of the remote audio. See [`RemoteAudioStatistics`](#remoteaudiostatistics). |

### onRecorderStateChanged

```java
default void onRecorderStateChanged(String channelId, String userId, Constants.RecorderState state, Constants.RecorderReasonCode reason, String fileName)
```

Callback when the local audio/video recording state changes.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel name. |
| `userId` | `String` | User ID. |
| `state` | `Constants.RecorderState` | Current recording state. See [`RecorderState`](#recorderstate). |
| `reason` | `Constants.RecorderReasonCode` | Reason for the state change. See [`RecorderReasonCode`](#recorderreasoncode). |
| `fileName` | `String` | File name of the recorded stream. |

### onRecorderInfoUpdated

```java
default void onRecorderInfoUpdated(String channelId, String userId, RecorderInfo info)
```

Callback when recording information is updated.  

After you register this callback and enable local audio/video recording, the SDK triggers this callback periodically based on the value of `recorderInfoUpdateInterval`.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel name. |
| `userId` | `String` | User ID. |
| `info` | `RecorderInfo` | Information about the recorded file. See [`RecorderInfo`](#recorderinfo). |

### onEncryptionError

```java
default void onEncryptionError(String channelId, Constants.EncryptionErrorType errorType)
```

Callback triggered when an encryption error occurs.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `errorType` | `Constants.EncryptionErrorType` | Type of encryption error. See [`EncryptionErrorType`](#encryptionerrortype). |

### onError

```java
default void onError(String channelId, Constants.ErrorCodeType error, String message)
```

Error callback.  

Reports error codes and messages.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `error` | `Constants.ErrorCodeType` | Error code. See [`ErrorCodeType`](#errorcodetype). |
| `message` | `String` | Error message. |

### onTokenPrivilegeWillExpire

```java
default void onTokenPrivilegeWillExpire(String channelId, String token)
```

Callback triggered 30 seconds before the Token expires.  

You must generate a new Token on your server and call [`renewToken`](#renewtoken) to update it.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `token` | `String` | The Token that will expire in 30 seconds. |

### onTokenPrivilegeDidExpire

```java
default void onTokenPrivilegeDidExpire(String channelId)
```

Callback triggered when the Token has expired.  

You must generate a new Token on your server and call [`renewToken`](#renewtoken) to update it.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |

### onVideoSizeChanged

```java
default void onVideoSizeChanged(String channelId, String userId, int width, int height, int rotation)
```

Callback triggered when the remote video size changes.

#### Parameters

| Parameter | Data type | Description |
|-----------|-----------|-------------|
| `channelId` | `String` | Channel ID. |
| `userId` | `String` | Remote user ID. |
| `width` | `int` | Width of the video stream. |
| `height` | `int` | Height of the video stream. |
| `rotation` | `int` | Rotation angle of the video stream. |
