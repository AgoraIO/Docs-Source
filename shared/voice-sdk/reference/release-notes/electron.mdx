<PlatformWrapper platform="electron">

## v4.0.0-rc.3

v4.0.0-rc.3 was released on September 15, 2022.

#### Compatibility changes

**Integration change**

This release has changed SDK package name from `electron-agora-rtc-ng` to `agora-electron-sdk`, and optimized the implementation of some features, resulting in incompatibility with v3.7.0. The following are the main features with compatibility changes:

- Multiple channel
- Media stream publishing control
- Warning codes

After upgrading the SDK, you need to update the code in your app according to your business scenarios. For details, see [Migrate from v3.x to v4.0.0 RC](./develop/migration-guide).


#### New features

**1. Multiple media tracks**

This release supports one `IRtcEngine` instance to collect multiple audio and sources at the same time and publish them to the remote users by setting `RtcEngineEx` and `ChannelMediaOptions.`

- After calling `joinChannel` to join the first channel, call `joinChannelEx` multiple times to join multiple channels, and publish the specified stream to different channels through different user ID (`localUid`) and `ChannelMediaOptions` settings.

You can also experience the following features with the multi-channel capability:

- Publish multiple sets of audio streams to the remote users through different user IDs (`uid`).
- Mix multiple audio streams and publish to the remote users through a user ID (`uid`).

**2. Agora media player**

To make it easier for users to integrate the Agora SDK and reduce the SDK's package size, this release introduces the Agora media player. After calling the `createMediaPlayer` method to create a media player object, you can then call the methods in the `IMediaPlayer` class to experience a series of functions, such as playing local and online media files, preloading a media file, changing the CDN route for playing according to your network conditions, or sharing the audio streams being played with remote users.

- Plays local and online media files.
- Preloads media files.
- Changes the CDN route for playing media files according your network conditions.
- Shares the audio streams being played with remote users.
- Caches data when playing media files.

**3.Brand-new AI Noise Suppression**

The SDK supports a new version of Noise Suppression (in comparison to the basic Noise Suppression in v3.7.0). The new AI Noise Suppression has better vocal fidelity, cleaner noise suppression, and adds a dereverberation option.
<div class="alert info">To experience this feature, contact <a href="mailto:sales-us@agora.io ">sales@agora.io</a>.</div>

**4. Ultra-high audio quality**

To make the audio clearer and restore more details, this release adds the `UltraHighQualityVoice` enumeration. In scenarios that mainly feature the human voice, such as chat or singing, you can call `setVoiceBeautifierPreset` and use this enumeration to experience ultra-high audio quality.

**5. Real-time chorus**

This release gives real-time chorus the following abilities:

- Two or more choruses are supported.
- Each singer is independent of each other. If one singer fails or quits the chorus, the other singers can continue to sing.
- Very low latency experience. Each singer can hear each other in real time, and the audience can also hear each singer in real time.

This release adds the `AudioScenarioChorus` enumeration in `AudioScenarioType`. With this enumeration, users can experience ultra-low latency in real-time chorus when the network conditions are good.


**6. Enhanced channel management**

To meet the channel management requirements of various business scenarios, this release adds the following functions to the `ChannelMediaOptions` structure:

- Sets or switches the publishing of multiple audio and  sources.
- Sets or switches channel profile and user role.
- Controls audio publishing delay.

Set `ChannelMediaOptions` when calling `joinChannel` or `joinChannelEx` to specify the publishing and subscription behavior of a media stream, for example, whether to subscribe to the audio streams of remote users. After joining the channel, call `updateChannelMediaOptions` to update the settings in `ChannelMediaOptions` at any time, for example, to switch the published audio sources.


**7. Subscription allowlists and blocklists**

This release introduces subscription allowlists and blocklists for remote audio and  streams. You can add a user ID that you want to subscribe to in your allowlist, or add a user ID for the streams you do not wish to see to your blocklists. You can experience this feature through the following APIs, and in scenarios that involve multiple channels, you can call the following methods in the `IRtcEngineEx` interface:

- `SetSubscribeAudioBlocklist`：Set the audio subscription blocklist.
- `SetSubscribeAudioAllowlist`：Set the audio subscription allowlist.

If a user is added in a blocklist and a allowlist at the same time, only the blocklist takes effect.

**8. Set audio scenarios**

To make it easier to change audio scenarios, this release adds the `SetAudioScenario` method. For example, if you want to change the audio scenario from `AudioScenarioDefault` to `AudioScenarioGameStreaming` when you are in a channel, you can call this method.


#### Improvements

**1. Fast channel switching**

This release can achieve the same switching speed as `SwitchChannel` in v3.7.0 through the `LeaveChannel` and `JoinChannel `methods so that you don't need to take the time to call the `SwitchChannel `method.

**2. Voice pitch of the local user**
This release adds `voicePitch` in `AudioVolumeInfo` of `onAudioVolumeIndication`. You can use `voicePitch` to get the local user's voice pitch and perform business functions such as rating for singing.

</PlatformWrapper>