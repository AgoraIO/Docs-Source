import * as data from '@site/data/variables';
import Prerequites from '@docs/shared/common/prerequities.mdx';
import ProjectSetup from '@docs/shared/media-accelerator/get-started/get-started-sdk/project-setup/index.mdx';
import ProjectImplement from '@docs/shared/media-accelerator/get-started/get-started-sdk/project-implementation/index.mdx';
import ProjectTest from '@docs/shared/media-accelerator/get-started/get-started-sdk/project-test/index.mdx';
import Reference from '@docs/shared/media-accelerator/get-started/get-started-sdk/reference/index.mdx';

The Internet of things (IoT) connects physical objects with sensors, processors, software and other technologies to enable data exchange with other devices. In applications such as smart door bells and remote monitoring, IoT devices send or receive audio and video streams to perform their function. <Vpd k="PRODUCT" /> enables you to implement real-time audio and video stream transmission and intercommunication in IoT devices with a compact SDK size, low memory usage, and low power consumption. Some typical application scenarios for <Vpd k="SDK" /> include:

* **Real-time monitoring**:  Integration into smart cameras and smart doorbells enables mobile device users to receive video feed from one or more cameras.

* **Two-way audio communication between mobile devices**: With <Vpd k="SDK" /> integrated into smart watches, users perform two-way audio communication between mobile devices.

This page shows the minimum code you need to integrate audio and video communication features into your IoT devices using <Vpd k="SDK" />.

## Understand the tech

The light-weight <Vpd k="SDK" /> is ideal for IoT applications due to its low power consumption. The SDK provides the following performance benefits:

* **Small SDK size**: The increase in app size is less than 400 KB after integration.
* **Low memory usage**: When the SDK is simultaneously sending and receiving 320x240 H.264 video data, memory usage is less than 2 MB.
* **High connectivity**: Under normal conditions, connectivity is greater than 99%.
* **Low bandwidth usage**: A maximum of 50 Mbps for a user in an RTC channel.
* **Network adaptability**:	Non-aware recovery from up to 50% packet loss.

The following figure shows the workflow you need to integrate <Vpd k="SDK" /> into your <Vpl k="CLIENT" />.

![Media accelerator](/images/media-accelerator/media-accelerator-get-started.svg)

## Prerequisites

In order to follow this procedure you must have:

<PlatformWrapper platform="linux-cpp">
* A device running Linux Ubuntu 14.04 or above; 18.04+ is recommended.
* At least 2 GB of memory.
* `cmake` 3.6.0 or above.
</PlatformWrapper>

<Prerequites />

## Project setup

<ProjectSetup />


<ProjectImplement />

## Test your implementation

To test the <Vpd k="PRODUCT" /> implementation:

1. [Generate a temporary token](../reference/manage-agora-account#generate-a-temporary-token) in <Vg k="CONSOLE" />.

2. In your browser, navigate to the <Link target="_blank" to="{{Global.DEMO_BASIC_VIDEO_CALL_URL}}"><Vg k="COMPANY" /> web demo</Link> and update _App ID_, _Channel_, and _Token_ with the values for your temporary token, then click **Join**.

<ProjectTest />

## Reference

This section contains information that completes the information in this page, or points you to documentation that explains other aspects to this product.

### Intercommunication with RTC SDKs

If your business scenarios require not only high-quality audio and video transmission, but also easy integration, low memory usage, and low power consumption, such as smart cameras and smart doorbells, Agora recommends that you use the RTC SDK (v4.x) with the <Vpd k="SDK" />.

The following table shows the data formats supported when the <Vpd k="SDK" /> communicates with the RTC SDK (v4.x):

| SDK Type | <Vpd k="SDK"/> |
|----|---------------|
| RTC Native/third-party framework SDK (v4.x) | <ul><li>Audio: G722, G711, Opus, AAC</li><li>Video: H.264, JPEG</li></ul> |
| RTC Web SDK (v4.x) | <ul><li>Audio: G722, G711, Opus</li><li>Video: H.264</li></ul> |
| RTC applet SDK | <ul><li>Audio: G711, Opus</li><li>Video: H.264, JPEG</li></ul> |

The sending and receiving ends can realize intercommunication only if the set data format is consistent and complies with the above table.

The following sections describe how to set the audio and video data format in the SDK.

#### Setup <Vpd k="SDK" />

**Audio**

<Vpd k="SDK" /> only supports mono audio data, and the data sending interval is 20 ms.

* To send and receive AAC audio data, the operation is as follows: 

    When calling the `agora_rtc_send_audio_data` method to send audio data, set `audio_frame_info_t.data_typeto` `AUDIO_DATA_TYPE_AACLC` or `AUDIO_DATA_TYPE_HEAAC` data type, and the corresponding data size. The size of AAC audio data needs to be resolved by the user.

* To send and receive Opus, G722, G711 audio data, the operation is as follows:

    1. When calling the `agora_rtc_join_channel` method to join the RTC channel, set `rtc_channel_options_t.audio_codec_opt.audio_codec_type` to `AUDIO_CODEC_TYPE_OPUS`, `AUDIO_CODEC_TYPE_G722`, `AUDIO_CODEC_TYPE_G711A` or `AUDIO_CODEC_TYPE_G711U` encoding format, and the corresponding sampling rate.

    1. When calling the `agora_rtc_send_audio_data` method to send audio data, set `audio_frame_info_t.data_type` to `AUDIO_DATA_TYPE_PCM` and the corresponding data size.

The table below shows the recommended sampling rates and corresponding data sizes for Opus, G722, and G711 audio data.

| Audio format | Sampling rate (Hz) | Audio data size (Byte) |
|------|------|-------|
| G711 | 8000 | 320 |
| G722 | 16000 | 640 |
| OPUS | 16000 | 640 |
| OPUS | 48000 | 1920 |

**Video**

In <Vpd k="SDK" />, H.264 video data is sent and received by default.

To send and receive JPEG video data, when calling the `agora_rtc_send_video_data` method to send video data, set `video_frame_info_t.data_type` to `VIDEO_DATA_TYPE_GENERIC_JPEG`.

#### Set up RTC Native/third-party framework SDK (v4.x)

**Audio**

In RTC Native/third-party framework SDK (v4.x), Opus or AAC audio data is sent and received by default.

To send and receive G722 or G711 audio data, use the following methods:

| SDK type | G722 | G711 (PCMA) | G711 (PCMU) |
|---|------|-------|------|
| RTC Android SDK | `mRtcEngine.setAudioProfile(6)` or `mRtcEngine.setParameters("{\"che.audio. custom_payload_type\":9}")` | `mRtcEngine.setParameters("{\"che.audio. custom_payload_type\":8}")` | `mRtcEngine.setParameters("{\"che.audio. custom_payload_type\":0}")` |
| RTC iOS/macOS SDK | `agoraKit.setAudioProfile(6)` or `agoraKit.setParameters("{\"che.audio. custom_payload_type\":9}")` | `agoraKit.setParameters("{\"che.audio. custom_payload_type\":8}")` | `agoraKit.setParameters("{\"che.audio. custom_payload_type\":0}")` |
| RTC Windows SDK | `m_rtcEngine->setAudioProfile(6)` or `agora::base::AParameter apm(m_rtcEngine); apm->setParameters("{\"che.audio. custom_payload_type\":9}")` | `agora::base::AParameter apm(m_rtcEngine);apm->m_rtcEngine->setParameters("{\"che.audio. custom_payload_type\":8}")` | `agora::base::AParameter apm(m_rtcEngine);apm->m_rtcEngine->setParameters("{\"che.audio. custom_payload_type\":0}")` |
| RTC Electron SDK | `this.rtcEngine?.setAudioProfile(6)` or `this.rtcEngine?.setParameters("{\"che.audio. custom_payload_type\":9}")` | `this.rtcEngine?.setParameters("{\"rtc.audio. custom_payload_type\":8}")` | `this.rtcEngine?.setParameters("{\"rtc.audio. custom_payload_type\":0}")` |
| RTC Unity SDK | `await _engine.setAudioProfile(profile: AudioProfileType.audioProfileIot)` or `await _engine.setParameters("{\"che.audio. custom_payload_type\":9}")` | `await _engine.setParameters("{\"che.audio. custom_payload_type\":8}")` | `await _engine.setParameters("{\"che.audio. custom_payload_type\":0}")` |
| RTC Flutter SDK | `await _engine.setAudioProfile(profile: AudioProfileType.audioProfileIot)` or `await _engine.setParameters("{\"che.audio. custom_payload_type\":9}")` | `await _engine.setParameters("{\"che.audio. custom_payload_type\":8}")` | `await _engine.setParameters("{\"che.audio. custom_payload_type\":0}")` |
| RTC React Native SDK | `await _engine.current?.setAudioProfile(6)` or `await _engine.current?.setParameters("{\"che.audio. custom_payload_type\":9}")` | `await _engine.current?.setParameters("{\"che.audio. custom_payload_type\":8}")` | `await _engine.current?.setParameters("{\"che.audio. custom_payload_type\":0}")` | 

**Video**

In RTC Native/third-party framework SDK (v4.x), H.264 video data is sent and received by default.

To send and receive JPEG video data, use the following methods:

| SDK type | Method |
|--|:-----------|
| RTC Android SDK | `mRtcEngine.setParameters("{\"engine.video.codec_type\": \"20\"}")` |
| RTC iOS/macOS SDK | `agoraKit.setParameters("{\"engine.video.codec_type\": \"20\"}")` |
| RTC Windows SDK | `agora::base::AParameter apm(m_rtcEngine);`<br/>`apm->setParameters("{\"engine.video.codec_type\": \"20\"}")` |
| RTC Electron SDK | `this.engine.setParameters("{\"engine.video.codec_type\": \"20\"}");` |
| RTC Unity SDK | `RtcEngine.SetParameters("{\"engine.video.codec_type\": \"20\"}");` |
| RTC Flutter SDK | `await _engine.setParameters("{\"engine.video.codec_type\": \"20\"}");` |
| RTC React Native SDK | `this.engine.setParameters("{\"engine.video.codec_type\": \"20\"}");` |

#### Set RTC Web SDK (v4.x)

**Audio**

In RTC Web SDK (v4.x), Opus audio data is sent and received by default.

To send and receive G722, G711 audio data, call the following method:

* G711 (PCMA): `AgoraRTC.createClient({mode: "live", codec: "h264", audioCodec: "pcma"})`
* G711 (PCMU): `AgoraRTC.createClient({mode: "live", codec: "h264", audioCodec: "pcmu"})`
* G722: `AgoraRTC.createClient({mode: "live", codec: "h264", audioCodec: "g722"})`

Only the RTC Web SDK version 4.9.0 or higher supports setting the audio encoding format.

**Video**

In RTC Web SDK (v4.x), VP8 video data is sent and received by default. You call `createClient` to set the video data format to `"h264"`.

#### Set RTC applet SDK

In the RTC applet SDK, Opus audio data and H.264 video data are sent and received by default. If you want to receive JPEG video data or send and receive G711 audio data, contact iot@agora.io to activate .

The RTC applet SDK does not support sending JPEG video data.

<Reference />
