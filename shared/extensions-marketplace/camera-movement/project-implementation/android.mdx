<PlatformWrapper platform="android">

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

### Register the extension

After initializing `RtcEngine`, call `loadExtensionProvider` to load the <Vg k="RTEE_CM"/> library, and then call `registerExtension` to register the extension.

<Admonition type="caution" title="Note">
Load and register <Vg k="RTEE_CM"/> before calling `enableVideo` to enable the video module.
</Admonition>

<Tabs groupId="language">
<TabItem value="java" label="Java">
<CodeBlock language="java" showLineNumbers>
{`// Load the dynamic library
mRtcEngine.loadExtensionProvider("agora_portrait_rhythm_extension");

// Register the extension
mRtcEngine.registerExtension("agora_video_filters_portrait_rhythm", "portrait_rhythm", Constants.MediaSourceType.PRIMARY_CAMERA_SOURCE);

// Enable the video module
mRtcEngine.enableVideo();`}
</CodeBlock>
</TabItem>

<TabItem value="kotlin" label="Kotlin" default>
<CodeBlock language="kotlin" showLineNumbers>
{`// Load the dynamic library
mRtcEngine.loadExtensionProvider("agora_portrait_rhythm_extension")

// Register the extension
mRtcEngine.registerExtension("agora_video_filters_portrait_rhythm", "portrait_rhythm", Constants.MediaSourceType.PRIMARY_CAMERA_SOURCE)

// Enable the video module
mRtcEngine.enableVideo()`}
</CodeBlock>
</TabItem>
</Tabs>

### Enable <Vg k="RTEE_CM"/>

Call `startPreview` to start the video preview, then call `enableExtension` to turn on or off the <Vg k="RTEE_CM"/> extension.

<Tabs groupId="language">
<TabItem value="java" label="Java">
<CodeBlock language="java" showLineNumbers>
{`// Turn on Camera Movement
mRtcEngine.enableExtension("agora_video_filters_portrait_rhythm", "portrait_rhythm", true);`}
</CodeBlock>
</TabItem>

<TabItem value="kotlin" label="Kotlin" default>
<CodeBlock language="kotlin" showLineNumbers>
{`// Turn on Camera Movement
mRtcEngine.enableExtension("agora_video_filters_portrait_rhythm", "portrait_rhythm", true)`}
</CodeBlock>
</TabItem>
</Tabs>

### Set or switch camera movement effects

To set or switch the camera movement effect, call `setExtensionProperty` (Android) and pass in key and value to achieve effects such as heartbeat rhythm, portrait rhythm, and front and back camera movement. For details, see the [key-value description](#key-value-description).

<Tabs groupId="language">
<TabItem value="java" label="Java">
<CodeBlock language="java" showLineNumbers>
{`// Set to heartbeat rhythm effect
mRtcEngine.setExtensionProperty("agora_video_filters_portrait_rhythm", "portrait_rhythm", "mode", "1");`}
</CodeBlock>
</TabItem>

<TabItem value="kotlin" label="Kotlin" default>
<CodeBlock language="kotlin" showLineNumbers>
{`// Set to heartbeat rhythm effect
mRtcEngine.setExtensionProperty("agora_video_filters_portrait_rhythm", "portrait_rhythm", "mode", "1")`}
</CodeBlock>
</TabItem>
</Tabs>
</PlatformWrapper>