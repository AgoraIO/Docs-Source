<PlatformWrapper platform="linux-java">

Follow these steps to compile, configure, and run the Agora recording sample using the Spring Boot project:

1. **Compile the project**

    Open a terminal and navigate to the `Examples-Mvn` directory. Run the following command to build the project:

    ```bash
    mvn clean package
    ```

    After successful compilation, the output JAR file appears in the `target/generated` directory as `agora-example.jar`.

2. **Configure App credentials**

    In the `Examples-Mvn` directory, create a `.keys` file with the following content. Replace the placeholders with your actual App ID and Token:

    ```properties
    appId=YOUR_APP_ID
    token=YOUR_TOKEN
    ```

3. **Prepare native libraries**

    Ensure that the directory `libs/native/linux/x86_64/` contains all the required `.so` files. These typically include:

    * `libagora_rtc_sdk.so`
    * `librecording.so`
    * `libagora-fdkaac.so`
    * `libaosl.so`

    <Admonition type="info" info="info">
    These libraries must be present at runtime or the application will fail to load native dependencies.
    </Admonition>

4. **Run the sample application**

    Execute the following command from the `Examples-Mvn` directory:

    ```bash
    LD_LIBRARY_PATH="$LD_LIBRARY_PATH:libs/native/linux/x86_64" \
    java -Dserver.port=18080 -jar target/agora-example.jar
    ```

    This command starts the Spring Boot server and listens on port `18080`. To use a different port, update the `-Dserver.port` parameter.

5. **Start and stop recording**

    * **Start recording**

        Send an HTTP request to the following endpoint:

        ```
        http://<your-server-ip>:18080/api/recording/start?configFileName=mix_stream_recorder_audio_video_water_marks.json
        ```

    * **Stop recording**

        Replace `<taskId>` with the task ID returned in the start response:

        ```
        http://<your-server-ip>:18080/api/recording/stop?taskId=<taskId>
        ```

        <Admonition type="info" warn="info">
        Place all configuration files (e.g., `mix_stream_recorder_audio_video_water_marks.json`) in the `Examples-Mvn/src/main/resources/` directory.
        </Admonition>
</PlatformWrapper>
