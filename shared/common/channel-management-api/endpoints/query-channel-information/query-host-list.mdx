import Authorization from '@docs/shared/common/channel-management-api/authorization.mdx';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

This method gets the list of hosts in the specified channel in the live broadcast use-case.

### Prototype

- Method: `GET`
- Endpoint: `https://api.agora.io/dev/v1/channel/user/{appid}/{channelName}/hosts_only`

This API is only used in the live broadcast profile (`mode` is set to `2`). Users in the same channel must use the same profile. Otherwise, the query results may be inaccurate.

This API and the [query user status](query-user-status) API can both be used to synchronize the online status of hosts. Compared to the [query user status](query-user-status) API, this API requires a lower call frequency and has a higher efficiency. Therefore, Agora recommends using this API for this purpose.

### Request parameters

**Path parameters**

Pass the following path parameters in the request URL:

| Parameter     | Type   | Required/Optional | Description                                                  |
| :------ | :-----  |:----- | :---------------------- |
| `appid` | String | Required |The App ID of the project. You can get it through one of the following methods:<li>Copy from the <Link to="{{Global.AGORA_CONSOLE_URL}}"><Vg k="CONSOLE" /></Link>.</li><li> Call the [Get all projects](/interactive-live-streaming/reference/agora-console-rest-api#get-all-projects) API, and read the value of the `vendor_key` field in the response body.</li>|
| `channelName` | String | Required | The channel name. |

**Request header**

<Authorization/>

### Request examples

<Tabs groupId="language">
<TabItem value="curl" label="Curl" default>
<CodeBlock language="bash">{`curl --request GET \\
  --url https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only \\
  --header 'Accept: application/json'\ \\
  --header 'Authorization: Basic 123'`}</CodeBlock>
</TabItem>

<TabItem value="node" label="Node.js">
  <CodeBlock language="js">{`const http = require('https');\n
const\ options = {
  method: 'GET',
  hostname: 'api.sd-rtn.com',
  port: null,
  path: '/dev/v1/channel/user/appid/channelName/hosts_only',
  headers: {
    Accept: 'application/json',
    Authorization: 'Basic 123'
  \}
\};\n
const req = http.request(options, function (res) {
  const chunks = [];\n
  res.on('data', function (chunk) {
    chunks.push(chunk);
  \});\n
  res.on('end', function () {
    const body = Buffer.concat(chunks);
    console.log(body.toString());
  \});
\});\n
req.end();`}</CodeBlock>
</TabItem>

<TabItem value="python" label="Python">
  <CodeBlock language="python">{`import http.client\n
conn =\ http.client.HTTPSConnection("api.sd-rtn.com")\n
headers = {
    'Accept': "application/json",
    'Authorization': "Basic 123"
\}\n
conn.request("GET", "/dev/v1/channel/user/appid/channelName/hosts_only", headers=headers)\n
res = conn.getresponse()
data = res.read()\n
print(data.decode("utf-8"))`}</CodeBlock>
</TabItem>

</Tabs>

### Response parameters

For details about possible response status codes, see [Response status codes](../../response-status-code).

If the status code is not `200`, the request fails. See the `message` field in the response body for the reason for this failure.

If the status code is `200`, the request succeeds, and the response body includes the following parameters:

| Parameter | Type    | Description                                                  |
| :-------- | :------ | :----------------------------------------------------------- |
| `success` | Boolean | The state of this request:<li>`true`: Success.</li><li>`false`: Reserved for future use.</li> |
| `data`    | Object  | User information, including the following fields: <ul><li>`channel_exist`: Boolean. Whether the specified channel exists:<ul><li>`true`: The channel exists.</li><li>`false`: The channel does not exist.</li></ul>**Note**: All other fields are not returned when the value of `channel_exist` is `false`.</li><li>`mode`: Number. The channel profile:<ul><li>`1`：The `COMMUNICATION` profile.</li><li>`2`: The `LIVE_BROADCASTING` profile.</li></ul></li><li>`broadcasters`：Array. User IDs of all hosts in the channel. This field is returned only when `mode` is `2`.</li></ul> |

### Response example

The following is a response example for a successful request:

```json
{
  "success": true,
  "data": {
    "channel_exist": true,
    "mode": 2,
    "broadcasters": [
      574332,
      1347839
    ]
  }
}
```

