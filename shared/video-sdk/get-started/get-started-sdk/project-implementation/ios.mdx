<PlatformWrapper platform="ios">

A complete code sample that implements the basic process of real-time interaction is presented here for your reference. Copy and paste the following code into your `ViewController.swift` file, replacing the existing content:

<details>
<summary>Complete sample code for real-time audio and video interaction</summary>

```swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController{
    // Define localView variable
    var localView: UIView!
    // Define remoteView variable
    var remoteView: UIView!
    // Define agoraKit
    var agoraKit: AgoraRtcEngineKit!

    // Set the video window layout
    override func viewDidLayoutSubviews(){
        super.viewDidLayoutSubviews()
        remoteView.frame = self.view.bounds
        localView.frame = CGRect(x: self.view.bounds.width - 135, y: 30, width: 135, height: 240)
    }

    func initView(){
        // Initialize the remote video window
        remoteView = UIView()
        self.view.addSubview(remoteView)
        // Initialize the local video window
        localView = UIView()
        self.view.addSubview(localView)
    }
    
    func initializeAgoraEngine(){
        let config = AgoraRtcEngineConfig()
        // Enter your App ID here
        config.appId = <#Your App ID#>
        // Call AgoraRtcEngineDelegate
        agoraKit = AgoraRtcEngineKit.sharedEngine(with: config, delegate: self)
    }
    
    func setupLocalVideo(){
        // Enable video module
        agoraKit?.enableVideo()
        // Start local preview
        agoraKit?.startPreview()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = 0
        videoCanvas.renderMode = .hidden
        videoCanvas.view = localView
        // Set local view
        agoraKit?.setupLocalVideo(videoCanvas)
    }
    
    func joinChannel(){
        let option = AgoraRtcChannelMediaOptions()
        // In the video call scenario, set the channel scenario to liveBroadcasting
        option.channelProfile = .liveBroadcasting
        // Set the user role as host
        option.clientRoleType = .broadcaster
        // Use a temporary token to join the channel 
        // Pass in your project's token and channel name here.
        agoraKit?.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: option)
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        // After loading the view, you can make other settings
        // Initialize the video window
        initView()
        initializeAgoraEngine()
        setupLocalVideo()
        joinChannel()
    }
    
    func leaveChannel() {
        agoraKit?.stopPreview()
        agoraKit?.leaveChannel(nil)
        agoraKit?.destroy()
    }
}

extension ViewController: AgoraRtcEngineDelegate{
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int){
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.renderMode = .hidden
        videoCanvas.view = remoteView
        agoraKit?.setupRemoteVideo(videoCanvas)
   }
}
```
</details>

<Admonition type="info" title="Information"> In the `appId`, `token`, and `channelName` fields, enter the App ID and temporary token you obtained from the console, and the channel name you filled in when generating the temporary token.</Admonition>

### Import Agora components

Add the following line to the `ViewController.swift` file:

```swift
import AgoraRtcKit
```

### Initialize the engine

Use the following code to initialize the SDK after the user agrees to the App's privacy policy. Call `sharedEngineWithConfig` to create and initialize and instance of `AgoraRtcEngineKit`:

```swift
let config = AgoraRtcEngineConfig()
// Enter the App ID you obtained from Agora console
config.appId = <#Your App ID#>
// Call AgoraRtcEngineDelegate
agoraKit = AgoraRtcEngineKit.sharedEngine(with: config, delegate: self)
```

### Enable the video module

Follow the steps below to enable the video module.

1. Call `enableVideo` method to enable the video module.
1. Call `setupLocalVideo` to initialize the local view and set the local video display properties.
1. Call `startPreview` to enable local video preview.

```swift
// Enable video module
agoraKit?.enableVideo()

let videoCanvas = AgoraRtcVideoCanvas()
videoCanvas.uid = 0
videoCanvas.renderMode = .hidden
videoCanvas.view = localView
// Set local view
agoraKit?.setupLocalVideo(videoCanvas)
// Start local video preview
agoraKit?.startPreview()
```

### Join a channel and publish audio and video streams

Create and configure the `ChannelMediaOptions` object and call `joinChannel` [2/2] to join the channel. In `ChannelMediaOptions`, set the channel scene to `BROADCASTING` (live broadcast scene) and set the user role to `BROADCASTER` (host) or `AUDIENCE`.

```swift
// Create ChannelMediaOptions object and configure it
ChannelMediaOptions options = new ChannelMediaOptions();
// Set the user role to BROADCASTER or AUDIENCE according to the scenario
options.clientRoleType = Constants.CLIENT_ROLE_BROADCASTER;
// In the live broadcast scenario, set the channel scene to BROADCASTING 
options.channelProfile = Constants.CHANNEL_PROFILE_LIVE_BROADCASTING;

// Use temporary token to join the channel
// Specify a user ID yourself and ensure it is unique within the channel
mRtcEngine.joinChannel(token, channelName, 0, options);
```

### Set remote user view
Call `setupRemoteVideo` to initialize the remote user view, and set the local display properties for the remote user. Use the `didJoinedOfUid` callback to get the uid of the remote user.

```swift
let videoCanvas = AgoraRtcVideoCanvas()
// uid of the remote user
videoCanvas.uid = uid
videoCanvas.renderMode = .hidden
videoCanvas.view = remoteView
agoraKit?.setupRemoteVideo(videoCanvas)
```

### Start audio and video interaction
Use the `viewDidLoad` callback to join the channel and start audio and video interaction.

```swift
override func viewDidLoad() {
    super.viewDidLoad()
    // Initialize the video window
    initView()
    initializeAgoraEngine()
    setupLocalVideo()
    joinChannel()
}
```

### End audio and video interaction

1. To leave the channel and release the related resources, call `leaveChannel`.

    ```swift
    agoraKit?.stopPreview()
    agoraKit?.leaveChannel(nil)
    ```

1. To release all resources used by the Agora SDK and destroy the engine, call `destroy`.

    ```swift
    agoraKit?.destroy()
    ```

</PlatformWrapper>