import Code from '@docs/shared/signaling/geofencing/sample-code/index.mdx';
import ProjectTest from '@docs/shared/signaling/geofencing/project-test/index.mdx';
import Reference from '@docs/shared/signaling/geofencing/reference/index.mdx';


export const toc = [{}];


When a user joins a channel, <Vpd k="SDK" /> automatically connects them to the closest geographical region of <Vg k="AGORA_BACKEND" />. However, to meet the laws and regulations of your region, you may want to filter in or filter out connections to a specific geographical region. <Vg k="COMPANY" /> geofencing enables you to control and customize data routing in your <Vpl k="CLIENT" /> by specifying the <Vg k="AGORA_BACKEND" /> region users connect to.

## Understand the tech

This section shows you how to enable geofencing in your <Vpl k="CLIENT" />. The following figure shows the workflow you implement for geofencing:

![Network Geofencing](/images/common/geofencing.png)

## Prerequisites

In order to follow this procedure you must have:

-   Implemented the [<Vg k="GET_STARTED"/>](../get-started/get-started-sdk) project for <Vpd k="NAME"/>.


## Implement geofencing in your <Vpl k="CLIENT" />

This section shows how to use the <Vpd k="SDK" /> to implement geofencing in your <Vpl k="CLIENT" />.

Call `AgoraRTM.setArea` to specify the region to connect to. After specifying the region,  <Vpd k="SDK" /> connects
to the Agora servers within that region. The following regions are supported:

-   `GLOBAL`: (Default) Global.

-   `CHINA`: Mainland China.

-   `ASIA`: Asia excluding mainland China.

-   `EUROPE`: Europe.

-   `INDIA`: India.

-   `JAPAN`: Japan.

-   `NORTH_AMERICA`: North America.

The following code shows you how to set the geolocation:

<Code PRODUCT="Signaling" CLIENT="app" PATH="signaling" />

If your <Vpl k="CLIENT" /> fails to connect to the specified region of <Vg k="AGORA_BACKEND" />, instead of connection to another <Vg k="AGORA_BACKEND" /> region, <Vpd k="SDK" /> throws an error. If a firewall is deployed in your network environment, ensure that you:

* Whitelist certain domains
* Allow all IP addresses
* Open the firewall ports defined in <Link to="../reference/cloud-proxy-allowed-ips">IP addresses for Cloud Proxy</Link>.

## Test geofencing

<ProjectTest/>

## Reference

This section contains information that completes the information in this page, or points you to documentation that explains other aspects to this product.

<Reference PRODUCT="Signaling" CLIENT="app" PATH="signaling" />
