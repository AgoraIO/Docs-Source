
<Tabs groupId="code-examples" categories={[
    { value: "basic", label: "Basic configuration" },
    { value: "advanced", label: "Advanced configuration" },
    { value: "keyword", label: "Keyword interruption mode" },
    { value: "string-uid", label: "Using string uid" },
    { value: "mcp", label: "MCP server" },
    { value: "padding", label: "Using the padding feature" },
    ]}>

<TabItem value="curl" label="curl" default category="basic">
    ```bash
    curl --request post \
    --url https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/join \
    --header 'Authorization: Basic <your_base64_encoded_credentials>' \
    --data '
    {
        "name": "unique_name",
        "properties": {
            "channel": "channel_name",
            "token": "token",
            "agent_rtc_uid": "1001",
            "remote_rtc_uids": [
                "1002"
            ],
            "idle_timeout": 120,
            "advanced_features": {
                "enable_aivad": true
            },
            "llm": {
                "url": "https://api.openai.com/v1/chat/completions",
                "api_key": "<your_llm_key>",
                "system_messages": [
                    {
                        "role": "system",
                        "content": "You are a helpful chatbot."
                    }
                ],
                "max_history": 32,
                "greeting_message": "Hello, how can I assist you today?",
                "failure_message": "Please hold on a second.",
                "params": {
                    "model": "gpt-4o-mini"
                }
            },
            "tts": {
                "vendor": "microsoft",
                "params": {
                    "key": "<your_tts_api_key>",
                    "region": "eastus",
                    "voice_name": "en-US-AndrewMultilingualNeural"
                }
            },
            "asr": {
                "language": "en-US"
            }
        }
    }'
    ```
</TabItem>
<TabItem value="python" label="Python" category="basic">

```python
import requests
import json

url = "https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/join"

headers = {"Authorization": "Basic <your_base64_encoded_credentials>"}

data = {
    "name": "unique_name",
    "properties": {
        "channel": "channel_name",
        "token": "token",
        "agent_rtc_uid": "1001",
        "remote_rtc_uids": ["1002"],
        "idle_timeout": 120,
        "advanced_features": {
            "enable_aivad": True
        },
        "llm": {
            "url": "https://api.openai.com/v1/chat/completions",
            "api_key": "<your_llm_key>",
            "system_messages": [
                {
                    "role": "system",
                    "content": "You are a helpful chatbot."
                }
            ],
            "max_history": 32,
            "greeting_message": "Hello, how can I assist you today?",
            "failure_message": "Please hold on a second.",
            "params": {
                "model": "gpt-4o-mini"
            }
        },
        "tts": {
            "vendor": "microsoft",
            "params": {
                "key": "<your_tts_api_key>",
                "region": "eastus",
                "voice_name": "en-US-AndrewMultilingualNeural"
            }
        },
        "asr": {
            "language": "en-US"
        }
    }
}

response = requests.post(url, headers=headers, data=json.dumps(data))

print(response.status_code)
print(response.json())
```
</TabItem>

<TabItem value="node" label="Node.js" category="basic">

```js
const axios = require("axios");

const url = "https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/join";

const headers = {
    "Authorization": "Basic <your_base64_encoded_credentials>"
};

const data = {
    name: "unique_name",
    properties: {
    channel: "channel_name",
    token: "token",
    agent_rtc_uid: "1001",
    remote_rtc_uids: ["1002"],
    idle_timeout: 120,
    advanced_features: {
        enable_aivad: true
    },
    llm: {
        url: "https://api.openai.com/v1/chat/completions",
        api_key: "<your_llm_key>",
        system_messages: [
        {
            role: "system",
            content: "You are a helpful chatbot."
        }
        ],
        max_history: 32,
        greeting_message: "Hello, how can I assist you today?",
        failure_message: "Please hold on a second.",
        params: {
        model: "gpt-4o-mini"
        }
    },
    tts: {
        vendor: "microsoft",
        params: {
        key: "<your_tts_api_key>",
        region: "eastus",
        voice_name: "en-US-AndrewMultilingualNeural"
        }
    },
    asr: {
        language: "en-US"
    }
    }
};

axios
    .post(url, data, { headers })
    .then(response => {
    console.log("Status:", response.status);
    console.log("Response:", response.data);
    })
    .catch(error => {
    console.error("Error:", error.response ? error.response.data : error.message);
    });
```
</TabItem>


<TabItem value="curl" label="curl" category="mcp">

```bash
curl --request POST \
  --url https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/join \
  --header 'Authorization: Basic <credentials>' \
  --data '
{
  "name": "unique_name",
  "properties": {
    "channel": "channel_name",
    "token": "token",
    "agent_rtc_uid": "0",
    "remote_rtc_uids": [
      "*"
    ],
    "idle_timeout": 120,
    "advanced_features": {
      "enable_aivad": true
    },
    "llm": {
      "url": "https://api.minimax.chat/v2/text/chatcompletion_v2",
      "api_key": "xxx",
      "system_messages": [
        {
          "role": "system",
          "content": "You are a helpful assistant. User name is {{user_name}}, and their account ID is {{account_id}}."
        }
      ],
      "greeting_message": "Hello {{user_name}}, how can I help you?",
      "failure_message": "Sorry, {{user_name}}, I cannot answer this question. Please try again later.",
      "max_history": 32,
      "params": {
        "model": "abab6.5s-chat",
        "max_token": 1024
      },
      "template_variables": {
        "user_name": "John",
        "account_id": "ACC123456",
        "silent_prompt": "If the user does not respond for an extended period, please inquire whether you require continued service."
      },
      "mcp_servers": [
        {
          "name": "sip_manager",
          "endpoint": "api.agora.io/sip_mcp/A42AA22AT45LxxxxxxxxxH76AM92W",
          "transport": "http",
          "headers": {
            "Authentication": "Basic xxxx"
          },
          "allowed_tools": [
            "sip-hangup"
          ]
        }
      ]
    },
    "asr": {
      "language": "en-US",
    },
    "tts": {
      "vendor": "minimax",
      "skip_patterns": [
        1
      ],
      "params": {
        "group_id": "xxxx",
        "key": "xxxx",
        "model": "speech-01-turbo",
        "voice_setting": {
          "voice_id": "female-shaonv",
          "speed": 1,
          "vol": 1,
          "pitch": 0,
          "emotion": "happy"
        },
        "audio_setting": {
          "sample_rate": 16000
        }
      }
    },
    "parameters": {
      "silence_config": {
        "timeout_ms": 10000,
        "action": "think",
        "content": "{{silent_prompt}}"
      }
    }
  }
}'
```
</TabItem>

<TabItem value="python" label="Python" category="mcp">

```python
import requests

url = "https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/join"

payload = {
    "name": "unique_name",
    "properties": {
        "channel": "channel_name",
        "token": "token",
        "agent_rtc_uid": "0",
        "remote_rtc_uids": ["*"],
        "idle_timeout": 120,
        "advanced_features": { "enable_aivad": True },
        "llm": {
            "url": "https://api.minimax.chat/v2/text/chatcompletion_v2",
            "api_key": "xxx",
            "system_messages": [
                {
                    "role": "system",
                    "content": "You are a helpful assistant. User name is {{user_name}}, and their account ID is {{account_id}}."
                }
            ],
            "greeting_message": "Hello {{user_name}}, how can I help you?",
            "failure_message": "Sorry, {{user_name}}, I cannot answer this question. Please try again later.",
            "max_history": 32,
            "params": {
                "model": "abab6.5s-chat",
                "max_token": 1024
            },
            "template_variables": {
                "user_name": "John",
                "account_id": "ACC123456",
                "silent_prompt": "If the user does not respond for an extended period, please inquire whether you require continued service."
            },
            "mcp_servers": [
                {
                    "name": "sip_manager",
                    "endpoint": "api.agora.io/sip_mcp/A42AA22AT45LxxxxxxxxxH76AM92W",
                    "transport": "http",
                    "headers": { "Authentication": "Basic xxxx" },
                    "allowed_tools": ["sip-hangup"]
                }
            ]
        },
        "asr": {
            "language": "en-US",
        },
        "tts": {
            "vendor": "minimax",
            "skip_patterns": [1],
            "params": {
                "group_id": "xxxx",
                "key": "xxxx",
                "model": "speech-01-turbo",
                "voice_setting": {
                    "voice_id": "female-shaonv",
                    "speed": 1,
                    "vol": 1,
                    "pitch": 0,
                    "emotion": "happy"
                },
                "audio_setting": { "sample_rate": 16000 }
            }
        },
        "parameters": { "silence_config": {
                "timeout_ms": 10000,
                "action": "think",
                "content": "{{silent_prompt}}"
            } }
    }
}
headers = {"Authorization": "Basic <credentials>"}

response = requests.post(url, json=payload, headers=headers)

print(response.text)
```
</TabItem>

<TabItem value="node" label="Node.js" category="mcp">

```js
const url = 'https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/join';
const options = {
  method: 'POST',
  headers: {Authorization: 'Basic <credentials>'},
  body: JSON.stringify({
    name: 'unique_name',
    properties: {
      channel: 'channel_name',
      token: 'token',
      agent_rtc_uid: '0',
      remote_rtc_uids: ['*'],
      idle_timeout: 120,
      advanced_features: {enable_aivad: true},
      llm: {
        url: 'https://api.minimax.chat/v2/text/chatcompletion_v2',
        api_key: 'xxx',
        system_messages: [
          {
            role: 'system',
            content: 'You are a helpful assistant. User name is {{user_name}}, and their account ID is {{account_id}}.'
          }
        ],
        greeting_message: 'Hello {{user_name}}, how can I help you?',
        failure_message: 'Sorry, {{user_name}}, I cannot answer this question. Please try again later.',
        max_history: 32,
        params: {model: 'abab6.5s-chat', max_token: 1024},
        template_variables: {
          user_name: 'John',
          account_id: 'ACC123456',
          silent_prompt: 'If the user does not respond for an extended period, please inquire whether you require continued service.'
        },
        mcp_servers: [
          {
            name: 'sip_manager',
            endpoint: 'api.agora.io/sip_mcp/A42AA22AT45LxxxxxxxxxH76AM92W',
            transport: 'http',
            headers: {Authentication: 'Basic xxxx'},
            allowed_tools: ['sip-hangup']
          }
        ]
      },
      asr: {language: 'en-US'},
      tts: {
        vendor: 'minimax',
        skip_patterns: [1],
        params: {
          group_id: 'xxxx',
          key: 'xxxx',
          model: 'speech-01-turbo',
          voice_setting: {voice_id: 'female-shaonv', speed: 1, vol: 1, pitch: 0, emotion: 'happy'},
          audio_setting: {sample_rate: 16000}
        }
      },
      parameters: {
        silence_config: {timeout_ms: 10000, action: 'think', content: '{{silent_prompt}}'}
      }
    }
  })
};

fetch(url, options)
  .then(res => res.json())
  .then(json => console.log(json))
  .catch(err => console.error(err));
```
</TabItem>


<TabItem value="curl" label="curl" category="advanced">
```bash
curl --request POST \
  --url https://api.agora.io/cn/api/conversational-ai-agent/v2/projects/:appid/join \
  --header 'Authorization: Basic <credentials>' \
  --data '
{
  "name": "full_config_agent",
  "properties": {
    "channel": "full_channel_name",
    "token": "full_token_value",
    "agent_rtc_uid": "12345",
    "remote_rtc_uids": [
      "67890"
    ],
    "enable_string_uid": false,
    "idle_timeout": 180,
    "silence_timeout": 30,
    "advanced_features": {
      "enable_aivad": true,
      "enable_rtm": true,
      "enable_sal": true
    },
    "asr": {
      "language": "zh-CN",
      "vendor": "microsoft",
      "params": {
        "key": "your_microsoft_key",
        "region": "chinaeast2",
        "language": "zh-CN",
        "phrase_list": [
          "agora",
          "fengming"
        ]
      }
    },
    "tts": {
      "vendor": "microsoft",
      "skip_patterns": [
        1,
        2
      ],
      "params": {
        "key": "your_microsoft_key",
        "region": "chinaeast2",
        "voice_name": "zh-CN-YunxiNeural",
        "speed": 1,
        "volume": 70,
        "sample_rate": 24000
      }
    },
    "llm": {
      "url": "https://api.openai.com/v1/chat/completions",
      "api_key": "your_openai_api_key",
      "system_messages": [
        {
          "role": "system",
          "content": "You are a professional AI assistant. User name is {{user_name}}."
        }
      ],
      "greeting_message": "您好{{user_name}}，我是您的智能助手，有什么可以帮您？",
      "greeting_configs": {
        "mode": "single_every"
      },
      "failure_message": "抱歉，系统出现问题，请稍后再试。",
      "max_history": 64,
      "input_modalities": [
        "text",
        "image"
      ],
      "output_modalities": [
        "text"
      ],
      "vendor": "custom",
      "params": {
        "model": "gpt-4o",
        "temperature": 0.8,
        "max_tokens": 2048,
        "stream": true
      },
      "template_variables": {
        "user_name": "张三",
        "company_name": "声网科技"
      },
      "filler_words": {
        "enable": true,
        "trigger": {
          "mode": "fixed_time",
          "config": {
            "response_wait_ms": 1500
          }
        },
        "content": {
          "mode": "static",
          "config": {
            "phrases": [
              "请稍等。",
              "好的。",
              "嗯嗯。"
            ],
            "selection_rule": "shuffle"
          }
        }
      }
    },
    "avatar": {
      "enable": true,
      "vendor": "sensetime",
      "params": {
        "agora_token": "avatar_token",
        "agora_uid": "99999",
        "appId": "sensetime_app_id",
        "app_key": "sensetime_app_key",
        "sceneList": [
          {
            "digital_role": {
              "face_feature_id": "face_feature_id_001",
              "position": {
                "x": 0,
                "y": 0
              },
              "url": "https://example.com/avatar_model.zip"
            }
          }
        ]
      }
    },
    "turn_detection": {
      "mode": "default",
      "config": {
        "speech_threshold": 0.5,
        "start_of_speech": {
          "mode": "vad",
          "vad_config": {
            "interrupt_duration_ms": 160,
            "speaking_interrupt_duration_ms": 320,
            "prefix_padding_ms": 800
          }
        },
        "end_of_speech": {
          "mode": "semantic",
          "semantic_config": {
            "silence_duration_ms": 320,
            "max_wait_ms": 3000
          }
        }
      }
    },
    "sal": {
      "sal_mode": "locking",
      "sample_urls": {
        "speaker1": "https://example.com/voiceprint1.pcm"
      }
    },
    "labels": {
      "campaign_id": "spring_2025",
      "customer_group": "vip",
      "region": "east_china"
    },
    "rtc": {
      "encryption_key": "your_32_byte_encryption_key_here",
      "encryption_salt": "TsP4fLLyxxxxxxxxxroLA9oE=",
      "encryption_mode": 8
    },
    "parameters": {
      "silence_config": {
        "timeout_ms": 15000,
        "action": "think",
        "content": "用户长时间未响应，请主动询问是否需要继续服务。"
      },
      "farewell_config": {
        "graceful_enabled": true,
        "graceful_timeout_seconds": 60
      },
      "data_channel": "rtm",
      "enable_metrics": true,
      "enable_error_message": true
    }
  }
}'
```
</TabItem>

<TabItem value="python" label="Python" category="advanced">

```python
import requests

url = "https://api.agora.io/cn/api/conversational-ai-agent/v2/projects/:appid/join"

payload = {
    "name": "full_config_agent",
    "properties": {
        "channel": "full_channel_name",
        "token": "full_token_value",
        "agent_rtc_uid": "12345",
        "remote_rtc_uids": ["67890"],
        "enable_string_uid": False,
        "idle_timeout": 180,
        "silence_timeout": 30,
        "advanced_features": {
            "enable_aivad": True,
            "enable_rtm": True,
            "enable_sal": True
        },
        "asr": {
            "language": "zh-CN",
            "vendor": "microsoft",
            "params": {
                "key": "your_microsoft_key",
                "region": "chinaeast2",
                "language": "zh-CN",
                "phrase_list": ["agora", "fengming"]
            }
        },
        "tts": {
            "vendor": "microsoft",
            "skip_patterns": [1, 2],
            "params": {
                "key": "your_microsoft_key",
                "region": "chinaeast2",
                "voice_name": "zh-CN-YunxiNeural",
                "speed": 1,
                "volume": 70,
                "sample_rate": 24000
            }
        },
        "llm": {
            "url": "https://api.openai.com/v1/chat/completions",
            "api_key": "your_openai_api_key",
            "system_messages": [
                {
                    "role": "system",
                    "content": "You are a professional AI assistant. User name is {{user_name}}."
                }
            ],
            "greeting_message": "您好{{user_name}}，我是您的智能助手，有什么可以帮您？",
            "greeting_configs": { "mode": "single_every" },
            "failure_message": "抱歉，系统出现问题，请稍后再试。",
            "max_history": 64,
            "input_modalities": ["text", "image"],
            "output_modalities": ["text"],
            "vendor": "custom",
            "params": {
                "model": "gpt-4o",
                "temperature": 0.8,
                "max_tokens": 2048,
                "stream": True
            },
            "template_variables": {
                "user_name": "张三",
                "company_name": "声网科技"
            },
            "filler_words": {
                "enable": True,
                "trigger": {
                    "mode": "fixed_time",
                    "config": { "response_wait_ms": 1500 }
                },
                "content": {
                    "mode": "static",
                    "config": {
                        "phrases": ["请稍等。", "好的。", "嗯嗯。"],
                        "selection_rule": "shuffle"
                    }
                }
            }
        },
        "avatar": {
            "enable": True,
            "vendor": "sensetime",
            "params": {
                "agora_token": "avatar_token",
                "agora_uid": "99999",
                "appId": "sensetime_app_id",
                "app_key": "sensetime_app_key",
                "sceneList": [{ "digital_role": {
                            "face_feature_id": "face_feature_id_001",
                            "position": {
                                "x": 0,
                                "y": 0
                            },
                            "url": "https://example.com/avatar_model.zip"
                        } }]
            }
        },
        "turn_detection": {
            "mode": "default",
            "config": {
                "speech_threshold": 0.5,
                "start_of_speech": {
                    "mode": "vad",
                    "vad_config": {
                        "interrupt_duration_ms": 160,
                        "speaking_interrupt_duration_ms": 320,
                        "prefix_padding_ms": 800
                    }
                },
                "end_of_speech": {
                    "mode": "semantic",
                    "semantic_config": {
                        "silence_duration_ms": 320,
                        "max_wait_ms": 3000
                    }
                }
            }
        },
        "sal": {
            "sal_mode": "locking",
            "sample_urls": { "speaker1": "https://example.com/voiceprint1.pcm" }
        },
        "labels": {
            "campaign_id": "spring_2025",
            "customer_group": "vip",
            "region": "east_china"
        },
        "rtc": {
            "encryption_key": "your_32_byte_encryption_key_here",
            "encryption_salt": "TsP4fLLyxxxxxxxxxroLA9oE=",
            "encryption_mode": 8
        },
        "parameters": {
            "silence_config": {
                "timeout_ms": 15000,
                "action": "think",
                "content": "用户长时间未响应，请主动询问是否需要继续服务。"
            },
            "farewell_config": {
                "graceful_enabled": True,
                "graceful_timeout_seconds": 60
            },
            "data_channel": "rtm",
            "enable_metrics": True,
            "enable_error_message": True
        }
    }
}
headers = {"Authorization": "Basic <credentials>"}

response = requests.post(url, json=payload, headers=headers)

print(response.text)
```
</TabItem>

<TabItem value="node" label="Node.js" category="advanced">

```js
const url = 'https://api.agora.io/cn/api/conversational-ai-agent/v2/projects/:appid/join';
const options = {
  method: 'POST',
  headers: {Authorization: 'Basic <credentials>'},
  body: JSON.stringify({
    name: 'full_config_agent',
    properties: {
      channel: 'full_channel_name',
      token: 'full_token_value',
      agent_rtc_uid: '12345',
      remote_rtc_uids: ['67890'],
      enable_string_uid: false,
      idle_timeout: 180,
      silence_timeout: 30,
      advanced_features: {enable_aivad: true, enable_rtm: true, enable_sal: true},
      asr: {
        language: 'zh-CN',
        vendor: 'microsoft',
        params: {
          key: 'your_microsoft_key',
          region: 'chinaeast2',
          language: 'zh-CN',
          phrase_list: ['agora', 'fengming']
        }
      },
      tts: {
        vendor: 'microsoft',
        skip_patterns: [1, 2],
        params: {
          key: 'your_microsoft_key',
          region: 'chinaeast2',
          voice_name: 'zh-CN-YunxiNeural',
          speed: 1,
          volume: 70,
          sample_rate: 24000
        }
      },
      llm: {
        url: 'https://api.openai.com/v1/chat/completions',
        api_key: 'your_openai_api_key',
        system_messages: [
          {
            role: 'system',
            content: 'You are a professional AI assistant. User name is {{user_name}}.'
          }
        ],
        greeting_message: '您好{{user_name}}，我是您的智能助手，有什么可以帮您？',
        greeting_configs: {mode: 'single_every'},
        failure_message: '抱歉，系统出现问题，请稍后再试。',
        max_history: 64,
        input_modalities: ['text', 'image'],
        output_modalities: ['text'],
        vendor: 'custom',
        params: {model: 'gpt-4o', temperature: 0.8, max_tokens: 2048, stream: true},
        template_variables: {user_name: '张三', company_name: '声网科技'},
        filler_words: {
          enable: true,
          trigger: {mode: 'fixed_time', config: {response_wait_ms: 1500}},
          content: {
            mode: 'static',
            config: {phrases: ['请稍等。', '好的。', '嗯嗯。'], selection_rule: 'shuffle'}
          }
        }
      },
      avatar: {
        enable: true,
        vendor: 'sensetime',
        params: {
          agora_token: 'avatar_token',
          agora_uid: '99999',
          appId: 'sensetime_app_id',
          app_key: 'sensetime_app_key',
          sceneList: [
            {
              digital_role: {
                face_feature_id: 'face_feature_id_001',
                position: {x: 0, y: 0},
                url: 'https://example.com/avatar_model.zip'
              }
            }
          ]
        }
      },
      turn_detection: {
        mode: 'default',
        config: {
          speech_threshold: 0.5,
          start_of_speech: {
            mode: 'vad',
            vad_config: {
              interrupt_duration_ms: 160,
              speaking_interrupt_duration_ms: 320,
              prefix_padding_ms: 800
            }
          },
          end_of_speech: {
            mode: 'semantic',
            semantic_config: {silence_duration_ms: 320, max_wait_ms: 3000}
          }
        }
      },
      sal: {
        sal_mode: 'locking',
        sample_urls: {speaker1: 'https://example.com/voiceprint1.pcm'}
      },
      labels: {campaign_id: 'spring_2025', customer_group: 'vip', region: 'east_china'},
      rtc: {
        encryption_key: 'your_32_byte_encryption_key_here',
        encryption_salt: 'TsP4fLLyxxxxxxxxxroLA9oE=',
        encryption_mode: 8
      },
      parameters: {
        silence_config: {timeout_ms: 15000, action: 'think', content: '用户长时间未响应，请主动询问是否需要继续服务。'},
        farewell_config: {graceful_enabled: true, graceful_timeout_seconds: 60},
        data_channel: 'rtm',
        enable_metrics: true,
        enable_error_message: true
      }
    }
  })
};

fetch(url, options)
  .then(res => res.json())
  .then(json => console.log(json))
  .catch(err => console.error(err));
```
</TabItem>


<TabItem value="curl" label="curl" category="keyword">
```bash
// test
```
</TabItem>

<TabItem value="python" label="Python" category="keyword">
```python
// test
```
</TabItem>

<TabItem value="node" label="Node.js" category="keyword">
```js
// test
```
</TabItem>


<TabItem value="curl" label="curl" category="string-uid">
```bash
// test
```
</TabItem>

<TabItem value="python" label="Python" category="string-uid">
```python
// test
```
</TabItem>

<TabItem value="node" label="Node.js" category="string-uid">
```js
// test
```
</TabItem>


<TabItem value="curl" label="curl" category="padding">
```bash
// test
```
</TabItem>

<TabItem value="python" label="Python" category="padding">
```python
// test
```
</TabItem>

<TabItem value="node" label="Node.js" category="padding">
```js
// test
```
</TabItem>
</Tabs>