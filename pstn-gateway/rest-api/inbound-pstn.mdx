---
title: 'Inbound PSTN'
sidebar_position: 1
platform_selector: false
description: >
  The end-user dials a phone number to connect to an Agora channel.
---

import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="POST"
    endpoint="https://sipcm.agora.io/v1/api/pstn"
  >

Enable users to join an Agora channel by dialing a phone number. Users dial the provided number and enter the PIN when prompted, to connect to the specified channel.

<Admonition type="info">
Direct Inward Dialing (DID) providers such as Twilio allow you to purchase a phone number and forward calls to a SIP address. Agora provides the SIP address for call forwarding when your service is provisioned. You can also customize the voice prompts played to your end-users.
</Admonition>

## Request

### Request body

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="BODY" required={true}>
  <Parameter name="action" type="string" possibleValues="inbound, outbound" required={true}>
    The type of PSTN call flow. Use "inbound" for calls where users dial in to join a channel.
  </Parameter>
  <Parameter name="appId" type="string" required={true}>
    The App ID of your Agora project.
  </Parameter>
  <Parameter name="token" type="string" required={false}>
    A valid Agora RTC authentication token for the specified channel and user.
  </Parameter>
  <Parameter name="uid" type="string" required={false}>
    A unique identifier for the user joining the channel via PSTN.
  </Parameter>
  <Parameter name="channel" type="string" required={true}>
    The channel name to connect to.
  </Parameter>
  <Parameter name="region" type="string" required={true}>
    The region where the user is located and will likely be calling from.

    - `AREA_CODE_NA`: North America    
    - `AREA_CODE_EU`: Europe    
    - `AREA_CODE_AS`: Asia, excluding Mainland China    
    - `AREA_CODE_JP`: Japan   
    - `AREA_CODE_IN`: India   
    - `AREA_CODE_CN`: Mainland China    

  </Parameter>
</ParameterList>

## Response

- If the returned status code is `200`, the request was successful. The response body contains the result of the request.

  <ParameterList title="OK">
    <Parameter name="did" type="string">
      The phone number that a user dials to join the channel.
    </Parameter>
    <Parameter name="display" type="string">
      The phone number to dial in a more friendly display format.
    </Parameter> 
    <Parameter name="pin" type="string">
      The PIN code a user must enter after dialing to authenticate and join the channel.
    </Parameter> 
  </ParameterList>

- If the returned status code is not `200`, the request failed.  Refer to `message` and `code` fields to understand the possible reasons for failure.

  <ParameterList title="Non-200">
    <Parameter name="code" type="integer">
    Error response codes:
    - `401` Unauthorized
    - `500` Missing Parameters
    - `503` No resource currently available
    </Parameter>
  </ParameterList>

</LeftColumn>

<RightColumn>

<Section title="Authorization">
[Contact](mailto:support@agora.io) Agora support for an authorization header to include in your requests.
</Section>

<Section title="Request example">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
      ```bash
      curl -X POST https://sipcm.agora.io/v1/api/pstn \
        -H "Content-Type: application/json" \
        -H "Authorization: [Your-Authorization-Header]" \
        -d '{
          "action": "inbound",
          "appId": "[Your-Agora-App-ID]",
          "token": "[Your-Agora-Authentication-Token]",
          "uid": "123",
          "channel": "demo",
          "region": "AREA_CODE_NA"
        }'
      ```
    </TabItem>
    <TabItem value="python" label="Python">

    ```python
    import requests
    import json

    url = "https://sipcm.agora.io/v1/api/pstn"

    headers = {
        "Content-Type": "application/json",
        "Authorization": "[Your-Authorization-Header]"
    }

    data = {
        "action": "inbound",
        "appId": "[Your-Agora-App-ID]",
        "token": "[Your-Agora-Authentication-Token]",
        "uid": "123",
        "channel": "demo",
        "region": "AREA_CODE_NA"
    }

    response = requests.post(url, headers=headers, json=data)

    if response.status_code == 200:
        result = response.json()
        print(f"Phone number: {result['display']}")
        print(f"PIN: {result['pin']}")
    else:
        print(f"Error: {response.status_code} - {response.json()['message']}")
    ```
    </TabItem>

    <TabItem value="node" label="Node.js">

    ```js
    const axios = require('axios');

    const url = 'https://sipcm.agora.io/v1/api/pstn';

    const headers = {
        'Content-Type': 'application/json',
        'Authorization': '[Your-Authorization-Header]'
    };

    const data = {
        action: 'inbound',
        appId: '[Your-Agora-App-ID]',
        token: '[Your-Agora-Authentication-Token]',
        uid: '123',
        channel: 'demo',
        region: 'AREA_CODE_NA'
    };

    axios.post(url, data, { headers })
        .then(response => {
            console.log(`Phone number: ${response.data.display}`);
            console.log(`PIN: ${response.data.pin}`);
        })
        .catch(error => {
            if (error.response) {
                console.error(`Error: ${error.response.status} - ${error.response.data.message}`);
            } else {
                console.error('Error:', error.message);
            }
        });
    ```
    </TabItem>
  </Tabs>

</Section>

<Section title="Response example">

```json
{  
  "did": "17377583411",
  "display": "+1 (737) 758 3411",
  "pin": "780592"
}
```
</Section>
</RightColumn>
</RestAPILayout>
