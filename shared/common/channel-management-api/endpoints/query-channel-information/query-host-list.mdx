import Authorization from '@docs/shared/common/channel-management-api/authorization.mdx';
import CodeBlock from '@theme/CodeBlock';

This method gets the list of hosts in the specified channel in the live broadcast scenario.

### Prototype

- Method: `GET`
- Endpoint: `https://api.agora.io/dev/v1/channel/user/{appid}/{channelName}/hosts_only`

This API is only used in the live broadcast profile (`mode` is set to `2`). Users in the same channel must use the same profile. Otherwise, the query results may be inaccurate.

This API and the [query user status](query-user-status) API can both be used to synchronize the online status of hosts. Compared to the [query user status](query-user-status) API, this API requires a lower call frequency and has a higher efficiency. Therefore, Agora recommends using this API for this purpose.

### Request parameters

**Path parameters**

Pass the following path parameters in the request URL:

| Parameter     | Type   | Required/Optional | Description                                                  |
| :------ | :-----  |:----- | :---------------------- |
| `appid` | String | Required |The App ID of the project. You can get it through one of the following methods:<li>Copy from the <Link to="{{Global.AGORA_CONSOLE_URL}}"><Vg k="CONSOLE" /></Link>.</li><li> Call the [Get all projects](/interactive-live-streaming/reference/agora-console-rest-api#get-all-projects) API, and read the value of the `vendor_key` field in the response body.</li>|
| `channelName` | String | Required | The channel name. |

**Request header**

<Authorization/>

### Request examples

<details>
<summary>Shell</summary>

  - <details>
    <summary>curl</summary>

    <CodeBlock language="shell" showLineNumbers>
      {`curl --request GET \\
          --url https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only \\
          --header 'Accept: application/json'\ \\
          --header 'Authorization: Basic 123'`}
    </CodeBlock>
    </details>

  - <details>
    <summary>HTTPie</summary>

    <CodeBlock language="shell" showLineNumbers>
      {`http GET https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only \\
          Accept:application/json \\
          Authorization:'Basic 123'`}
    </CodeBlock>
    </details>

  - <details>
    <summary>wget</summary>

    <CodeBlock language="shell" showLineNumbers>
      {`wget --quiet \\
          --method GET \\
          --header 'Accept: application/json'\ \\
          --header 'Authorization: Basic 123' \\
          --output-document \\
          - https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts`}
    </CodeBlock>
    </details>
</details>


<details>
<summary>Javascript</summary>

  - <details>
    <summary>Fetch</summary>

    <CodeBlock language="js" showLineNumbers>
      {`const url = 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only';
    const options = {
      method\: 'GET',
      headers: {Accept: 'application/json', Authorization: 'Basic 123'}
    };

    try {
      const response = await fetch(url, options);
      const data = await response.json();
      console.log(data);
    } catch (error) {
      console.error(error);
    }`}
    </CodeBlock>
    </details>

  - <details>
    <summary>XMLHTTPRequest</summary>

    <CodeBlock language="js" showLineNumbers>
      {`const data = null;

    const\ xhr = new XMLHttpRequest();
    xhr.withCredentials = true;

    xhr.addEventListener('readystatechange', function () {
      if (this.readyState === this.DONE) {
        console.log(this.responseText);
      }
    });

    xhr.open('GET', 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only');
    xhr.setRequestHeader('Accept', 'application/json');
    xhr.setRequestHeader('Authorization', 'Basic 123');

    xhr.send(data);`}
    </CodeBlock>
    </details>

  - <details>
    <summary>jQuery</summary>

    <CodeBlock language="js" showLineNumbers>
      {`const settings = {
      async: true,
      crossDomain\: true,
      url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
      method: 'GET',
      headers: {
        Accept: 'application/json',
        Authorization: 'Basic 123'
      }
    };

    $.ajax(settings).done(function (response) {
      console.log(response);
    });`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Axios</summary>

    <CodeBlock language="js" showLineNumbers>
      {`import axios from 'axios';

    const options = {
      method: 'GET',
      url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
      headers: { Accept: 'application/json', Authorization: 'Basic 123' }
    };

    const fetchData = async () => {
      try {
        const { data } = await axios.request(options);
        console.log(data);
      } catch (error) {
        console.error(error);
      }
    };

    fetchData();
    `}
    </CodeBlock>
    </details>
</details>

<details>
<summary>Node</summary>

  - <details>
    <summary>Native</summary>

    <CodeBlock language="js" showLineNumbers>
      {`const http = require('https');

    const\ options = {
      method: 'GET',
      hostname: 'api.sd-rtn.com',
      port: null,
      path: '/dev/v1/channel/user/appid/channelName/hosts_only',
      headers: {
        Accept: 'application/json',
        Authorization: 'Basic 123'
      }
    };

    const req = http.request(options, function (res) {
      const chunks = [];

      res.on('data', function (chunk) {
        chunks.push(chunk);
      });

      res.on('end', function () {
        const body = Buffer.concat(chunks);
        console.log(body.toString());
      });
    });

    req.end();`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Request</summary>

    <CodeBlock language="js" showLineNumbers>
      {`const request = require('request');

    const\ options = {
      method: 'GET',
      url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
      headers: {Accept: 'application/json', Authorization: 'Basic 123'}
    };

    request(options, function (error, response, body) {
      if (error) throw new Error(error);

      console.log(body);
    });`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Unirest</summary>

    <CodeBlock language="js" showLineNumbers>
      {`const unirest = require('unirest');

    const\ req = unirest('GET', 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only');

    req.headers({
      Accept: 'application/json',
      Authorization: 'Basic 123'
    });

    req.end(function (res) {
      if (res.error) throw new Error(res.error);

      console.log(res.body);
    });`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Fetch</summary>

    <CodeBlock language="js" showLineNumbers>
      {`const fetch = require('node-fetch');

    const url = 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only';
    const options = {
      method: 'GET',
      headers: {Accept: 'application/json', Authorization: 'Basic 123'}
    };

    try {
      const response = await fetch(url, options);
      const data = await response.json();
      console.log(data);
    } catch (error) {
      console.error(error);
    }`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Axios</summary>

    <CodeBlock language="js" showLineNumbers>
      {`import axios from 'axios';

    const options = {
      method: 'GET',
      url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
      headers: { Accept: 'application/json', Authorization: 'Basic 123' }
    };

    try {
      const { data } = await axios.request(options);
      console.log(data);
    } catch (error) {
      console.error(error);
    }`}
    </CodeBlock>
    </details>
</details>

<details>
<summary>Python</summary>

  - <details>
    <summary>Python 3</summary>

    <CodeBlock language="python" showLineNumbers>
      {`import http.client

    conn =\ http.client.HTTPSConnection("api.sd-rtn.com")

    headers = {
        'Accept': "application/json",
        'Authorization': "Basic 123"
    }

    conn.request("GET", "/dev/v1/channel/user/appid/channelName/hosts_only", headers=headers)

    res = conn.getresponse()
    data = res.read()

    print(data.decode("utf-8"))`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Requests</summary>

    <CodeBlock language="python" showLineNumbers>
      {`import requests

    url =\ "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"

    headers = {
        "Accept": "application/json",
        "Authorization": "Basic 123"
    }

    response = requests.get(url, headers=headers)

    print(response.json())`}
    </CodeBlock>
    </details>
</details>

<details>
<summary>Go</summary>

<CodeBlock language="go" showLineNumbers>
{`package main

import\ (
  "fmt"
  "net/http"
  "io"
)

func main() {

  url := "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"

  req, _ := http.NewRequest("GET", url, nil)

  req.Header.Add("Accept", "application/json")
  req.Header.Add("Authorization", "Basic 123")

  res, _ := http.DefaultClient.Do(req)

  defer res.Body.Close()
  body, _ := io.ReadAll(res.Body)

  fmt.Println(res)
  fmt.Println(string(body))
}`}
</CodeBlock>
</details>

<details>
<summary>C</summary>
<CodeBlock language="c" showLineNumbers>
  {`CURL *hnd = curl_easy_init();

curl_easy_setopt\(hnd, CURLOPT_CUSTOMREQUEST, "GET");
curl_easy_setopt(hnd, CURLOPT_URL, "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only");

struct curl_slist *headers = NULL;
headers = curl_slist_append(headers, "Accept: application/json");
headers = curl_slist_append(headers, "Authorization: Basic 123");
curl_easy_setopt(hnd, CURLOPT_HTTPHEADER, headers);

CURLcode ret = curl_easy_perform(hnd);`}
</CodeBlock>
</details>

<details>
<summary>Objective-C</summary>

<CodeBlock language="objc" showLineNumbers>
  {`#import <Foundation/Foundation.h>

NSDictionary *\headers = @{ @"Accept": @"application/json",
                            @"Authorization": @"Basic 123" };

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"]
                                                        cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                    timeoutInterval:10.0];
[request setHTTPMethod:@"GET"];
[request setAllHTTPHeaderFields:headers];

NSURLSession *session = [NSURLSession sharedSession];
NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request
                                            completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                                                if (error) {
                                                    NSLog(@"%@", error);
                                                } else {
                                                    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
                                                    NSLog(@"%@", httpResponse);
                                                }
                                            }];
[dataTask resume];`}
</CodeBlock>
</details>

<details>
<summary>OCaml</summary>

<CodeBlock language="ocaml" showLineNumbers>
  {`open Cohttp_lwt_unix
open Cohttp
open Lwt

let uri = Uri.of_string "http://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only" in
let headers = Header.add_list (Header.init ()) [
    ("Accept", "application/json");
    ("Authorization", "Basic 123");
] in

let\%lwt res, body_stream = Client.call ~headers \`GET uri in
(* Process the response and body_stream *)
Lwt.return_unit`}
</CodeBlock>
</details>

<details>
<summary>C#</summary>
  - <details>
    <summary>HTTPClient</summary>

    <CodeBlock language="csharp" showLineNumbers>
      {`using System.Net.Http.Headers;
    var client = new HttpClient();
    \var request = new HttpRequestMessage
    {
        Method = HttpMethod.Get,
        RequestUri = new Uri("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"),
        Headers =
        {
            { "Accept", "application/json" },
            { "Authorization", "Basic 123" },
        },
    };
    using (var response = await client.SendAsync(request))
    {
        response.EnsureSuccessStatusCode();
        var body = await response.Content.ReadAsStringAsync();
        Console.WriteLine(body);
    }`}
    </CodeBlock>
    </details>

  - <details>
    <summary>RestSharp</summary>

    <CodeBlock language="csharp" showLineNumbers>
      {`var client = new RestClient("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only");
    var request = new RestRequest(Method.GET);
    request\.AddHeader("Accept", "application/json");
    request.AddHeader("Authorization", "Basic 123");
    IRestResponse response = client.Execute(request);`}
    </CodeBlock>
    </details>
</details>


<details>
<summary>Java</summary>
  - <details>
    <summary>AsyncHttp</summary>

    <CodeBlock language="java" showLineNumbers>
      {`AsyncHttpClient client = new DefaultAsyncHttpClient();
    client.prepare("GET", "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
      \.setHeader("Accept", "application/json")
      .setHeader("Authorization", "Basic 123")
      .execute()
      .toCompletableFuture()
      .thenAccept(System.out::println)
      .join();

    client.close();`}
    </CodeBlock>
    </details>

  - <details>
    <summary>NetHttp</summary>

    <CodeBlock language="java" showLineNumbers>
      {`HttpRequest request = HttpRequest.newBuilder()
        .uri(URI.create("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"))
        \.header("Accept", "application/json")
        .header("Authorization", "Basic 123")
        .method("GET", HttpRequest.BodyPublishers.noBody())
        .build();
    HttpResponse<String> response = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());
    System.out.println(response.body());`}
    </CodeBlock>
    </details>

  - <details>
    <summary>OkHttp</summary>

    <CodeBlock language="java" showLineNumbers>
      {`OkHttpClient client = new OkHttpClient();

    \Request request = new Request.Builder()
      .url("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
      .get()
      .addHeader("Accept", "application/json")
      .addHeader("Authorization", "Basic 123")
      .build();

    Response response = client.newCall(request).execute();`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Unirest</summary>

    <CodeBlock language="java" showLineNumbers>
      {`HttpResponse<String> response = Unirest.get("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
      .header("Accept", "application/json")
      \.header("Authorization", "Basic 123")
      .asString();`}
    </CodeBlock>
    </details>
</details>

<details>
<summary>Http 1.1</summary>

<CodeBlock language="http" showLineNumbers>
  {`GET /dev/v1/channel/user/appid/channelName/hosts_only HTTP/1.1
  Accept: application/json
  \Authorization: Basic 123
  Host: api.sd-rtn.com`}
</CodeBlock>
</details>

<details>
<summary>Clojure</summary>

<CodeBlock language="clojure" showLineNumbers>
  {`(require '[clj-http.client :as client])

(client/get "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only" 
            {:headers {:Authorization "Basic 123"
                       :Accept "application/json"}})
`}
</CodeBlock>
</details>

<details>
<summary>Kotlin</summary>

<CodeBlock language="kotlin" showLineNumbers>
  {`val client = OkHttpClient()

\val request = Request.Builder()
  .url("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
  .get()
  .addHeader("Accept", "application/json")
  .addHeader("Authorization", "Basic 123")
  .build()

val response = client.newCall(request).execute()`}
</CodeBlock>
</details>


<details>
<summary>PHP</summary>
  - <details>
    <summary>cURL</summary>

    <CodeBlock language="php" showLineNumbers>
      {`<?php

    \$curl = curl_init();

    curl_setopt_array($curl, [
      CURLOPT_URL => "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only",
      CURLOPT_RETURNTRANSFER => true,
      CURLOPT_ENCODING => "",
      CURLOPT_MAXREDIRS => 10,
      CURLOPT_TIMEOUT => 30,
      CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
      CURLOPT_CUSTOMREQUEST => "GET",
      CURLOPT_HTTPHEADER => [
        "Accept: application/json",
        "Authorization: Basic 123"
      ],
    ]);

    $response = curl_exec($curl);
    $err = curl_error($curl);

    curl_close($curl);

    if ($err) {
      echo "cURL Error #:" . $err;
    } else {
      echo $response;
    }`}
    </CodeBlock>
    </details>

  - <details>
    <summary>Guzzle</summary>

    <CodeBlock language="php" showLineNumbers>
      {`<?php

    \$client = new \GuzzleHttp\Client();

    $response = $client->request('GET', 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only', [
      'headers' => [
        'Accept' => 'application/json',
        'Authorization' => 'Basic 123',
      ],
    ]);

    echo $response->getBody();`}
    </CodeBlock>
    </details>
</details>

<details>
<summary>PowerShell</summary>
  - <details>
    <summary>WebRequest</summary>

    <CodeBlock language="shell" showLineNumbers>
      {`$headers=@{}
    $headers.Add("Accept", "application/json")
    \$headers.Add("Authorization", "Basic 123")
    $response = Invoke-WebRequest -Uri 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only' -Method GET -Headers $headers`}
    </CodeBlock>
    </details>

 -  <details>
    <summary>RestMethod</summary>

    <CodeBlock language="shell" showLineNumbers>
      {`$headers=@{}
    $headers.Add("Accept", "application/json")
    \$headers.Add("Authorization", "Basic 123")
    $response = Invoke-RestMethod -Uri 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only' -Method GET -Headers $headers`}
    </CodeBlock>
    </details>
</details>

<details>
<summary>R</summary>

<CodeBlock language="r" showLineNumbers>
  {`library(httr)

url \<- "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"

response <- VERB("GET", url, add_headers('Authorization' = 'Basic 123'), content_type("application/octet-stream"), accept("application/json"))

content(response, "text")`}
</CodeBlock>
</details>

<details>
<summary>Ruby</summary>
<CodeBlock language="ruby" showLineNumbers>
  {`require 'uri'
require 'net/http'

url = URI("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true

request = Net::HTTP::Get.new(url)
request["Accept"] = 'application/json'
request["Authorization"] = 'Basic 123'

response = http.request(request)
puts response.read_body`}
</CodeBlock>
</details>

<details>
<summary>Swift</summary>
<CodeBlock language="swift" showLineNumbers>
  {`import Foundation

\let headers = [
  "Accept": "application/json",
  "Authorization": "Basic 123"
]

let request = NSMutableURLRequest(url: NSURL(string: "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")! as URL,
                                        cachePolicy: .useProtocolCachePolicy,
                                    timeoutInterval: 10.0)
request.httpMethod = "GET"
request.allHTTPHeaderFields = headers

let session = URLSession.shared
let dataTask = session.dataTask(with: request as URLRequest, completionHandler: { (data, response, error) -> Void in
  if (error != nil) {
    print(error as Any)
  } else {
    let httpResponse = response as? HTTPURLResponse
    print(httpResponse)
  }
})

dataTask.resume()`}
</CodeBlock>
</details>

### Response parameters

For details about possible response status codes, see [Response status codes](../../response-status-code).

If the status code is not `200`, the request fails. See the `message` field in the response body for the reason for this failure.

If the status code is `200`, the request succeeds, and the response body includes the following parameters:

| Parameter | Type    | Description                                                  |
| :-------- | :------ | :----------------------------------------------------------- |
| `success` | Boolean | The state of this request:<li>`true`: Success.</li><li>`false`: Reserved for future use.</li> |
| `data`    | Object  | User information, including the following fields: <ul><li>`channel_exist`: Boolean. Whether the specified channel exists:<ul><li>`true`: The channel exists.</li><li>`false`: The channel does not exist.</li></ul>**Note**: All other fields are not returned when the value of `channel_exist` is `false`.</li><li>`mode`: Number. The channel profile:<ul><li>`1`：The `COMMUNICATION` profile.</li><li>`2`: The `LIVE_BROADCASTING` profile.</li></ul></li><li>`broadcasters`：Array. User IDs of all hosts in the channel. This field is returned only when `mode` is `2`.</li></ul> |

### Response example

The following is a response example for a successful request:

```json
{
  "success": true,
  "data": {
    "channel_exist": true,
    "mode": 2,
    "broadcasters": [
      574332,
      1347839
    ]
  }
}
```

