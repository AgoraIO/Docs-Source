<PlatformWrapper platform="flutter">

This section shows you the basic code framework you add to your project to integrate an extension into your Flutter project.

1.  Import necessary classes

    1.  Download the [watermark extension](https://web-cdn.agora.io/docs-files/1630400262363) and follow the steps for `.aar` files in [setup](#project-setup).

    2.  In `app/src/main/java/com.example.<projectname>/MainActivity`:

        1.  Add the following lines to import the Android classes used by the extension:

            ``` java
            import org.json.JSONException;
            import org.json.JSONObject;
            ```

        2.  Add the following lines to import the Agora classes used by the extension:

            ``` java
            // ExtensionManager is used to pass in basic information about the extension
            import io.agora.extension.ExtensionManager;
            import io.agora.rtc2.IMediaExtensionObserver;
            import io.agora.rtc2.RtcEngineConfig;
            ```

2.  Enable and use the extension

    Call `enableExtension` to enable the extension. 

    1.  In `app/src/main/java/com.example.<projectname>/MainActivity`, replace the current `initializeAndJoinChannel` function with the following code:

        ``` dart
        agoraEngine.loadExtensionProvider('path');

        agoraEngine.enableExtension(
            provider: "<The name of the extension provider.>",
            extension: "<The name of the extension.>",
            type: MediaSourceType.unknownMediaSource,
            // If you want to use the second camera to capture video,
            // set the type parameter to secondaryCameraSource
            enable: true
        );


        agoraEngine.setExtensionProperty(
            provider: provider,
            extension: extension,
            key: key,
            value: value);

            mRtcEngine.joinChannel(token, channelName, 0, options);

            JSONObject o = new JSONObject();
            try {
                // Pass in the key-value pairs defined by the extension provider to configure the feature you want to use.
                o.put("plugin.watermark.wmStr", "Agora");
                o.put("plugin.watermark.wmEffectEnabled", true);

                // Call setExtensionProperty to use the watermark feature.
                mRtcEngine.setExtensionProperty(ExtensionManager.EXTENSION_VENDOR_NAME, ExtensionManager.EXTENSION_VIDEO_FILTER_NAME, "key", o.toString());
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
        ```

    To enable multiple extensions, call enableExtension as many times. The sequence of enabling multiple extensions determines the order of these extensions in the transmission pipeline. For example, if you enable extension A before extension B, extension A processes data from the SDK before extension B.
</PlatformWrapper>
