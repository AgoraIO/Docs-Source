import CodeBlock from '@theme/CodeBlock';

1. **Integrate the subtitle processing toolkit**

    Copy the [`convoaiApi`](https://github.com/AgoraIO-Community/Conversational-AI-Demo/tree/main/Android/scenes/convoai/src/main/java/io/agora/scene/convoai/convoaiApi) folder to your project and import the toolkit before calling the toolkit API. Refer to [Toolkit Structure](#toolkit-structure) to understand the role of each file.

1. **Create a subtitle processing toolkit instance**

    Create configuration objects for the <Vg k="VSDK"/> and Chat SDK instances, and then initialize the toolkit instance.

    <CodeBlock language="kotlin" showLineNumbers>
    {`// Create a configuration object for the Video SDK and Chat SDK instances
    val config = ConversationalAIAPIConfig(
        rtcEngine = rtcEngineInstance,
        rtmClient = rtmClientInstance,
        enableLog = true
    )

    // Create the toolkit instance
    val api = ConversationalAIAPIImpl(config)`}
    </CodeBlock>

1. **Set optimal audio settings**

    Before joining the <Vg k="VSDK"/> channel, call the `loadAudioSettings()` method to apply the optimal audio parameters.

    The component monitors audio route changes internally. If the audio route changes, it automatically calls this method again to reset the optimal parameters.

    <CodeBlock language="kotlin" showLineNumbers>
    {`api.loadAudioSettings()
    rtcEngine.joinChannel(token, channelName, null, userId)`}
    </CodeBlock>

1. **Agent joins the channel**

    To create a conversational agent interface, send a `POST` request and configure the following parameters:

    | Parameter                               | Description                                  | Required |
    | --------------------------------------- | -------------------------------------------- | -------- |
    | `advanced_features.enable_rtm: true`    | Starts the Chat service                       | Yes      |
    | `parameters.data_channel: "rtm"`        | Enables Chat as the data transmission channel | Yes      |
    | `parameters.enable_metrics: true`       | Enables agent performance data collection    | Optional |
    | `parameters.enable_error_message: true` | Enables reporting of agent error events      | Optional |

    After a successful response, the agent joins the specified <Vg k="VSDK"/> channel and is ready to interact with the user.


1. **Release resources**

    At the end of each call, use the `destroy` method to clean up the cache.

    <CodeBlock language="kotlin" showLineNumbers>
    {`api.destroy()`}
    </CodeBlock>

