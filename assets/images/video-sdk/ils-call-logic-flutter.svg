<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1402px" preserveAspectRatio="none" style="width:844px;height:1402px;background:#00000000;" version="1.1" viewBox="0 0 844 1402" width="844px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="1400.5938" style="stroke:#0A9EFD;stroke-width:1.0;" width="842.5" x="0" y="0"/><rect fill="#F3F3F3" height="1390.5938" style="stroke:#0A9EFD;stroke-width:1.0;" width="95" x="210" y="6"/><text fill="#0A9EFD" font-family="Roboto" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="69" x="223" y="22.6094">Your app</text><rect fill="#F3F3F3" height="1390.5938" style="stroke:#0A9EFD;stroke-width:1.0;" width="74" x="758.5" y="6"/><text fill="#0A9EFD" font-family="Roboto" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="46" x="772.5" y="22.6094">Agora</text><rect height="431.1406" style="stroke:#0A9EFD;stroke-width:2.0;fill:none;" width="828.5" x="10" y="385.0938"/><rect height="368.9219" style="stroke:#0A9EFD;stroke-width:2.0;fill:none;" width="828.5" x="10" y="830.2344"/><line style="stroke:#0A9EFD;stroke-width:1.0;fill:none;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="87.6094" y2="1310.9844"/><line style="stroke:#0A9EFD;stroke-width:1.0;fill:none;stroke-dasharray:5.0,5.0;" x1="257" x2="257" y1="87.6094" y2="1310.9844"/><line style="stroke:#0A9EFD;stroke-width:1.0;fill:none;stroke-dasharray:5.0,5.0;" x1="795.5" x2="795.5" y1="87.6094" y2="1310.9844"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="33" x="20" y="84.5332">User</text><ellipse cx="39.5" cy="16" rx="8" ry="8" style="stroke:#0A9EFD;stroke-width:3.0;fill:none;"/><path d="M39.5,24 L39.5,51 M26.5,32 L52.5,32 M39.5,51 L26.5,66 M39.5,51 L52.5,66 " fill="none" style="stroke:#0A9EFD;stroke-width:3.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="33" x="20" y="1324.5176">User</text><ellipse cx="39.5" cy="1338.5938" rx="8" ry="8" style="stroke:#0A9EFD;stroke-width:3.0;fill:none;"/><path d="M39.5,1346.5938 L39.5,1373.5938 M26.5,1354.5938 L52.5,1354.5938 M39.5,1373.5938 L26.5,1388.5938 M39.5,1373.5938 L52.5,1388.5938 " fill="none" style="stroke:#0A9EFD;stroke-width:3.0;"/><rect fill="#FFFFFF" height="31.6094" style="stroke:#0A9EFD;stroke-width:2.0;" width="87" x="214" y="55"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="221" y="76.5332">Video SDK</text><rect fill="#FFFFFF" height="31.6094" style="stroke:#0A9EFD;stroke-width:2.0;" width="87" x="214" y="1309.9844"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="221" y="1331.5176">Video SDK</text><rect fill="#FFFFFF" height="31.6094" style="stroke:#0A9EFD;stroke-width:2.0;" width="66" x="762.5" y="55"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="52" x="769.5" y="76.5332">SD-RTN</text><rect fill="#FFFFFF" height="31.6094" style="stroke:#0A9EFD;stroke-width:2.0;" width="66" x="762.5" y="1309.9844"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="52" x="769.5" y="1331.5176">SD-RTN</text><polygon fill="#0A9EFD" points="245.5,117.2188,255.5,121.2188,245.5,125.2188,249.5,121.2188" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="39.5" x2="251.5" y1="121.2188" y2="121.2188"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="69" x="114" y="116.1426">Open App</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="170.4375" y2="170.4375"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="170.4375" y2="183.4375"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="183.4375" y2="183.4375"/><polygon fill="#0A9EFD" points="268.5,179.4375,258.5,183.4375,268.5,187.4375,264.5,183.4375" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="264" x="264.5" y="147.752">Initialize the Agora Video SDK engine:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="273" x="268.5" y="165.3613">agoraEngine = createAgoraRtcEngine()</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="232.6563" y2="232.6563"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="232.6563" y2="245.6563"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="245.6563" y2="245.6563"/><polygon fill="#0A9EFD" points="268.5,241.6563,258.5,245.6563,268.5,249.6563,264.5,245.6563" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="179" x="264.5" y="209.9707">Enable the video module:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="181" x="268.5" y="227.5801">agoraEngine.enableVideo</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="294.875" y2="294.875"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="294.875" y2="307.875"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="307.875" y2="307.875"/><polygon fill="#0A9EFD" points="268.5,303.875,258.5,307.875,268.5,311.875,264.5,307.875" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194" x="264.5" y="272.1895">Register the event handler:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="245" x="268.5" y="289.7988">agoraEngine.registerEventHandler</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="357.0938" y2="357.0938"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="357.0938" y2="370.0938"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="370.0938" y2="370.0938"/><polygon fill="#0A9EFD" points="268.5,366.0938,258.5,370.0938,268.5,374.0938,264.5,370.0938" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="210" x="264.5" y="334.4082">Setup AgoraVideoView widget</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="174" x="268.5" y="352.0176">for local or remote video</text><path d="M10,385.0938 L87,385.0938 L87,394.0938 L77,404.0938 L10,404.0938 L10,385.0938 " fill="#EEEEEE" style="stroke:#0A9EFD;stroke-width:1.0;"/><rect fill="none" height="431.1406" style="stroke:#0A9EFD;stroke-width:2.0;" width="828.5" x="10" y="385.0938"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32" x="25" y="400.627">Host</text><polygon fill="#0A9EFD" points="245.5,424.3125,255.5,428.3125,245.5,432.3125,249.5,428.3125" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="39.5" x2="251.5" y1="428.3125" y2="428.3125"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="194" x="51.5" y="423.2363">Start a live streaming event</text><polygon fill="#0A9EFD" points="783.5,473.5313,793.5,477.5313,783.5,481.5313,787.5,477.5313" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="477.5313" y2="477.5313"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="185" x="432" y="454.8457">Set the client role as Host:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="505" x="276" y="472.4551">agoraEngine.setClientRole(role: ClientRoleType.clientRoleBroadcaster);</text><polygon fill="#0A9EFD" points="783.5,522.75,793.5,526.75,783.5,530.75,787.5,526.75" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="526.75" y2="526.75"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="149" x="450" y="504.0645">Set a channel profile:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="510" x="273.5" y="521.6738">.setChannelProfile(ChannelProfileType.channelProfileLiveBroadcasting);</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="558.3594" y2="558.3594"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="558.3594" y2="571.3594"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="571.3594" y2="571.3594"/><polygon fill="#0A9EFD" points="268.5,567.3594,258.5,571.3594,268.5,575.3594,264.5,571.3594" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="210" x="264.5" y="553.2832">Retrieve authentication token</text><polygon fill="#0A9EFD" points="783.5,616.5781,793.5,620.5781,783.5,624.5781,787.5,620.5781" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="620.5781" y2="620.5781"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="220" x="416.5" y="597.8926">Join a channel using the token:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="177" x="440" y="615.502">agoraEngine.joinChannel</text><polygon fill="#0A9EFD" points="783.5,648.1875,793.5,652.1875,783.5,656.1875,787.5,652.1875" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="652.1875" y2="652.1875"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130" x="461.5" y="647.1113">Send data streams</text><polygon fill="#0A9EFD" points="268.5,697.4063,258.5,701.4063,268.5,705.4063,264.5,701.4063" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="262.5" x2="794.5" y1="701.4063" y2="701.4063"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="453.5" y="678.7207">Remote user joined:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="275" x="391" y="696.3301">RtcEngineEventHandler onUserJoined:</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="750.625" y2="750.625"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="750.625" y2="763.625"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="763.625" y2="763.625"/><polygon fill="#0A9EFD" points="268.5,759.625,258.5,763.625,268.5,767.625,264.5,763.625" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="129" x="264.5" y="727.9395">Start local peview:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="192" x="268.5" y="745.5488">agoraEngine.startPreview()</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="795.2344" y2="795.2344"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="795.2344" y2="808.2344"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="808.2344" y2="808.2344"/><polygon fill="#0A9EFD" points="268.5,804.2344,258.5,808.2344,268.5,812.2344,264.5,808.2344" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="292" x="264.5" y="790.1582">Display local video using AgoraVideoView</text><path d="M10,830.2344 L121,830.2344 L121,839.2344 L111,849.2344 L10,849.2344 L10,830.2344 " fill="#EEEEEE" style="stroke:#0A9EFD;stroke-width:1.0;"/><rect fill="none" height="368.9219" style="stroke:#0A9EFD;stroke-width:2.0;" width="828.5" x="10" y="830.2344"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="66" x="25" y="845.7676">Audience</text><polygon fill="#0A9EFD" points="245.5,869.4531,255.5,873.4531,245.5,877.4531,249.5,873.4531" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="39.5" x2="251.5" y1="873.4531" y2="873.4531"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="191" x="53" y="868.377">Join a live streaming event</text><polygon fill="#0A9EFD" points="783.5,918.6719,793.5,922.6719,783.5,926.6719,787.5,922.6719" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="922.6719" y2="922.6719"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="219" x="415" y="899.9863">Set the client role as Audience:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="485" x="286" y="917.5957">agoraEngine.setClientRole(role: ClientRoleType.clientRoleAudience);</text><polygon fill="#0A9EFD" points="783.5,967.8906,793.5,971.8906,783.5,975.8906,787.5,971.8906" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="971.8906" y2="971.8906"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="149" x="450" y="949.2051">Set a channel profile:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="510" x="273.5" y="966.8145">.setChannelProfile(ChannelProfileType.channelProfileLiveBroadcasting);</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="1003.5" y2="1003.5"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="1003.5" y2="1016.5"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="1016.5" y2="1016.5"/><polygon fill="#0A9EFD" points="268.5,1012.5,258.5,1016.5,268.5,1020.5,264.5,1016.5" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="210" x="264.5" y="998.4238">Retrieve authentication token</text><polygon fill="#0A9EFD" points="783.5,1061.7188,793.5,1065.7188,783.5,1069.7188,787.5,1065.7188" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="1065.7188" y2="1065.7188"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="220" x="416.5" y="1043.0332">Join a channel using the token:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="177" x="440" y="1060.6426">agoraEngine.joinChannel</text><polygon fill="#0A9EFD" points="268.5,1110.9375,258.5,1114.9375,268.5,1118.9375,264.5,1114.9375" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="262.5" x2="794.5" y1="1114.9375" y2="1114.9375"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="453.5" y="1092.252">Remote user joined:</text><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="275" x="391" y="1109.8613">RtcEngineEventHandler onUserJoined:</text><polygon fill="#0A9EFD" points="268.5,1142.5469,258.5,1146.5469,268.5,1150.5469,264.5,1146.5469" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="262.5" x2="794.5" y1="1146.5469" y2="1146.5469"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="152" x="450.5" y="1141.4707">Receive data streams</text><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="299.5" y1="1178.1563" y2="1178.1563"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="299.5" x2="299.5" y1="1178.1563" y2="1191.1563"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="258.5" x2="299.5" y1="1191.1563" y2="1191.1563"/><polygon fill="#0A9EFD" points="268.5,1187.1563,258.5,1191.1563,268.5,1195.1563,264.5,1191.1563" style="stroke:#0A9EFD;stroke-width:1.0;"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="311" x="264.5" y="1173.0801">Render remote video using AgoraVideoView</text><polygon fill="#0A9EFD" points="245.5,1225.7656,255.5,1229.7656,245.5,1233.7656,249.5,1229.7656" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="39.5" x2="251.5" y1="1229.7656" y2="1229.7656"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="90" y="1224.6895">Leave broadcast</text><polygon fill="#0A9EFD" points="783.5,1257.375,793.5,1261.375,783.5,1265.375,787.5,1261.375" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="257.5" x2="789.5" y1="1261.375" y2="1261.375"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="200" x="426.5" y="1256.2988">agoraEngine.leaveChannel()</text><polygon fill="#0A9EFD" points="245.5,1288.9844,255.5,1292.9844,245.5,1296.9844,249.5,1292.9844" style="stroke:#0A9EFD;stroke-width:1.0;"/><line style="stroke:#0A9EFD;stroke-width:2.0;" x1="39.5" x2="251.5" y1="1292.9844" y2="1292.9844"/><text fill="#0A9EFD" font-family="Roboto" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="70" x="113.5" y="1287.9082">Close app</text><!--MD5=[180381fc59086974e695b618fc179c49]
@startuml ils-call-logic-flutter
!include agora_skin.iuml

actor "User" as USR

box "Your app"
participant "Video SDK" as APP
end box

box "Agora"
participant "SD-RTN" as API
end box

USR -> APP: Open App
APP -> APP: Initialize the Agora Video SDK engine: \n agoraEngine = createAgoraRtcEngine()
APP -> APP: Enable the video module:\n agoraEngine.enableVideo
APP -> APP: Register the event handler: \n agoraEngine.registerEventHandler
APP -> APP: Setup AgoraVideoView widget \n for local or remote video

group Host
USR -> APP: Start a live streaming event
APP -> API: Set the client role as Host: \n agoraEngine.setClientRole(role: ClientRoleType.clientRoleBroadcaster);
APP -> API: Set a channel profile: \n .setChannelProfile(ChannelProfileType.channelProfileLiveBroadcasting);
APP -> APP: Retrieve authentication token
APP -> API: Join a channel using the token:\n agoraEngine.joinChannel
APP -> API: Send data streams
APP <- API: Remote user joined: \n RtcEngineEventHandler onUserJoined:
APP -> APP: Start local peview: \n agoraEngine.startPreview()
APP -> APP: Display local video using AgoraVideoView
end

group Audience
USR -> APP: Join a live streaming event
APP -> API: Set the client role as Audience: \n agoraEngine.setClientRole(role: ClientRoleType.clientRoleAudience);
APP -> API: Set a channel profile: \n .setChannelProfile(ChannelProfileType.channelProfileLiveBroadcasting);
APP -> APP: Retrieve authentication token
APP -> API: Join a channel using the token:\n agoraEngine.joinChannel
APP <- API: Remote user joined: \n RtcEngineEventHandler onUserJoined:
APP <- API: Receive data streams
APP -> APP: Render remote video using AgoraVideoView
end

USR -> APP: Leave broadcast
APP -> API: agoraEngine.leaveChannel()

USR -> APP: Close app

@enduml

@startuml ils-call-logic-flutter

scale max 1000 width
skinparam linetype ortho
hide stereotype

skinparam backgroundColor transparent
skinparam Shadowing false
skinparam BoundaryBackgroundColor transparent
skinparam BoundaryBorderColor #0a9efdff
skinparam DiagramBorderColor #0a9efdff
skinparam defaultTextAlignment center
skinparam SequenceMessageAlign center
skinparam ReferenceBorderThickness 2

skinparam sequence {

    ActorBorderThickness 3
   	ActorBorderColor #0a9efdff
	ActorBackgroundColor transparent
	ActorFontColor #0a9efdff
	ActorFontName Roboto
    ActorFontStyle bold
    ActorFontSize 14

    AgentBackgroundColor #0a9efdff

   	ArrowFontColor #0a9efdff
   	ArrowFontSize 14
   	ArrowFontStyle bold
    ArrowColor #ee4c14
    ArrowThickness 2

    RectangleBorderThickness 3
    BoxBackgroundColor #f3f3f3
    BoxBorderColor #0a9efdff

   	BoxFontColor #0a9efdff
   	BoxFontName Roboto
   	BoxFontStyle bold
   	BoxFontSize 16

    BoundaryBackgroundColor #0a9efdff
    BoundaryBorderColor #0a9efdff
    BoundaryFontColor #0a9efdff
    BoundryFontName Roboto
    BoundaryStereotypeFontColor #0a9efdff

    ClassBorderColor #0a9efdff
    ComponentBorderColor #0a9efdff

    DividerBackgroundColor white
    DividerBorderColor #0a9efdff
    DividerBorderThickness 3
    DividerFontColor #0a9efdff
    DividerFontName Roboto
    DividerFontSize bold
    DividerFontStyle 14

    GroupBorderColor #0a9efdff
    GroupBorderThickness 2
    GroupFontName Roboto
    GroupFontSize 14
    GroupFontColor #0a9efdff
    GroupHeaderFontColor #0a9efdff
    GroupHeaderFontName Roboto
    GroupHeaderFontSize 14
    GroupHeaderFontStyle bold

   	LifeLineBorderColor #0a9efdff
   	LifeLineBackgroundColor #0a9efdff
   	LifeLineFontColor  #0a9efdff

   	ParticipantBorderColor #0a9efdff
   	ParticipantBackgroundColor white
   	ParticipantFontSize 14
   	ParticipantFontStyle bold
   	ParticipantFontName Roboto
   	ParticipantFontColor #0a9efdff
    ParticipantBorderThickness 2

    ReferenceBorderThickness 2



    TitleFontColor #0a9efdff
    TitleFontName Roboto
    TitleFontSize 18
    TitleBorderThickness 5

}
skinparam interface {
  BackgroundColor #FFFFFF
  BorderColor #0a9efdff
  BorderThickness 1
  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bolds

}


skinparam usecase {
  BackgroundColor #FFFFFF
  BorderColor #ee4c14
  BorderThickness 1
  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}

skinparam note {

  BackgroundColor #FFFFFF

  BorderColor #0a9efdff
  BorderThickness 1

  StartColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}

skinparam activity {

  BackgroundColor #FFFFFF
  DiamondBackgroundColor #FFFFFF
  DiamondBorderColor #0a9efdff
  BorderColor #0a9efdff
  BorderThickness 4
  DiamondBackgroundColor #FFFFFF
  DiamondBorderColor #0a9efdff
  DiamondFontColor #0a9efdff
  activityDiamondFontName Roboto
  activityDiamondFontSize 14
  DiamondFontStyle bold
  StartColor #0a9efdff
  StopColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}

skinparam card {
  BackgroundColor transparent
  BorderColor transparent
  BorderThickness 0
  FontColor transparent
}


skinparam rectangle {

  BackgroundColor #FFFFFF

  BorderColor #0a9efdff
  BorderThickness 4

  StartColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

  shadowing true
}

skinparam agent {

  BackgroundColor #FFFFFF
  BorderColor #0a9efdff
  BorderThickness 4

  StartColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

  shadowing true
}

skinparam folder {

  BackgroundColor #FFFFFF

  BorderColor #0a9efdff
  BorderThickness 4

  StartColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

  shadowing true
}

skinparam file {

  BackgroundColor #FFFFFF

  BorderColor #0a9efdff
  BorderThickness 4

  StartColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

  shadowing true
}

skinparam cloud {

  BackgroundColor #FFFFFF

  BorderColor #0a9efdff
  BorderThickness 4

  StartColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}

skinparam class {

  BackgroundColor #FFFFFF

  BorderColor #0a9efdff
  BorderThickness 1

  StartColor #0a9efdff
  BarColor #0a9efdff
  EndColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold



}

skinparam component {

  BackgroundColor  #FFFFFF

  BorderColor #0a9efdff
  BorderThickness 2

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold
}



skinparam database {

  BackgroundColor #f3f3f3

  BorderColor #0a9efdff
  BorderThickness 2

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}


skinparam frame {

  ArrowColor #0a9efdff

  BackgroundColor #f3f3f3
  BorderColor #0a9efdff
  BorderThickness 4

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold
}


skinparam node {

  ArrowColor #0a9efdff

  BorderThickness 2
  BackgroundColor #FFFFFF
  BorderColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}

skinparam package {
  BorderThickness 2
  BackgroundColor #FFFFFF
  BorderColor #0a9efdff

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}


skinparam partition {

  BackgroundColor #f3f3f3

  BorderColor #0a9efdff
  BorderThickness 2

  FontColor #0a9efdff
  FontName Roboto
  FontSize 14
  FontStyle bold

}

skinparam ArrowFontColor #0a9efdff
skinparam ArrowFontSize 14
skinparam ArrowFontStyle bold
skinparam ArrowColor #0a9efdff
skinparam ArrowThickness 2
skinparam ArrowFontName Roboto

skinparam linetype ortho
hide stereotype








actor "User" as USR

box "Your app"
participant "Video SDK" as APP
end box

box "Agora"
participant "SD-RTN" as API
end box

USR -> APP: Open App
APP -> APP: Initialize the Agora Video SDK engine: \n agoraEngine = createAgoraRtcEngine()
APP -> APP: Enable the video module:\n agoraEngine.enableVideo
APP -> APP: Register the event handler: \n agoraEngine.registerEventHandler
APP -> APP: Setup AgoraVideoView widget \n for local or remote video

group Host
USR -> APP: Start a live streaming event
APP -> API: Set the client role as Host: \n agoraEngine.setClientRole(role: ClientRoleType.clientRoleBroadcaster);
APP -> API: Set a channel profile: \n .setChannelProfile(ChannelProfileType.channelProfileLiveBroadcasting);
APP -> APP: Retrieve authentication token
APP -> API: Join a channel using the token:\n agoraEngine.joinChannel
APP -> API: Send data streams
APP <- API: Remote user joined: \n RtcEngineEventHandler onUserJoined:
APP -> APP: Start local peview: \n agoraEngine.startPreview()
APP -> APP: Display local video using AgoraVideoView
end

group Audience
USR -> APP: Join a live streaming event
APP -> API: Set the client role as Audience: \n agoraEngine.setClientRole(role: ClientRoleType.clientRoleAudience);
APP -> API: Set a channel profile: \n .setChannelProfile(ChannelProfileType.channelProfileLiveBroadcasting);
APP -> APP: Retrieve authentication token
APP -> API: Join a channel using the token:\n agoraEngine.joinChannel
APP <- API: Remote user joined: \n RtcEngineEventHandler onUserJoined:
APP <- API: Receive data streams
APP -> APP: Render remote video using AgoraVideoView
end

USR -> APP: Leave broadcast
APP -> API: agoraEngine.leaveChannel()

USR -> APP: Close app

@enduml

PlantUML version 1.2022.1(Tue Feb 01 23:19:58 PKT 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>