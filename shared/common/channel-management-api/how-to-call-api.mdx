
import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

This page explains the structure of the Channel Management RESTful API and how to call it correctly.
<RestAPILayout>

## Prerequisites

Before calling the API, ensure you have the following:

- An Agora App ID
- Customer ID
- Customer Key

## Request

###  Request URL

A sample request URL is as follows:

  <LeftColumn
    title={frontMatter.title}
    method="POST"
    endpoint="https://api.agora.io/dev/v1/kicking-rule"
  >

    <ul>
      <li>`https`: The communication protocol. Agora uses HTTPS.</li>
      <li>`api.agora.io`: The domain name of the Agora server.</li>
      <li>`dev/v1/kicking-rule`:  The resource path, which includes the API version and the resource name.</li>
    </ul>
    The example above is for reference only. Refer to the specific API documentation, select the appropriate HTTP method (`GET`, `POST`, `PUT`, `PATCH`, `DELETE`), and configure the request URL accordingly. Note that the request URL is case-sensitive.

### Request header

The request header contains the following information needed to process the request:

<ParameterList title="HEADER" required={true}>
  <Parameter name="Accept" type="strung" required={true}>
    Tells the server what types of responses the client can handle, such as `application/json`.
  </Parameter>
  <Parameter name="Authorization" type="string" required={true}>
    Agora's RESTful API requires HTTP authentication. Include the `Authorization` field in the request header. See [RESTful Authentication](../channel-management-api/restful-authentication) for details.  
  </Parameter>
  <Parameter name="Content-Type" type="string" required={true}>
    Specifies the type of the request body, such as `application/json`.
  </Parameter>
</ParameterList>

### Request body (Optional)

The request body contains the information to be sent to the server. For example, to create a new rule to ban user privileges, include the relevant information, such as the app ID, channel name, user ID, user IP, ban duration, and the banned privileges. The request body is case-sensitive.

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="BODY" required={true}>

  <Parameter name="appid" type="string" required={true}>
    The App ID of the project
  </Parameter>

  <Parameter name="cname" type="string" required={true}>
    The name of the channel from which the user will be removed.
  </Parameter>

  <Parameter name="uid" type="integer" required={false}>
    The user ID of the participant who will be kicked from the channel.
  </Parameter>

  <Parameter name="ip" type="string" required={false}>
    The IP address associated with the user to be removed.
  </Parameter>

  <Parameter name="time" type="integer" required={true}>
    The duration (in seconds) for which the user will be blocked from rejoining the channel.
  </Parameter>

  <Parameter name="privileges" type="array[string]" required={true}>
    The list of privileges that will be revoked for the user.
    <Parameter name="join_channel" type="string" required={true}>
      Prevents the user from joining the channel again for the specified `time`.
    </Parameter>
  </Parameter>
</ParameterList>


### Request response

- If the returned status code is `200`, the request was successful. The response body contains the result of the request.

  <ParameterList title="OK">
    <Parameter 
      name="status" 
      type="string" 
      possibleValues="success, failed"
    >
      Indicates whether the request was successful.
    </Parameter>
    <Parameter name="id" type="integer">
      The unique identifier of the kicking rule that was just created.
    </Parameter>
  </ParameterList>

- If the returned status code is not `200`, the request failed. The response body includes the `detail` and `reason` for failure. Refer to [Response Status Codes](response-status-code) to understand the possible reasons for failure.

</LeftColumn>

<RightColumn>

<Section title="Request structure">
A request consists of two parts: the request header and the request body.

The following example demonstrates how to create a privilege banning rule using a `POST` request:
</Section>

<Section title="Request example">

```shell
curl --location --request POST 'https://api.agora.io/dev/v1/kicking-rule' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--header 'Authorization: <http_basic_auth>' \
--data '{
  "appid": "4855xxxxxxxxxxxxxxxxxxxxxxxxeae2",
  "cname": "channel1",
  "uid": 589517928,
  "ip": "123",
  "time": 60,
  "privileges": [
    "join_channel"
  ]
}'
```

</Section>
<Section title="Response example">

The response body contains server-returned data. For example, the response body for a banning rule request includes the request status and rule ID.

Example response for creating a banning rule:

```json
{
  "status": "success",
  "id": 1953
}
```

</Section>
  </RightColumn>

</RestAPILayout>
