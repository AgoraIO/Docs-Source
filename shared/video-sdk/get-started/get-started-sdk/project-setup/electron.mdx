import CodeBlock from '@theme/CodeBlock';

<PlatformWrapper platform = "electron">

If you already have a project, you can skip to [Integrate the SDK](#integrate-the-sdk).

### Create a project

To add <Vpd k="PRODUCT"/> to a new project:

1. Create a new project by following the [Electron Quickstart](https://www.electronjs.org/docs/latest/tutorial/quick-start) guide. 

1. In `main.js`, update `webPreferences` in the `createWindow` method as follows:

    ```js
    webPreferences: {
        preload: path.join(__dirname, 'preload.js'),
        // Set nodeIntegration to true and contextIsolation to false
        nodeIntegration: true,
        contextIsolation: false,
    },
    ```

### Install the SDK

To add the <Vpd k="SDK"/> to your project using `npm`, take the following steps:

1. Add the following to `package.json`:

    * macOS

        ```json
        "agora_electron": {
            "platform": "darwin",
            "prebuilt": true
        },
        "dependencies": { "agora-electron-sdk": "latest" }
        ```
    
    * Windows

        ```json
        "agora_electron": {
            "platform": "win32",
            "prebuilt": true,
            "arch": "ia32"
        },
        "dependencies": { "agora-electron-sdk": "latest" }
        ```

    For `agora-electron-sdk` use the version number of <Vg k="COMPANY"/> Electron SDK. Set it to `latest` to use the latest version. For other versions, see [`agora-electron-sdk`](https://www.npmjs.com/package/agora-electron-sdk).


    <Admonition title="Note" style="info">Different versions of Electron have different environment requirements. If you see errors due to a mismatched environment when running the project, refer to the official [Electron documentation](https://releases.electronjs.org/releases/stable) to choose the appropriate Electron and Node.js versions.</Admonition>

1. To install the dependencies, open a terminal in the project root folder and run the following commands:

    * macOS
        ```bash
        npm install
        ```

    * Windows
        ```bash
        npm install -D --arch=ia32 electron
        npm install
        ```

### Create a user interface
<ProductWrapper notAllowed="voice-calling">

A basic user interface consists of a local video window and a remote video window. To create a minimal interface, add the following code to `index.html`:

<details>
<summary>Sample code to create the user interface</summary>
<CodeBlock language="html" showLineNumbers>
{`<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Electron Quickstart</title>
  </head>
  <body>
    <h1>Electron Quickstart</h1>
    <!--Add a local video window to the interface -->
    <div
      id="join-channel-local-video"
      style="width: 300px; height: 300px; float: left"
    ></div>
    <!--Add a remote video window to the interface -->
    <div
      id="join-channel-remote-video"
      style="width: 300px; height: 300px; float: left"
    ></div>
  </body>
  <script src="./preload.js"></script>
</html>`}
</CodeBlock>
</details>

</ProductWrapper>
<ProductWrapper product="voice-calling">
To create a minimal interface, add the following code to `index.html`:
<details>
<summary>Sample code to create the user interface</summary>

<CodeBlock language="html" showLineNumbers>
{`<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Electron Quickstart</title>
    </head>
    <body>
        <h1>Electron Quickstart</h1>
        Congratulations! You have started a voice call.<br />
        Ask a friend to join and chat
    </body>
    <script src="./preload.js"></script>
</html>`}
</CodeBlock>
</details>
</ProductWrapper>

</PlatformWrapper>