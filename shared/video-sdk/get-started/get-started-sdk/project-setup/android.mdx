import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<PlatformWrapper platform = "android">

### Create a project

1. **Create a [new project](https://developer.android.com/studio/projects/create-project)** (Optional)

    1. Open Android Studio and select **File > New > New Project...**.
    1. Select **Phone and Tablet** > **Empty Activity** and click **Next**.
    1. Set the project name and storage path. 
    1. Select **Java** or **Kotlin** as the language, and click **Finish** to create the Android project.
    
    <Admonition type="caution" title="Note">After you create a project, Android Studio automatically starts gradle sync. Ensure that the synchronization is successful before proceeding to the next step. </Admonition>

1. **Add network and device permissions**

    Open the project's `AndroidManifest.xml` file and add the following permissions before `<application>`:
    
    <ProductWrapper product="voice-calling">
    ```xml
    <!--Required permissions-->
    <uses-permission android:name="android.permission.INTERNET"/>
    
    <!--Optional permissions-->
    <uses-permission android:name="android.permission.RECORD_AUDIO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <!-- For devices running Android 12 (API level 32) or higher and integrating Agora Voice SDK version v4.1.0 or lower, you also need to add the following permissions -->
    <uses-permission android:name="android.permission.BLUETOOTH_CONNECT"/>
    <!-- For Android 12 or higher, the following permissions are also required -->
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.BLUETOOTH_SCAN"/>
    ```
    </ProductWrapper>
    <ProductWrapper notAllowed="voice-calling">
    ```xml
    <uses-feature android:name="android.hardware.camera" android:required="false" />
    <!--Required permissions-->
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.RECORD_AUDIO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
    <!--Optional permissions-->
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <!-- For devices running Android 12 (API level 32) or higher and integrating Agora Video SDK version v4.1.0 or lower, you also need to add the following permissions -->
    <uses-permission android:name="android.permission.BLUETOOTH_CONNECT"/>
    <!-- For Android 12.0 or higher, the following permissions are also required -->
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.BLUETOOTH_SCAN"/>
    ```
    </ProductWrapper>

1. **Prevent code obfuscation**

    Open the `/app/proguard-rules.pro` file and add the following lines to prevent the <Vpd k="SDK"/> code from being obfuscated:

    ```java
    -keep class io.agora.**{*;}
    -dontwarn io.agora.**
    ```

### Install the SDK

Choose either of the following methods to add <Vpd k="SDK"/> to your project.

<Tabs>
  <TabItem value="tab1" label="Maven Central" default>
    1. Open the `settings.gradle` file in the project's root directory and add the Maven Central dependency, if it doesn't already exist:

        ```groovy
        repositories {
           mavenCentral()
        }
        ```
        <Admonition type="info" >
        If your Android project uses <a href="https://docs.gradle.org/current/userguide/declaring_repositories.html#sub:centralized-repository-declaration">dependencyResolutionManagement</a>, the method of adding the Maven Central dependency may differ.
        </Admonition>

    1. To integrate the <Vpd k="SDK" /> into your Android project, add the following to the `dependencies` block in your project module `build.gradle` file:
    
        <ProductWrapper product="voice-calling">

        - Groovy `build.gradle`
    
            <CodeBlock language="json">
            {`implementation 'io.agora.rtc:voice-sdk:x.y.z'`}
            </CodeBlock>

        - Kotlin `build.gradle.kts`
    
            <CodeBlock language="kotlin">
            {`implementation("io.agora.rtc:voice-sdk:x.y.z")`}
            </CodeBlock>        

        </ProductWrapper>

        <ProductWrapper notAllowed="voice-calling">

        - Groovy `build.gradle`
    
            <CodeBlock language="json">
            {`implementation 'io.agora.rtc:full-sdk:x.y.z'`}
            </CodeBlock>

        - Kotlin `build.gradle.kts`
    
            <CodeBlock language="kotlin">
            {`implementation("io.agora.rtc:full-sdk:x.y.z")`}
            </CodeBlock>

        </ProductWrapper>
        
        Replace `x.y.z` with the specific SDK version number, such as `4.5.0`.

        <Admonition type="info">
        To get the latest version number, check the [Release notes](../overview/release-notes). To integrate the Lite SDK, use `io.agora.rtc:lite-sdk` instead.
        </Admonition>
  </TabItem>
  <TabItem value="tab2" label="Manual integration">
    1. Download the latest version of <Vpd k="SDK"/> from the  the [SDKs](../../sdks) page and unzip it.

    1. Open the unzipped file and copy the following files or subfolders to your project path.

        | File or folder                | Project path        |
        | :---------------------------- | :----------------------- |
        | `agora-rtc-sdk.jar` file      | `/app/libs/`             |
        | `arm64-v8a` folder            | `/app/src/main/jniLibs/` |
        | `armeabi-v7a` folder          | `/app/src/main/jniLibs/` |
        | `x86` folder                  | `/app/src/main/jniLibs/` |
        | `x86_64` folder               | `/app/src/main/jniLibs/` |
        | `high_level_api` in `include` folder  | `/app/src/main/jniLibs/`  |

    1. Select the file `/app/libs/agora-rtc-sdk.jar` in the left navigation bar of Android Studio project files, right-click, and select **add as a library** from the drop-down menu.

  </TabItem>
</Tabs>

</PlatformWrapper>
