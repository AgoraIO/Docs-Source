---
title: Restrict agent zones
sidebar_position: 3
platform_selector: false
description: >
   Configure regional access restrictions to ensure agents only access servers in designated regions.
---

import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';

To comply with laws and regulations in different countries and regions, the <Vpd k="NAME" /> supports regional access restrictions. When you enable regional access restrictions, the <Vpd k="NAME" /> only accesses Agora servers in the designated region, regardless of the user's location.

For example, if you specify North America as the access region, two users who initiate calls from North America and Singapore have different experiences:

| Specified access region | User location | Actual access region | User experience |
|:-------|:-------|:-------|:-------|
| North America | North America | North America | Normal quality. |
| North America | Singapore     | North America | Quality may be significantly impacted. Cross-regional public internet connections between the designated region and the user's location can result in poor network quality. If all servers in the specified region are unavailable, the service returns an error. |

## Understand the tech

When regional access restrictions are disabled, the <Vpd k="NAME" /> automatically selects the nearest server to deploy the agent based on the IP address of the LLM URL and supports failover:

1. **Intelligent deployment**: The system automatically deploys the <Vpd k="NAME" /> service in the region that corresponds to the IP address of the configured LLM URL.
1. **Nearest available region**: If no server is available in the corresponding region, the system automatically selects the nearest available region.
1. **Failover**: When a service becomes unavailable in a region, the system automatically switches to another available region.

<Admonition type="caution">
When you enable regional access restrictions, the system strictly limits access to the specified region and does not perform cross-regional failover.
</Admonition>

## Implementation

### Configure regional access

To configure region access restrictions, set `properties.geofence` when you [Start a conversational AI agent](/conversational-ai/rest-api/agent/join).

<ParameterList title="properties.geofence">
  <Parameter name="area" type="string" required={true} possibleValues="GLOBAL, NORTH_AMERICA, EUROPE, ASIA, INDIA, JAPAN">
    The allowed region for server access.
  </Parameter>
  <Parameter name="exclude_area" type="string" required={false} possibleValues="NORTH_AMERICA, EUROPE, ASIA, INDIA, JAPAN">
    The excluded region. Only available when `area` is set to `GLOBAL`.
  </Parameter>
</ParameterList>

### Configuration examples

Refer to the following examples to understand `geofence` configuration:

- Restrict access to North America only

    ```json
    {
      "name": "customer_service",
      "properties": {
        "channel": "test_channel",
        "token": "your_rtc_token",
        "agent_rtc_uid": "123",
        "remote_rtc_uids": ["456"],
        "geofence": {
          "area": "NORTH_AMERICA"
        },
        "llm": {
          // ... LLM configuration
        },
        "tts": {
          // ... TTS configuration
        }
      }
    }
    ```

- Global access but excluding India

    ```json
    {
      "name": "customer_service",
      "properties": {
        "channel": "test_channel",
        "token": "your_rtc_token",
        "agent_rtc_uid": "123",
        "remote_rtc_uids": ["456"],
        "geofence": {
          "area": "GLOBAL",
          "exclude_area": "INDIA"
        },
        "llm": {
          // ... LLM configuration
        },
        "tts": {
          // ... TTS configuration
        }
      }
    }
    ```

### Configure RTC regional access 

The <Vpd k="NAME" /> and Agora RTC services are independent, and their regional access restriction configurations are separate. To implement complete end-to-end regional access restrictions and ensure that the entire call chain with the agent is confined to a specified region, you must also configure RTC regional access restrictions. For more information, see [Restrict media zones](/video-calling/advanced-features/geofencing).

## Data residency

In addition to configuring regional access restrictions for the <Vpd k="NAME" />, some LLM, TTS, and ASR vendors offer data residency services in different regions. You can ensure that data is not transferred across regions by configuring the URLs used by the LLM, TTS, and ASR modules.

For example, ElevenLabs supports selecting data processing regions through different URL endpoints. For more information, see the [ElevenLabs documentation](https://elevenlabs.io/docs/overview/administration/data-residency).

The following example shows how to configure the ElevenLabs TTS service using a URL endpoint for the European region:

```json
{
  "properties": {
    "tts": {
      "vendor": {
        "name": "elevenlabs"
      },
      "url": "wss://api.eu.elevenlabs.io/v1/text-to-speech/{voice_id}/stream-input"
    }
  }
}
```

## Best practices

To ensure that data remains entirely within the designated region, follow these recommendations:

1. **Configure regional restrictions for the <Vpd k="NAME" />**: Use the `geofence` object to restrict server access regions.
2. **Configure RTC regional restrictions**: Configure the corresponding regional access restrictions in the RTC SDK.
3. **Select regional AI services**: When configuring LLM, TTS, and ASR services, select a provider that supports regional data residency and use the corresponding regional URL endpoint.
4. **Verify the configuration**: Before deploying to production, thoroughly test that regional access restrictions work correctly and that data is not transferred across regions.

## Considerations

Keep the following in mind when implementing regional access restrictions:

- **Performance impact**: Regional access restrictions may affect user experience. If a user's location is far from the designated region, network latency may increase.
- **Service availability**: When regional access restrictions are enabled and the server in the specified region is unavailable or lacks sufficient resources, the service returns an error and does not automatically switch to another region.
- **Configuration consistency**: Ensure that the regional configurations of the <Vpd k="NAME" />, RTC SDK, and LLM, TTS, and ASR services are consistent to prevent data transfer across regions.
- **Compliance requirements**: Before configuring regional access restrictions, understand the legal and regulatory requirements of the target region to ensure that the configuration complies with local data protection and privacy regulations.
