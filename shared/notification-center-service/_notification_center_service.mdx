import EnableNcs from '@docs/shared/notification-center-service/enable-notification-center-service.mdx';
import ChannelEvents from '@docs/shared/notification-center-service/channel-events.mdx';
import MaintainStatus from '@docs/shared/notification-center-service/maintain-user-online-status.mdx';
import SignatureVerification from '@docs/shared/notification-center-service/signature-verification.mdx';
import ReleaseNotes from '@docs/shared/notification-center-service/release-notes.mdx';

Agora Notification Center Service (NCS) is a tool that enables you to subscribe to events across multiple product lines in one place. It informs you of channel events in real-time when you use the Real-time Communication (RTC) service.

## Understand the tech

The following figure illustrates how the Agora NCS works:

![](\images\notification-center-service\how-ncs-works.png)

1. Once the Agora NCS is enabled, the Agora service server notifies the Agora NCS server when a subscribed event occurs.
1. The Agora NCS server informs your server of that event through an HTTPS POST request.
1. When receiving the request, your server must respond to the Agora NCS server within 10 seconds. The response body must be in JSON format.
1. When receiving your response with the status code of 200 within 10 seconds after sending the request, the Agora NCS server considers the notification callback is sent successfully.If the Agora NCS server does not receive your response within 10 seconds after sending the request, or if the HTTP status code received from your server is not 200, the notification callback is considered to have failed. The Agora NCS server immediately resends the notification callback after the failure.The interval between these notification attempts gradually increases, until the server stops sending notifications after three retries.

## Prerequisites

To set up and use Agora NCS, you must have:

* An <Vg k="COMPANY" /> [account](../reference/manage-agora-account#create-an-agora-account) and [project](../reference/manage-agora-account#create-an-agora-project).
* A computer with Internet access.
    
    If your network access is restricted by a firewall, call the IP address query API to get the IP addresses of the Agora NCS server and configure the firewall to allow these IP addresses.

## Enable Notification Center Service
<EnableNcs />

## Channel events
<ChannelEvents />

## Maintain User Online Status
<MaintainStatus />

## Signature Verification
<SignatureVerification />

## Reference

### Get IP addresses of the Agora NCS server

If your server that receives notification callbacks is behind a firewall, you need to call the IP address query API to get the IP addresses of the Agora NCS server and configure your firewall to trust all these IP addresses.

Agora occasionally adjusts the IP addresses of the Agora NCS server. Therefore, Agora highly recommends that you call the IP address query API at least every 24 hours and automatically update the firewall configuration; otherwise, your server might not
receive the notification callbacks.

#### Prototype

* Method: `GET`
* Endpoint: `https://api.agora.io/v2/ncs/ip`

#### Request header

Authorization: You must generate a Base64-encoded credential with the Customer ID and Customer Secret provided by Agora, and then pass the credential to the Authorization field in the HTTP request header. See HTTP authentication for details.

#### Request body

This API has no body parameters.

#### Response body

When the request succeeds, the response body looks like the following:

```json
{
    "data": {
        "service": {
            "hosts": [
                {
                    "primaryIP": "xxx.xxx.xxx.xxx"
                },
                {
                    "primaryIP": "xxx.xxx.xxx.xxx"
                }
            ]
        }
    }
}
```

Each primary IP field shows an IP address of the Agora NCS server. When you receive a response, you need to note the primary IP fields and add all these IP addresses to your firewall's allowed IP list.

### Considerations

* The Agora NCS does not guarantee that notification callbacks arrive at your server in the same order as events occur.
* Your server needs to be able to handle messages arriving out of order.
* To improve the reliability of the Agora NCS, there can be more than one notification callback for each event, and your server needs to be able to handle repeated messages.

### Release notes

<ReleaseNotes />