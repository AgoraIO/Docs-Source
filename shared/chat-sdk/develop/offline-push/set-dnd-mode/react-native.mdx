<PlatformWrapper platform="react-native">

To optimize the user experience when dealing with a large number of push notifications, instant messaging IM provides fine-grained options for push notification methods and do not disturb mode at the app and conversation levels.

** Push notification method **

| Push notification method parameters | Description        | App             | Single and group chat sessions            |
| :--------------- | :---------------------- | :----------- |
|  ` ALL `   | Receive push notifications for all offline messages.       | ✓ | ✓ |
|  ` MENTION_ONLY `    | Only receive push notifications for mention messages. < br />This parameter is recommended for group chats. If you want to mention one or more users, you need to pass "em_at_list": [ "user1", "user2" ... ] to the ` ext ` field when creating a message ; if you want to mention everyone, pass "em_at_list": "all" to this field. | ✓ | ✓   |
|  ` NONE `            | Do not receive push notifications for offline messages.         | ✓ | ✓ |

The push notification method setting at the session level takes precedence over the setting at the app level. For sessions where the push notification method is not set, the app setting is used by default.

For example, suppose the push method for the app is set to MENTION_ONLY and the push method for a given conversation is set to ALL . You will receive all push notifications from that conversation, but for all other conversations, you will only receive push notifications for messages that mention you.

** Do Not Disturb Mode **

You can specify the DND time period and DND duration at the app level, and IM will not send offline push notifications during these two time periods. If both the DND time period and DND duration are set, the DND mode will take effect for the sum of these two time periods.

The following table describes the Do Not Disturb time parameters:

| Quiet time parameter        | Type | Description            | Application scope            |
| :------------------- | :--------------------------- | :--------------------------- | :------------------- |
| `startTime & endTime` | Int |The time period for triggering offline push notifications every day, in 24-hour format, accurate to the minute, in the format of H:MH:M, for example, 8:30-10:0, the range of hours and minutes in the start time and end time is [0,23] and [0,59] respectively. The setting of the Do Not Disturb time period is as follows:<br/> - After the start time and end time are set, the Do Not Disturb mode is triggered every day. For example, if the time period is set to `8:0`-`10:0`, the Do Not Disturb mode is effective from 8:00 to 10:00 every day. If you set the start time to `8:0` and the end time to `12:0` at 11:00, the Do Not Disturb mode is effective from 11:00 to 12:00 on the same day, and from 8:00 to 12:00 every day thereafter. <br/> - If the start time and end time are the same, the Do Not Disturb mode is effective all day. However, if it is set to `0:0`-`0:0`, the Do Not Disturb mode is turned off. <br/> - If the end time is earlier than the start time, the Do Not Disturb mode takes effect from the start time of each day to the end time of the next day. For example, if the start time is `10:0` and the end time is `8:0`, the Do Not Disturb mode takes effect from 10:00 on the same day to 8:00 on the next day. <br/> - Currently, only one specified time period is supported to enable the Do Not Disturb mode every day. Multiple Do Not Disturb time periods are not supported. The new setting will overwrite the previous setting. <br/> - If both this parameter and the Do Not Disturb duration `expireTimestamp` are set, the Do Not Disturb mode takes effect in both time periods on the same day. For example, if the Do Not Disturb time period is set to 8:0-10:0 at 8:00 in the morning and the Do Not Disturb duration is set to 240 minutes (4 hours), the app will be in Do Not Disturb mode from 8:00-12:00 on the same day and from 8:00-10:00 every day thereafter. | Only works for apps, not for single chats or group chats. |
|  ` expireTimestamp `  | Int | The duration of the Do Not Disturb (DND) function in milliseconds. The maximum duration of the DND function is 7 days. < br /> Unlike the DND time period ( ` startTime & endTime ` ), which takes effect every day, this parameter is valid once. It takes effect immediately after setting. For example, if the DND time period at the app level is set to 4 hours at 8:00 am, the app will be in DND mode from 8:00 to 12:00 on the same day. < br /> - If both this parameter and ` startTime & endTime ` are set, the DND mode will take effect on both time periods on the same day. For example, if the app-level ` startTime & endTime ` is set to 8:00-10:00 at 8:00 am, and the DND time period is set to 4 hours, the app will be in DND mode from the current 8:00-12:00 and from 8:00-10:00 every day thereafter.     | App or single chat/group chat session. |

If you need to push messages to specific users during the do not disturb period or the effective time, you need to set [ Force push ] ( ./7_push_extension#Force push ) .

** Relationship between push notification method and do not disturb time setting **

For an app and all sessions in the app, the Do Not Disturb mode setting takes precedence over the push notification method setting. For example, suppose you specify a Do Not Disturb time period at the app level and set the push notification method for the specified session to ` ALL ` . The app enters Do Not Disturb mode during the specified time period, and you will not receive any push notifications.

Alternatively, suppose a session is assigned a quiet time period, and the app does not have any quiet settings and its push notification method is set to ` ALL ` . During the specified quiet time period, you will not receive any push notifications from this session, while push notifications from all other sessions remain unchanged.

## Set up push notifications for the app

You can call ` setSilentModeForAll` to set app-level push notifications, and set the push notification method and DND mode by specifying the `ChatSilentModeParam` field, as shown in the following code example :

```typescript
// convId: session ID.
// convType: session type.
// Set the push notification method to `MENTION_ONLY`.
const option = ChatSilentModeParam.constructorWithNotification(
  ChatPushRemindType.MENTION_ONLY
);
// Set the do not disturb time to 10 minutes.
const option = ChatSilentModeParam.constructorWithDuration(10);
// Set the Do Not Disturb time period to 10:10-11:00.
const option = ChatSilentModeParam.constructorWithPeriod({
  startTime: new ChatSilentModeTime({ hour: 10, minute: 10 }),
  endTime: new ChatSilentModeTime({ hour: 11, minute: 10 }),
});
// Set up offline push notifications for the app.
ChatClient.getInstance()
  .pushManager.setSilentModeForAll(option)
  .then(() => {
    console.log("Succeeded in setting the push notification.");
  })
  .catch((reason) => {
    console.log("Failed to set the push notification.", reason);
  });
```

## Get the push notification settings of the app

You can call fetchSilentModeForAll to retrieve the app-level push notification settings, as shown in the following code example:

```typescript
ChatClient.getInstance()
  .pushManager.fetchSilentModeForAll()
  .then((result) => {
    console.log("Succeeded in getting the push notification settings of the app.", result);
  })
  .catch((reason) => {
    console.log("Failed to get the push notification settings of the app.", reason);
  });
```

## Set push notifications for a single session

You can call the ` setSilentModeForConversation` method to set push notifications for a specified conversation, and set the push notification method and do not disturb mode by specifying the ` ChatSilentModeParam` field, as shown in the following code example:

```typescript
// convId: session ID.
// convType: session type.
// Set the push notification method to `MENTION_ONLY`.
const option = ChatSilentModeParam.constructorWithNotification(
  ChatPushRemindType.MENTION_ONLY
);
// Set the do not disturb time to 10 minutes.
const option = ChatSilentModeParam.constructorWithDuration(10);
// Set the Do Not Disturb time period to 10:10-11:00.
const option = ChatSilentModeParam.constructorWithPeriod({
  startTime: new ChatSilentModeTime({ hour: 10, minute: 10 }),
  endTime: new ChatSilentModeTime({ hour: 11, minute: 10 }),
});
// Set push notification for the specified session.
ChatClient.getInstance()
  .pushManager.setSilentModeForConversation({
    invited ,
    convType,
    option,
  })
  .then(() => {
    console.log("Succeeded in getting the push notification settings of the conversation.");
  })
  .catch((reason) => {
    console.log("Failed to get the push notification settings of the conversation.", reason);
  });
```

## Get push notifications for a single session

You can call the fetchSilentModeForConversation method to retrieve the push notification settings for a specified conversation, as shown in the following code example:

```typescript
// convId: session ID.
// convType: session type.
ChatClient.getInstance()
  .pushManager.fetchSilentModeForConversation({
    invited ,
    convType,
  })
  .then(() => {
    console.log("Succeeded in getting the push notification settings of the conversation.");
  })
  .catch((reason) => {
    console.log("Failed to get the push notification settings of the conversation.", reason);
  });
```

## Get push notification settings for multiple sessions

1. You can get push notification settings for up to 20 sessions in each call.

2. If the session uses app settings or its push notification settings have expired, the returned dictionary does not contain this session.

You can call the fetchSilentModeForConversations method to retrieve push notification settings for multiple conversations, as shown in the following sample code:

```typescript
// conversations: conversation list.
ChatClient.getInstance()
  .pushManager.fetchSilentModeForConversations(conversations)
  .then(() => {
    console.log("Succeeded in getting the conversation list.");
  })
  .catch((reason) => {
    console.log("Failed to get the conversation list.", reason);
  });
```

## Clear push notification settings for a single session

You can call the removeSilentModeForConversation method to clear the push notification mode settings for a specific conversation. After clearing, the conversation will use the app's settings by default.

The following code example shows how to clear a session's push notifications:

```typescript
// convId: session ID.
// convType: session type.
ChatClient.getInstance()
  .pushManager.removeSilentModeForConversation({
    invited ,
    convType,
  })
  .then(() => {
    console.log("Succeeded in deleting the push notification settings of the conversation.");
  })
  .catch((reason) => {
    console.log("Failed to delete the push notification settings of the conversation.", reason);
  });
```

</PlatformWrapper>