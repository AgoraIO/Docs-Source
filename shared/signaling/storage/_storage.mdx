import * as data from '@site/data/variables';
import Prerequisites from '@docs/shared/common/prerequities.mdx';
import ProjectSetup from '@docs/shared/common/project-setup/index.mdx';
import ProjectImplement from '@docs/shared/signaling/storage/project-implementation/index.mdx';
import ProjectTest from '@docs/shared/signaling/storage/project-test/index.mdx';
import Reference from '@docs/shared/signaling/storage/reference/index.mdx';

<Vpd k="NAME" /> storage enables you to save channel and user attributes in an easy-to-use, serverless storage system. This feature helps you build innovative, reliable, and scalable applications without the need to set up your own database. 

Your app receives metadata modification events in real-time enabling you to update the front-end accordingly. You can leverage user and channel metadata in <Vpd k="NAME" /> apps to:

* **Personalize user profiles**: Create user profiles that include additional information such as the user's full name, a profile picture URL, geographic location, and availability status. 

* **Maintain chat history**: Store and display chat history, including timestamps and message status such as whether a message has been read or not. 

* **Maintain search history**: Enable users to quickly search for specific messages, users, or topics within the app. 

* **Customize notifications**: Enable users to customize their notification settings, such as choosing notifications to receive and setting custom alert tones. 

* **Enhance security**: Enforce security measures, such as verifying user identity and encrypting messages. 

## Understand the tech

Using <Vpd k="NAME" /> storage you associate metadata with a particular channel or a specific user.

* **Channel metadata**: Use channel metadata to store and distribute contextual channel data in your <Vpl k="CLIENT" />, such as props, announcements, member lists, and relationship chains. 
When channel properties are set, updated, or deleted by a user, an event notification is triggered, and other users in the channel receive this information within 100ms.

* **User metadata**: Use user metadata to store and distribute contextual data about users in your <Vpl k="CLIENT" />, such as name, age, avatar, bio, and connection status. When a user attribute is set, updated or deleted, an event notification is triggered, and users who subscribe to this users metadata will receive this information within 100ms.

This section presents an overview of the steps required to integrate <Vpd k="NAME" /> storage into your <Vpl k="CLIENT" />. The following figure shows the basic workflow you implement to read and write channel and user metadata:

![Signaling workflow](/images/signaling/signaling-metadata-workflow.svg)

<PlatformWrapper notAllowed="web,android,ios">
**The <Vpl k="NAME" /> implementation is coming soon.**
</PlatformWrapper>

<PlatformWrapper notAllowed="macos,windows,electron,linux-cpp,linux-java,unity">

## Prerequisites

In order to follow this procedure you must have:

<Prerequisites />
* Enabled <Vpd k="NAME" /> on your Agora project

## Project setup

<ProjectSetup />

## Implement storage

In the `storage` sample project, after the local user logs in to <Vpd k="NAME" />, you set their metadata in the form of key-value pairs. When the user modifies a value stored as metadata, you call the update method to save the new value. You show a list of all users currently in the channel. When the local user selects another user from the list, you retrieve and display their metadata. You subscribe to the metadata of remote users to be notified of changes.

To demonstrate the use of channel storage, the <Vpl k="CLIENT" /> sets the `lastUser` key in the channel metadata to the current time, whenever a user subscribes to the channel. Since the channel metadata is shared by all users in the channel, the value of the `lastUser` key holds the time of the last subscription to the channel. You access the identity of the `lastUser` by referring to the `AuthorUid` of the metadata key.

<ProjectImplement />

## Test storage

This section explains how to run the `storage` sample project and test channel and user metadata features. To run the project, take the following steps:

<ProjectTest />

## Reference

This section contains additional information that either supplements the content on this page or directs you to documentation that covers other aspects of this product.

<Reference />

</PlatformWrapper>
