import * as data from '@site/data/variables';
import Setup from '@docs/shared/common/project-setup/index.mdx';
import ProjectImplement from '@docs/shared/signaling/cloud-proxy/project-implementation/poc3.mdx';
import ProjectTest from '@docs/shared/signaling/cloud-proxy/project-test/index.mdx';
import Reference from '@docs/shared/signaling/cloud-proxy/reference/index.mdx';


<PlatformWrapper notAllowed="web">
Cloud Proxy is not available for this platform yet.
</PlatformWrapper>

<PlatformWrapper platform = 'web'>
You use a proxy connection to ensure reliable connectivity for your users when they connect from an environment with a restricted network.

## Understand the tech

<PlatformWrapper platform="web">
To accommodate your end users’ firewall settings and business needs, <Vg k="CP"/> offers a HTTP proxy service. The following figure shows the <Vg k="CP"/> workflow:

![cloud proxy](/images/signaling/cloud-proxy.svg)

The steps you need to implement in your <Vpl k="CLIENT" /> are:

1.  Before connecting to <Vg k="AGORA_BACKEND" />, set <Vpd k="SDK" /> to request a connection to <Vg k="CP"/>.

2.  When the request succeeds, <Vg k="CP"/> sends back the proxy information.

3.  <Vpd k="SDK" /> sends signaling and media data to <Vg k="CP"/>, which forwards this data to <Vg k="AGORA_BACKEND" />.

4.  <Vg k="AGORA_BACKEND" /> sends signaling and media data to <Vg k="CP"/>, which forwards it to <Vpd k="SDK" />.

</PlatformWrapper>
<PlatformWrapper notAllowed="web">
To accommodate your end users’ firewall settings and business needs, <Vpd k="SDK" /> enables you to connect using a TCP proxy server.

The steps you need to implement in your <Vpl k="CLIENT" /> are:

1. Set proxy configuration

2. Apply the configuration to the Signaling Engine

</PlatformWrapper>

## Prerequisites

To follow this page, you must:

- Set up the [<Vg k="MESS_SDK"/> reference app](/en/signaling/develop/get-started-sdk#project-setup)

<PlatformWrapper platform="web">
- Contact support@agora.io and enable <Vg k="CP"/> for your project.

- Configure your firewall to allow communication through the <Vg k="CP"/> [allowed IP address](../reference/cloud-proxy-allowed-ips).
</PlatformWrapper>
    
<PlatformWrapper notAllowed="web">
## Implement communication using a TCP proxy

This section shows how to connect to <Vg k="SIG" /> using a third-party TCP proxy server.

</PlatformWrapper>

<PlatformWrapper platform="web">
## Implement communication using <Vg k="CP"/>

This section shows how to use the <Vpd k="SDK" /> to implement <Vg k="CP"/> in your <Vpl k="CLIENT" />, step-by-step.
</PlatformWrapper>

<ProjectImplement/>

## Test proxy connection

<ProjectTest/>

## Reference

This section contains information that completes the information in this page, or points you to documentation that explains other aspects to this
product.

<Reference/>
</PlatformWrapper>