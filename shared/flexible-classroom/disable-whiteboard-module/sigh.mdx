## Disable the whiteboard

You need to monitor the whiteboard widget state change caused by the teacher's client and adjust the UI accordingly. Below takes an <Vpl k="NAME" /> project as an example.

<PlatformWrapper platform="android">
Generally speaking, you need to edit the `AgoraEduUIKit/src/main/java/com/agora/edu/component/whiteboard/AgoraEduWhiteBoardComponent.kt` file.
</PlatformWrapper>
<PlatformWrapper platform="ios">
Generally speaking, you need to edit the `SDKs/AgoraEduUI/Classes/Components/FlatComponents/AgoraBoardUIComponent.swift` file.
</PlatformWrapper>

<PlatformWrapper notAllowed="android">
<PlatformWrapper notAllowed="ios">
1. Create a new branch based on the [latest release branch](https://github.com/AgoraIO-Community/flexible-classroom-desktop.git) in the Flexible-classroom-desktop repository.
</PlatformWrapper>
</PlatformWrapper>
<PlatformWrapper platform="ios">
1. Create a new branch based on the [latest release branch](https://github.com/AgoraIO-Community/flexible-classroom-ios.git) in the Flexible-classroom-iOS repository.
</PlatformWrapper>

<PlatformWrapper platform="android">
1. Create a new branch based on the [latest release branch](https://github.com/AgoraIO-Community/CloudClass-Android.git) in the CloudClass-Android repository.
</PlatformWrapper>

<PlatformWrapper platform="ios">
2. Add a function in the `AgoraBoardUIComponent.swift` file for destroying the board widget in `AgoraBoardUIComponent`, as follows:

   ```swift
   //
   private extension AgoraBoardUIComponent {
       ...
       func deinitBoardWidget() {
       self.boardWidget?.view.removeFromSuperview()
       self.boardWidget = nil
       contextPool.widget.remove(self,
                                 widgetId: netlessKey)
       }
       ...
   }
   ```
</PlatformWrapper>
<PlatformWrapper platform="android">
2. Add a function in the `AgoraEduWhiteBoardComponent.kt` file for destroying the board widget in `AgoraEduWhiteBoardComponent`, as follows:

    ```kotlin
    override fun release() {
        super.release()
        whiteBoardWidget?.release()
        whiteBoardWidget = null
    }
    ```
</PlatformWrapper>

<PlatformWrapper platform="ios">
3. Add `contextPool.widget.add(self)` in the `init` function in `AgoraBoardUIComponent.swift` to register an observer for observing the whiteboard state change.

   ```swift
   init(context: AgoraEduContextPool) {
       super.init(nibName: nil, bundle: nil)
       contextPool = context
       view.backgroundColor = .clear

       contextPool.room.registerRoomEventHandler(self)
       contextPool.media.registerMediaEventHandler(self)
       // Monitor the state change of the whiteboard widget.
       contextPool.widget.add(self)
   }
   ```
</PlatformWrapper>
<PlatformWrapper platform="android">
3. Add `eduContext?.widgetContext()?.addWidgetActiveObserver(widgetActiveObserver, AgoraWidgetDefaultId.WhiteBoard.id)` in the `initView` function in `AgoraEduWhiteBoardComponent.kt` to register an observer for observing the whiteboard state change.

    ```kotlin
    override fun initView(agoraUIProvider: IAgoraUIProvider) {
        super.initView(agoraUIProvider)
        eduContext?.widgetContext()?.addWidgetActiveObserver(widgetActiveObserver, AgoraWidgetDefaultId.LargeWindow.id)
        eduContext?.widgetContext()?.addWidgetActiveObserver(widgetActiveObserver, AgoraWidgetDefaultId.WhiteBoard.id)
        eduContext?.widgetContext()?.addWidgetMessageObserver(whiteBoardObserver, AgoraWidgetDefaultId.WhiteBoard.id)
        eduContext?.roomContext()?.addHandler(roomHandler)
    }
    ```
</PlatformWrapper>

<PlatformWrapper platform="ios">
4. When the state of the whiteboard widget changes, the SDK triggers the `onWidgetActive` or `onWidgetInactive` callback. Add logic in the `onWidgetActive` and `onWidgetInactive` callbacks. When the whiteboard state changes to active, render the whiteboard are; when the whiteboard state changes to inactive, call `deinitBoardWidget` to destroy the board widget.

   ```swift
   extension AgoraBoardUIComponent: AgoraWidgetActivityObserver {
       func onWidgetActive(_ widgetId: String) {
           guard widgetId == netlessKey else {
               return
           }

           initBoardWidget()
           joinBoard()
       }

       func onWidgetInactive(_ widgetId: String) {
           guard widgetId == netlessKey else {
               return
           }

           deinitBoardWidget()
       }
   }
   ```
</PlatformWrapper>
<PlatformWrapper platform="android">
4. When the state of the whiteboard widget changes, the SDK triggers the `onWidgetActive` or `onWidgetInActive` callback. Add logic in the `onWidgetActive` and `onWidgetInActive` callbacks. When the whiteboard state changes to active, render the whiteboard are; when the whiteboard state changes to inactive, call `release` to destroy the board widget.

    ```kotlin
    private val widgetActiveObserver = object : AgoraWidgetActiveObserver {
        override fun onWidgetActive(widgetId: String) {
            if (widgetId == AgoraWidgetDefaultId.WhiteBoard.id) {
                createWhiteWidget()
            }
        }

        override fun onWidgetInActive(widgetId: String) {
            if (widgetId == AgoraWidgetDefaultId.WhiteBoard.id) {
                ContextCompat.getMainExecutor(context).execute {
                    whiteBoardWidget?.cloudDiskMsgObserver?.let {
                        eduContext?.widgetContext()?.removeWidgetMessageObserver(it, AgoraCloudDisk.id)
                    }
                    binding.agoraEduWhiteboardContainer.removeAllViews()
                    whiteBoardWidget?.release()
                    whiteBoardWidget = null
                }
            }
        }
    }
    ```
</PlatformWrapper>

