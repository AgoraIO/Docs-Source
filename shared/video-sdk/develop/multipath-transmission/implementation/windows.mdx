
<PlatformWrapper platform="windows">

### Multipath APIs

The <Vpd k="SDK" /> supports enabling and configuring multipath transmission capabilities through the following parameters in `ChannelMediaOptions`:

```java
struct ChannelMediaOptions {
  // ...
  Optional<bool> enableMultipath;
  Optional<MultipathMode> uplinkMultipathMode;
  Optional<MultipathMode> downlinkMultipathMode;
  Optional<MultipathType> preferMultipathType;
};
```

Use `enableMultipath` to enable multipath transmission. Once enabled, the SDK supports two transmission modes:

- **Dynamic mode** (default): Dynamically selects the optimal transmission path based on network conditions. This mode is suitable for traffic-sensitive scenarios with high user experience requirements, such as conferences and education. In this mode, you can use `preferMultipathType` to specify a preferred network path, such as Wi-Fi or mobile network.

- **Full redundancy mode**: Sends data simultaneously across all available network paths. This mode is suitable for scenarios where traffic use is less sensitive but a highly reliable user experience is required, such as outdoor production, broadcasting, and parallel operation. This mode incurs additional fees. [Contact technical support](mailto:support@agora.io) to enable it.

You can configure the transmission mode separately for uplink (`uplinkMultipathMode`) and downlink (`downlinkMultipathMode`).

When multipath is enabled, the SDK reports transmission statistics for each path in real time through the `onMultipathStats` callback. These statistics include traffic consumption for each network type and real-time performance metrics for each path, making it easier to monitor and optimize network performance.


```java
struct MultipathStats {
  uint32_t lanTxBytes;
  uint32_t lanRxBytes;
  uint32_t wifiTxBytes;
  uint32_t wifiRxBytes;
  uint32_t mobileTxBytes;
  uint32_t mobileRxBytes;
  int activePathNum;
  const PathStats* pathStats;
};
```

### Sample code

The following sample code shows how to enable and configure multipath network transmission:

```java
// Initialize UI elements related to multipath transmission
m_cmbMultipathMode.InsertString(0, _T("Duplicate"));
m_cmbMultipathMode.InsertString(1, _T("Dynamic"));
m_cmbMultipathMode.SetCurSel(0);

// Initialize multipath transmission controls
m_staEnableMultipath.SetWindowText(_T("Enable Multipath:"));
m_chkEnableMultipath.SetCheck(BST_UNCHECKED);

// Configure ChannelMediaOptions
ChannelMediaOptions options;
// ...
// Enable multipath network transmission
options.enableMultipath = (m_chkEnableMultipath.GetCheck() == BST_CHECKED);

// Get the user-specified transmission mode
int modeIndex = m_cmbMultipathMode.GetCurSel();
MultipathMode mode = (modeIndex == 0) ? Duplicate : Dynamic;

// Set uplink transmission mode
options.uplinkMultipathMode = mode;

// Set downlink transmission mode
options.downlinkMultipathMode = mode;

// In dynamic transmission mode, set the preferred transmission path type
options.preferMultipathType = WIFI;

// Report multipath transmission statistics
void CMultipathRtcEngineEventHandler::onMultipathStats(const MultipathStats& stats)
{
  if (m_hMsgHanlder)
  {
    MultipathStats* statsPtr = new MultipathStats(stats);
    ::PostMessage(m_hMsgHanlder, WM_MSGID(EID_MULTIPATH_STATS), (WPARAM)statsPtr, 0);
  }
}
```

</PlatformWrapper>