## IAgoraMediaRtcRecorderEventHandler

The `IAgoraMediaRtcRecorderEventHandler` interface defines callback methods that are triggered during various RTC recorder events, such as changes in connection state, user activity, and statistics updates.

| API | Description |
|-----|-------------|
| [`onConnected`](#onconnected) | Triggered when the SDK connects to the Agora channel (`CONNECTION_STATE_CONNECTED(3)`). |
| [`onDisconnected`](#ondisconnected) | Triggered when the SDK disconnects from the Agora channel (`CONNECTION_STATE_DISCONNECTED(1)`). |
| [`onReconnected`](#onreconnected) | Triggered when the connection state changes back to `CONNECTION_STATE_CONNECTED(3)`. |
| [`onConnectionLost`](#onconnectionlost) | Triggered when the SDK loses connection to the Agora channel. |
| [`onUserJoined`](#onuserjoined) | Triggered when a remote user joins the channel. |
| [`onUserLeft`](#onuserleft) | Triggered when a remote user leaves the channel. |
| [`onFirstRemoteVideoDecoded`](#onfirstremotevideodecoded) | Triggered when the first frame of remote video is decoded. |
| [`onFirstRemoteAudioDecoded`](#onfirstremoteaudiodecoded) | Triggered when the first frame of remote audio is decoded. |
| [`onAudioVolumeIndication`](#onaudiovolumeindication) | Reports the speaker's UID, their volume, and whether the local user is speaking. |
| [`onActiveSpeaker`](#onactivespeaker) | Triggered when an active speaker is detected. |
| [`onUserVideoStateChanged`](#onuservideostatechanged) | Triggered when a remote user's video state changes. |
| [`onUserAudioStateChanged`](#onuseraudiostatechanged) | Triggered when a remote user's audio state changes. |
| [`onRemoteVideoStats`](#onremotevideostats) | Reports statistics for the received remote video stream. |
| [`onRemoteAudioStats`](#onremoteaudiostats) | Reports statistics for the received remote audio stream. |
| [`onRecorderStateChanged`](#onrecorderstatechanged) | Triggered when the local recorder state changes. |
| [`onRecorderInfoUpdated`](#onrecorderinfoupdated) | Triggered when recorder information is updated. |
| [`onEncryptionError`](#onencryptionerror) | Reports an encryption-related error. |
| [`onError`](#onerror) | Reports an error code and corresponding message. |
| [`onTokenPrivilegeWillExpire`](#ontokenprivilegewillexpire) | Triggered 30 seconds before the current token expires. |
| [`onTokenPrivilegeDidExpire`](#ontokenprivilegedidexpire) | Triggered when the token expires. |


### `onConnected`

Triggered when the SDK's connection state to the Agora channel changes to `CONNECTION_STATE_CONNECTED (3)`.

```cpp
virtual void onConnected(const char *channelId, user_id_t uid) = 0;
```

| Parameter   | Type           | Description |
| ----------- | -------------- | ----------- |
| `channelId` | `const char *` | Channel ID. |
| `uid`       | `user_id_t`    | User ID.    |


### `onDisconnected`

Triggered when the SDK's connection state to the Agora channel changes to `CONNECTION_STATE_DISCONNECTED (1)`.

```cpp
virtual void onDisconnected(const char *channelId, user_id_t uid, CONNECTION_CHANGED_REASON_TYPE reason) = 0;
```

| Parameter   | Type                             | Description                                                                                                          |
| ----------- | -------------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| `channelId` | `const char *`                   | Channel ID.                                                                                                          |
| `uid`       | `user_id_t`                      | User ID.                                                                                                             |
| `reason`    | `CONNECTION_CHANGED_REASON_TYPE` | Reason for the connection state change. See [`CONNECTION_CHANGED_REASON_TYPE`](#connection_changed_reason_type). |

### `onReconnected`

Triggered when the connection state changes back to `CONNECTION_STATE_CONNECTED (3)`.

```cpp
virtual void onReconnected(const char *channelId, user_id_t uid, CONNECTION_CHANGED_REASON_TYPE reason) = 0;
```

| Parameter   | Type                             | Description                                                                                           |
| ----------- | -------------------------------- | ----------------------------------------------------------------------------------------------------- |
| `channelId` | `const char *`                   | Channel ID.                                                                                           |
| `uid`       | `user_id_t`                      | User ID.                                                                                              |
| `reason`    | `CONNECTION_CHANGED_REASON_TYPE` | Reason for reconnection. See [`CONNECTION_CHANGED_REASON_TYPE`](#connection_changed_reason_type). |

### `onConnectionLost`

Triggered when the SDK loses connection to the Agora channel.

```cpp
virtual void onConnectionLost(const char *channelId, user_id_t uid) = 0;
```

| Parameter   | Type           | Description |
| ----------- | -------------- | ----------- |
| `channelId` | `const char *` | Channel ID. |
| `uid`       | `user_id_t`    | User ID.    |

### `onUserJoined`

Triggered when a remote user successfully joins the channel.

```cpp
virtual void onUserJoined(const char *channelId, user_id_t uid) = 0;
```

| Parameter   | Type           | Description     |
| ----------- | -------------- | --------------- |
| `channelId` | `const char *` | Channel ID.     |
| `uid`       | `user_id_t`    | Remote user ID. |

### `onUserLeft`

Triggered when a remote user leaves the channel.

```cpp
virtual void onUserLeft(const char *channelId, user_id_t uid, USER_OFFLINE_REASON_TYPE reason) = 0;
```

| Parameter   | Type                       | Description                                                                            |
| ----------- | -------------------------- | -------------------------------------------------------------------------------------- |
| `channelId` | `const char *`             | Channel ID.                                                                            |
| `uid`       | `user_id_t`                | Remote user ID.                                                                        |
| `reason`    | `USER_OFFLINE_REASON_TYPE` | Reason the user left. See [`USER_OFFLINE_REASON_TYPE`](#user_offline_reason_type). |

### `onFirstRemoteVideoDecoded`

Triggered when the first frame of the remote video is successfully decoded.

```cpp
virtual void onFirstRemoteVideoDecoded(const char *channelId, user_id_t userId, int width, int height, int elapsed) = 0;
```

| Parameter   | Type           | Description                                                     |
| ----------- | -------------- | --------------------------------------------------------------- |
| `channelId` | `const char *` | Channel ID.                                                     |
| `userId`    | `user_id_t`    | Remote user ID.                                                 |
| `width`     | `int`          | Video width in pixels.                                          |
| `height`    | `int`          | Video height in pixels.                                         |
| `elapsed`   | `int`          | Time (ms) from remote user joining the channel to the callback. |

### `onFirstRemoteAudioDecoded`

Triggered when the first frame of remote audio is successfully decoded.

```cpp
virtual void onFirstRemoteAudioDecoded(const char *channelId, user_id_t userId, int elapsed) = 0;
```

| Parameter   | Type           | Description                                    |
| ----------- | -------------- | ---------------------------------------------- |
| `channelId` | `const char *` | Channel ID.                                    |
| `userId`    | `user_id_t`    | Remote user ID.                                |
| `elapsed`   | `int`          | Time (ms) from local user joining to callback. |

### `onAudioVolumeIndication`

Reports which users are speaking and their volumes.

```cpp
virtual void onAudioVolumeIndication(const char *channelId, const SpeakVolumeInfo* speakers, unsigned int speakerNumber) = 0;
```

| Parameter       | Type                     | Description                                                                   |
| --------------- | ------------------------ | ----------------------------------------------------------------------------- |
| `channelId`     | `const char *`           | Channel ID.                                                                   |
| `speakers`      | `const SpeakVolumeInfo*` | Array of user ID and volume. See [`SpeakVolumeInfo`](#speakvolumeinfo). |
| `speakerNumber` | `unsigned int`           | Number of speakers.                                                           |

### `onActiveSpeaker`

Triggered when the active speaker is detected.

```cpp
virtual void onActiveSpeaker(const char *channelId, user_id_t userId) = 0;
```

<Admonition type="info" info="info">
The active speaker is the user speaking with the highest volume during a certain period.
</Admonition>

| Parameter   | Type           | Description                                     |
| ----------- | -------------- | ----------------------------------------------- |
| `channelId` | `const char *` | Channel ID.                                     |
| `userId`    | `user_id_t`    | Active speaker's user ID. `0` means local user. |

### `onUserVideoStateChanged`

Triggered when the remote user's video state changes.

```cpp
virtual void onUserVideoStateChanged(const char *channelId, user_id_t userId, REMOTE_VIDEO_STATE state, REMOTE_VIDEO_STATE_REASON reason, int elapsed) = 0;
```

| Parameter   | Type                        | Description                                                                           |
| ----------- | --------------------------- | ------------------------------------------------------------------------------------- |
| `channelId` | `const char *`              | Channel ID.                                                                           |
| `userId`    | `user_id_t`                 | User whose video state changed.                                                       |
| `state`     | `REMOTE_VIDEO_STATE`        | Current video state. See [`REMOTE_VIDEO_STATE`](#remote_video_state).             |
| `reason`    | `REMOTE_VIDEO_STATE_REASON` | Reason for change. See [`REMOTE_VIDEO_STATE_REASON`](#remote_video_state_reason). |
| `elapsed`   | `int`                       | Time (ms) since the user joined.                                                      |

### `onUserAudioStateChanged`

Triggered when the remote user's audio state changes.

```cpp
virtual void onUserAudioStateChanged(const char *channelId, user_id_t userId, REMOTE_AUDIO_STATE state, REMOTE_AUDIO_STATE_REASON reason, int elapsed) = 0;
```

| Parameter   | Type                        | Description                                                                           |
| ----------- | --------------------------- | ------------------------------------------------------------------------------------- |
| `channelId` | `const char *`              | Channel ID.                                                                           |
| `userId`    | `user_id_t`                 | User whose audio state changed.                                                       |
| `state`     | `REMOTE_AUDIO_STATE`        | Current audio state. See [`REMOTE_AUDIO_STATE`](#remote_audio_state).             |
| `reason`    | `REMOTE_AUDIO_STATE_REASON` | Reason for change. See [`REMOTE_AUDIO_STATE_REASON`](#remote_audio_state_reason). |
| `elapsed`   | `int`                       | Time (ms) since the user joined.                                                      |

### `onRemoteVideoStats`

Reports statistics of remote video.

```cpp
virtual void onRemoteVideoStats(const char *channelId, user_id_t userId, const RemoteVideoStatistics& stats) = 0;
```

| Parameter   | Type                           | Description                                                  |
| ----------- | ------------------------------ | ------------------------------------------------------------ |
| `channelId` | `const char *`                 | Channel ID.                                                  |
| `userId`    | `user_id_t`                    | Remote user ID.                                              |
| `stats`     | `const RemoteVideoStatistics&` | See [`RemoteVideoStatistics`](#remotevideostatistics). |

### `onRemoteAudioStats`

Reports statistics of remote audio.

```cpp
virtual void onRemoteAudioStats(const char *channelId, user_id_t userId, const RemoteAudioStatistics& stats) = 0;
```

| Parameter   | Type                           | Description                                                  |
| ----------- | ------------------------------ | ------------------------------------------------------------ |
| `channelId` | `const char *`                 | Channel ID.                                                  |
| `userId`    | `user_id_t`                    | Remote user ID.                                              |
| `stats`     | `const RemoteAudioStatistics&` | See [`RemoteAudioStatistics`](#remoteaudiostatistics). |

### `onRecorderStateChanged`

Triggered when the local recording state changes.

```cpp
virtual void onRecorderStateChanged(const char* channelId, user_id_t userId, media::RecorderState state, media::RecorderReasonCode reason, const char* filename) = 0;
```

| Parameter   | Type                        | Description                                                             |
| ----------- | --------------------------- | ----------------------------------------------------------------------- |
| `channelId` | `const char*`               | Channel name.                                                           |
| `userId`    | `user_id_t`                 | User ID.                                                                |
| `state`     | `media::RecorderState`      | Current state. See [`RecorderState`](#recorderstate).               |
| `reason`    | `media::RecorderReasonCode` | Reason for change. See [`RecorderReasonCode`](#recorderreasoncode). |
| `filename`  | `const char*`               | Output filename.                                                        |

### `onRecorderInfoUpdated`

Triggered periodically with updated recording file information.

```cpp
virtual void onRecorderInfoUpdated(const char* channelId, user_id_t userId, const media::RecorderInfo& info) = 0;
```

| Parameter   | Type                         | Description                                |
| ----------- | ---------------------------- | ------------------------------------------ |
| `channelId` | `const char*`                | Channel name.                              |
| `userId`    | `user_id_t`                  | User ID.                                   |
| `info`      | `const media::RecorderInfo&` | See [`RecorderInfo`](#recorderinfo). |

### `onEncryptionError`

Reports encryption errors.

```cpp
virtual void onEncryptionError(const char* channelId, ENCRYPTION_ERROR_TYPE errorType) = 0;
```

| Parameter   | Type                    | Description                                                |
| ----------- | ----------------------- | ---------------------------------------------------------- |
| `channelId` | `const char*`           | Channel name.                                              |
| `errorType` | `ENCRYPTION_ERROR_TYPE` | See [`ENCRYPTION_ERROR_TYPE`](#encryption_error_type). |

### `onError`

Reports error codes and messages.

```cpp
virtual void onError(const char* channelId, ERROR_CODE_TYPE error, const char* msg) = 0;
```

| Parameter   | Type              | Description                                                |
| ----------- | ----------------- | ---------------------------------------------------------- |
| `channelId` | `const char*`     | Channel ID.                                                |
| `error`     | `ERROR_CODE_TYPE` | Error code. See [`ERROR_CODE_TYPE`](#error_code_type). |
| `msg`       | `const char*`     | Error message.                                             |

### `onTokenPrivilegeWillExpire`

Triggered when the token is about to expire in 30 seconds.

```cpp
virtual void onTokenPrivilegeWillExpire(const char* channelId, const char* token) = 0;
```

| Parameter   | Type          | Description                           |
| ----------- | ------------- | ------------------------------------- |
| `channelId` | `const char*` | Channel name.                         |
| `token`     | `const char*` | Token that will expire in 30 seconds. |

### `onTokenPrivilegeDidExpire`

Triggered when the token has expired.

```cpp
virtual void onTokenPrivilegeDidExpire(const char* channelId) = 0;
```

| Parameter   | Type          | Description   |
| ----------- | ------------- | ------------- |
| `channelId` | `const char*` | Channel name. |
