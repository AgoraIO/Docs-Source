<PlatformWrapper platform="windows">

### Beautiful

#### Achieve preset beauty effects

The `setFaceShapeBeautyOptions` method is the master switch of the beauty effect. Call this method and pass `true` in the `enable` parameter to turn on the beauty effect. You can specify the beauty style and style strength in `FaceShapeBeautyOptions` and use the preset parameters to quickly achieve the beauty effect.

```cpp
agora::rtc::FaceShapeBeautyOptions beauty_options;
// Set the beauty style type to male
beauty_options.shapeStyle = agora::rtc::FaceShapeBeautyOptions::FACE_SHAPE_BEAUTY_STYLE_MALE;
// Set style intensity
beauty_options.styleIntensity = 100;
mRtcEngine->setFaceShapeBeautyOptions(true, beauty_options);
```

#### Fine-tune individual parts

After turning on the beautify function, you can call the `setFaceShapeAreaOptions` method to fine-tune each area of the face individually. This method takes effect immediately when adjusting the modification strength of a single part, and does not modify the preset value.

```cpp
agora::rtc::FaceShapeAreaOptions area_options;
// Specify a fine-tuned part, e.g., the small head
area_options.shapeArea = agora::rtc::FaceShapeAreaOptions::FACE_SHAPE_AREA_HEADSCALE;
// Strength of adjustments in this area
area_options.shapeIntensity = 100;
mRtcEngine->setFaceShapeAreaOptions(area_options)
```

#### Close Beauty

Call the `setFaceShapeEffectOptions` method and pass `false` in the `enable` parameter to turn off the beauty effect.

```cpp
mRtcEngine->setFaceShapeBeautyOptions(false, beauty_options);
```

### Beauty care

#### Start beauty

Call the `setExtensionProperty` method to enable the beauty effect and fill in the parameters as follows:

    - `provider`: `agora_video_filters_clear_vision`
    - `extension`: `clear_vision`
    - `key`: `makeup_options`
    - `value`: Packaged in JSON format where different fields correspond to different beauty effects.
    - `sourceType`: Only the following settings are supported:
        - When using camera to collect data, keep the default value **PRIMARY_CAMERA_SOURCE**.
        - In the self-collection scenario, it is set to **CUSTOM_VIDEO_SOURCE**.

Refer to the following code to enable the beauty effect:

```cpp
// Create a JSON for configuring beauty effects
struct MakeupOptions
{
    bool enable_mu;
    int browStyle;
    int browColor;
    float browStrength;
    int lashStyle;
    int lashColor;
    float lashStrength;
    int shadowStyle;
    float shadowStrength;
    int pupilStyle;
    float pupilStrength;
    int blushStyle;
    int blushColor;
    float blushStrength;
    int lipStyle;
    int lipColor;
    float lipStrength;
 
    void reset()
    {
        enable_mu = false;
        browStyle = 0;
        browColor = 0;
        browStrength = 0.0f;
        lashStyle = 0;
        lashColor = 0;
        lashStrength = 0.0f;
        shadowStyle = 0;
        shadowStrength = 0.0f;
        pupilStyle = 0;
        pupilStrength = 0.0f;
        blushStyle = 0;
        blushColor = 0;
        blushStrength = 0.0f;
        lipStyle = 0;
        lipColor = 0;
        lipStrength = 0.0f;
    }
 
    MakeupOptions()
    {
        reset();
    }
    // to JSON string
    std::string toJsonString()
    {
        std::string jsonStr = "{\"enable_mu\":";
        jsonStr += enable_mu ? "true" : "false";
        jsonStr += ",\"browStyle\":" + std::to_string(browStyle);
        jsonStr += ",\"browColor\":" + std::to_string(browColor);
        jsonStr += ",\"browStrength\":" + std::to_string(browStrength);
        jsonStr += ",\"lashStyle\":" + std::to_string(lashStyle);
        jsonStr += ",\"lashColor\":" + std::to_string(lashColor);
        jsonStr += ",\"lashStrength\":" + std::to_string(lashStrength);
        jsonStr += ",\"shadowStyle\":" + std::to_string(shadowStyle);
        jsonStr += ",\"shadowStrength\":" + std::to_string(shadowStrength);
        jsonStr += ",\"pupilStyle\":" + std::to_string(pupilStyle);
        jsonStr += ",\"pupilStrength\":" + std::to_string(pupilStrength);
        jsonStr += ",\"blushStyle\":" + std::to_string(blushStyle);
        jsonStr += ",\"blushColor\":" + std::to_string(blushColor);
        jsonStr += ",\"blushStrength\":" + std::to_string(blushStrength);
        jsonStr += ",\"lipStyle\":" + std::to_string(lipStyle);
        jsonStr += ",\"lipColor\":" + std::to_string(lipColor);
        jsonStr += ",\"lipStrength\":" + std::to_string(lipStrength);
        jsonStr += "}";
        return jsonStr;
    }
};

// Set up beauty effects
MakeupOptions m_makeupOptions;
m_makeupOptions.enable_mu = true;
m_makeupOptions.browStyle = 1;
m_makeupOptions.browColor = 2;
m_makeupOptions.browStrength = 0.5;

// Convert to JSON string
std::string str = m_makeupOptions.toJsonString();
// Open Beauty
mRtcEngine->setExtensionProperty("agora_video_filters_clear_vision", "clear_vision", "makeup_options", str.c_str(), PRIMARY_CAMERA_SOURCE);
```

#### Modify beauty effect options

After modifying the value of the beauty effect field in JSON, call the `setExtensionProperty` method to modify the beauty effect options. Refer to the following code to modify the beauty effect:

```cpp
MakeupOptions m_makeupOptions;
// Modify eyebrow type
m_makeupOptions.browStyle = 2;
std::string str = m_makeupOptions.toJsonString();
mRtcEngine->setExtensionProperty("agora_video_filters_clear_vision", "clear_vision", "makeup_options", str.c_str(), PRIMARY_CAMERA_SOURCE);
```

#### Turn off beauty effects

Specify the `enable_mu` node as `false` in the JSON and call the `setExtensionProperty` method to turn off the beauty effect:

```cpp
MakeupOptions m_makeupOptions;
m_makeupOptions.enable_mu = false;
std::string str = m_makeupOptions.toJsonString();
mRtcEngine->setExtensionProperty("agora_video_filters_clear_vision", "clear_vision", "makeup_options", str.c_str(), PRIMARY_CAMERA_SOURCE);
```

</PlatformWrapper>