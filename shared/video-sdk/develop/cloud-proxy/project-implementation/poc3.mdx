import ImportLibrary from '@docs/assets/code/video-sdk/cloud-proxy/import-library.mdx';
import SetVariables from '@docs/assets/code/video-sdk/cloud-proxy/set-variables.mdx';
import SetCloudProxy from '@docs/assets/code/video-sdk/cloud-proxy/set-cloud-proxy.mdx';
import EventHandler from '@docs/assets/code/video-sdk/cloud-proxy/event-handler.mdx';

<PlatformWrapper platform="">
        
1.  **Add the required imports**

    <ImportLibrary />

1.  **Add the required variables**

    <SetVariables />

<PlatformWrapper platform="android">
1.  **Check for failure to connect**

    When an attempt to connect directly to <Vg k="AGORA_BACKEND" /> fails, you set `directConnectionFailed` to `true`. 

    <EventHandler />

</PlatformWrapper>

1.  **Set the cloud proxy**

    To enable media stream encryption in your <Vpl k="CLIENT" />, create an Encryption Config and specify a key, salt, and encryption mode. Call `enableEncryption` and pass the config as a parameter.

    <SetCloudProxy />

> [!IMPORTANT]
> **Cloud proxy must first be enabled on the console**

</PlatformWrapper>
