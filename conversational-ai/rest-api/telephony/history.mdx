---
title: 'Retrieve call records'
sidebar_position: 2
type: docs
platform_selector: false
description: >
  Query historical call records for a specified appid based on the filter criteria.
---


import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';


<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="GET"
    endpoint="https://api.agora.io/api/conversational-ai-agent/v2/projects/{appid}/call"
  >

Use this endpoint to query historical call records for a specified appid based on the filter criteria.

## Request

### Path parameters

<PathParameter name="appid" type="string" required={true}>
  The App ID of the project.
</PathParameter>

### Query parameters

<PathParameter name="number" type="string" required={false}>
  Filter by phone number. Can be either the calling number or the called number.
</PathParameter>

<PathParameter name="from_time" type="integer" defaultValue="60 days ago" required={false}>
  Query list start timestamp (in seconds). 
</PathParameter>

<PathParameter name="to_time" type="integer" defaultValue="Current time" required={false}>
  Query list end timestamp (in seconds). 
</PathParameter>

<PathParameter name="type" type="string" possibleValues="inbound, outbound" required={false}>
  Call type filter:
  * `inbound`: Inbound call.
  * `outbound`: Outbound call.
  
  If not specified, all call types are returned.
</PathParameter>

<PathParameter name="limit" type="integer" defaultValue="20" required={false}>
  Maximum number of items returned in a single page.
</PathParameter>

<PathParameter name="cursor" type="string" required={false}>
  Pagination cursor. Use the `agent_id` from the previous page as the cursor for the next page.
</PathParameter>


## Response

- If the returned status code is `200`, the request was successful. The response body contains the result of the request.

  <ParameterList title="Response Body">
    <Parameter name="data" type="object">
      Call data object.
      
      <Parameter name="count" type="integer">
        The number of calls returned in this response.
      </Parameter>
      
      <Parameter name="list" type="array">
        A list of calls that meet the criteria.
        
        <Parameter name="to_number" type="string">
          The number called.
        </Parameter>
        
        <Parameter name="from_number" type="string">
          Caller ID.
        </Parameter>
        
        <Parameter name="pipeline_id" type="string">
          The unique ID of a published project in AI Studio. Can be obtained in AI Studio - Project - Release Management.
        </Parameter>
        
        <Parameter name="type" type="string" possibleValues="inbound, outbound">
          Call type:
          * `inbound`: Inbound call.
          * `outbound`: Outbound call.
        </Parameter>
        
        <Parameter name="agent_id" type="string">
          A unique identifier for the call session.
        </Parameter>
        
        <Parameter name="channel" type="string">
          RTC channel name.
        </Parameter>
        
        <Parameter name="create_ts" type="integer">
          Call creation timestamp (in seconds).
        </Parameter>
        
        <Parameter name="state" type="string" possibleValues="answered, hangup">
          Call status:
          * `answered`: The call was answered.
          * `hangup`: The call was disconnected.
        </Parameter>
        
        <Parameter name="stop_ts" type="integer">
          Call end timestamp (in seconds). Returns `0` or `null` if the call has not ended.
        </Parameter>
      </Parameter>
    </Parameter>
    
    <Parameter name="meta" type="object">
      Metadata about the list.
      
      <Parameter name="cursor" type="string">
        Pagination cursor for the next page.
      </Parameter>
      
      <Parameter name="total" type="integer">
        The total number of calls that meet the query criteria.
      </Parameter>
    </Parameter>
    
    <Parameter name="status" type="string">
      Request status.
    </Parameter>
  </ParameterList>

- If the returned status code is not `200`, the request failed. The response body includes the error code and description. Refer to [status codes](/conversational-ai/rest-api/reference#response-status-codes) to understand the possible reasons for failure.
   
  <ParameterList title="Error Response">
    <Parameter name="error_type" type="string">
      The type of error that occurred.
    </Parameter>

    <Parameter name="description" type="string">
      A detailed description of the error.
    </Parameter>
  </ParameterList>

  **Common error codes:**
  - `401` `unauthorized`: Authentication failed, please check your credentials.
  - `422` `unprocessable_content`: Request format error or parameter validation failed.
  - `500` `internal_server_error`: Internal server error.   

</LeftColumn>

<RightColumn>

<Section title="Authorization">
This endpoint requires [Basic Auth](/conversational-ai/rest-api/restful-authentication).
</Section>

<Section title="Request example">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
    ```bash
    curl --request GET \
      --url 'https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call?limit=20' \
      --header 'Authorization: Basic <credentials>'    
    ```
    </TabItem>
    <TabItem value="python" label="Python">

    ```python
    import requests

    url = "https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call?limit=20"

    headers = {"Authorization": "Basic <credentials>"}

    response = requests.get(url, headers=headers)

    print(response.text)    
    ```
    </TabItem>

    <TabItem value="node" label="Node.js">

    ```js
    const url = 'https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call?limit=20';
    const options = {method: 'GET', headers: {Authorization: 'Basic <credentials>'}};

    fetch(url, options)
      .then(res => res.json())
      .then(json => console.log(json))
      .catch(err => console.error(err));    
    ```
    </TabItem>
  </Tabs>

</Section>

<Section title="Response example">

<Tabs>
<TabItem value="200" label="200">
  ```json
  {
    "data": {
      "count": 1,
      "list": [
        {
          "to_number": "2222",
          "from_number": "111",
          "pipeline_id": "28",
          "type": "inbound",
          "agent_id": "A42AA22ATxxxxx4RH76AM92W",
          "channel": "channel_1111",
          "create_ts": 1758498988,
          "state": "answered",
          "stop_ts": null
        }
      ]
    },
    "meta": {
      "cursor": "A42AA22AT45LDxxxxxH76AM92W",
      "total": 1
    },
    "status": "ok"
  }
  ```
</TabItem>

<TabItem value="Non-200" label="Non-200">
  ```json
  {
    "error_type": "unauthorized",
    "description": "Authentication failed. Please check your credentials."
  }
  ```
</TabItem>
</Tabs>

</Section>

</RightColumn>
</RestAPILayout>