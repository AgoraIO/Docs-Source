import CodeBlock from '@theme/CodeBlock';

The following figure illustrates the essential steps:

<ProductWrapper notAllowed="voice-calling">
<PlatformWrapper platform = "ios">
<details>
<summary>Quick start sequence</summary>

![](/images/video-sdk/quick-start-sequence.svg)
</details>
</PlatformWrapper>

<PlatformWrapper platform = "macos">
<details>
<summary>Quick start sequence</summary>

![](/images/video-sdk/quick-start-sequence-macos.svg)
</details>
</PlatformWrapper>
</ProductWrapper>

<ProductWrapper product="voice-calling">
![](/images/video-sdk/quickstart-voice-call-sequence.svg)
</ProductWrapper>

A complete code sample that implements the basic process of real-time <Vpd k="PRODUCT"/> is presented here for your reference. Copy and paste the following code into your `ViewController.swift` file, replacing the existing content:

<PlatformWrapper platform='ios'>
<details>
<summary>Complete sample code for real-time <Vpd k="PRODUCT"/> </summary>

<ProductWrapper product="video-calling">
<CodeBlock language="swift" showLineNumbers>
{`import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Define the localView variable
    var localView: UIView!
    // Define the remoteView variable
    var remoteView: UIView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    // Set up the video layout
    override func viewDidLoad() {
        super.viewDidLoad()

        // Create localView with a frame matching the screen bounds
        localView = UIView(frame: UIScreen.main.bounds)
        // Create remoteView with a specific frame
        // Positioned on the top right corner with an offset of 50 points from the top
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)

        // Initialize the Agora engine
        initializeAgoraEngine()

        // Start local camera preview
        startPreview()

        // Join the channel
        joinChannel()
    }

    // Clean up resources when deallocating
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Initialize the Agora engine
    func initializeAgoraEngine() {
        // Create the AgoraRtcEngineKit instance
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
    }

    // Start the local camera preview
    func startPreview() {
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()

        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Use a temporary Token to join the channel
        // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
    
    // Function to set up or clear the remote video canvas
    func setupRemoteVideoCanvas(for uid: UInt, view: UIView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

}

// Extension for implementing AgoraRtcEngineDelegate methods
extension ViewController: AgoraRtcEngineDelegate {
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("Remote user joined with uid: \(uid)")
        // Set up the remote video canvas with the remote view
        setupRemoteVideoCanvas(for: uid, view: remoteView)
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("Remote user left with uid: \(uid)")
        // Clear the remote video canvas by setting the view to nil
        setupRemoteVideoCanvas(for: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Define the localView variable
    var localView: UIView!
    // Define the remoteView variable
    var remoteView: UIView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    // Set up the video layout
    override func viewDidLoad() {
        super.viewDidLoad()

        // Initialize the Agora engine
        initializeAgoraEngine()

        // Create localView with a frame matching the screen bounds
        localView = UIView(frame: UIScreen.main.bounds)
        // Create remoteView with a specific frame
        // Positioned on the top right corner with an offset of 50 points from the top
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)

        // Start local camera preview
        startPreview()

        // Join the channel
        joinChannel()
    }

    // Clean up resources when deallocating
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Initialize the Agora engine
    func initializeAgoraEngine() {
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
    }

    // Start the local camera preview
    func startPreview() {
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()

        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming use-case, set the channel use-case to liveBroadcasting
        options.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience latency level
        options.audienceLatencyLevel = .ultraLowLatency
        // Use a temporary Token to join the channel
        // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
    
    // Function to set up or clear the remote video canvas
    func setupRemoteVideoCanvas(for uid: UInt, view: UIView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

}

// Extension for implementing AgoraRtcEngineDelegate methods
extension ViewController: AgoraRtcEngineDelegate {
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("Remote user joined with uid: \(uid)")
        // Set up the remote video canvas with the remote view
        setupRemoteVideoCanvas(for: uid, view: remoteView)
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("Remote user left with uid: \(uid)")
        // Clear the remote video canvas by setting the view to nil
        setupRemoteVideoCanvas(for: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="broadcast-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Define the localView variable
    var localView: UIView!
    // Define the remoteView variable
    var remoteView: UIView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    // Set up the video window layout
    override func viewDidLoad() {
        super.viewDidLoad()

        // Initialize the Agora engine
        initializeAgoraEngine()

        // Create localView with a frame matching the screen bounds
        localView = UIView(frame: UIScreen.main.bounds)
        // Create remoteView with a specific frame
        // Positioned on the top right corner with an offset of 50 points from the top
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)

        // Start local camera preview
        startPreview()

        // Join the channel
        joinChannel()
    }

    // Clean up resources when deallocating
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Initialize the Agora engine
    func initializeAgoraEngine() {
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()
    }

    // Start the local camera preview
    func startPreview() {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming use-case, set the channel use-case to liveBroadcasting
        options.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience latency level
        options.audienceLatencyLevel = .lowLatency
        // Use a temporary Token to join the channel
        // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
    
    // Function to set up or clear the remote video canvas
    func setupRemoteVideoCanvas(for uid: UInt, view: UIView?) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = view
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

}

// Extension for implementing AgoraRtcEngineDelegate methods
extension ViewController: AgoraRtcEngineDelegate {
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("Remote user joined with uid: \(uid)")
        // Set up the remote video canvas with the remote view
        setupRemoteVideoCanvas(for: uid, view: remoteView)
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("Remote user left with uid: \(uid)")
        // Clear the remote video canvas by setting the view to nil
        setupRemoteVideoCanvas(for: uid, view: nil)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="voice-calling">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        // Initialize the AgoraRtcEngineKit instance with your App ID and and set the delegate to self
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId:<#Your App ID#>, delegate: self)
        joinChannel()
    }

    deinit {
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        options.channelProfile = .communication
        // Set user role to broadcaster; to set user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Publish microphone audio 
        options.publishMicrophoneTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Join the channel using a temporary token and channel name
        // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }
}

extension ViewController: AgoraRtcEngineDelegate {
    // Callback when the local user successfully joins a channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int
    ) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int){
        // Print debug information
        print("User (uid) joined after (elapsed) milliseconds")
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason
    ) {
    }
}`}
</CodeBlock>
</ProductWrapper>
</details>
</PlatformWrapper>

<PlatformWrapper platform='macos'>
<details>
<summary>Complete sample code for <Vpd k="PRODUCT"/></summary>

<ProductWrapper product="voice-calling">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // RTC engine
    var agoraKit: AgoraRtcEngineKit!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        initializeAgoraEngine()
        joinChannel()
    }

    // Initialize the Agora engine
    func initializeAgoraEngine() {
        // Replace <#Your App ID#> with your Agora App ID
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
    }

    deinit {
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()

        options.channelProfile = .liveBroadcasting
        // Set the user role to broadcaster; keep the default if the user should be an audience member
        options.clientRoleType = .broadcaster
        // Publish audio captured by the microphone
        options.publishMicrophoneTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Join the channel with a temporary Token; pass your project's Token and channel name here
        // Setting uid to 0 means that the engine randomly generates one; the didJoinChannel callback is triggered upon success
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }

}

extension ViewController: AgoraRtcEngineDelegate {
    // Callback for successfully joining the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
    }

    // Callback for when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Print debug information
        print("User \(uid) joined after \(elapsed) milliseconds")
    }
    
    // Callback for when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Print debug information
        print("User \(uid) went offline due to \(reason)")
    }
}
`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // Local video view
    var localView: NSView!
    // Remote video view
    var remoteView: NSView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        // Set up views and Agora engine
        setupViews()
        initializeAgoraEngine()
        startPreview()
        joinChannel()
    }

    override func viewDidLayout() {
        super.viewDidLayout()
        // Set up local and remote view frames
        layoutVideoViews()
    }

    // Set up video views
    func setupViews() {
        // Initialize remote video view
        remoteView = NSView()
        self.view.addSubview(remoteView)

        // Initialize local video view
        localView = NSView()
        self.view.addSubview(localView)
    }

    // Layout the video views
    func layoutVideoViews() {
        let localViewWidth: CGFloat = 135
        let localViewHeight: CGFloat = 240
        let localViewX: CGFloat = 2
        let localViewY: CGFloat = 2

        // Set local view position and size
        localView.frame = CGRect(x: localViewX, y: localViewY, width: localViewWidth, height: localViewHeight)

        // Set remote view to fill the entire window
        remoteView.frame = view.bounds
    }

    // Initialize the Agora engine
    func initializeAgoraEngine() {
        // Replace <#Your App ID#> with your Agora App ID
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
    }

    deinit {
        // Clean up Agora engine resources
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Start local video preview
    func startPreview() {
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming use-case, set the channel profile to liveBroadcasting
        option.channelProfile = .liveBroadcasting
        // Set the user role to broadcaster; if you want to set the user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Set the audience latency level
        option.audienceLatencyLevel = .ultraLowLatency
        // Publish the microphone audio 
        options.publishMicrophoneTrack = true
        // Publish the camera video 
        options.publishCameraTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Automatically subscribe to all video streams
        options.autoSubscribeVideo = true
        // Use a temporary token to join the channel, pass in your project's token and channel name
        // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }
}

extension ViewController: AgoraRtcEngineDelegate {

    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Print debug information
        print("User \(uid) joined after \(elapsed) milliseconds")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Print debug information
        print("User \(uid) went offline due to \(reason)")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="broadcast-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // Local video view
    var localView: NSView!
    // Remote video view
    var remoteView: NSView!
    // Agora engine instance
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        // Set up views and Agora engine
        setupViews()
        initializeAgoraEngine()
        startPreview()
        joinChannel()
    }

    override func viewDidLayout() {
        super.viewDidLayout()
        // Set up local and remote view frames
        layoutVideoViews()
    }

    // Set up video views
    func setupViews() {
        // Initialize remote video view
        remoteView = NSView()
        self.view.addSubview(remoteView)

        // Initialize local video view
        localView = NSView()
        self.view.addSubview(localView)
    }

    // Layout the video views
    func layoutVideoViews() {
        let localViewWidth: CGFloat = 135
        let localViewHeight: CGFloat = 240
        let localViewX: CGFloat = 2
        let localViewY: CGFloat = 2

        // Set local view position and size
        localView.frame = CGRect(x: localViewX, y: localViewY, width: localViewWidth, height: localViewHeight)

        // Set remote view to fill the entire window
        remoteView.frame = view.bounds
    }

    // Initialize the Agora engine
    func initializeAgoraEngine() {
        // Replace <#Your App ID#> with your Agora App ID
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
    }

    deinit {
        // Clean up Agora engine resources
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Start local video preview
    func startPreview() {
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join a channel with media options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        options.channelProfile = .liveBroadcasting
        options.clientRoleType = .broadcaster
        options.publishMicrophoneTrack = true
        options.publishCameraTrack = true
        options.autoSubscribeAudio = true
        options.autoSubscribeVideo = true
        options.audienceLatencyLevel = .lowLatency

        // Replace placeholders with your Token and Channel Name
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
}

// Agora delegate methods
extension ViewController: AgoraRtcEngineDelegate {

    // Called when the local user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("Joined channel: \(channel), with UID: \(uid)")
    }

    // Called when a remote user joins the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("User \(uid) joined after \(elapsed) ms")

        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Called when a remote user leaves the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("User \(uid) went offline due to \(reason)")

        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="video-calling">

<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // Local video view
    var localView: NSView!
    // Remote video view
    var remoteView: NSView!
    //RTC engine
    var agoraKit: AgoraRtcEngineKit!

   override func viewDidLoad() {
        super.viewDidLoad()
        // Set up views and Agora engine
        setupViews()
        initializeAgoraEngine()
        startPreview()
        joinChannel()
    }

    override func viewDidLayout() {
        super.viewDidLayout()
        // Set up local and remote view frames
        layoutVideoViews()
    }
    
    // Set up video views
    func setupViews() {
        // Initialize remote video view
        remoteView = NSView()
        self.view.addSubview(remoteView)

        // Initialize local video view
        localView = NSView()
        self.view.addSubview(localView)
    }

    // Layout the video views
    func layoutVideoViews() {
        let localViewWidth: CGFloat = 135
        let localViewHeight: CGFloat = 240
        let localViewX: CGFloat = 2
        let localViewY: CGFloat = 2

        // Set local view position and size
        localView.frame = CGRect(x: localViewX, y: localViewY, width: localViewWidth, height: localViewHeight)

        // Set remote view to fill the entire window
        remoteView.frame = view.bounds
    }

    // Initialize the Agora engine
    func initializeAgoraEngine() {
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
    }

    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    func startPreview() {
        // Enable the video module
        agoraKit.enableVideo()
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // Set the channel scene to live broadcast
        options.channelProfile = .liveBroadcasting
        // Set the user role to anchor; if you want to set the user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Publish the audio collected by the microphone
        options.publishMicrophoneTrack = true
        // Publish the video captured by the camera
        options.publishCameraTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Automatically subscribe to all video streams
        options.autoSubscribeVideo = true
        // Use a temporary Token to join the channel, pass in your project's Token and channel name here
        // uid is 0, which means it is randomly generated by the engine; if successful, it triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }

}

extension ViewController: AgoraRtcEngineDelegate {

    //Callback when successfully joining the channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    // Callback when a remote user or anchor joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Print debug information
        print("User \(uid) joined after \(elapsed) milliseconds")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    //Callback when the remote user or anchor leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Print debug information
        print("User \(uid) went offline due to \(reason)")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>
</details>

</PlatformWrapper>

<Admonition type="info" title="Information"> In the `appId`, `token`, and `channelName` fields, enter the app ID and temporary token you obtained from the Console, and the channel name you filled in when generating the temporary token.</Admonition>

### Import <Vg k="COMPANY"/> components

Add the following import to your swift file:

```swift
import AgoraRtcKit
```

### Initialize the engine

To initialize the SDK, call `sharedEngineWithConfig` to create and initialize an instance of `AgoraRtcEngineKit`:

```swift
var agoraKit: AgoraRtcEngineKit!

// Initialize the Agora engine
func initializeAgoraEngine() {
    agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
}
```
<Admonition type="caution" title="Note">
Before initializing the SDK, ensure that the user fully understands and agrees to the relevant privacy policy.
</Admonition>

<ProductWrapper notAllowed="voice-calling">

### Enable the video module

Follow the steps below to enable the video module.

1. To enable the video module, call `enableVideo`.
1. To initialize the local view and set the local video display properties, call `setupLocalVideo`.
1. To enable local video preview, call `startPreview`.

```swift
// Start the local camera preview
func startPreview() {
    // Enable the video module (audio module is enabled by default)
    agoraKit.enableVideo()
    let videoCanvas = AgoraRtcVideoCanvas()
    videoCanvas.view = localView
    videoCanvas.renderMode = .hidden
    agoraKit.setupLocalVideo(videoCanvas)
    agoraKit.startPreview()
}
```

### Join a channel and publish media tracks

To join a channel, and set the user role, call `joinChannelByToken [2/4]`. Fill in the temporary token you obtained from <Vg k="CONSOLE"/>, and the channel name you filled in to generate the token.

<ProductWrapper product="broadcast-streaming">

```swift
// Join the channel with specified options
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    // In a live streaming use-case, set the channel use-case to liveBroadcasting
    options.channelProfile = .liveBroadcasting
    // Set the user role as broadcaster (default is audience)
    options.clientRoleType = .broadcaster
    // Publish audio captured by microphone
    options.publishMicrophoneTrack = true
    // Publish video captured by camera
    options.publishCameraTrack = true
    // Auto subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Auto subscribe to all video streams
    options.autoSubscribeVideo = true
    // Set the audience latency level
    options.audienceLatencyLevel = .lowLatency
    // Use a temporary Token to join the channel
    // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
    // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
    agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
}
```

You can set the latency level after joining a channel by calling the `setClientRole` method with `role` set to `AgoraClientRoleAudience` and `options` set to low latency.

```swift
// Set the user role to audience 
let role = AgoraClientRole.audience
let options = AgoraClientRoleOptions()
// Set the low latency level
options.lowLatency = true

agoraKit.setClientRole(role, options: options)
```

</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">

```swift
// Join the channel with specified options
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    // In a live streaming use-case, set the channel use-case to liveBroadcasting
    options.channelProfile = .liveBroadcasting
    // Set the user role as broadcaster (default is audience)
    options.clientRoleType = .broadcaster
    // Publish audio captured by microphone
    options.publishMicrophoneTrack = true
    // Publish video captured by camera
    options.publishCameraTrack = true
    // Auto subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Auto subscribe to all video streams
    options.autoSubscribeVideo = true
    // Set the audience latency level
    options.audienceLatencyLevel = .ultraLowLatency
    // Use a temporary Token to join the channel
    // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
    // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
    agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
}
```
You can set the latency level after joining a channel by calling the `setClientRole` method with `role` set to `AgoraClientRoleAudience` and `options` set to ultra-low latency.
```swift
// Set the user role to audience 
let role = AgoraClientRole.audience
let options = AgoraClientRoleOptions()
// Set the ultra low latency level
options.ultraLowLatency = true

agoraKit.setClientRole(role, options: options)
```
</ProductWrapper>

<ProductWrapper product="video-calling">

```swift
// Join the channel with specified options
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    // Set the user role as broadcaster (default is audience)
    options.clientRoleType = .broadcaster
    // Publish audio captured by microphone
    options.publishMicrophoneTrack = true
    // Publish video captured by camera
    options.publishCameraTrack = true
    // Auto subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Auto subscribe to all video streams
    options.autoSubscribeVideo = true
    // Use a temporary Token to join the channel
    // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
    // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
    agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
}
```
</ProductWrapper>

### Display the remote video
To initialize the remote user view, call `setupRemoteVideo` and set the local display properties for the remote user. Use the `didJoinedOfUid` callback to get the UID of the remote user.

```swift
// Function to set up or clear the remote video canvas
func setupRemoteVideoCanvas(for uid: UInt, view: UIView?) {
    let videoCanvas = AgoraRtcVideoCanvas()
    videoCanvas.uid = uid
    videoCanvas.view = view
    videoCanvas.renderMode = .hidden
    agoraKit.setupRemoteVideo(videoCanvas)
}
```

### Implement Common Callbacks

Define necessary callbacks based on the use-case. The following sample code demonstrates how to implement the `didJoinChannel`, `didOfflineOfUid`, and `didJoinedOfUid` callbacks:

```swift
extension ViewController: AgoraRtcEngineDelegate {
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        print("Remote user joined with uid: \(uid)")
        // Set up the remote video canvas with the remote view
        setupRemoteVideoCanvas(for: uid, view: remoteView)
    }

    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        print("Remote user left with uid: \(uid)")
        // Clear the remote video canvas by setting the view to nil
        setupRemoteVideoCanvas(for: uid, view: nil)
    }
}
```

To learn about the other SDK events, see <Link to="{{Global.API_REF_IOS_ROOT_RTC_ENGINE_KIT}}/agorartcenginedelegate">`AgoraRtcEngineDelegate`</Link>.

</ProductWrapper>
<ProductWrapper product="voice-calling">

### Join the channel

To join the channel, call `joinChannelByToken`. Provide the temporary token obtained from the console and the channel name used when acquiring the token. Additionally, set the user role before joining the channel:

```swift
func joinChannel() {
    let options = AgoraRtcChannelMediaOptions()
    options.channelProfile = .communication
    // Set user role to broadcaster; to set user role to audience, keep the default value
    options.clientRoleType = .broadcaster
    // Publish microphone audio 
    options.publishMicrophoneTrack = true
    // Automatically subscribe to all audio streams
    options.autoSubscribeAudio = true
    // Join the channel using a temporary token and channel name
    // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
    agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
}
```

### Implement Common Callbacks

Define necessary callbacks based on the use-case. The following sample code demonstrates how to implement the `didJoinChannel`, `didJoinedOfUid`, and `didOfflineOfUid` callbacks:

```swift
extension ViewController: AgoraRtcEngineDelegate {
    // Callback when the local user successfully joins a channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int
    ) {
        print("didJoinChannel: (channel), uid: (uid)")
    }
    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int){
        // Print debug information
        print("User (uid) joined after (elapsed) milliseconds")
    }
    // Callback when a remote user leaves the current channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason
    ) {
    }
}
```
</ProductWrapper>

### Start and stop <Vpd k="PRODUCT"/>

When the user launches this app, it joins the channel and starts <Vpd k="PRODUCT"/>. When the user closes this app, it leaves the channel and ends <Vpd k="PRODUCT"/>. To implement this logic:

1. Call these methods you start the <Vpl k="CLIENT"/>:
    <ProductWrapper product="voice-calling">
    ```swift
    // Initialize the Agora engine
    initializeAgoraEngine()
    // Join the channel
    joinChannel()
    ```
    </ProductWrapper>
    <ProductWrapper notAllowed="voice-calling">
    ```swift
    // Initialize the Agora engine
    initializeAgoraEngine()
    // Start local camera preview
    startPreview()
    // Join the channel
    joinChannel()
    ```
    </ProductWrapper>


1. To release all resources used by SDK, call `leaveChannel` and `destroy` when the app is closed.
    <ProductWrapper product="voice-calling">
    ```swift
    // Leave the channel and release session-related resources
    agoraKit.leaveChannel(nil)
    // Release all resources used by the Agora SDK
    AgoraRtcEngineKit.destroy()
    ```
    </ProductWrapper>

    <ProductWrapper notAllowed="voice-calling">
    ```swift
    // Stop local video preview
    agoraKit.stopPreview()
    // Leave the channel and release session-related resources
    agoraKit.leaveChannel(nil)
    // Release all resources used by the Agora SDK
    AgoraRtcEngineKit.destroy()
    ```
    </ProductWrapper>

<Admonition type="caution" title="caution">After destroying the engine, you can no longer use SDK methods and callbacks. To use the real-time interaction functions again, create a new engine. See [Initialize the engine](#initialize-the-engine) for details.</Admonition>
    