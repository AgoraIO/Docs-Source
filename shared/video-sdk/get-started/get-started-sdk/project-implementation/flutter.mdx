import CodeBlock from '@theme/CodeBlock';

<PlatformWrapper platform = "flutter">
The following figure illustrates the essential steps:
<ProductWrapper notAllowed="voice-calling">
![](/images/video-sdk/quick-start-sequence.svg)
</ProductWrapper>
<ProductWrapper product="voice-calling">
![](/images/video-sdk/quickstart-voice-call-sequence.svg)
</ProductWrapper>

A complete code sample that implements the basic process of real-time interaction is presented here for your reference. Copy the following code to replace the entire content of the `/lib/main.dart` file in your project to quickly experience the basic functions of <Vpd k="NAME" />. 

<details> 
<summary>Complete sample code for <Vpd k="NAME" /></summary>
<ProductWrapper product="voice-calling">
<CodeBlock language="dart" showLineNumbers>
{`import 'dart:async';

import 'package:agora_rtc_engine/agora_rtc_engine.dart';
import 'package:flutter/material.dart';
import 'package:permission_handler/permission_handler.dart';

void main() => runApp(MyApp());

// Fill in the app ID obtained from the Agora console
const appId = "<-- Insert App Id -->";
// Fill in the temporary token generated using Agora console
const token = "<-- Insert Token -->";
// Fill in the channel name
const channel = "<-- Insert Channel Name -->";

// Application class
class MyApp extends StatefulWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  _MyAppState createState() => _MyAppState();
}

// Application state class
class _MyAppState extends State<MyApp> {
  int? _remoteUid;
  bool _localUserJoined = false;
  late RtcEngine _engine;

  @override
  void initState() {
    super.initState();
    initAgora();
  }

  // Initialize 
  Future<void> initAgora() async {
    // Get permission
    await [Permission.microphone].request();

    // Create an RtcEngine instance
    _engine = await createAgoraRtcEngine();

    // Initialize RtcEngine and set the channel profile 
    await _engine.initialize(const RtcEngineContext(
      appId: appId,
      channelProfile: ChannelProfileType.channelProfileCommunication,
    ));

    // Handle engine events
    _engine.registerEventHandler(
      RtcEngineEventHandler(
        onJoinChannelSuccess: (RtcConnection connection, int elapsed) {
          debugPrint('local user ' + connection.localUid.toString() + ' joined');
          setState(() {
            _localUserJoined = true;
          });
        },
        onUserJoined: (RtcConnection connection, int remoteUid, int elapsed) {
          debugPrint("remote user $remoteUid joined");
          setState(() {
            _remoteUid = remoteUid;
          });
        },
        onUserOffline: (RtcConnection connection, int remoteUid,
            UserOfflineReasonType reason) {
          debugPrint("remote user $remoteUid left channel");
          setState(() {
            _remoteUid = null;
          });
        },
      ),
    );

    // Join the channel and set the user role as the host
    await _engine.joinChannel(
      token: token,
      channelId: channel,
      options: const ChannelMediaOptions(
          clientRoleType: ClientRoleType.clientRoleBroadcaster),
      uid: 0,
    );
  }

  @override
  void dispose() {
    super.dispose();
    _dispose();
  }

  Future<void> _dispose() async {
    await _engine.leaveChannel(); // Leave the channel
    await _engine.release(); // Release resources
  }

  // Build the UI
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Agora Voice Call',
      home: Scaffold(
        appBar: AppBar(
          title: Text('Agora Voice Call'),
        ),
        body: Center(
          child: Text('Have a voice call!'),
        ),
      ),
    );
  }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="video-calling">
<CodeBlock language="dart" showLineNumbers>
{`import 'dart:async';

import 'package:agora_rtc_engine/agora_rtc_engine.dart';
import 'package:flutter/material.dart';
import 'package:permission_handler/permission_handler.dart';

void main() => runApp(MyApp());

// Fill in the app ID obtained from the Agora Console
const appId = "<-- Insert app Id -->";
// Fill in the temporary token generated from Agora Console
const token = "<-- Insert token -->";
// Fill in the channel name you used to generate the token
const channel = "<-- Insert channel name -->";

// Application class
class MyApp extends StatefulWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  _MyAppState createState() => _MyAppState();
}

// Application state class
class _MyAppState extends State<MyApp> {
  int? _remoteUid; // The UID of the remote user
  bool _localUserJoined = false; // Indicates whether the local user has joined the channel
  late RtcEngine _engine; // The RtcEngine instances

  @override
  void initState() {
    super.initState();
    initAgora();
  }

  Future<void> initAgora() async {
    // Get microphone and camera permissions
    await [Permission.microphone, Permission.camera].request();

    // Create RtcEngine instance
    _engine = await createAgoraRtcEngine();

    // Initialize RtcEngine and set the channel profile to live broadcasting
    await _engine.initialize(const RtcEngineContext(
      appId: appId,
      channelProfile: ChannelProfileType.channelProfileCommunication,
    ));

    // Add an event handler
    _engine.registerEventHandler(
      RtcEngineEventHandler(
        // Occurs when the local user joins the channel successfully
        onJoinChannelSuccess: (RtcConnection connection, int elapsed) {
          debugPrint('local user ' + connection.localUid.toString() + ' joined');
          setState(() {
            _localUserJoined = true;
          });
        },
        // Occurs when a remote user join the channel
        onUserJoined: (RtcConnection connection, int remoteUid, int elapsed) {
          debugPrint("remote user $remoteUid joined");
          setState(() {
            _remoteUid = remoteUid;
          });
        },
        // Occurs when a remote user leaves the channel
        onUserOffline: (RtcConnection connection, int remoteUid,
            UserOfflineReasonType reason) {
          debugPrint("remote user $remoteUid left channel");
          setState(() {
            _remoteUid = null;
          });
        },
      ),
    );
    // Enable the video module
    await _engine.enableVideo();
    // Enable local video preview
    await _engine.startPreview();
    // Join a channel
    await _engine.joinChannel(
      token: token,
      channelId: channel,
      options: const ChannelMediaOptions(
          // Set the user role as host
          // To set the user role to audience, change clientRoleBroadcaster to clientRoleAudience
          clientRoleType: ClientRoleType.clientRoleBroadcaster),
      uid: 0,
    );
  }

  @override
  void dispose() {
    super.dispose();
    _dispose();
  }

  Future<void> _dispose() async {
    // Leave the channel
    await _engine.leaveChannel();
    // Release resources
    await _engine.release(); 
  }

  // Build the UI to display local and remote videos
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(
          title: const Text('Agora Video Call'),
        ),
        body: Stack(
          children: [
            Center(
              child: _remoteVideo(),
            ),
            Align(
              alignment: Alignment.topLeft,
              child: SizedBox(
                width: 100,
                height: 150,
                child: Center(
                  child: _localUserJoined
                      ? AgoraVideoView(
                          controller: VideoViewController(
                            rtcEngine: _engine,
                            canvas: const VideoCanvas(uid: 0),
                          ),
                        )
                      : const CircularProgressIndicator(),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  // Widget to display remote video
  Widget _remoteVideo() {
    if (_remoteUid != null) {
      return AgoraVideoView(
        controller: VideoViewController.remote(
          rtcEngine: _engine,
          canvas: VideoCanvas(uid: _remoteUid),
          connection: const RtcConnection(channelId: channel),
        ),
      );
    } else {
      return const Text(
        'Please wait for remote user to join',
        textAlign: TextAlign.center,
      );
    }
  }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">
<CodeBlock language="dart" showLineNumbers>
{`import 'dart:async';

import 'package:agora_rtc_engine/agora_rtc_engine.dart';
import 'package:flutter/material.dart';
import 'package:permission_handler/permission_handler.dart';

void main() => runApp(MyApp());

// Fill in the app ID obtained from the Agora Console
const appId = "<-- Insert app Id -->";
// Fill in the temporary token generated from Agora Console
const token = "<-- Insert token -->";
// Fill in the channel name you used to generate the token
const channel = "<-- Insert channel name -->";

// Application class
class MyApp extends StatefulWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  _MyAppState createState() => _MyAppState();
}

// Application state class
class _MyAppState extends State<MyApp> {
  int? _remoteUid; // The UID of the remote user
  bool _localUserJoined = false; // Indicates whether the local user has joined the channel
  late RtcEngine _engine; // The RtcEngine instances

  @override
  void initState() {
    super.initState();
    initAgora();
  }

  Future<void> initAgora() async {
    // Get microphone and camera permissions
    await [Permission.microphone, Permission.camera].request();

    // Create RtcEngine instance
    _engine = await createAgoraRtcEngine();

    // Initialize RtcEngine and set the channel profile to live broadcasting
    await _engine.initialize(const RtcEngineContext(
      appId: appId,
      channelProfile: ChannelProfileType.channelProfileCommunication,
    ));

    // Add an event handler
    _engine.registerEventHandler(
      RtcEngineEventHandler(
        // Occurs when the local user joins the channel successfully
        onJoinChannelSuccess: (RtcConnection connection, int elapsed) {
          debugPrint('local user ' + connection.localUid.toString() + ' joined');
          setState(() {
            _localUserJoined = true;
          });
        },
        // Occurs when a remote user join the channel
        onUserJoined: (RtcConnection connection, int remoteUid, int elapsed) {
          debugPrint("remote user $remoteUid joined");
          setState(() {
            _remoteUid = remoteUid;
          });
        },
        // Occurs when a remote user leaves the channel
        onUserOffline: (RtcConnection connection, int remoteUid,
            UserOfflineReasonType reason) {
          debugPrint("remote user $remoteUid left channel");
          setState(() {
            _remoteUid = null;
          });
        },
      ),
    );
    // Enable the video module
    await _engine.enableVideo();
    // Enable local video preview
    await _engine.startPreview();
    // Join a channel
    await _engine.joinChannel(
      token: token,
      channelId: channel,
      options: const ChannelMediaOptions(
          // Set the user role as host
          // To set the user role to audience, change clientRoleBroadcaster to clientRoleAudience
          clientRoleType: ClientRoleType.clientRoleBroadcaster,
          audienceLatencyLevel: AudienceLatencyLevelType.audienceLatencyLevelUltraLowLatency),
      uid: 0,
    );
  }

  @override
  void dispose() {
    super.dispose();
    _dispose();
  }

  Future<void> _dispose() async {
    // Leave the channel
    await _engine.leaveChannel();
    // Release resources
    await _engine.release(); 
  }

  // Build the UI to display local and remote videos
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(
          title: const Text('Agora Video Call'),
        ),
        body: Stack(
          children: [
            Center(
              child: _remoteVideo(),
            ),
            Align(
              alignment: Alignment.topLeft,
              child: SizedBox(
                width: 100,
                height: 150,
                child: Center(
                  child: _localUserJoined
                      ? AgoraVideoView(
                          controller: VideoViewController(
                            rtcEngine: _engine,
                            canvas: const VideoCanvas(uid: 0),
                          ),
                        )
                      : const CircularProgressIndicator(),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  // Widget to display remote video
  Widget _remoteVideo() {
    if (_remoteUid != null) {
      return AgoraVideoView(
        controller: VideoViewController.remote(
          rtcEngine: _engine,
          canvas: VideoCanvas(uid: _remoteUid),
          connection: const RtcConnection(channelId: channel),
        ),
      );
    } else {
      return const Text(
        'Please wait for remote user to join',
        textAlign: TextAlign.center,
      );
    }
  }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="broadcast-streaming">
<CodeBlock language="dart" showLineNumbers>
{`import 'dart:async';

import 'package:agora_rtc_engine/agora_rtc_engine.dart';
import 'package:flutter/material.dart';
import 'package:permission_handler/permission_handler.dart';

void main() => runApp(MyApp());

// Fill in the app ID obtained from Agora Console
const appId = "<-- Insert app Id -->";
// Fill in the temporary token generated from Agora Console
const token = "<-- Insert token -->";
// Fill in the channel name you used to generate the token
const channel = "<-- Insert channel name -->";

// Application class
class MyApp extends StatefulWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  _MyAppState createState() => _MyAppState();
}

// Application state class
class _MyAppState extends State<MyApp> {
  int? _remoteUid; // The UID of the remote user
  bool _localUserJoined = false; // Indicates whether the local user has joined the channel
  late RtcEngine _engine; // The RtcEngine instances

  @override
  void initState() {
    super.initState();
    initAgora();
  }

  Future<void> initAgora() async {
    // Get microphone and camera permissions
    await [Permission.microphone, Permission.camera].request();

    // Create RtcEngine instance
    _engine = await createAgoraRtcEngine();

    // Initialize RtcEngine and set the channel profile to live broadcasting
    await _engine.initialize(const RtcEngineContext(
      appId: appId,
      channelProfile: ChannelProfileType.channelProfileCommunication,
    ));

    // Add an event handler
    _engine.registerEventHandler(
      RtcEngineEventHandler(
        // Occurs when the local user joins the channel successfully
        onJoinChannelSuccess: (RtcConnection connection, int elapsed) {
          debugPrint('local user ' + connection.localUid.toString() + ' joined');
          setState(() {
            _localUserJoined = true;
          });
        },
        // Occurs when a remote user join the channel
        onUserJoined: (RtcConnection connection, int remoteUid, int elapsed) {
          debugPrint("remote user $remoteUid joined");
          setState(() {
            _remoteUid = remoteUid;
          });
        },
        // Occurs when a remote user leaves the channel
        onUserOffline: (RtcConnection connection, int remoteUid,
            UserOfflineReasonType reason) {
          debugPrint("remote user $remoteUid left channel");
          setState(() {
            _remoteUid = null;
          });
        },
      ),
    );
    // Enable the video module
    await _engine.enableVideo();
    // Enable local video preview
    await _engine.startPreview();
    // Join a channel
    await _engine.joinChannel(
      token: token,
      channelId: channel,
      options: const ChannelMediaOptions(
          // Set the user role as host
          // To set the user role to audience, change clientRoleBroadcaster to clientRoleAudience
          clientRoleType: ClientRoleType.clientRoleBroadcaster,
          audienceLatencyLevel: AudienceLatencyLevelType.audienceLatencyLevelLowLatency),
      uid: 0,
    );
  }

  @override
  void dispose() {
    super.dispose();
    _dispose();
  }

  Future<void> _dispose() async {
    // Leave the channel
    await _engine.leaveChannel();
    // Release resources
    await _engine.release(); 
  }

  // Build the UI to display local and remote videos
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(
          title: const Text('Agora Video Call'),
        ),
        body: Stack(
          children: [
            Center(
              child: _remoteVideo(),
            ),
            Align(
              alignment: Alignment.topLeft,
              child: SizedBox(
                width: 100,
                height: 150,
                child: Center(
                  child: _localUserJoined
                      ? AgoraVideoView(
                          controller: VideoViewController(
                            rtcEngine: _engine,
                            canvas: const VideoCanvas(uid: 0),
                          ),
                        )
                      : const CircularProgressIndicator(),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  // Widget to display remote video
  Widget _remoteVideo() {
    if (_remoteUid != null) {
      return AgoraVideoView(
        controller: VideoViewController.remote(
          rtcEngine: _engine,
          canvas: VideoCanvas(uid: _remoteUid),
          connection: const RtcConnection(channelId: channel),
        ),
      );
    } else {
      return const Text(
        'Please wait for remote user to join',
        textAlign: TextAlign.center,
      );
    }
  }
}`}
</CodeBlock>
</ProductWrapper>
</details>

<Admonition title="Information" type="info">In the `appId` and `token` fields, enter the corresponding values you obtained from <Vg k="CONSOLE"/>. Use the same `channel` name you filled in when generating the temporary token.</Admonition>

Follow the implementation steps to understand the core API calls in the sample code. 

### Import package​s
Import the packages required to build the App

```dart
import 'dart:async';

import 'package:agora_rtc_engine/agora_rtc_engine.dart';
import 'package:flutter/material.dart';
import 'package:permission_handler/permission_handler.dart';
```

### Declare variables

Pass in the app ID, temporary token obtained from the Agora Console, and the channel name filled in when generating the temporary token, which will be used for subsequent initialization of the engine and joining the channel.

```dart
// Fill in the app ID obtained from Agora Console
const appId = "<-- Insert app Id -->";
// Fill in the temporary token generated from Agora Console
const token = "<-- Insert token -->";
// Fill in the channel name you used to generate the token
const channel = "<-- Insert channel name -->";
```

### Handle permissions​
<ProductWrapper notAllowed="voice-calling">
Get the microphone and camera permissions you need to experience live audio and video.

```dart
await [Permission.microphone, Permission.camera].request();
```

<Admonition type="info" title="Information">
If your target platform is iOS or macOS, add the microphone and camera permission declarations required for real-time interaction in [`Info.plist`](https://help.apple.com/xcode/mac/current/#/dev3f399a2a6).

* Microphone: Set the `key` to `Privacy - Microphone Usage Description` and the `value` to the purpose of use, such as `for an audio call`.
* Camera: Set the `key` to `Privacy - Camera Usage Description` and the `value` to the purpose of use, such as `for a video call`.
</Admonition>

</ProductWrapper>
<ProductWrapper product="voice-calling">
Get the microphone permission you need to experience live audio.

```dart
await [Permission.microphone].request();
```

<Admonition type="info" title="Information">
If your target platform is iOS or macOS, add the microphone permission declaration required for real-time interaction in [`Info.plist`](https://help.apple.com/xcode/mac/current/#/dev3f399a2a6).

* Microphone: Set the `key` to `Privacy - Microphone Usage Description` and the `value` to the purpose of use, such as `for an audio call`.
</Admonition>

</ProductWrapper>

### Initialize the engine
Call `createAgoraRtcEngine` to create an `RtcEngine` instance, then `initialize` the engine and set the channel profile.

<Admonition type="caution" title="Note">
Before initializing the SDK, make sure that the end-user is fully aware of and agrees to the privacy policy.
</Admonition>

<ProductWrapper notAllowed="[voice-calling, video-calling]">
```dart
// Create RtcEngine instance
_engine = await createAgoraRtcEngine();

// Initialize RtcEngine and set the channel profile to live broadcasting
await _engine.initialize(const RtcEngineContext(
    appId: appId,
    channelProfile: ChannelProfileType.channelProfileLiveBroadcasting,
));
```
</ProductWrapper>
<ProductWrapper product="[voice-calling, video-calling]">
```dart
// Create RtcEngine instance
_engine = await createAgoraRtcEngine();

// Initialize RtcEngine and set the channel profile to communication
await _engine.initialize(const RtcEngineContext(
    appId: appId,
    channelProfile: ChannelProfileType.channelProfileCommunication,
));
```
</ProductWrapper>
<ProductWrapper notAllowed="voice-calling">
### Enable the video module​
Follow these steps to enable the video module:

1. Call `enableVideo` to enable the video module.
1. Call `startPreview` to enable local video preview.

```dart
// Enable the video module
await _engine.enableVideo();
// Enable local video preview
await _engine.startPreview();
```
</ProductWrapper>

<ProductWrapper notAllowed="voice-calling">
### Join a channel and publish audio and video streams​
Configure `ChannelMediaOptions` and call `joinChannel` to join a channel. In `ChannelMediaOptions`, set the `clientRoleType` to `clientRoleBroadcaster` to act as a host or `clientRoleAudience` for audience.

Configure `ChannelMediaOptions` and call `joinChannel` to join a channel.
In `ChannelMediaOptions`:
- Set the `clientRoleType` to `clientRoleBroadcaster` to act as a host or `clientRoleAudience` for audience.
- Set `publishMicrophoneTrack` and `publishCameraTrack` to `true` to publish microphone-captured audio and camera-captured video.
- Set `autoSubscribeAudio` and `autoSubscribeVideo` to `true` to automatically subscribe to all audio and video streams.
<ProductWrapper product="broadcast-streaming">
```dart
await _engine.joinChannel(
    // Join a channel using a temporary token and channel name
    token: token,
    channelId: channel,
    options: const ChannelMediaOptions(
        // Set the user role as host
        // To set the user role to audience, change clientRoleBroadcaster to clientRoleAudience
        clientRoleType: ClientRoleType.clientRoleBroadcaster,
        audienceLatencyLevel: AudienceLatencyLevelType.audienceLatencyLevelLowLatency
        ),
    // A uid of 0 means that the username is randomly generated within the engine.
    uid: 0,
);
```
</ProductWrapper>
<ProductWrapper product="interactive-live-streaming">
```dart
await _engine.joinChannel(
    // Join a channel using a temporary token and channel name
    token: token,
    channelId: channel,
    options: const ChannelMediaOptions(
        // Set the user role as host
        // To set the user role to audience, change clientRoleBroadcaster to clientRoleAudience
        clientRoleType: ClientRoleType.clientRoleBroadcaster,
        audienceLatencyLevel: AudienceLatencyLevelType.audienceLatencyLevelUltraLowLatency
        ),
    // A uid of 0 means that the username is randomly generated within the engine.
    uid: 0,
);
```
</ProductWrapper>
<ProductWrapper product="video-calling">
```dart
await _engine.joinChannel(
    // Join a channel using a temporary token and channel name
    token: token,
    channelId: channel,
    options: const ChannelMediaOptions(
        // Set the user role as host
        // To set the user role to audience, change clientRoleBroadcaster to clientRoleAudience
        clientRoleType: ClientRoleType.clientRoleBroadcaster,
        ),
    // A uid of 0 means that the username is randomly generated within the engine.
    uid: 0,
);
```
</ProductWrapper>
</ProductWrapper>
<ProductWrapper product="voice-calling">
### Join a channel and publish the audio stream​
Configure `ChannelMediaOptions` and call `joinChannel` to join a channel.
In `ChannelMediaOptions`:
  - Set the `clientRoleType` to `clientRoleBroadcaster` to act as a host or `clientRoleAudience` for audience.
  - Set `publishMicrophoneTrack` to `true` to publish the audio captured by the microphone.
  - Set `autoSubscribeAudio` to `true` to automatically subscribe to all audio streams.

```dart
await _engine.joinChannel(
    // Join a channel using a temporary token and channel name
    token: token,
    channelId: channel,
    options: const ChannelMediaOptions(
        // Set the user role as host
        // To set the user role to audience, change clientRoleBroadcaster to clientRoleAudience
        clientRoleType: ClientRoleType.clientRoleBroadcaster),
    // A uid of 0 means that the username is randomly generated within the engine.
    uid: 0,
);
```
</ProductWrapper>

### Set up an event handler
Call `registerEventHandler` to add callback events and handle event logic.

```dart
// Add an event handler
_engine.registerEventHandler(
    RtcEngineEventHandler(
    // Occurs when the local user joins the channel successfully
    onJoinChannelSuccess: (RtcConnection connection, int elapsed) {
        debugPrint("local user ${connection.localUid} joined");
        setState(() {
        _localUserJoined = true;
        });
    },
    // Occurs when a remote user join the channel
    onUserJoined: (RtcConnection connection, int remoteUid, int elapsed) {
        debugPrint("remote user $remoteUid joined");
        setState(() {
        _remoteUid = remoteUid;
        });
    },
    // Occurs when a remote user leaves the channel
    onUserOffline: (RtcConnection connection, int remoteUid,
        UserOfflineReasonType reason) {
        debugPrint("remote user $remoteUid left channel");
        setState(() {
        _remoteUid = null;
        });
    },
    ),
);
```
<ProductWrapper notAllowed="voice-calling">
When a remote user joins the channel, the `onUserJoined` callback is triggered. Use the remote user's `uid` returned in the callback, to create an AgoraVideoView control for displaying the video stream from the remote user.

### Set up remote video
Create a widget to display the remote video.

```dart
// Widget to display remote video
Widget _remoteVideo() {
    if (_remoteUid != null) {
        return AgoraVideoView(
        controller: VideoViewController.remote(
            rtcEngine: _engine,
            canvas: VideoCanvas(uid: _remoteUid),
            connection: const RtcConnection(channelId: channel),
        ),
        );
    } else {
        return const Text(
        'Please wait for remote user to join',
        textAlign: TextAlign.center,
        );
    }
}
```
</ProductWrapper>

### Leave the channel and release resources​
When a user closes the <Vpl k="CLIENT"/>, or switches the <Vpl k="CLIENT"/> to the background, follow the steps below to end an audio/video interaction:
1. Call `leaveChannel` to leave the current channel and release all session-related resources. 
1. Call `release` to destroy the engine and release all resources used in the <Vg k="COMPANY"/> SDK.

<Admonition type="danger" title="Warning">
After calling `release`, you will no longer be able to use all methods and callbacks of the SDK. To use real-time audio/video interaction again, you must create a new engine.
</Admonition>

```dart
Future<void> _dispose() async {
  await _engine.leaveChannel(); // Leave the channel
  await _engine.release(); // Release resources
}
```

</PlatformWrapper>