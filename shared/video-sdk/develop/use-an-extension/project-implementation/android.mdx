<PlatformWrapper platform="android">
For demonstration purposes, a simple watermark extension is used to explain the procedure.

The watermark extension adds a watermark on video streamed to your local client. This section shows you how to implement the watermark extension
in your Agora project.

1.  Import necessary classes

    1.  Download the [watermark extension](https://web-cdn.agora.io/docs-files/1630400262363) and follow the steps for `.aar` files in [setup](#Project setup).

    2.  In `app/src/main/java/com.example.<projectname>/MainActivity`:

        1.  Add the following lines to import the Android classes used by the extension:

            ``` java
            import org.json.JSONException;
            import org.json.JSONObject;
            ```

        2.  Add the following lines to import the Agora classes used by the extension:

            ``` java
            // ExtensionManager is used to pass in basic information about the extension
            import io.agora.extension.ExtensionManager;
            import io.agora.rtc2.IMediaExtensionObserver;
            import io.agora.rtc2.RtcEngineConfig;
            ```

2.  Enable and use the extension

    1.  In `app/src/main/java/com.example.<projectname>/MainActivity`, replace the current `initializeAndJoinChannel` function with the following code:

        ``` java
        private void initializeAndJoinChannel() {
            try {
                RtcEngineConfig config = new RtcEngineConfig();
                config.mContext = getBaseContext();
                config.mAppId = appId;
                // Call addExtension to add the extension.
                config.addExtension(ExtensionManager.EXTENSION_NAME);
                // Register IMediaExtensionObserver to receive events from the extension.
                config.mExtensionObserver = new IMediaExtensionObserver() {
                    @Override
                    public void onEvent(String vendor, String extension, String key, String value) {
                        // Add callback handling logics for extension events.
                    }
                };
                config.mEventHandler = mRtcEventHandler;
                mRtcEngine = RtcEngine.create(config);
            } catch (Exception e) {
                throw new RuntimeException("Check the error.");
            }

            // Call enableExtension to enable the extension.
            // To enable multiple extensions, call enableExtension as many times. The sequence of enabling multiple extensions determines the order of these extensions in the transmission pipeline.
            // For example, if you enable extension A before extension B, extension A processes data from the SDK before extension B.
            mRtcEngine.enableExtension(ExtensionManager.EXTENSION_VENDOR_NAME, ExtensionManager.EXTENSION_VIDEO_FILTER_NAME, true);

            mRtcEngine.enableVideo();
            mRtcEngine.startPreview();
            FrameLayout container = findViewById(R.id.local_video_view_container);
            SurfaceView surfaceView = new SurfaceView(getBaseContext());
            container.addView(surfaceView);
            mRtcEngine.setupLocalVideo(new VideoCanvas(surfaceView, VideoCanvas.RENDER_MODE_FIT, 0));

            ChannelMediaOptions options = new ChannelMediaOptions();
            options.clientRoleType = Constants.CLIENT_ROLE_BROADCASTER;
            options.channelProfile = Constants.CHANNEL_PROFILE_LIVE_BROADCASTING;
            options.publishCameraTrack = true;

            mRtcEngine.joinChannel(token, channelName, 0, options);

            JSONObject o = new JSONObject();
            try {
                // Pass in the key-value pairs defined by the extension provider to configure the feature you want to use.
                o.put("plugin.watermark.wmStr", "Agora");
                o.put("plugin.watermark.wmEffectEnabled", true);

                // Call setExtensionProperty to use the watermark feature.
                mRtcEngine.setExtensionProperty(ExtensionManager.EXTENSION_VENDOR_NAME, ExtensionManager.EXTENSION_VIDEO_FILTER_NAME, "key", o.toString());
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
        ```

</PlatformWrapper>
