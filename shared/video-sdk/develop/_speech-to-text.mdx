import * as data from '@site/data/variables';
import Prerequites from '@docs/shared/common/prerequities.mdx';
import ProjectSetup from '@docs/shared/video-sdk/develop/speech-to-text/project-setup/index.mdx';
import ProjectImplement from '@docs/shared/video-sdk/develop/speech-to-text/project-implementation/index.mdx';
import ProjectTest from '@docs/shared/video-sdk/develop/speech-to-text/project-test/index.mdx';
import Reference from '@docs/shared/video-sdk/develop/speech-to-text/reference/index.mdx';


<Vg k="COMPANY" /> provides a speech-to-text service which takes the audio content of a host's media stream and transcribes it into written words in real time. This doc explains how to start and stop speech recognition in an app, then download and present the transcript.

## Understand the tech

Send an HTTP request to the Agora server through your business server to convert speech to text in real time. The speech-to-text service supports two modes:

* Convert speech to text in real time.
* Convert speech to text in real time, store the text in WebVTT format and upload the file to a third-party cloud storage.

In order to use the RESTful API to convert speech to text, you take the following steps:

1. Call the `acquire` method to request a `builderToken` for speech-to-text. A `buildToken` is valid for 5 minutes.
1. Call the `start` method within five minutes after getting the `builderToken` to start the speech-to-text task.
1. After you start a speech-to-text task, call `query` to check its status.
1. Call the `stop` method to stop the speech-to-text task.

The following figure shows the workflow you need to integrate speech to text functionality into your <Vpl k="CLIENT" />.

`<TODO: Add figure here>`

## Prerequisites

In order to follow this procedure you must have:

* Implemented <Link to="../get-started/get-started-sdk">Get Started with <Vpd k="NAME"/></Link>
* Enabled the speech-to-text service for your project. Contact sales@agora.io
* To record and store speech-to-text videos and texts, make sure you have activated a [supported cloud storage service](#supported-third-party-cloud-storage-services). 

<Prerequites />

## Project setup

To create the environment necessary to implement playing media files into your <Vpl k="CLIENT" />, open the project you created in <Link to="../get-started/get-started-sdk">Get Started with <Vpd k="NAME"/></Link>.

<ProjectSetup />

## Add a speech to text to your <Vpl k="CLIENT" />

This section shows how to use the <Vg k="VSDK" /> to implement a speech to text into your <Vpl k="CLIENT" />, step-by-step.

<ProjectImplement />

## Test your implementation

To ensure that you have implemented speech to text features into your <Vpl k="CLIENT" />:

1. [Generate a temporary token](../reference/manage-agora-account#generate-a-temporary-token) in <Vg k="CONSOLE" /> .

2. In your browser, navigate to the <Link target="_blank" to="{{Global.DEMO_BASIC_VIDEO_CALL_URL}}"><Vg k="COMPANY" /> web demo</Link> and update _App ID_, _Channel_, and _Token_ with the values for your temporary token, then click **Join**.

<ProjectTest />


## Reference

This section contains information that completes the information in this page, or points you to documentation that explains other aspects to this product.

### Generate a builderToken

#### HTTP request

```
POST https://api.agora.io/v1/projects/<appId>/rtsc/speech-to-text/builderTokens
```

**Path parameter**
`appId`: (Required) String. The App ID provided by Agora. 

**Request header**
* `Content-Type`: `application/json`
* `Authorization`: The value of this field needs to refer to the authentication instructions.

**Request body**
The following parameters need to be passed in the request body:

| Field | Type | Description |
|:------|:----|:----------------|
|`instanceId`|String|(Required) The instance ID set by the developer. The maximum length is 64 characters. The following character sets are supported:<ul><li>All lowercase English letters (a-z)</li><li>All uppercase English letters (A-Z)</li><li>All numeric characters: 0-9</li><li>"-", "_"</li></ul>One `instanceId` can generate multiple `builderTokens`, but only one `builderToken` can be used to send a request in a task. |

Request body example:
```json
{
    "instanceId": "XXXX"
}
```

#### HTTP response


### Start: Start a speech-to-text task
HTTP request
HTTP response

### Query: Query the status of speech to text
HTTP request
HTTP response

### Stop: Stop speech-to-text
HTTP request
HTTP response

### Supported third-party cloud storage services

The following third-party cloud storage service providers are currently supported:

* [Alibaba Cloud](https://www.alibabacloud.com/product/oss)
* [Amazon S3](https://aws.amazon.com/s3/?nc1=h_ls)
* [Baidu AI Cloud](https://intl.cloud.baidu.com/product/bos.html)
* [Google Cloud](https://cloud.google.com/storage)
* [Huawei Cloud](https://www.huaweicloud.com/intl/en-us/product/obs.html)
* [Kingsoft Cloud](https://en.ksyun.com/nv/product/KS3.html)
* [Microsoft Azure](https://azure.microsoft.com/en-us/services/storage/blobs/)
* [Qiniu Cloud](https://www.qiniu.com/en/products/kodo)
* [Tencent Cloud](https://intl.cloud.tencent.com/product/cos)


<Reference />
