
<PlatformWrapper platform="ios">

```swift
// This method is specifically used by the sample app. If there is a tokenURL, it will attempt to retrieve a token from there.
internal func joinChannel(_ channel: String, uid: UInt? = nil) async -> Int32 {
    let userId = uid ?? DocsAppConfig.shared.uid
    var token = DocsAppConfig.shared.rtcToken
    if !DocsAppConfig.shared.tokenUrl.isEmpty {
        do {
            token = try await self.fetchToken(
                from: DocsAppConfig.shared.tokenUrl, channel: channel,
                role: self.role, userId: userId
            )
        } catch {
            print("token server fetch failed: \(error.localizedDescription)")
        }
    }
    return self.joinChannel(channel, token: token, uid: userId, info: nil)
}

// Joins a channel, starting the connection to a session.
open func joinChannel(
    _ channel: String, token: String? = nil, uid: UInt = 0, info: String? = nil
) async -> Int32 {
    if await !AgoraManager.checkForPermissions() {
        DispatchQueue.main.async {
            self.label = """
            Camera and microphone permissions were not granted.
            Check your security settings and try again.
            """
        }
        return -3
    }

    return self.agoraEngine.joinChannel(
        byToken: token, channelId: channel,
        info: info, uid: uid
    )
}
```

</PlatformWrapper>

<PlatformWrapper platform="macos">
```swift
// This method is specifically used by the sample app. If there is a tokenURL, it will attempt to retrieve a token from there.
open func joinChannel(_ channel: String) async -> Int32 {
    if let rtcToken = DocsAppConfig.shared.rtcToken, !rtcToken.isEmpty {
        return self.joinChannel(
            channel, token: DocsAppConfig.shared.rtcToken,
            uid: DocsAppConfig.shared.uid, info: nil
        )
    }
    var token: String?
    if !DocsAppConfig.shared.tokenUrl.isEmpty {
        do {
            token = try await self.fetchToken(
                from: DocsAppConfig.shared.tokenUrl, channel: channel, role: self.role
            )
        } catch {
            print("token server fetch failed: \(error.localizedDescription)")
        }
    }
    return self.joinChannel(channel, token: token, uid: DocsAppConfig.shared.uid, info: nil)
}
// Joins a channel, starting the connection to a session.
open func joinChannel(
    _ channel: String, token: String? = nil, uid: UInt = 0, info: String? = nil
) -> Int32 {
    self.agoraEngine.joinChannel(byToken: token, channelId: channel, info: info, uid: uid)
}
```
</PlatformWrapper>
<PlatformWrapper platform="unity">
    ```csharp
    public override async void Join()
    {
        if (configData.tokenUrl == "")
        {
            Debug.Log("Specify a valid token server URL inside `config.json` if you wish to fetch token from the server");
        }
        else
        {
            await FetchToken();
        }

        // Join the channel.
        base.Join();
    }
    ```
</PlatformWrapper>

<PlatformWrapper platform="web">
```javascript
const joinWithToken = async (localPlayerContainer, channelParameters) => {
    const token = await fetchToken(config.uid, config.channelName);
    await agoraManager
      .getAgoraEngine()
      .join(config.appId, config.channelName, token, config.uid);
    // Create a local audio track from the audio sampled by a microphone.
    channelParameters.localAudioTrack =
      await AgoraRTC.createMicrophoneAudioTrack();
    // Create a local video track from the video captured by a camera.
    channelParameters.localVideoTrack = await AgoraRTC.createCameraVideoTrack();
    // Append the local video container to the page body.
    document.body.append(localPlayerContainer);
    // Publish the local audio and video tracks in the channel.
    await agoraManager
      .getAgoraEngine()
      .publish([
        channelParameters.localAudioTrack,
        channelParameters.localVideoTrack,
      ]);
    // Play the local video track.
    channelParameters.localVideoTrack.play(localPlayerContainer);
  };
```
</PlatformWrapper>
