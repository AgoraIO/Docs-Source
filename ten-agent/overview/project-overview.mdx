---
title: 'Project overview'
sidebar_position: 4
type: docs
platform_selector: false
description: >
  TEN agent project overview.
---

The <Vpd k="NAME" /> project is built on top of the TEN Framework. For basic concepts of a TEN Framework project, please refer to the [TEN Framework Project Overview](../ten_framework/concept_overview).

Following is the folder structure of TEN Agent project,

```
├── agents/
│   └── ten_packages/
│       ├── extensions/
│       │   ├── openai_chatgpt_python/
│       │   │   ├── extension.py
│       │   │   ├── ..
│       │   │   └── requirements.txt
│       │   ├── elevenlabs_tts
│       │   └── ..
│       └── property.json
├── playground
├── demo
└── server
```

It contains the following important folders and files:

- `property.json`: This file contains the orchestration of extensions. It is the main runtime configuration file.
- `ten_packages/extension`: This folder contains the extension modules. Each extension module is a separate Python/Golang/C++ package.
- `server`: This folder contains the web server code. It is responsible for handling the incoming requests and start/stop of agent processes.
- `playground`: This folder contains the UI code for the playground. It is a web-based interface to interact with the agent.


## Understand `property.json`

This file contains the orchestration of extensions. It is the main runtime configuration file.

```json
  "predefined_graphs": [
    {
      "name": "va_openai_azure_fashionai",
      "auto_start": false,
      "connections": [
        // ...
      ],
      "nodes": [
        // ...
      ]
    },
    // ...
  ]
```

The `property.json` file contains the following orchestration info,

- Graphs
- Nodes
- Connections

### Graphs

The `predefined_graphs` property contains a list of available graphs. Each graph defines how agent should behave in a specific scenario. Each graph has a `name` property which is used to identify a graph.

Each graph contains `nodes` and `connections` properties.

### Nodes

The `nodes` section contains the list of extensions that are part of the graph. Each node has a `name` property which is used to identify a node, and a `addon` property which is used to specify the extension module it will use. You can have multiple nodes of the same extension type in a graph. e.g. you can have multiple `chatgpt_openai_python` extensions with same `addon` property, while each node will have a different `name` property. It's working like multiple instances of the same extension.

#### Node Property

The `property` section of a node contains the configuration of the extension. It is extension specific and available properties are defined in the `manifest.json` file under extension folder. You can use define runtime properties of an extension to customize its behavior. Below is an example of how to configure `chatgpt_openai_python` extension,

```json
{
  "name": "chatgpt_openai_python",
  "addon": "chatgpt_openai_python",
  "property": {
    "api_key": "${env:OPENAI_API_KEY|}",
    "model": "gpt-3.5-turbo",
    "temperature": 0.5,
    "max_tokens": 100,
    "prompt": "You are a helpful assistant"
  }
}
```

{/*
![Property JSON nodes](/assets/png/property_json_connections.png?raw=true)
*/}

#### Read environment variables

It's quite common that an extension will require `api_key` to work. If you don't want to hardcode the `api_key` in the `property.json` file, you can use environment variables. You can use `${env:<env_var_name>|<default_value>}` syntax to read environment variables. Below is an example of how to read `OPENAI_API_KEY` environment variable,

```json
{
  "name": "chatgpt_openai_python",
  "addon": "chatgpt_openai_python",
  "property": {
    "api_key": "${env:OPENAI_API_KEY|}"
  }
}
```

### Connections

The `connections` section contains the list of connections between nodes. Each connection specifies the source and destination nodes respectively. Every connection has an `extension_group` and `extension` property which is used to specify the source node, and it defines a set of multimodal data protocols(audio_frame, video_frame, data, cmd) supported by TEN Framwork. For each data protocols, it has a list of destination definitions, and each destination definition has a `name` property which is the key of the property data, and `dest` property which defines a list of destination nodes. Below is an example of how to connect two nodes,

```json
{
  "extension_group": "default",
  "extension": "agora_rtc",
  "audio_frame": [
    {
      "name": "pcm_frame",
      "dest": [
        {
          "extension_group": "default",
          "extension": "deepgram_asr"
        }
      ]
    }
  ]
}
```

{/*
![Property JSON Connections](/assets/png/property_json_nodes.png?raw=true)
*/}

In the above example, we are connecting `agora_rtc` extension to `deepgram_asr` extension. The `agora_rtc` extension is sending `pcm_frame` data to `deepgram_asr` extension.

## Understand extension folder

The `ten_packages/extension` folder contains the extension modules. Each extension module is a separate Python/Golang/C++ package.

The extension folder name is often the same as the extension module name, while you can also find the extension module name in the `manifest.json` file under the extension folder. The module name shall be used in the `addon` property of the `property.json` file.

Following is a sample structure of the extension folder:

```
<project_root>/
├── ten_packages/
│   └── extension/
│       ├── sample_python_extension/
│       │   ├── ...
│       │   ├── extension.py
│       │   ├── manifest.json
│       │   └── property.json
│       ├── sample_go_extension/
│       │   ├── ...
│       │   ├── <xxx>_extension.go
│       │   ├── manifest.json
│       │   └── property.json
│       └── sample_cpp_extension/
│           ├── ...
│           ├── src/
│           │   ├── main.cc
│           │   └── ...
│           ├── BUILD.gn
│           ├── manifest.json
│           └── property.json
├── manifest.json
└── property.json
```

### Extension Common Files

- manifest.json: This file contains the metadata of the extension. It includes the extension name, version, properties, and apis (data, audio_frame, video_frame).
- property.json: This file contains the default properties of the extension. It is used to define the default configuration of the extension.

### Python Extension

- extension.py: This file contains the main logic of the extension. It usually contains the core implementation of the extension.
- requirements.txt: This file contains the Python dependencies required by the extension. Dependencies specified in this file will be installed automatically when you run `task use`.

### Golang Extension

- `<xxx\>_extension.go`: This file contains the main logic of the extension. It usually contains the core implementation of the extension.
- go.mod: This file contains the Go module definition. It specifies the module name and the dependencies of the extension.

### C++ Extension

- src/main.cc: This file contains the main logic of the extension. It usually contains the core implementation of the extension.
- BUILD.gn: This file contains the build configuration of the extension. It specifies the target name and dependencies of the extension.

## Understand web server

The web server is a simple Golang web server that serves the http requests. It is responsible for handling the incoming requests and starting/stopping agent processes.

The playground/demo UI has been built to interact with the web server. You can also interact with the web server using curl or any other http client.

### Request & Response Examples

The server provides a simple layer for managing agent processes. The API resources are described below.

#### API Resources

- [POST /start](#post-start)
- [POST /stop](#post-stop)
- [POST /ping](#post-ping)

#### POST /start

This api starts an agent with given graph and override properties. The started agent will join into the specified channel, and subscribe to the uid which your browser/device's rtc use to join.

| Param        | Description                                                                                                                                                                                                                                                                                               |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| request_id   | any uuid for tracing purpose                                                                                                                                                                                                                                                                              |
| channel_name | channel name, it needs to be the same with the one your browser/device joins, agent needs to stay with your browser/device in the same channel to communicate                                                                                                                                             |
| user_uid     | the uid which your browser/device's rtc use to join, agent needs to know your rtc uid to subscribe your audio                                                                                                                                                                                             |
| bot_uid      | optional, the uid bot used to join rtc                                                                                                                                                                                                                                                                    |
| graph_name   | the graph to be used when starting agent, will find in property.json                                                                                                                                                                                                                                      |
| properties   | additional properties to override in property.json, the override will not change original property.json, only the one agent used to start                                                                                                                                                                 |
| timeout      | determines how long the agent will remain active without receiving any pings. If the timeout is set to `-1`, the agent will not terminate due to inactivity. By default, the timeout is set to 60 seconds, but this can be adjusted using the `WORKER_QUIT_TIMEOUT_SECONDS` variable in your `.env` file. |

Example:

```bash
curl 'http://localhost:8080/start' \
  -H 'Content-Type: application/json' \
  --data-raw '{
    "request_id": "c1912182-924c-4d15-a8bb-85063343077c",
    "channel_name": "test",
    "user_uid": 176573,
    "graph_name": "camera_va_openai_azure",
    "properties": {
      "openai_chatgpt": {
        "model": "gpt-4o"
      }
    }
  }'
```

#### POST /stop

This api stops the agent you started

| Param        | Description                                       |
| ------------ | ------------------------------------------------- |
| request_id   | any uuid for tracing purpose                      |
| channel_name | channel name, the one you used to start the agent |

Example:

```bash
curl 'http://localhost:8080/stop' \
  -H 'Content-Type: application/json' \
  --data-raw '{
    "request_id": "c1912182-924c-4d15-a8bb-85063343077c",
    "channel_name": "test"
  }'
```

#### POST /ping

This api sends a ping to the server to indicate connection is still alive. This is not needed if you specify `timeout:-1` when starting the agent, otherwise the agent will quit if not receiving ping after timeout in seconds.

| Param        | Description                                       |
| ------------ | ------------------------------------------------- |
| request_id   | any uuid for tracing purpose                      |
| channel_name | channel name, the one you used to start the agent |

Example:

```bash
curl 'http://localhost:8080/ping' \
  -H 'Content-Type: application/json' \
  --data-raw '{
    "request_id": "c1912182-924c-4d15-a8bb-85063343077c",
    "channel_name": "test"
  }'
```