<PlatformWrapper platform="linux-cpp">

<details>
<summary>Complete sample code for watermarks</summary>

```cpp
if (recorderConfig.getWaterMark() != null && !recorderConfig.getWaterMark().isEmpty()) {
  WatermarkConfig[] watermarks = new WatermarkConfig[recorderConfig.getWaterMark().size()];

  for (int i = 0; i < watermarks.length; i++) {
    WatermarkInfo info = recorderConfig.getWaterMark().get(i);
    watermarks[i] = new WatermarkConfig();
    watermarks[i].setIndex(i + 1);

    WatermarkSourceType type = Utils.convertToWatermarkSourceType(info.getType());
    watermarks[i].setType(type);

    if (type == WatermarkSourceType.LITERA) {
      WatermarkLitera litera = new WatermarkLitera();
      litera.setWmLitera(info.getLitera());
      litera.setFontFilePath(info.getFontFilePath());
      litera.setFontSize(info.getFontSize());
      watermarks[i].setLiteraSource(litera);

    } else if (type == WatermarkSourceType.TIMESTAMPS) {
      WatermarkTimestamp timestamp = new WatermarkTimestamp();
      timestamp.setFontFilePath(info.getFontFilePath());
      timestamp.setFontSize(info.getFontSize());
      watermarks[i].setTimestampSource(timestamp);

    } else if (type == WatermarkSourceType.PICTURE) {
      watermarks[i].setImageUrl(info.getImgUrl());
    }

    WatermarkOptions options = new WatermarkOptions();
    options.setMode(Constants.WatermarkFitMode.FIT_MODE_COVER_POSITION);
    options.setZOrder(info.getZorder());

    Rectangle portrait = new Rectangle();
    portrait.setX(info.getX());
    portrait.setY(info.getY());
    portrait.setWidth(info.getWidth());
    portrait.setHeight(info.getHeight());

    Rectangle landscape = new Rectangle();
    landscape.setX(info.getX());
    landscape.setY(info.getY());
    landscape.setWidth(info.getWidth());
    landscape.setHeight(info.getHeight());

    options.setPositionInPortraitMode(portrait);
    options.setPositionInLandscapeMode(landscape);
    watermarks[i].setOptions(options);
  }

  agoraMediaRtcRecorder.enableAndUpdateVideoWatermarks(watermarks);
}
```
</details>

To enable or update a watermark in composite recording mode, call `enableAndUpdateVideoWatermarks` and pass `watermark_configs`. The `watermark_configs` is an array of watermark configuration objects. Each object defines one watermark, including its type, content, position, and appearance. To remove all watermarks, call `disableVideoWatermarks`.

<Admonition type="info" info="info">
In the individual recording mode, use `enableAndUpdateVideoWatermarksByUid` and `disableVideoWatermarksByUid` instead.
</Admonition>

### Add a text watermark

To use a text watermark:

1. Call the `enableAndUpdateVideoWatermarks` method and set the `watermark_configs` parameter.

2. Set the watermark type to `LITERA`:

   ```cpp
   watermarks[i].type = agora::rtc::LITERA;
   ```

3. Configure the text content, font file path, and font size:

    ```cpp
    watermarks[i].literaSource.wmLitera = "Agora watermark example";
    watermarks[i].literaSource.fontFilePath = "path/to/font.ttf"; // Optional: uses default font if not set
    watermarks[i].literaSource.fontSize = 24;
    ```

### Add a timestamp watermark

To use a timestamp watermark:

1. Call the `enableAndUpdateVideoWatermarks` method and set the `watermark_configs` parameter.

2. Set the watermark type to `TIMESTAMPS`:

   ```cpp
   watermarks[i].type = agora::rtc::TIMESTAMPS;
   ```

3. Configure the font file path and font size for the timestamp watermark:

   ```cpp
   watermarks[i].timestampSource.fontFilePath = "path/to/font.ttf"; // Optional: uses default font if not set
   watermarks[i].timestampSource.fontSize = 20;
   ```

### Add an image watermark

To use an image watermark:

1. Call the `enableAndUpdateVideoWatermarks` method and set the `watermark_configs` parameter.

2. Set the watermark type to `PICTURE`:

   ```cpp
   watermarks[i].type = agora::rtc::PICTURE;
   ```

3. Set the path to the image watermark:

   ```cpp
   watermarks[i].imageUrl = "path/to/watermark.png";
   ```

### Position the watermark

You can position watermarks using either fixed pixels or relative ratios, and control how they appear in portrait and landscape modes.

#### Fixed position (pixels)

##### Portrait mode

```cpp
// Set fixed-pixel mode
watermarks[i].options.mode = agora::rtc::FIT_MODE_COVER_POSITION;

// Set the watermark layer index; higher values place the watermark on top
watermarks[i].options.zOrder = 1;

// Set the watermark position in portrait mode
watermarks[i].options.positionInPortraitMode.x = 50;       // Horizontal offset
watermarks[i].options.positionInPortraitMode.y = 50;       // Vertical offset
watermarks[i].options.positionInPortraitMode.width = 200;  // Watermark width
watermarks[i].options.positionInPortraitMode.height = 100; // Watermark height
```

##### Landscape mode

```cpp
// Set fixed-pixel mode
watermarks[i].options.mode = agora::rtc::FIT_MODE_COVER_POSITION;

// Set the watermark layer index; higher values place the watermark on top
watermarks[i].options.zOrder = 1;

// Set the watermark position in landscape mode
watermarks[i].options.positionInLandscapeMode.x = 50;       // Horizontal offset
watermarks[i].options.positionInLandscapeMode.y = 50;       // Vertical offset
watermarks[i].options.positionInLandscapeMode.width = 200;  // Watermark width
watermarks[i].options.positionInLandscapeMode.height = 100; // Watermark height
```

#### Relative position (ratio)

```cpp
// Set relative ratio mode
watermarks[i].options.mode = agora::rtc::FIT_MODE_USE_IMAGE_RATIO;
// Set the watermark z-order; a higher value means a higher layer
watermarks[i].options.zOrder = 1;

// Set the relative position and size of the watermark
watermarks[i].options.watermarkRatio.xRatio = 0.5;      // Horizontal position ratio relative to video width
watermarks[i].options.watermarkRatio.yRatio = 0.5;      // Vertical position ratio relative to video height
watermarks[i].options.watermarkRatio.widthRatio = 0.6;  // Watermark width ratio relative to video width
```

</PlatformWrapper>