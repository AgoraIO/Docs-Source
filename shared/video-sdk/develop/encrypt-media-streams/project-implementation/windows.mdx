<PlatformWrapper platform="windows">

1.  **Add the required variables**

    In `AgoraImplementationDlg.h`, add the following declarations to `CAgoraImplementationDlg` class:

    ```cpp
    // In a production environment, you retrieve the key and salt from
    // an authentication server. For this code example you generate them locally.

    // A 32-byte string for encryption.
    std::string encryptionKey = "";
    // A 32-byte string in Base64 format for encryption.
    std::string encryptionSaltBase64 = "";
    ```

3.  **Add the media stream encryption method**

    To enable media stream encryption in your <Vpl k="CLIENT" />, create an `EncryptionConfig` object and specify a key, salt, and encryption mode. Call `enableEncryption` and pass the `EncryptionConfig` object as a parameter.

    In `AgoraImplementationDlg.cpp`, add the following method before `iOnInitDialog`:

    ```cpp
    public void enableEncryption()
    {
      if(encryptionSaltBase64 == null || encryptionKey == null)
        return;
      // Convert the salt string into bytes
      std::vector<char> bytes(encryptionSaltBase64.begin(), encryptionSaltBase64.end());
      bytes.push_back('\0');
      char *encryptionSalt = &bytes[0];;
      // An object to specify encryption configuration.
      EncryptionConfig config;
      // Specify an encryption mode.
      config.encryptionMode = EncryptionConfig.EncryptionMode.AES_128_GCM2;
      // Set secret key and salt.
      config.encryptionKey = encryptionKey;
      // Call the method to enable media encryption.
      if(agoraEngine.enableEncryption(true, config) == 0)
      {
        Toast.makeText(getApplicationContext(), "Media encryption enabled", Toast.LENGTH_SHORT).show();
      }
    }
    ```

4.  **Start encryption before joining a channel**

    In `/app/java/com.example.<projectname>/MainActivity`, add the following code at the end of `SetupVideoSDKEngine`:

    ``` java
    enableEncryption();
    ```
</PlatformWrapper>
