import Prerequisites from '@docs/shared/real-time-stt/prerequisites.mdx';

<Vg k="COMPANY" /> utilizes Protocol Buffers (protobuf) to serialize transcription data. Developed by Google, Protobuf is a language-neutral, platform-independent mechanism for serializing structured data. It allows for the efficient and consistent handling of data across different platforms by generating source code in multiple programming languages. For more information about Google protocol buffers, see [protobuf.dev](https://protobuf.dev/).

## Prerequisites

To follow this procedure:

<Prerequisites />
- Make sure <Vpd k="NAME"/> is enabled for your app.
- Install the [Protobuf package](https://protobuf.dev/downloads) to generate code classes for displaying transcription text.


## Use Protobuf to parse transcription data

Protobuf enables you to generate source code in your preferred coding language, based on the structure specified in the `.proto` file. <Vg k="COMPANY"/> provides the following Protobuf template for parsing <Vg k="RTT" /> data:

```
syntax = "proto3";

package agora.audio2text;
option java_package = "io.agora.rtc.audio2text";
option java_outer_classname = "Audio2TextProtobuffer";

message Text {
  int32 vendor = 1;
  int32 version = 2;
  int32 seqnum = 3;
  int32 uid = 4;
  int32 flag = 5;
  int64 time = 6;
  int32 lang = 7;
  int32 starttime = 8;
  int32 offtime = 9;
  repeated Word words = 10;
}
message Word {
  string text = 1;
  int32 start_ms = 2;
  int32 duration_ms = 3;
  bool is_final = 4;
  double confidence = 5;
}
```

To parse and display the <Vg k="RTT" /> text in your client:

1. Copy the Protobuf template to a local `.proto` file.

1. In your file, edit the following properties to match your project:

    *	`package` : The source code package namespace.
    *	`option` : The desired language [options](https://protobuf.dev/programming-guides/proto3/#options). 

1. To generate a Protobuf class, run the `protoc` protocol compiler on your `.proto` file to [generate the code]((https://protobuf.dev/programming-guides/proto3/#generating)) that you use to work with the transcription message type. 
    
    Invoke the `protoc` compiler as follows:

    ```
    protoc --proto_path=IMPORT_PATH --cpp_out=DST_DIR --java_out=DST_DIR --python_out=DST_DIR --go_out=DST_DIR --ruby_out=DST_DIR --objc_out=DST_DIR --csharp_out=DST_DIR path/to/file.proto
    ```

    <Vg k="COMPANY"/> also provides Protobuf sample code to parse and display transcription text. To obtain the sample code, contact support@agora.io

1. Use the Protobuf class to read transcription text.

    When transcription text is available, your <Vg k="VSDK" /> app receives the `onStreamMessage` callback. Use the generated Protobuf class in you app to read the byte data returned by the callback. Refer to the `onStreamMessage` callback in the [API reference](/api-reference?platform=all&product=video-calling) for your platform.

## Demo project

Check out the [demo project](https://github.com/AgoraIO-Community/Agora-RTT-Demo/tree/main) on Github.
