---
title: Toolkit event notifications
sidebar_position: 10
platform_selector: false
description: >
  Receive notification of Conversational AI Engine events using the toolkit.
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import Android from '@docs/shared/conversational-ai/receive-notifications/implementation/android.mdx';
import Swift from '@docs/shared/conversational-ai/receive-notifications/implementation/swift.mdx';
import Web from '@docs/shared/conversational-ai/receive-notifications/implementation/web.mdx';

Real-time Conversational AI applications require responsive user interfaces that react to agent events. This page demonstrates how to implement event handling to create dynamic, interactive experiences with conversational agents using the Conversational AI engine toolkit.

## Understand the tech

Agora provides a flexible, scalable, and standardized Conversational AI engine toolkit. The toolkit supports **iOS**, **Android**, and **Web** platforms, and encapsulates scenario-based APIs. You can use these APIs to integrate the capabilities of the Agora Chat SDK and Video SDK to enable the following features:

* [`Interrupt agents`](/conversational-ai/develop/interrupt-agent)
* [`Display live transcripts`](/conversational-ai/develop/transcripts)
* [`Receive event notifications`](/conversational-ai/develop/event-notifications)
* [`Set optimal audio parameters`](/conversational-ai/best-practices/audio-setup) (iOS and Android only)

The component provides a set of callback methods that allow you to listen for various agent-related events and system information:

* **`onAgentStateChanged`** :
  Listen for agent state changes through <Vg k="SIG" /> presence events. Possible states include: `silent`, `listening`, `thinking`, and `speaking`. Use this callback to update the agent UI or track the conversation flow.

* **`onAgentInterrupted`** :
  Listen for agent interruption events through <Vg k="SIG" /> messages. Use this to handle scenarios where the agent is interrupted mid-response.

* **`onAgentMetrics`** :
  Listen for agent performance metrics through <Vg k="SIG" /> messages. Metrics include LLM reasoning delay, TTS synthesis delay, and more. Use this callback to monitor system performance.

* **`onAgentError`** :
  Listen for agent error events through <Vg k="SIG" /> messages. These may include errors in agent modules such as LLM or TTS. Use this callback for error monitoring, logging, and implementing graceful degradation strategies.

## Prerequisites

- Implemented the <Vpd k="NAME" /> [REST quickstart](../get-started/quickstart).
- Your app integrates <Vg k="VSDK" /> v4.5.1 or later and includes the video [quickstart](/video-calling/get-started/get-started-sdk) implementation.
- Enabled <Vg k="SIG" /> in the <Vg k="CONSOLE" /> and completed [Signaling quickstart](/signaling/get-started/sdk-quickstart) for basic messaging.
- You maintain active and authenticated RTC and <Vg k="SIG" /> instances that persist beyond the component's lifecycle. The toolkit does not manage the initialization, lifecycle, or authentication of RTC or <Vg k="SIG" />.

## Implementation

This section describes how to implement Conversational AI engine events using the toolkit.

<Tabs groupId="platform">
<TabItem value="android" label="Android" default>
<Android />
</TabItem>

<TabItem value="swift" label="iOS" default>
<Swift />
</TabItem>

<TabItem value="web" label="Web" default>
<Web />
</TabItem>
</Tabs>

## Reference 

This section contains content that completes the information on this page, or points you to documentation that explains other aspects to this product.

### Sample project

Refer to the following open-source sample code for your reference.

- [`Conversational-AI-Demo`](https://github.com/AgoraIO-Community/Conversational-AI-Demo/)


### Folder structure 

To integrate the client components, only the files and folders listed below are required. You do not need to copy any other files.

<Tabs groupId="platform">
<TabItem value="android" label="Android" default>

* `IConversationalAIAPI.kt`: Defines the API interface, data structures, and enumerations.
* `ConversationalAIAPIImpl.kt`: Contains the main implementation logic of the ConversationalAI API.
* `ConversationalAIUtils.kt`: Provides utility functions and manages event callbacks.
  * `v3/`: Contains the transcript rendering module.
    * `TranscriptionController.kt`: Controls transcript rendering and synchronization.
    * `MessageParser.kt`: Parses transcription and message data.
</TabItem>

<TabItem value="swift" label="iOS" default>

* `ConversationalAIAPI.swift`: Defines the API interface, data structures, and enumerations.
* `ConversationalAIAPIImpl.swift`: Contains the main implementation logic of the ConversationalAI API.
* `Transcription/`
  * `TranscriptionController.swift`: Manages transcript rendering and transcription control.

</TabItem>

<TabItem value="web" label="Web" default>

* `index.ts`: Defines the main API class.
* `type.ts`: Contains API interfaces, data structures, and enumerations.
* `utils/`
  * `index.ts`: Provides general utility functions for the API.
  * `events.ts`: Defines the event management class, which can be extended to support event listening and broadcasting.
  * `sub-render.ts`: Implements the transcript rendering module.

</TabItem>
</Tabs>

### API reference

<Tabs groupId="platform">
<TabItem value="android" label="Android" default>

- [`addHandler`](/conversational-ai/reference/android#addhandler)
- [`subscribeMessage`](/conversational-ai/reference/android#subscribemessage)
- [`unsubscribeMessage`](/conversational-ai/reference/android#unsubscribemessage)
- [`destroy`](/conversational-ai/reference/android#destroy)
- [`onAgentStateChanged`](/conversational-ai/reference/android#onagentstatechanged)
- [`onAgentInterrupted`](/conversational-ai/reference/android#onagentinterrupted)
- [`onAgentMetrics`](/conversational-ai/reference/android#onagentmetrics)
- [`onAgentError`](/conversational-ai/reference/android#onagenterror)
</TabItem>

<TabItem value="swift" label="iOS" default>

- [`addHandler`](/conversational-ai/reference/ios#addhandler)
- [`subscribeMessage`](/conversational-ai/reference/ios#subscribemessage)
- [`unsubscribeMessage`](/conversational-ai/reference/ios#unsubscribemessage)
- [`destroy`](/conversational-ai/reference/ios#destroy)
- [`onAgentStateChanged`](/conversational-ai/reference/ios#onagentstatechanged)
- [`onAgentInterrupted`](/conversational-ai/reference/ios#onagentinterrupted)
- [`onAgentMetrics`](/conversational-ai/reference/ios#onagentmetrics)
- [`onAgentError`](/conversational-ai/reference/ios#onagenterror)
</TabItem>

<TabItem value="web" label="Web" default>

- [`IConversationalAIAPIEventHandler`](/conversational-ai/reference/web#iconversationalaiapieventhandlers-interface)
- [`EConversationalAIAPIEvents`](/conversational-ai/reference/web#econversationalaiapievents)
- [`subscribeMessage`](/conversational-ai/reference/web#subscribemessage)
- [`unsubscribeMessage`](/conversational-ai/reference/web#unsubscribe)
- [`destroy`](/conversational-ai/reference/web#destroy)
</TabItem>
</Tabs>