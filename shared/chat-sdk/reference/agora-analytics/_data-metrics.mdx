import * as data from '@site/data/variables';

This page explains Chat-related metrics.

## Scale metrics

### Total registered users

The accumulated number of registered users under this project as of the current time. This number could decline if some UIDs are deleted.

### Daily new users

The number of newly registered users under this project today (00:00 – current time).

### Daily active users (DAU)

The number of users who log in or send or receive messages today (00:00 – current time).  A user connected through multiple devices is regarded as one active user.

### Monthly Max. DAU

The highest number of DAU from 00:00 on the first day of this month to the current time.

### Total <Vg k="CHAT_GROUP_LOWER"/>s

The number of created <Vg k="CHAT_GROUP_LOWER"/>s under this project as of the current time (disbanded <Vg k="CHAT_GROUP_LOWER"/>s are excluded).

### Daily new <Vg k="CHAT_GROUP_LOWER"/>s

The number of newly created <Vg k="CHAT_GROUP_LOWER"/>s under this project today (00:00 – current time).

### Daily disbanded <Vg k="CHAT_GROUP_LOWER"/>s

The number of disbanded <Vg k="CHAT_GROUP_LOWER"/>s under this project today (00:00 – current time).

### Daily active <Vg k="CHAT_GROUP_LOWER"/>s

The number of <Vg k="CHAT_GROUP_LOWER"/>s that send uplink messages or receive downlink messages today (00:00 – current time).

### Total <Vg k="CHAT_ROOM_LOWER"/>s

The number of created <Vg k="CHAT_ROOM_LOWER"/>s under this project as of the current time (disbanded <Vg k="CHAT_ROOM_LOWER"/>s are excluded).

### Daily new <Vg k="CHAT_ROOM_LOWER"/>s

The number of newly created <Vg k="CHAT_ROOM_LOWER"/>s under this project today (00:00 – current time).

### Daily disbanded <Vg k="CHAT_ROOM_LOWER"/>s

The number of disbanded <Vg k="CHAT_ROOM_LOWER"/>s under this project today (00:00 – current time).

### Daily active <Vg k="CHAT_ROOM_LOWER"/>s

The number of <Vg k="CHAT_ROOM_LOWER"/>s that send uplink messages or receive downlink messages today (00:00 – current time).

### Daily <Vg k="CHAT_ROOM_LOWER"/> PCU

The highest number of users connected to servers at the same time in <Vg k="CHAT_ROOM_LOWER"/>s under this project today (00:00 - current time). Note that the displayed data has a 10-minute delay.

## Message count metrics

The following metrics apply to <Vg k="CHAT_ONE_LOWER"/>s, <Vg k="CHAT_GROUP_LOWER"/>s, and <Vg k="CHAT_ROOM_LOWER"/>s, as well as all message types.

### Total dispatched messages

The number of messages dispatched by the Chat server as of yesterday.

### Total uplink messages

The number of messages sent from clients to the Chat server as of yesterday.

### Total downlink messages

The number of messages sent from the Chat server to online users as of yesterday.

### Total offline messages

The number of messages sent from the Chat server to offline users as of yesterday.

## End-user API metrics

### Metric type

| Metric type | Description |
| :--------- | :----------------------------------------------- |
| Manual login | Users log in through a password or token. |
| Automatic login | Users log in automatically (TODO). |
| Message sending | Users send messages. |
| Friends management | User operations such as adding or removing friends from their contacts. |
| User management | User operations such as creating and updating a profile. |
| <Vg k="CHAT_GROUP"/> management | User operations such as creating and deleting <Vg k="CHAT_GROUP_LOWER"/>s. |
| <Vg k="CHAT_ROOM"/> management | User operations such as creating and deleting <Vg k="CHAT_ROOM_LOWER"/>s. |


### Metric

| Metric | Description |
| :------------------ | :----------------------------------------------------------- |
| Request attempts | The total number of attempts to call the client SDK APIs. |
| 1s/3s/5s request success rate | The number of successful calls of the client SDK API in 1s/3s/5s divided by the total number of effective call attempts <sup>①</sup>. |
| Average request delay | The sum of delay of client SDK API calls divided by the total number of successful calls. |

① The total number of effective call attempts does not include invalid call attempts. A call attempt is considered as invalid if one of the following requirements is met:
- The username or password is empty or incorrect.
- The username is illegal.
- The password is invalid.
- Ths user cannot perform the operation without an admin permission.
- The user does not exist.
- The <Vg k="CHAT_GROUP_LOWER"/> does not exist.
- The user is not found in the <Vg k="CHAT_GROUP_LOWER"/>.

## Server API metrics

### Metric type

| Metric type | Description |
| :----------- | :----------------------------------------------------------- |
| Token generation | Retrieving a token that has the privilege of an administrator through the RESTful API. |
| User system registration | User registration and retrieving, modifying, and deleting user information through the RESTful API. |
| File upload / download | Uploading and downloading audio, image, and other files through the RESTful API. |
| Message sending | Sending a message through the RESTful API. |
| <Vg k="CHAT_GROUP"/> management | Functions such as creating and deleting <Vg k="CHAT_GROUP_LOWER"/>s through the RESTful API. |
| <Vg k="CHAT_ROOM"/> management | Functions such as creating and deleting <Vg k="CHAT_ROOM_LOWER"/>s through the RESTful API. |
| User attributes | Functions such as setting and deleting user attributes through the RESTful API. |

### Metric

| Metric | Description |
| :------------------ | :----------------------------------------------------------- |
| Request attempts | The total number of attempts to make RESTful API requests. |
| 1s/3s/5s request success rate | The number of successful RESTful API requests in 1s/3s/5s divided by the total number of RESTful API  request attempts. |
| Average request delay | The sum of delay of all RESTful API requests divided by the total number of successful RESTful API requests. |