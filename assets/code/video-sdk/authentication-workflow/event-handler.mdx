<PlatformWrapper platform="unity">
```csharp
internal class AuthenticationWorkflowEventHandler : UserEventHandler
{
    private AuthenticationWorkflowManager authenticationWorkflowManager;

    internal AuthenticationWorkflowEventHandler(AuthenticationWorkflowManager refAuthenticationWorkflow) : base(refAuthenticationWorkflow)
    {
        authenticationWorkflowManager =
         refAuthenticationWorkflow;
    }

    public override async void OnTokenPrivilegeWillExpire(RtcConnection connection, string token)
    {
        Debug.Log("Token Expired");
        // Retrieve a fresh token from the token server.
        await authenticationWorkflowManager.FetchToken();
        authenticationWorkflowManager.RenewToken();
    }

    public override async void OnClientRoleChanged(RtcConnection connection, CLIENT_ROLE_TYPE oldRole, CLIENT_ROLE_TYPE newRole, ClientRoleOptions newRoleOptions)
    {
        // Retrieve a fresh token from the token server for the new role.
        Debug.Log("Role is set to " + newRole.ToString());
        await authenticationWorkflowManager.FetchToken();
        authenticationWorkflowManager.RenewToken();
    }
}
```
-   <Link target="_blank" to="{{global.API_REF_UNITY_ROOT}}/class_irtcengineeventhandler.html#callback_irtcengineeventhandler_onproxyconnected">OnTokenPrivilegeWillExpire</Link>
-   <Link target="_blank" to="{{global.API_REF_UNITY_ROOT}}/class_irtcengineeventhandler.html#callback_irtcengineeventhandler_onclientrolechanged">OnClientRoleChanged</Link>

</PlatformWrapper>
<PlatformWrapper platform="web">
```javascript
    // The following code is solely related to UI implementation and not Agora-specific code
    window.onload = async () => {
    // Set the project selector
    setupProjectSelector();

    const handleVSDKEvents = (eventName, ...args) => {
        switch (eventName) {
        case "user-published":
            if (args[1] == "video") {
            // Retrieve the remote video track.
            channelParameters.remoteVideoTrack = args[0].videoTrack;
            // Retrieve the remote audio track.
            channelParameters.remoteAudioTrack = args[0].audioTrack;
            // Save the remote user id for reuse.
            channelParameters.remoteUid = args[0].uid.toString();
            // Specify the ID of the DIV container. You can use the uid of the remote user.
            remotePlayerContainer.id = args[0].uid.toString();
            channelParameters.remoteUid = args[0].uid.toString();
            remotePlayerContainer.textContent =
                "Remote user " + args[0].uid.toString();
            // Append the remote container to the page body.
            document.body.append(remotePlayerContainer);
            // Play the remote video track.
            channelParameters.remoteVideoTrack.play(remotePlayerContainer);
            }
            // Subscribe and play the remote audio track If the remote user publishes the audio track only.
            if (args[1] == "audio") {
            // Get the RemoteAudioTrack object in the AgoraRTCRemoteUser object.
            channelParameters.remoteAudioTrack = args[0].audioTrack;
            // Play the remote audio track. No need to pass any DOM element.
            channelParameters.remoteAudioTrack.play();
            }
        }
    };
```
</PlatformWrapper>
