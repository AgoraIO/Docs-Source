<PlatformWrapper platform="web">

In order to make HTTPS calls to a token server and interpret the JSON return parameters, the axios HTTP
  client is integrated into the sample apps.

To retrieve tokens from the token server and use them to authenticate your <Vpl k="CLIENT" /> with <Vg k="MESS" />
  using  <Vpd k="SDK" />:

1.  **Retrieve a token from the server**

    Use a GET request to retrieve an authentication token for a specific channel from the token server.

     ``` javascript
      // Get the config
      const config = signalingManager.config;

      // Fetches the Signaling token
      async function fetchToken(uid) {
        if (config.serverUrl !== "") {
          return new Promise(function (resolve) {
            axios
              .get(
                config.proxyUrl +
                  config.serverUrl +
                  "/rtm/" +
                  uid +
                  "/?expiry=" +
                  config.tokenExpiryTime,
                {
                  headers: {
                    "X-Requested-With": "XMLHttpRequest",
                  },
                }
              )
              .then((response) => {
                resolve(response.data.rtmToken);
              })
              .catch((error) => {
                console.log(error);
              });
          });
        } else {
          return config.token;
        }
      }
    ```

1.  **Fetch a token when the user logs in to Signaling**

    Call `FetchToken` to get a fresh token before joining a channel.

    ``` javascript
    const fetchTokenAndLogin = async (uid) => {
      const token = await fetchToken(uid);
      signalingManager.login(uid, token);
    };
    ```

1.  **Handle the event triggered by <Vg k="AGORA_BACKEND" /> when the token is about to expire**

    A token expires after the `tokenExpiryTime` specified in the call to the token server. If the expiry time
  is not specified the default timeout is 24 hours. The  `onTokenPrivilegeWillExpire` event receives a callback when
  the current token is about to expire so that a fresh token may be retrieved and used.

    ``` javascript
    // When token-privilege-will-expire occurs, fetch a new token from the server and call renewToken to renew the token.
      const handleSignalingEvents = (event, eventArgs) => {
        switch (event) {
          case "TokenPrivilegeWillExpire":
            renewToken(uid);
            break;
        }
      }
    ```

1. **Fetch a token from the authentication server**

    You persist the existing session with a call to `renewToken`.

    ``` javascript
      const renewToken = async (uid) => {
        const token = await fetchToken(uid);
        const result = await signalingManager
          .getSignalingEngine()
          .renewToken(token);
        messageCallback("Token was about to expire so it was renewed...")
      };
    ```

</PlatformWrapper>
