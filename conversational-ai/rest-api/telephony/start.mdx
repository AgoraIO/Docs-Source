---
title: 'Initiate an outbound call'
sidebar_position: 1
type: docs
platform_selector: false
description: >
  Initiate an outbound call to a specified number and create an agent to join the specified RTC channel.
---


import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';


<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="POST"
    endpoint="https://api.agora.io/api/conversational-ai-agent/v2/projects/{appid}/call"
  >

Use this endpoint to initiate an outbound call to the specified number and create an agent that joins the target RTC channel. The agent waits for the callee to answer.

## Request

### Path parameters

<PathParameter name="appid" type="string" required={true}>
  The App ID of the project.
</PathParameter>

### Request body

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="BODY" required={true}>
  <Parameter name="name" type="string" required={true}>
    The name identifier of the call session.
  </Parameter>

  <Parameter name="sip" type="object" required={true}>
    SIP (Session Initiation Protocol) call configuration object.
    
    <Parameter name="to_number" type="string" required={true}>
      Called number (target phone number), in E.164 format.
    </Parameter>
    
    <Parameter name="from_number" type="string" required={true}>
      Caller ID (the number that initiated the call), in E.164 format.
    </Parameter>
    
    <Parameter name="sip_rtc_uid" type="string" required={true}>
      The RTC UID used by the SIP gateway.
    </Parameter>
    
    <Parameter name="sip_rtc_token" type="string" required={true}>
      The RTC token used by the SIP gateway.
    </Parameter>
  </Parameter>

  <Parameter name="pipeline_id" type="string">
    The unique ID of a published project in AI Studio. 
  </Parameter>

  <Parameter name="properties" type="object" required={true}>
    Call attribute configuration. The content of this field varies depending on the invocation method:
    * **Using pipeline ID**: Simply pass in `channel`, `token`, and `agent_rtc_uid`.
    * **Using complete configuration**: Pass in the complete parameters of the [Start a conversational AI agent](/conversational-ai/rest-api/agent/join) `properties`, including all required fields such as `channel`, `token`, `agent_rtc_uid`, `remote_rtc_uids`, `tts`, and `llm`.
    
    <Parameter name="channel" type="string" required={true}>
      RTC channel name.
    </Parameter>
    
    <Parameter name="token" type="string" required={true}>
      RTC Channel Token.
    </Parameter>
    
    <Parameter name="agent_rtc_uid" type="string" required={true}>
      The agent's user ID in the RTC channel.
    </Parameter>
  </Parameter>
</ParameterList>

## Response

- If the returned status code is `200`, the request was successful. The response body contains the result of the request.

  <ParameterList title="OK">
    <Parameter name="agent_id" type="string">
      Unique ID of the agent instance. Use it to query call status, control call flow, and perform other operations.
    </Parameter>
  </ParameterList>

- If the returned status code is not `200`, the request failed. The response body includes the error code and description. Refer to [status codes](/conversational-ai/rest-api/reference#response-status-codes) to understand the possible reasons for failure.
   
  <ParameterList title="Error Response">
    <Parameter name="error_type" type="string">
      The type of error that occurred.
    </Parameter>

    <Parameter name="description" type="string">
      A detailed description of the error.
    </Parameter>
  </ParameterList>

</LeftColumn>

<RightColumn>

<Section title="Authorization">
This endpoint requires [Basic Auth](/conversational-ai/rest-api/restful-authentication).
</Section>

<Section title="Request example (Pipeline ID)">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
    ```bash
    curl --request POST \
      --url https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call \
      --header 'Authorization: Basic <credentials>' \
      --header 'Content-Type: application/json' \
      --data '{
        "name": "customer_service",
        "sip": {
          "to_number": "+19876543210",
          "from_number": "+11234567890",
          "sip_rtc_uid": "100",
          "sip_rtc_token": "<agora_sip_rtc_token>"
        },
        "pipeline_id": "fzufjlweixxxxnlp",
        "properties": {
          "channel": "agora_channel",
          "token": "agora_channel_token",
          "agent_rtc_uid": "111"
        }
      }' 
    ```
    </TabItem>
    <TabItem value="python" label="Python">

    ```python
    import requests

    url = "https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call"

    payload = {
        "name": "customer_service",
        "sip": {
            "to_number": "+19876543210",
            "from_number": "+11234567890",
            "sip_rtc_uid": "100",
            "sip_rtc_token": "<agora_sip_rtc_token>"
        },
        "pipeline_id": "fzufjlweixxxxnlp",
        "properties": {
            "channel": "agora_channel",
            "token": "agora_channel_token",
            "agent_rtc_uid": "111"
        }
    }
    headers = {"Authorization": "Basic <credentials>"}

    response = requests.request("post", url, json=payload, headers=headers)

    print(response.text) 
    ```
    </TabItem>

    <TabItem value="node" label="Node.js">

    ```js
    const url = 'https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call';
    const options = {
      method: 'post',
      headers: {Authorization: 'Basic <credentials>'},
      body: JSON.stringify({
        name: 'customer_service',
        sip: {
          to_number: '+19876543210',
          from_number: '+11234567890',
          sip_rtc_uid: '100',
          sip_rtc_token: '<agora_sip_rtc_token>'
        },
        pipeline_id: 'fzufjlweixxxxnlp',
        properties: {channel: 'agora_channel', token: 'agora_channel_token', agent_rtc_uid: '111'}
      })
    };

    fetch(url, options)
      .then(res => res.json())
      .then(json => console.log(json))
      .catch(err => console.error(err));  
    ```
    </TabItem>
  </Tabs>

</Section>

<Section title="Request example (Full configuration)">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>

    ```bash
    curl --request POST \
      --url https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call \
      --header 'Authorization: Basic <credentials>' \
      --header 'Content-Type: application/json' \
      --data '{
      "name": "customer_service",
      "sip": {
        "to_number": "+19876543210",
        "from_number": "+11234567890",
        "sip_rtc_uid": "100",
        "sip_rtc_token": "<agora_sip_rtc_token>"
      },
      "properties": {
        "channel": "agora_channel",
        "token": "agora_channel_token",
        "agent_rtc_uid": "111",
        "remote_rtc_uids": [
          "1002"
        ],
        "idle_timeout": 120,
        "llm": {
          "url": "https://api.openai.com/v1/chat/completions",
          "api_key": "<your_llm_key>",
          "system_messages": [
            {
              "role": "system",
              "content": "You are a helpful chatbot."
            }
          ],
          "max_history": 32,
          "greeting_message": "Hello, how can I assist you today?",
          "failure_message": "Please hold on a second.",
          "params": {
            "model": "gpt-4o-mini"
          }
        },
        "tts": {
          "vendor": "microsoft",
          "params": {
            "key": "<your_tts_api_key>",
            "region": "eastus",
            "voice_name": "en-US-AndrewMultilingualNeural"
          }
        },
        "asr": {
          "language": "en-US"
        }
      }
    }'    
    ```
    </TabItem>
    <TabItem value="python" label="Python">

    ```python
    import requests

    url = "https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call"

    payload = {
        "name": "customer_service",
        "sip": {
            "to_number": "+19876543210",
            "from_number": "+11234567890",
            "sip_rtc_uid": "100",
            "sip_rtc_token": "<agora_sip_rtc_token>"
        },
        "properties": {
            "channel": "agora_channel",
            "token": "agora_channel_token",
            "agent_rtc_uid": "111",
            "remote_rtc_uids": ["1002"],
            "idle_timeout": 120,
            "llm": {
                "url": "https://api.openai.com/v1/chat/completions",
                "api_key": "<your_llm_key>",
                "system_messages": [
                    {
                        "role": "system",
                        "content": "You are a helpful chatbot."
                    }
                ],
                "max_history": 32,
                "greeting_message": "Hello, how can I assist you today?",
                "failure_message": "Please hold on a second.",
                "params": {
                    "model": "gpt-4o-mini"
                }
            },
            "tts": {
                "vendor": "microsoft",
                "params": {
                    "key": "<your_tts_api_key>",
                    "region": "eastus",
                    "voice_name": "en-US-AndrewMultilingualNeural"
                }
            },
            "asr": {
                "language": "en-US"
            }
        }
    }
    headers = {"Authorization": "Basic <credentials>"}

    response = requests.request("post", url, json=payload, headers=headers)

    print(response.text)    
    ```
    </TabItem>

    <TabItem value="node" label="Node.js">

    ```js
    const url = 'https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/call';
    const options = {
      method: 'post',
      headers: {
        Authorization: 'Basic <credentials>',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        name: 'customer_service',
        sip: {
          to_number: '+19876543210',
          from_number: '+11234567890',
          sip_rtc_uid: '100',
          sip_rtc_token: '<agora_sip_rtc_token>'
        },
        properties: {
          channel: 'agora_channel',
          token: 'agora_channel_token',
          agent_rtc_uid: '111',
          remote_rtc_uids: ['1002'],
          idle_timeout: 120,
          llm: {
            url: "https://api.openai.com/v1/chat/completions",
            api_key: "<your_llm_key>",
            system_messages: [
              {
                role: "system",
                content: "You are a helpful chatbot."
              }
            ],
            max_history: 32,
            greeting_message: "Hello, how can I assist you today?",
            failure_message: "Please hold on a second.",
            params: {
              model: "gpt-4o-mini"
            }
          },
          tts: {
            vendor: "microsoft",
            params: {
              key: "<your_tts_api_key>",
              region: "eastus",
              voice_name: "en-US-AndrewMultilingualNeural"
            }
          },
          asr: {
            language: "en-US"
          }
        }
      })
    };

    fetch(url, options)
      .then(res => res.json())
      .then(json => console.log(json))
      .catch(err => console.error(err));       
    ```
    </TabItem>
  </Tabs>

</Section>

<Section title="Response example">

<Tabs>
<TabItem value="200" label="200">
  ```json
  {
    "agent_id": "A42AK62PExxxxxxxx74LN47MF46E"
  }
  ```
</TabItem>

<TabItem value="Non-200" label="Non-200">
  ```json
  {
    "error_type": "invalid_phone_format",
    "description": "Invalid phone number format (not E.164 format)."
  }
  ```
</TabItem>
</Tabs>

</Section>

</RightColumn>
</RestAPILayout>