import Cpp from './_cpp.mdx';
import Java from './_java.mdx';

This page explains how to set up the environment and integrate the <Vg k="OPREC_SDK" />.

Recording audio and video in a channel using the  <Vg k="OPREC_SDK" /> works by adding a special user to the <Vg k="VSDK" /> channel. This special user captures the audio and video from the channel, transcodes it, and stores it on your Linux server. To achieve this:

- Integrate the <Vg k="OPREC_SDK" /> on your Linux server.
- Ensure that the <Vg k="OPREC_SDK" /> uses the same App ID as the <Vg k="VSDK" /> to join the channel you want to record.

![](\images/on-premise-recording/quickstart.svg)

<Admonition type="info">
Integrate the <Vg k="OPREC_SDK" /> into your Linux server, not your client app. To record audio and video without deploying a Linux server, use <Vg k="COMPANY" /> [<Vg k="CREC" />](/cloud-recording/overview/product-overview).
</Admonition>

## Prerequisites

### Hardware and network requirements

The following table lists the basic requirements for installing the <Vg k="OPREC_SDK" />:

<PlatformWrapper platform="linux-cpp">

| Hardware / Network | Requirements |
|:--- |:--- |
| Server | Physical or virtual |
| System | Ubuntu 14.04+ x64 or CentOS 6.5+ (7.0 recommended) x64 |
| Network | Internet access |
| Internet Bandwidth | The required Internet bandwidth depends on the number of channels being recorded simultaneously. Refer to the following data:<ul><li>When the resolution of the recorded scene is 640 x 360, the required bandwidth use is 500 Kbps.</li><li>To record a channel with two users, you need a bandwidth of 1 Mbps.</li><li>To record 100 channels, you need a bandwidth of 100 Mbps.</li></ul>For detailed bandwidth data, see <Link to= "{{global.OPREC_SDK_API_CPP}}/index.html">Recording API</Link>. |

</PlatformWrapper>

<PlatformWrapper platform="linux-java">

| Hardware / Network | Requirements |
|:--- |:--- |
| Server | Physical or virtual |
| System | Ubuntu 14.04+ x64 or CentOS 6.5+ (7.0 recommended) x64 |
| Network | Internet access |
| Internet bandwidth | The required Internet bandwidth depends on the number of channels being recorded simultaneously. Refer to the following data:<ul><li>When the resolution of the recorded scene is 640 x 360, the required bandwidth use is 500 Kbps.</li><li>To record a channel with two users, you need a bandwidth of 1 Mbps.</li><li>To record 100 channels, you need a bandwidth of 100 Mbps.</li></ul>For detailed bandwidth data, see <Link to= "{{global.OPREC_SDK_API_JAVA}}/index.html">Recording API</Link>. |

</PlatformWrapper>

### Cloud Hosting Configuration

The recording concurrency test results, presented in this section, were conducted on the following cloud hosting configuration:

* AWS: Intel(R) Xeon(R) Platinum 8124M CPU @ 3.00 GHz
* 16 Virtual Core CPU, 32 GB RAM
* Disk I/O: 412 MB/s

Tests were performed under the following conditions:

- Each channel had two users/hosts. The resolution and frame rate of each channel were set to 320 × 240 and 15 fps, respectively.
- The resolution, frame rate, and bitrate of the recorded files in composite recording mode were set to 640 × 480, 15 fps, and 500 Kbps, respectively. The audio bitrate of the recorded files in composite recording mode was set to 48 Kbps.

Test results:

<table>
  <tr>
    <th>Channel Profile</th>
    <th>Recording Mode</th>
    <th>Performance</th>
  </tr>
  <tr>
    <td rowspan="3">Live Broadcast</td>
    <td>Audio + Video<p>Individual recording</p></td>
    <td>When recording 215 channels simultaneously, the CPU usage was about 75%.<p>We recommend recording up to 200 channels simultaneously.</p></td>
  </tr>
  <tr>
    <td>Audio + Video<p>Composite recording</p></td>
    <td>When recording 70 channels simultaneously, the CPU usage was about 75%.<p>We recommend recording up to 60 channels simultaneously.</p></td>
  </tr>
  <tr>
    <td>Audio only<p>Composite recording</p></td>
    <td>When recording 300 channels simultaneously, the CPU usage was about 75%.</td>
  </tr>
  <tr>
    <td rowspan="2">Communication</td>
    <td>Audio + Video<p>Individual recording</p></td>
    <td>When recording 210 channels simultaneously, the CPU usage was about 75%.<p>We recommend recording up to 200 channels simultaneously.</p></td>
  </tr>
  <tr>
    <td>Audio + Video<p>Composite recording</p></td>
    <td>When recording 60 channels simultaneously, the CPU usage was about 75%.</td>
  </tr>
</table>

<Admonition type="caution">
The test results are for reference only. We recommend setting up and testing your cloud hosting based on your specific recording requirements.
</Admonition>

<Cpp />
<Java />

## Next steps

The Agora On-Premise Recording SDK is integrated. Choose either of the following ways to start recording:

- [Record using the command line](record-cmd): Record a call by using the command line with Agora's demo.
- [Record using the API](record-api): Record a call by calling the APIs.

The command line and API methods implement the same recording functions.