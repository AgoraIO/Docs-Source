<PlatformWrapper platform="ios, macos">

Before joining a channel, set up multi-resolution video streaming by calling the `setSimulcastConfig` method and configuring the `simulcastConfig` parameters.

```objc
- (int)setSimulcastConfig:(AgoraSimulcastConfig* _Nonnull)simulcastConfig NS_SWIFT_NAME(setSimulcastConfig(_:));
```

The following snippet shows how `SimulcastConfig` and related classes are defined in the SDK:

```objc
__attribute__((visibility("default"))) @interface AgoraSimulcastConfig: NSObject
// The configuration of each simulcast video stream.
@property (copy, nonatomic, readonly) NSArray<AgoraStreamLayerConfig*>* _Nonnull configs;
// Whether to allow the SDK to dynamically disable simulcast streams when the sender's
// device performance or uplink network conditions are poor.
@property (assign, nonatomic) BOOL publishFallbackEnable;
@end

// The video properties for a simulcast stream.
__attribute__((visibility("default"))) @interface AgoraStreamLayerConfig: NSObject
// The resolution of the video stream.
@property (assign, nonatomic) CGSize dimensions;
// The frame rate of the video stream.
@property (assign, nonatomic) int framerate;
// Whether this stream layer is enabled.
@property (assign, nonatomic) BOOL enable;
@end

// The index of simulcast stream layers.
typedef NS_ENUM(NSInteger, AgoraStreamLayerIndex) {
  AgoraStreamLayer1 = 0,
  AgoraStreamLayer2 = 1,
  AgoraStreamLayer3 = 2,
  AgoraStreamLayer4 = 3,
  AgoraStreamLayer5 = 4,
  AgoraStreamLayer6 = 5,
  AgoraStreamLow = 6,
  AgoraStreamLayerCountMax = 7,
};
```

### Configure parameters

When configuring extended streams, follow these rules:

- Configure the resolution and frame rate of each stream before joining a channel. After joining, you cannot change resolution or frame rate; you can only enable or disable streams using `AgoraStreamLayerConfig.enable`.

- Set the resolution and frame rate of each configuration lower than the source stream, defined in `AgoraVideoEncoderConfiguration`.

- Decrease the resolution and frame rate with each additional layer. For example, `AgoraStreamLayerIndex.layer2` must have a lower resolution and frame rate than `AgoraStreamLayerIndex.layer1`, and so on.

- Enable up to three configurations at the same time, including the small stream.

### Sample code

Set the resolution and frame rate of configurations based on your use case and bandwidth. <Vg k="COMPANY" /> recommends configuring only the layers you need and setting `AgoraStreamLayerConfig.enable = false` for others. The following sample shows how to configure a multi-resolution video stream: 

```swift
private func setupSimulcast() {
    let layer1_index = AgoraStreamLayerIndex.layer1.rawValue
    let layer2_index = AgoraStreamLayerIndex.layer2.rawValue
    let layer3_index = AgoraStreamLayerIndex.layer3.rawValue
    let layer4_index = AgoraStreamLayerIndex.layer4.rawValue

    // Configure layer 1 (high resolution)
    simulcastConfig.configs[layer1_index].dimensions.width = 1280
    simulcastConfig.configs[layer1_index].dimensions.height = 720
    simulcastConfig.configs[layer1_index].framerate = 30
    simulcastConfig.configs[layer1_index].enable = true

    // Configure layer 2 (medium resolution)
    simulcastConfig.configs[layer2_index].dimensions.width = 960
    simulcastConfig.configs[layer2_index].dimensions.height = 540
    simulcastConfig.configs[layer2_index].framerate = 15
    simulcastConfig.configs[layer2_index].enable = true

    // Configure layer 3 (optional, disabled by default)
    simulcastConfig.configs[layer3_index].dimensions.width = 640
    simulcastConfig.configs[layer3_index].dimensions.height = 360
    simulcastConfig.configs[layer3_index].framerate = 15
    simulcastConfig.configs[layer3_index].enable = false

    // Configure layer 4 (low resolution)
    simulcastConfig.configs[layer4_index].dimensions.width = 480
    simulcastConfig.configs[layer4_index].dimensions.height = 270
    simulcastConfig.configs[layer4_index].framerate = 15
    simulcastConfig.configs[layer4_index].enable = true

    // Apply simulcast configuration
    let ret = agoraKit.setSimulcastConfig(simulcastConfig)
    LogUtils.log(message: "setSimulcastConfig: \(ret) ", level: .info)
}
```

### Subscribe to a stream

A remote user subscribes to the desired video quality level by setting the `streamType` parameter in `setRemoteVideoStreamType`. 

```swift
let ret = agoraKit.setRemoteVideoStream(uid, type: .layer1)
LogUtils.log(message: "set remote layer, ret: \(ret) ", level: .info)
```

To update the subscribed video quality level during real-time interaction, you can call `setRemoteVideoStreamType` multiple times.

</PlatformWrapper>
