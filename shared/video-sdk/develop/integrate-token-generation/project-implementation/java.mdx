
### Handle the system logic

1.  **Download the <Vg k="COMPANY" /> tools Git repository**

    To call the token generation methods, you need to add <Vg k="COMPANY" /> token generation code to your project. Clone the [<Vg k="COMPANY" /> IO tools repository](https://github.com/AgoraIO/Tools/tree/master/DynamicKey/AgoraDynamicKey/java/src/main/java) to your development device using the following command:

    ``` bash
    git clone https://github.com/AgoraIO/Tools <your download directory>
    ```

2.  **Add the <Vg k="COMPANY" /> `AgoraDynamicKey` code to your project**

    Copy the folder `Tools/DynamicKey/AgoraDynamicKey/java/src/main/java/io` from the downloaded repository to the root folder of your Java project.

    ``` bash
    cp -r <your download directory>/Tools/DynamicKey/AgoraDynamicKey/java/src/main/java/io <your project folder>
    ```

3.  **Add the encoding library to your project**

    For encoding tokens, <Vg k="COMPANY" /> token builder classes use the Apache Commons Codec library. To add this library to your project, download the [Apache Commons Codec](https://commons.apache.org/proper/commons-codec/download_codec.cgi) binaries and add the `comons-codec-x.xx.jar` file to the `lib` folder of your project. For example:

    ``` bash
     curl -LO https://dlcdn.apache.org//commons/codec/binaries/commons-codec-1.15-bin.tar.gz && ( tar xvf commons-codec-1.15-bin.tar.gz && cp commons-codec-1.15/commons-codec-1.15.jar <your project folder>/lib/ && rm -rf commons-codec*)
    ```

4.  **Import the <Vg k="COMPANY" /> token builder classes into your project**

    Add the following `import` statements at the beginning of the Java source file where you wish to generate the authentication token:

    ``` java
    import io.agora.media.RtcTokenBuilder;
    import io.agora.media.RtcTokenBuilder.Role;
    ```

### Implement token generation

<Vg k="AGORA_BACKEND" /> uses integer user Ids for token generation. To ensure smooth communication, all the users in a channel must use the integer `uid`. You generate a token using `buildTokenWithUid` for an <Vg k="VSDK" /> token based on `uid`

To generate tokens based on user ID, create a new file in your project folder named `App.java` containing the following code:

``` java
public class App {
    static String appId = "Your app Id";
    static String appCertificate = "Your app certificate";
    static String channelName = "Your channel name";
    static int uid = 0; // The integer uid, required for an <Vg k="VSDK" /> token
    static int expirationTimeInSeconds = 3600; // The time after which the token expires

    public static void main(String[] args) throws Exception {
        RtcTokenBuilder tokenBuilder = new RtcTokenBuilder();
        // Calculate the time expiry timestamp
        int timestamp = (int)(System.currentTimeMillis() / 1000 + expirationTimeInSeconds);

        System.out.println("UID token:");
        String result = tokenBuilder.buildTokenWithUid(appId, appCertificate,
                channelName, uid, Role.Role_Publisher, timestamp);
        System.out.println(result);
    }
}
```

