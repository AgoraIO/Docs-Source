---
title: 'Start a conversational AI agent'
sidebar_position: 1
type: docs
platform_selector: false
description: >
  Create and start a Conversational AI agent instance.
---
import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';

<RestAPILayout>
  <LeftColumn
    title="Start a conversational AI agent"
    method="POST"
    endpoint="https://api.agora.io/api/conversational-ai-agent/v2/projects/{appid}/join"
  >

## Authorization 

This endpoint requires [Basic Auth](../rest-api/restful-authentication).

## Path parameters

<PathParameter name="appid" type="string" required={true}>
The App ID of the project
</PathParameter>

## Request

<div class="api-mime-type">APPLICATION/JSON</div>

<ParameterList title="BODY" required={true}>
  <Parameter name="name" type="string" required={true}>
    The unique identifier of the agent. The same identifier cannot be used repeatedly.
  </Parameter>

  <Parameter name="properties" type="object" required={true}>
    Configuration details of the agent.

    <Parameter name="channel" type="string" required={true}>
      The name of the channel to join.
    </Parameter>

    <Parameter name="token" type="string" required={true}>
      The authentication token used by the agent to join the channel.
    </Parameter>

    <Parameter name="agent_rtc_uid" type="string" required={true}>
      The user ID of the agent in the channel. A value of <code>0</code> means that a random UID is generated and assigned. Set the <code>token</code> accordingly.
    </Parameter>

    <Parameter name="remote_rtc_uids" type="array[string]" required={true}>
      The list of user IDs that the agent subscribes to in the channel. Only subscribed users can interact with the agent. <code>"*"</code> means that the agent subscribes to all users in the channel.
    </Parameter>

    <Parameter name="enable_string_uid" type="boolean" defaultValue="false">
      Whether to enable String uid:
      <ul>
        <li>`true`: Both agent and subscriber user IDs use strings.</li>
        <li>`false`: Both agent and subscriber user IDs must be integers.</li>
      </ul>
    </Parameter>

    <Parameter name="idle_timeout" type="integer" defaultValue="30">
      Sets the timeout after all the users specified in <code>remote_rtc_uids</code> are detected to have left the channel. When the timeout value is exceeded, the agent automatically stops and exits the channel. A value of <code>0</code> means that the agent does not exit until it is stopped manually.
    </Parameter>

    <Parameter name="advanced_features" type="object">
      Advanced features configuration.

      <Parameter name="enable_aivad" type="boolean" defaultValue="false">
        Whether to enable the intelligent interruption handling function (AIVAD). This feature is currently available only for English.
      </Parameter>
    </Parameter>

    <Parameter name="asr" type="object">
      Automatic Speech Recognition (ASR) configuration.

      <Parameter name="language" type="string" defaultValue="en-US" possibleValues="en-US,es-ES,ja-JP,ko-KR,ar-AE,hi-IN">
        The language used by users to interact with the agent. The following languages are in Beta: <ul><li>`es-ES`: Spanish - Spain</li><li> `ja-JP`: Japanese</li><li> `ko-KR`: Korean</li><li> `ar-AE`: Arabic - UAE</li><li> `hi-IN`: Hindi - India</li></ul>
      </Parameter>
    </Parameter>
  </Parameter>

  <Parameter name="tts" type="object" required={true}>
    Text-to-speech (TTS) module configuration.

    <Parameter name="vendor" type="string" required={true} possibleValues="microsoft,elevenlabs">
      TTS provider. <ul><li>`microsoft`: Microsoft Azure</li><li> `elevenlabs`: ElevenLabs</li></ul>
    </Parameter>

    <Parameter name="params" type="object" required={true}>
      The configuration parameters for the TTS vendor. See TTS vendor configuration for details.
    </Parameter>
  </Parameter>

  <Parameter name="llm" type="object" required={true}>
    Large language model (LLM) configuration.

    <Parameter name="url" type="string" required={true}>
      The LLM callback address.
    </Parameter>

    <Parameter name="api_key" type="string" defaultValue="">
      The LLM verification API key. The default value is an empty string. Ensure that you enable the API key in a production environment.
    </Parameter>

    <Parameter name="system_messages" type="array[object]">
      A set of predefined information used as input to the LLM, including prompt words and examples.
    </Parameter>

    <Parameter name="params" type="object">
      Additional LLM information transmitted in the message body, such as the <code>model</code> used, and the maximum token limit.
    </Parameter>

    <Parameter name="max_history" type="integer" defaultValue="10">
      The number of short-term memory entries cached in the custom LLM. <code>0</code> means no short-term memory is cached. Users and agents log entries separately.
    </Parameter>

    <Parameter name="input_modalities" type="array[string]" defaultValue='["text"]'>
      LLM input modalities. Supports `["text"]`, `["text", "image"]`.
    </Parameter>

    <Parameter name="output_modalities" type="array[string]" defaultValue='["text"]'>
      LLM output modalities. Supports <code>["audio"]</code>, <code>["text"]</code>, <code>["text", "audio"]</code>.
    </Parameter>

    <Parameter name="greeting_message" type="string">
      Agent greeting. If provided, the first user in the channel is automatically greeted with the message upon joining.
    </Parameter>

    <Parameter name="failure_message" type="string">
      Prompt for agent activation failure. If provided, it is returned through TTS when the custom LLM call fails.
    </Parameter>

    <Parameter name="style" type="string" defaultValue="openai" possibleValues="openai,gemini">
      The request style for chat completion. <br/> <code>openai</code> includes OpenAI compatible APIs.
    </Parameter>
  </Parameter>

  <Parameter name="vad" type="object">
    Voice Activity Detection (VAD) configuration.

    <Parameter name="interrupt_duration_ms" type="number" defaultValue="160">
      The amount of time in milliseconds that the user's voice must exceed the VAD threshold before an interruption is triggered.
    </Parameter>

    <Parameter name="prefix_padding_ms" type="integer" defaultValue="300">
      The extra forward padding time in milliseconds before the processing system starts to process the speech input. This padding helps capture the beginning of the speech.
    </Parameter>

    <Parameter name="silence_duration_ms" type="integer" defaultValue="640">
      The duration of audio silence in milliseconds. If no voice activity is detected during this period, the agent assumes that the user has stopped speaking.
    </Parameter>

    <Parameter name="threshold" type="number" defaultValue="0.5">
      Identification sensitivity determines the level of sound in the audio signal that is considered voice activity. The value range is <code>(0.0, 1.0)</code>. Lower values make it easier for the agent to detect speech, and higher values ignore weak sounds.
    </Parameter>
  </Parameter>
</ParameterList>

  </LeftColumn>

  <RightColumn>

### Request example

```json
curl --request post \
--url https://api.agora.io/api/conversational-ai-agent/v2/projects/:appid/join \
--header 'Authorization: Basic <your_base64_encoded_credentials>' \
--data '
{
    "name": "unique_name",
    "properties": {
        "channel": "channel_name",
        "token": "token",
        "agent_rtc_uid": "friday",
        "remote_rtc_uids": [
            "*"
        ],
        "enable_string_uid": true,
        "idle_timeout": 120,
        "advanced_features": {
            "enable_aivad": true
        },
        "llm": {
            "url": "https://api.openai.com/v1/chat/completions",
            "api_key": "<your_llm_key>",
            "system_messages": [
                {
                    "role": "system",
                    "content": "You are a helpful chatbot."
                }
            ],
            "max_history": 10,
            "greeting_message": "Hello, how can I assist you today?",
            "failure_message": "Please hold on a second.",
            "params": {
                "model": "gpt-4o-mini"
            }
        },
        "tts": {
            "vendor": "microsoft",
            "params": {
                "key": "<your_tts_api_key>",
                "region": "eastus",
                "voice_name": "en-US-AndrewMultilingualNeural"
            }
        },
        "asr": {
            "language": "en-US"
        }
    }
}'
```

### Response example

```json
{
  "agent_id": "1NT29X10YHxxxxxWJOXLYHNYB",
  "create_ts": 1737111452,
  "status": "RUNNING"
}
```

  </RightColumn>
</RestAPILayout>