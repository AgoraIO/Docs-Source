<PlatformWrapper platform="react-native">

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

### Add an event listener

<Vg k="SIG"/> uses an `addEventListener` instance to process messages and event notifications. Each message and event notification has a corresponding event handler, where you implement your own processing logic. Refer to the following code to implement listeners in your <Vpl k="CLIENT"/>:

<CodeBlock language="tsx" showLineNumbers>
{`// Listen to messages received via Signaling channel
engineRef.current.addEventListener('message', (evt) => {
  console.log('[You] received a message:', evt.message);
});

// Listen to Signaling link state changes
engineRef.current.addEventListener('linkState', (eventData) => {
  console.log('Link state event:', eventData);
});

// Listen to channel lock or unlock events
engineRef.current.addEventListener('lock', (eventData) => {
  console.log('[Signaling] Lock event:', eventData);
});

// Listen to updates in shared storage
engineRef.current.addEventListener('storage', (storageData) => {
  console.log('[Signaling] Storage event:', storageData);
});

// Listen to token expiration warnings
engineRef.current.addEventListener('tokenPrivilegeWillExpire', (channelName) => {
  console.log('[Signaling] Token privilege will expire for channel:', channelName);
});

// Listen to topic-related events such as topic creation, update, or deletion
engineRef.current.addEventListener('topic', (topicEvent) => {
  console.log('[Signaling] Topic event:', topicEvent);
});

// Listen to presence events such as user join, leave, or state change
engineRef.current.addEventListener('presence', (presenceData) => {
  console.log('[Signaling] Presence event:', presenceData);
});`}
</CodeBlock>

### Remove event listeners

To avoid performance degradation caused by memory leaks, errors, and exceptions, best practice is to unregister an event handler when you no longer need to use it. 

<CodeBlock language="tsx">
{`engineRef.current.removeAllListeners();`}
</CodeBlock>

The `RtmClient` automatically destroys event listeners when you call `release`.

### Signaling events

<Vpd k="SDK" /> offers the following events:  

| Event Listener            | Description             |
|---------------------------|-------------------------|
| `message`          | Receive message notifications from all the message channels you have subscribed to, or topic message notifications subscribed to from all the stream channels you have joined. The event payload data includes channel name, channel type, topic name, event sender, message payload data type, and other information. |
| `presence`         | Receive online status event notifications from remote users in all message channels you have subscribed to and stream channels you have joined. The event payload data includes channel name, channel type, event type, event sender, user temporary status data, and other information.  |
| `topic`            | Receive notifications of topic change events in all the stream channels you have joined. The event payload data includes information such as channel name, event type, topic name, and event sender. |
| `storage`          | Receive all channel metadata event notifications in all message channels you have subscribed to and stream channels you have joined, as well as user metadata event notifications from all subscribed users. The event payload data includes information such as channel name, channel type, event type, and specific metadata. |
| `lock`             | Receive all lock event notifications in the message channel you have subscribed to and stream channel you have joined. The event payload data contains information such as channel name, channel type, event type, and lock details. |
| `linkState`          | Receive event notifications for client network connection status changes, including the connection status before and after the change, service type, operation type that caused the change, reason for the change, channel list, and other information. |
| `tokenPrivilegeWillExpire`| Receive event notifications that the client token is about to expire.  |

For details on the parameters passed in by each event, refer to [Event listeners](https://agoraio-extensions.github.io/agora-react-native-rtm/interfaces/RTMClientEventMap.html) in the API reference.

</PlatformWrapper>
