import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<PlatformWrapper platform = "android">

<Tabs>
<TabItem value="new" label="Create a new project" default>
1. Create a [new project](https://developer.android.com/studio/projects/create-project).

    1. Open Android Studio and select **File > New > New Project...**.
    1. Select **Phone and Tablet** > **Empty Activity** and click **Next**.
    1. Set the project name and storage path. 
    1. Select **Java** or **Kotlin** as the language, and click **Finish** to create the Android project.
    
    <Admonition type="caution" title="Note">After you create a project, Android Studio automatically starts gradle sync. Ensure that the synchronization is successful before proceeding to the next step. </Admonition>

</TabItem>

<TabItem value="existing" label="Add to an existing project">
 
 1. Add a new activity to your project.

    1. Open your project in Android Studio.
    1. Right-click on the `app/src/main/java/<your.package.name>` folder.
    1. Select **New → Activity → Empty Activity**.
    1. Enter an activity name and click **Finish**. 
        This guide uses `MainActivity` as the activity name in the sample code. Replace it with your activity name where required.
    
</TabItem>
</Tabs>

2. Add a layout file for your activity. 

    <ProductWrapper notAllowed="voice-calling">
    Set up two container elements in your activity to display local and remote video streams. Refer to [Create a user interface](#create-a-user-interface) to get a bare bones sample layout.
    </ProductWrapper>
    <ProductWrapper product="voice-calling">
    Set up a basic layout for your activity. Refer to [Create a user interface](#create-a-user-interface) to get a bare bones sample layout.
    </ProductWrapper>

### Install the SDK

Use either of the following methods to add <Vpd k="SDK"/> to your project.

<Tabs>
  <TabItem value="tab1" label="Maven Central" default>
    1. Open the `settings.gradle` file in the project's root directory and add the Maven Central dependency, if it doesn't already exist:

        ```groovy
        repositories {
           mavenCentral()
        }
        ```
        <Admonition type="info" >
        If your Android project uses <a href="https://docs.gradle.org/current/userguide/declaring_repositories.html#sub:centralized-repository-declaration">dependencyResolutionManagement</a>, the method of adding the Maven Central dependency may differ.
        </Admonition>

    1. To integrate the <Vpd k="SDK" /> into your Android project, add the following to the `dependencies` block in your project module `build.gradle` file:
    
        <ProductWrapper product="voice-calling">

        - Groovy `build.gradle`
    
            <CodeBlock language="json">
            {`implementation 'io.agora.rtc:voice-sdk:x.y.z'`}
            </CodeBlock>

        - Kotlin `build.gradle.kts`
    
            <CodeBlock language="kotlin">
            {`implementation("io.agora.rtc:voice-sdk:x.y.z")`}
            </CodeBlock>        

        </ProductWrapper>

        <ProductWrapper notAllowed="voice-calling">

        - Groovy `build.gradle`
    
            <CodeBlock language="json">
            {`implementation 'io.agora.rtc:full-sdk:x.y.z'`}
            </CodeBlock>

        - Kotlin `build.gradle.kts`
    
            <CodeBlock language="kotlin">
            {`implementation("io.agora.rtc:full-sdk:x.y.z")`}
            </CodeBlock>

        </ProductWrapper>
        
        Replace `x.y.z` with the specific SDK version number, such as `4.5.0`.

        <Admonition type="info">
        To get the latest version number, check the [Release notes](../overview/release-notes). To integrate the Lite SDK, use `io.agora.rtc:lite-sdk` instead.
        </Admonition>

    1. Prevent code obfuscation

        Open the `/app/proguard-rules.pro` file and add the following lines to prevent the <Vpd k="SDK"/> code from being obfuscated:

        <CodeBlock language="java">
        {`-keep class io.agora.** { *; }
       -dontwarn io.agora.**`}
        </CodeBlock>

  </TabItem>
  <TabItem value="tab2" label="Manual integration">
    1. Download the latest version of <Vpd k="SDK"/> from the  the [SDKs](/sdks?platform=android) page and unzip it.

    1. Open the unzipped file and copy the following files or subfolders to your project path.

        | File or folder                | Project path        |
        | :---------------------------- | :----------------------- |
        | `agora-rtc-sdk.jar` file      | `/app/libs/`             |
        | `arm64-v8a` folder            | `/app/src/main/jniLibs/` |
        | `armeabi-v7a` folder          | `/app/src/main/jniLibs/` |
        | `x86` folder                  | `/app/src/main/jniLibs/` |
        | `x86_64` folder               | `/app/src/main/jniLibs/` |
        | `high_level_api` in `include` folder  | `/app/src/main/jniLibs/`  |

    1. Select the file `/app/libs/agora-rtc-sdk.jar` in the left navigation bar of Android Studio project files, right-click, and select **add as a library** from the drop-down menu.

    1. Prevent code obfuscation

        Open the `/app/proguard-rules.pro` file and add the following lines to prevent the <Vpd k="SDK"/> code from being obfuscated:

        <CodeBlock language="java">
        {`-keep class io.agora.** { *; }
       -dontwarn io.agora.**`}
        </CodeBlock>

  </TabItem>
</Tabs>

</PlatformWrapper>
