---
title: Record conversations with Cloud Recording
sidebar_position: 4
platform_selector: false
description: >
   Configure Cloud Recording to record AI agent conversations
---

This guide explains how to configure Agora [Cloud Recording](/cloud-recording/overview/product-overview) to work with conversational AI agents and avoid audio scene conflicts.

## Audio scene conflict

When you use conversational AI agents and Cloud Recording in the same channel, an audio scene conflict can cause a brief audio interruption when recording starts. This happens because the agent's audio scene reverts to default mode when a user joins the channel during Cloud Recording.

To avoid this issue, set the agent's `audio_scenario` parameter to `"chorus"` to ensure stable audio processing with Cloud Recording.

## Configure the agent

Add or modify the `audio_scenario` field in the agent startup parameters:

```json
{
    "properties": {
        "parameters": {
            "audio_scenario": "chorus"  
        }
    }
}
```

## Complete configuration example

The following example shows a complete agent launch request with the optimized configuration:

```json
{
    "name": "TestConvoAgent",
    "properties": {
        "channel": "{{AccessChannel}}",
        "token": "{{token}}",
        "agent_rtc_uid": "0",
        "remote_rtc_uids": [
            "*"
        ],
        "idle_timeout": 30,
        "advanced_features": {
            "enable_bhvs": true
        },
        "llm": {
            "url": "https://api.openai.com/v1/chat/completions",
            "api_key": "<your_llm_api_key>",
            "system_messages": [
                {
                    "role": "system",
                    "content": "You are a helpful chatbot."
                }
            ],
            "greeting_message": "Hello, how can I help you?",
            "failure_message": "Sorry, I don't know how to answer this question.",
            "max_history": 10,
            "params": {
                "model": "gpt-4o-mini"
            }
        },
        "tts": {
            "vendor": "microsoft",
            "params": {
                "key": "<your_tts_api_key>",
                "region": "eastus",
                "voice_name": "en-US-AndrewMultilingualNeural"
            }
        },
        "turn_detection": {
            "silence_duration_ms": 640
        },
        "parameters": {
            "enable_dump": true,
            "enable_error_message": true,
            "audio_scenario": "chorus",
            "enable_delay": true
        }
    }
}
```

## Start Cloud Recording

After starting the agent, start Cloud Recording by calling the [Start Cloud Recording API](/cloud-recording/reference/restful-api#start).

The following example shows a complete Cloud Recording start request body:
```json
{
	"cname":"{{AccessChannel}}",
	"uid":"{{RecordingUID}}",
	"clientRequest":{
		"token":"{{token}}",
		"recordingConfig":{
			"maxIdleTime":120,
			"streamTypes":0,
			"audioProfile":1,
			"channelType":1
		},
        "recordingFileConfig": {
            "avFileType": [
                "hls",
                "mp4"
            ]
        },
		"storageConfig":{
			"vendor":{{Vendor}},
			"region":{{Region}},
			"bucket":"{{Bucket}}",
			"accessKey":"{{AccessKey}}",
			"secretKey":"{{SecretKey}}"
		}	
	}
}
```