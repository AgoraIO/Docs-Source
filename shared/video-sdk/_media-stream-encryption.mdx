import * as data from '@site/data/variables';
import Prerequites from '@docs/shared/common/prerequities.mdx';
import ProjectSetup from '@docs/shared/video-sdk/encrypt-media-streams/project-setup/index.mdx';
import ProjectImplement from '@docs/shared/video-sdk/encrypt-media-streams/project-implementation/index.mdx';
import ProjectTest from '@docs/shared/video-sdk/encrypt-media-streams/project-test/index.mdx';
import Reference from '@docs/shared/video-sdk/encrypt-media-streams/reference/index.mdx';


Media stream encryption ensures that only the users in a channel can see and hear each other. This ensures that potential eavesdroppers cannot access sensitive information and private information shared in a channel. While not every use case requires media stream encryption, <Vpd k="NAME"/> provides built-in encryption methods that guarantee data confidentiality during transmission.

This page shows you how to integrate built-in media stream encryption into your <Vpl k="CLIENT" /> using <Vpd k="NAME"/>.

## Understand the tech

To ensure secure communication, your <Vpl k="CLIENT" /> uses the same SSL [key](https://en.wikipedia.org/wiki/Public_key_certificate) and [salt](https://en.wikipedia.org/wiki/Salt_(cryptography)) to encrypt and decrypt data in the channel. You use the key and salt to create an encryption configuration. <Vg k="AGORA_BACKEND" /> uses the encryption configuration to encrypt a stream and sends it to remote users. When the remote user receives the encrypted media stream, the remote <Vpl k="CLIENT" /> decrypts the media stream using the same salt and key.

The following figure shows the call flow for the media stream encryption:

![Encrypt media stream](/images/video-sdk/media-stream-encryption.svg)

All users in a channel must use the same encryption configuration to initiate `agoraEngine` and enable encryption before joining a channel. If you donâ€™t have the correct configuration, you cannot decrypt channel content. Best practice is that your authentication system generates a new key and salt regularly.

## Prerequisites

To follow this procedure you must have:

-   Implemented [Get started with <Vpd k="NAME"/>](../get-started/get-started-sdk)

-   [OpenSSL](https://www.openssl.org/) latest version


## Project setup

To integrate media stream encryption into your <Vpl k="CLIENT" />, you need to:

-   Open the [Get started with <Vpd k="NAME"/>](../get-started/get-started-sdk) project you created previously.

-   Set up [OpenSSL](https://www.openssl.org/) in your development device.

## Implement <Vg k="COMPANY" /> media stream encryption

To implement media stream encryption, do the following:

<ProjectImplement />

## Test your implementation

To ensure that you have implemented <Vg k="COMPANY" /> media stream encryption in your <Vpl k="CLIENT" />:

1.  **Add the 32-byte key to your <Vpl k="CLIENT" />**

    1.  Run the following command in a terminal window:

        ``` terminal
        openssl rand -hex 32
        ```

    2.  Paste the key returned into the `encryptionKey` variable.

2.  **Add the 64-byte salt to your <Vpl k="CLIENT" />**

    1.  Run the following command in a terminal window:

        ``` terminal
        openssl rand -base64 32
        ```

    2.  Paste the salt returned into the `encryptionSaltBase64` variable.

3.  [Generate a token](../reference/manage-agora-account#generate-a-temporary-token) in <Vg k="CONSOLE" />.

<ProjectTest />

Communication between your test devices is end-to-end encrypted. This prevents data from being read or secretly modified by anyone other than the true sender and recipient.

## Reference

This section contains information that completes the information in this page, or points you to documentation that explains other aspects to this product.

<Reference />
