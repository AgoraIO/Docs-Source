import * as data from '@site/data/variables';
import CloudStorage from '@docs/shared/broadcast-streaming/restful-api/shared/cloud-storage.mdx'
import StatusCode from '@docs/shared/broadcast-streaming/restful-api/shared/http-status-codes.mdx'

<div class="alert note">Custom snapshot and moderation enables you to use third-party cloud storage services, while standard snapshot and moderation does not.</div>

## Set custom snapshot configuration

Sets the custom snapshot configuration for all live streams under an entry point, including the interval of snapshot capturing and whether to enable content moderation.

### HTTP request

```shellscript
PATCH https://api.agora.io/v1/projects/{appid}/fls/entry_points/{entry_point}/settings/snapshot/custom/regions/{region}
```

#### Path parameter

| Parameter | Type | Description |
|:------|:------|:------|
| `appid` | String | Required. The App ID corresponding to the entry point. |
| `entry_point` | String | Required. The entry point name. |
| `region` | String | Required. The configured region when adding the domain. |

#### Request body

The request body is in the JSON Object type, and contains the following fields:

| Field | Type | Description |
|:------|:------|:------|
| `enabled` | Bool | Required. Whether to enable the snapshot capturing function:<li>`true`: Enable snapshot capturing.</li><li>`false`: Disable snapshot capturing.</li> |
| `snapshotInterval` | Integer | Optional. The interval between snapshot capturing, in seconds. The default value is 10, and the value range is [5,300]. |
| `storageConfig` | JSON Object | Optional. For the storage configuration of the snapshot files, see [StorageConfig](#storageconfig). |
| `enableModeration` | Bool | Optional. Whether to enable content moderation:<li>`true`: Enable content moderation.</li><li>`false`: (default) Disable content moderation.</li> |

### HTTP response

If the returned HTTP status code is 200, the request is successful.

If the returned HTTP status code is not 200, the request fails. You can refer to the [HTTP status code](#http-code) for possible reasons.

### Example

**Request line**

```shellscript
PATCH https://api.agora.io/v1/projects/{your_appid}/fls/entry_points/live/settings/snapshot/custom/regions/cn HTTP/1.1
```

**Request body**

```json
{
    "enabled": true,
    "enableModeration": true,
    "snapshotInterval": 30,
    "storageConfig": {
        "accessKey": "{your access key}",
        "bucket": "{your bucket}",
        "region": 3,
        "secretKey": "{your secret key}",
        "vendor": 2
    }
}
```

**Response line**

```shellscript
HTTP/1.1 200 OK
```

## Get custom snapshot configuration

Gets the custom snapshot configuration of an entry point.

### HTTP request

```shellscript
GET https://api.agora.io/v1/projects/{appid}/fls/entry_points/{entry_point}/settings/snapshot/custom/regions/{region}
```

#### Path parameter

| Parameter | Type | Description |
|:------|:------|:------|
| `appid` | String | Required. The App ID corresponding to the entry point. |
| `entry_point` | String | Required. The entry point name. |
| `region` | String | Required. The configured region when adding the domain. |

### HTTP response

If the returned HTTP status code is 200, the request is successful, and the response body contains the following fields:

| Field | Type | Description |
|:------|:------|:------|
| `enabled` | Bool | Whether the snapshot capturing function is enabled:<li>`true`: Snapshot capturing is enabled.</li><li>`false`: Snapshot capturing is disabled.</li> |
| `snapshotInterval` | Integer | The interval between snapshot capturing, in seconds. The default value is 10, and the value range is [5,300]. |
| `storageConfig` | JSON Object | For the storage configuration of the snapshot files, see [StorageConfig](#storageconfig). |
| `enableModeration` | Bool | Whether content moderation is enabled:<li>`true`: Content moderation is enabled.</li><li>`false`: Content moderation is not enabled.</li> |

If the returned HTTP status code is not 200, the request fails. You can refer to the [HTTP status code](#http-code) for possible reasons.

### Example

**Request line**

```shellscript
GET https://api.agora.io/v1/projects/{your_appid}/fls/entry_points/live/settings/snapshot/custom/regions/cn HTTP/1.1
```

**Response line**

```shellscript
HTTP/1.1 200 OK
```

**Request body**

```json
{
  "enabled": true,
  "enableModeration": true,
    "snapshotInterval": 30,
    "storageConfig": {
        "accessKey": "test access key",
        "region": 3,
        "secretKey": "test secret key",
        "vendor": 2
    }
}
```

## Parameter type

### StorageConfig

The storage configuration of the snapshot files contains the following fields:

<CloudStorage />

<a name="http-code"></a>
## HTTP status code

<StatusCode />