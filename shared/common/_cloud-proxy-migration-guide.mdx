import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Agora is updating IP whitelist configurations to enhance security and simplify management. This guide helps you update your Cloud Proxy settings to avoid service interruptions.

## Summary of changes

Key changes include:

* **Reduced IP ranges**: Narrower network segments improve security.

* **Single IP addressing**: Cloud machines now use single-point IPs.

* **Updated subnet masks**: Physical machines now use /28 instead of /26.

* **New access point IP list**: Introduced in SDK 3.4.0 for improved high availability.


## Implementation notes

* All IP addresses and network ranges have been technically verified.
* Update your firewall rules according to the specified timeline.
* Continue using your current configuration if you must configure before the new delivery dates.
* Test your configuration thoroughly using the validation steps provided at the end of this document.

## Network architecture changes

| Configuration element    | Current implementation               | New implementation               | Technical impact                                                  |
| ------------------------ | ------------------------------------ | -------------------------------- | ----------------------------------------------------------------- |
| Access point networks    | Network segments with various ranges | Single IP per access point       | More precise security boundaries; requires firewall rule updates  |
| Cloud machine networks   | IP ranges with 26 subnet masks      | Single-point IPs                 | Improved security isolation; requires firewall rule updates       |
| Physical machine subnets | 26 subnet masks                     | 28 subnet masks                 | Narrower IP ranges (1/4 the size); requires firewall rule updates |
| SDK 3.5.0.3+ GEO Fencing | Limited functionality                | Narrower AP address list support | Enhanced regional access control                                  |

## UDP cloud proxy changes

### North America

| Component                      | Current configuration     | New configuration                         | Effective date | Required action                                         |
| ------------------------------ | ------------------------- | ----------------------------------------- | -------------- | ------------------------------------------------------- |
| Cloud proxy network segments   | Non-HCI and 26 segments      | 28 segments per city (WA, SEA, LA, DC)   | Nov 5–Dec 10   | Update firewall rules for each city by the listed dates |
| Cloud proxy ports              | UDP: 4590–4600, 8001–8010 | Same                                      | Same as above  | No action needed                                        |
| Access point IPs (SDK 3.2–3.4) | See detailed list         | Replaces 125.88.159.163 with multiple IPs | Immediate      | Update and remove deprecated IP                         |
| Access point IPs (SDK 3.4+)    | Not configured            | See new IP list below                     | Immediate      | Add new IPs if using SDK 3.4.0+                         |
| Access port                    | UDP: 8443                 | Same                                      | Immediate      | No action needed                                        |

### Europe

| Component                      | Current configuration     | New configuration                         | Effective date | Required action                                         |
| ------------------------------ | ------------------------- | ----------------------------------------- | -------------- | ------------------------------------------------------- |
| Cloud proxy network segments   | 26 segments              | 28 segments per city (London, Frankfurt) | Nov 5–Dec 10   | Update firewall rules for each city by the listed dates |
| Cloud proxy ports              | UDP: 4590–4600, 8001–8010 | Same                                      | Same as above  | No action needed                                        |
| Access point IPs (SDK 3.2–3.4) | See detailed list         | Multiple IPs replacing deprecated ones    | Immediate      | Update and remove deprecated IP                         |
| Access point IPs (SDK 3.4+)    | Not configured            | See new IP list below                     | Immediate      | Add new IPs if using SDK 3.4.0+                         |
| Access port                    | UDP: 8443                 | Same                                      | Immediate      | No action needed                                        |

### India

| Component                      | Current configuration     | New configuration                        | Effective date | Required action                                         |
| ------------------------------ | ------------------------- | ---------------------------------------- | -------------- | ------------------------------------------------------- |
| Cloud proxy network segments   | 26 segments              | 28 segments per city (Mumbai, Delhi)    | Nov 5–Dec 10   | Update firewall rules for each city by the listed dates |
| Cloud proxy ports              | UDP: 4590–4600, 8001–8010 | Same                                     | Same as above  | No action needed                                        |
| Access point IPs (SDK 3.2–3.4) | See detailed list         | Multiple IPs replacing deprecated ones   | Immediate      | Update and remove deprecated IP                         |
| Access point IPs (SDK 3.4+)    | Not configured            | See new IP list below                    | Immediate      | Add new IPs if using SDK 3.4.0+                         |
| Access port                    | UDP: 8443                 | Same                                     | Immediate      | No action needed                                        |

### Japan

| Component                      | Current configuration     | New configuration                         | Effective date | Required action                                         |
| ------------------------------ | ------------------------- | ----------------------------------------- | -------------- | ------------------------------------------------------- |
| Cloud proxy network segments   | 26 segments              | 28 segments per city (Tokyo, Osaka)      | Nov 5–Dec 10   | Update firewall rules for each city by the listed dates |
| Cloud proxy ports              | UDP: 4590–4600, 8001–8010 | Same                                      | Same as above  | No action needed                                        |
| Access point IPs (SDK 3.2–3.4) | See detailed list         | Multiple IPs replacing deprecated ones    | Immediate      | Update and remove deprecated IP                         |
| Access point IPs (SDK 3.4+)    | Not configured            | See new IP list below                     | Immediate      | Add new IPs if using SDK 3.4.0+                         |
| Access port                    | UDP: 8443                 | Same                                      | Immediate      | No action needed                                        |

### Southeast Asia

| Component                      | Current configuration     | New configuration                              | Effective date | Required action                                         |
| ------------------------------ | ------------------------- | ---------------------------------------------- | -------------- | ------------------------------------------------------- |
| Cloud proxy Network Segments   | 26 segments              | 28 segments per city (SG, Jakarta, Manila)    | Nov 5–Dec 10   | Update firewall rules for each city by the listed dates |
| Cloud proxy Ports              | UDP: 4590–4600, 8001–8010 | Same                                           | Same as above  | No action needed                                        |
| Access point IPs (SDK 3.2–3.4) | See detailed list         | Multiple IPs replacing deprecated ones         | Immediate      | Update and remove deprecated IP                         |
| Access point IPs (SDK 3.4+)    | Not configured            | See new IP list below                          | Immediate      | Add new IPs if using SDK 3.4.0+                         |
| Access port                    | UDP: 8443                 | Same                                           | Immediate      | No action needed                                        |

### China

| Component                      | Current configuration     | New configuration                         | Effective date | Required action                                         |
| ------------------------------ | ------------------------- | ----------------------------------------- | -------------- | ------------------------------------------------------- |
| Cloud proxy network segments   | 26 segments              | 28 segments per province (BJ, GZ, SH)    | Nov 5–Dec 10   | Update firewall rules for each city by the listed dates |
| Cloud proxy ports              | UDP: 4590–4600, 8001–8010 | Same                                      | Same as above  | No action needed                                        |
| Access point IPs (SDK 3.2–3.4) | See detailed list         | Multiple IPs replacing deprecated ones    | Immediate      | Update and remove deprecated IP                         |
| Access point IPs (SDK 3.4+)    | Not configured            | See new IP list below                     | Immediate      | Add new IPs if using SDK 3.4.0+                         |
| Access port                    | UDP: 8443                 | Same                                      | Immediate      | No action needed                                        |

## TCP (TLS) cloud proxy changes

| Region        | Current configuration         | New configuration      | Effective date | Required action                          |
| ------------- | ----------------------------- | ---------------------- | -------------- | ---------------------------------------- |
| North America | TCP 26 segments, various IPs | Same segments, TCP 443 | Same as UDP    | Update firewall rules for listed TCP IPs |
| Europe        | TCP 26 segments              | Same segments, TCP 443 | Same as UDP    | Update firewall rules for listed TCP IPs |
| India         | TCP 26 segments              | Same segments, TCP 443 | Same as UDP    | Update firewall rules for listed TCP IPs |
| Japan         | TCP 26 segments              | Same segments, TCP 443 | Same as UDP    | Update firewall rules for listed TCP IPs |
| SEA           | TCP 26 segments              | Same segments, TCP 443 | Same as UDP    | Update firewall rules for listed TCP IPs |
| China         | TCP 26 segments              | Same segments, TCP 443 | Same as UDP    | Update firewall rules for listed TCP IPs |

### North America

| Region        | Current configuration                          | New configuration (Media & Signal)           | Delivery date | Required action                              |
| ------------- | ---------------------------------------------- | -------------------------------------------- | ------------- | -------------------------------------------- |
| North America | Multiple Media segments; signal not segmented  | Media: same as UDP; Signal: new IPs provided | Same as UDP   | Update both media and signal configurations  |

### Europe

| Region | Current configuration                          | New configuration (Media & Signal)     | Delivery date | Required action                             |
| ------ | ---------------------------------------------- | -------------------------------------- | ------------- | ------------------------------------------- |
| Europe | Media: multiple segments; signal not segmented | Media: UDP + new IPs (see list below)  | Same as UDP   | Update media and signal proxy configurations |

### India, Japan, SEA, China

Follow the same update pattern:
- Media: use same IPs as UDP configuration.
- Signal: add new IPs provided for region.
- Effective date: same as UDP updates.

## Final notes

* Always validate your setup using the provided testing tools.
* Remove deprecated IP addresses to prevent misconfigurations.
* Refer to SDK release notes for region-specific access point support.