import CodeBlock from '@theme/CodeBlock';

The following figure illustrates the essential steps:

<ProductWrapper notAllowed="voice-calling">
<PlatformWrapper platform = "ios">
![](/images/video-sdk/quick-start-sequence.svg)
</PlatformWrapper>

<PlatformWrapper platform = "macos">
![](/images/video-sdk/quick-start-sequence-macos.svg)
</PlatformWrapper>
</ProductWrapper>

<ProductWrapper product="voice-calling">
![](/images/video-sdk/quickstart-voice-call-sequence.svg)
</ProductWrapper>

A complete code sample that implements the basic process of real-time <Vpd k="PRODUCT"/> is presented here for your reference. Copy and paste the following code into your `ViewController.swift` file, replacing the existing content:

<PlatformWrapper platform='ios'>
<details>
<summary>Complete sample code for real-time <Vpd k="PRODUCT"/> </summary>

<ProductWrapper product="video-calling">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Define the localView variable
    var localView: UIView!
    // Define the remoteView variable
    var remoteView: UIView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    // Set up the video layout
    override func viewDidLoad() {
        super.viewDidLoad()

        // Create localView with a frame matching the screen bounds
        localView = UIView(frame: UIScreen.main.bounds)
        // Create remoteView with a specific frame
        // Positioned on the top right corner with an offset of 50 points from the top
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)

        // Initialize the AgoraRtcEngineKit instance with your App ID and and set the delegate to self
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()

        // Start local camera preview
        startPreview()
        // Join the channel
        joinChannel()
    }

    // Clean up resources when deallocating
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Start the local camera preview
    func startPreview() {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Use a temporary Token to join the channel
        // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
}

// Extension for implementing AgoraRtcEngineDelegate methods
extension ViewController: AgoraRtcEngineDelegate {
    
    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }
    
    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // When a remote user joins the channel, display the remote video stream with the specified uid
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Define the localView variable
    var localView: UIView!
    // Define the remoteView variable
    var remoteView: UIView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    // Set up the video layout
    override func viewDidLoad() {
        super.viewDidLoad()

        // Create localView with a frame matching the screen bounds
        localView = UIView(frame: UIScreen.main.bounds)
        // Create remoteView with a specific frame
        // Positioned on the top right corner with an offset of 50 points from the top
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)

        // Initialize the AgoraRtcEngineKit instance with your App ID and and set the delegate to self
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()

        // Start local camera preview
        startPreview()
        // Join the channel
        joinChannel()
    }

    // Clean up resources when deallocating
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Start the local camera preview
    func startPreview() {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming scenario, set the channel scenario to liveBroadcasting
        option.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience latency level
        option.audienceLatencyLevel = .ultraLowLatency 
        // Use a temporary Token to join the channel
        // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
}

// Extension for implementing AgoraRtcEngineDelegate methods
extension ViewController: AgoraRtcEngineDelegate {
    
    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }
    
    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // When a remote user joins the channel, display the remote video stream with the specified uid
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="broadcast-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Define the localView variable
    var localView: UIView!
    // Define the remoteView variable
    var remoteView: UIView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    // Set up the video window layout
    override func viewDidLoad() {
        super.viewDidLoad()

        // Create localView with a frame matching the screen bounds
        localView = UIView(frame: UIScreen.main.bounds)
        // Create remoteView with a specific frame
        // Positioned on the top right corner with an offset of 50 points from the top
        remoteView = UIView(frame: CGRect(x: self.view.bounds.width - 135, y: 50, width: 135, height: 240))
        self.view.addSubview(localView)
        self.view.addSubview(remoteView)

        // Initialize the AgoraRtcEngineKit instance with your App ID and and set the delegate to self
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: "<#Your App ID#>", delegate: self)
        // Enable the video module (audio module is enabled by default)
        agoraKit.enableVideo()

        // Start local camera preview
        startPreview()
        // Join the channel
        joinChannel()
    }

    // Clean up resources when de-allocating
    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    // Start the local camera preview
    func startPreview() {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    // Join the channel with specified options
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming scenario, set the channel scenario to liveBroadcasting
        option.channelProfile = .liveBroadcasting
        // Set the user role as broadcaster (default is audience)
        options.clientRoleType = .broadcaster
        // Publish audio captured by microphone
        options.publishMicrophoneTrack = true
        // Publish video captured by camera
        options.publishCameraTrack = true
        // Auto subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Auto subscribe to all video streams
        options.autoSubscribeVideo = true
        // Set the audience latency level
        option.audienceLatencyLevel = .lowLatency
        // Use a temporary Token to join the channel
        // Replace <#Your Token#> and <#Your Channel Name#> with your project's Token and channel name
        // If you set uid=0, the engine generates a uid internally; on success, it triggers didJoinChannel callback
        agoraKit.joinChannel(byToken: "<#Your Token#>", channelId: "<#Your Channel Name#>", uid: 0, mediaOptions: options)
    }
}

// Extension for implementing AgoraRtcEngineDelegate methods
extension ViewController: AgoraRtcEngineDelegate {
    
    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }
    
    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // When a remote user joins the channel, display the remote video stream with the specified uid
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="voice-calling">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import UIKit
import AgoraRtcKit

class ViewController: UIViewController {
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLoad() {
        super.viewDidLoad()
        // Initialize the AgoraRtcEngineKit instance with your App ID and and set the delegate to self
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId:<#Your App ID#>, delegate: self)
        joinChannel()
    }

    deinit {
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }
    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        options.channelProfile = .communication
        // Set user role to broadcaster; to set user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Publish microphone audio 
        options.publishMicrophoneTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Join the channel using a temporary token and channel name
        // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }
}

extension ViewController: AgoraRtcEngineDelegate {
    // Callback when the local user successfully joins a channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int
    ) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int){
        // Print debug information
        print("User (uid) joined after (elapsed) milliseconds")
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason
    ) {
    }
}`}
</CodeBlock>
</ProductWrapper>
</details>
</PlatformWrapper>

<PlatformWrapper platform='macos'>
<details>
<summary>Complete sample code for <Vpd k="PRODUCT"/></summary>

<ProductWrapper product="voice-calling">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    func initView() {
        // Initialize the AgoraRtcEngineKit instance with your App ID and and set the delegate to self
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: <#Your App ID#>, delegate: self)
    }


    deinit {
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }


    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()

        options.channelProfile = .liveBroadcasting
        // Set user role to broadcaster; to set user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Publish microphone audio 
        options.publishMicrophoneTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Join the channel using a temporary token and channel name
        // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
      }
    
    override func viewDidLoad() {
        super.viewDidLoad()
        initView()
        joinChannel()
    }
    
}

extension ViewController: AgoraRtcEngineDelegate{
    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int){
        // Print debug information
        print("User \(uid) joined after \(elapsed) milliseconds")
    }
    
    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        
        // Print debug information
        print("User \(uid) went offline due to \(reason)")
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // Local video view
    var localView: NSView!
    // Remote video view
    var remoteView: NSView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLayout() {
        super.viewDidLayout()

        // Set the position and size of the local view
        let localViewWidth: CGFloat = 135
        let localViewHeight: CGFloat = 240
        let localViewX: CGFloat = 2
        let localViewY: CGFloat = 2

        // Set the local view frame
        localView.frame = CGRect(x: localViewX, y: localViewY, width: localViewWidth, height: localViewHeight)

        // Set the remote view frame to fill the entire CustomView
        remoteView.frame = view.bounds
    }

    func initView() {
        // Initialize the remote video view
        remoteView = NSView()
        self.view.addSubview(remoteView)
        // Initialize the local video view
        localView = NSView()
        self.view.addSubview(localView)

        // Initialize the AgoraRtcEngineKit instance
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: <#Your App ID#>, delegate: self)
    }

    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    func startPreview() {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming scenario, set the channel profile to liveBroadcasting
        option.channelProfile = .liveBroadcasting
        // Set the user role to broadcaster; if you want to set the user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Set the audience latency level
        option.audienceLatencyLevel = .ultraLowLatency
        // Publish the microphone audio 
        options.publishMicrophoneTrack = true
        // Publish the camera video 
        options.publishCameraTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Automatically subscribe to all video streams
        options.autoSubscribeVideo = true
        // Use a temporary token to join the channel, pass in your project's token and channel name
        // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        initView()
        agoraKit.enableVideo()
        startPreview()
        joinChannel()
    }
}

extension ViewController: AgoraRtcEngineDelegate {

    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Print debug information
        print("User \(uid) joined after \(elapsed) milliseconds")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Print debug information
        print("User \(uid) went offline due to \(reason)")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="broadcast-streaming">
<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // Local video view
    var localView: NSView!
    // Remote video view
    var remoteView: NSView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLayout() {
        super.viewDidLayout()

        // Set the position and size of the local view
        let localViewWidth: CGFloat = 135
        let localViewHeight: CGFloat = 240
        let localViewX: CGFloat = 2
        let localViewY: CGFloat = 2

        // Set the local view frame
        localView.frame = CGRect(x: localViewX, y: localViewY, width: localViewWidth, height: localViewHeight)

        // Set the remote view frame to fill the entire CustomView
        remoteView.frame = view.bounds
    }

    func initView() {
        // Initialize the remote video view
        remoteView = NSView()
        self.view.addSubview(remoteView)
        // Initialize the local video view
        localView = NSView()
        self.view.addSubview(localView)

        // Initialize the AgoraRtcEngineKit instance
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: <#Your App ID#>, delegate: self)
    }

    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    func startPreview() {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // In a live streaming scenario, set the channel profile to liveBroadcasting
        option.channelProfile = .liveBroadcasting
        // Set the user role to broadcaster; if you want to set the user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Set the audience latency level
        option.audienceLatencyLevel = .lowLatency
        // Publish the microphone audio 
        options.publishMicrophoneTrack = true
        // Publish the camera video 
        options.publishCameraTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Automatically subscribe to all video streams
        options.autoSubscribeVideo = true
        // Use a temporary token to join the channel, pass in your project's token and channel name
        // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        initView()
        agoraKit.enableVideo()
        startPreview()
        joinChannel()
    }
}

extension ViewController: AgoraRtcEngineDelegate {

    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Print debug information
        print("User \(uid) joined after \(elapsed) milliseconds")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Print debug information
        print("User \(uid) went offline due to \(reason)")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}`}
</CodeBlock>
</ProductWrapper>

<ProductWrapper product="video-calling">

<CodeBlock language="swift" showLineNumbers>
{`// ViewController.swift
import AgoraRtcKit
import Cocoa

class ViewController: NSViewController {

    // Local video view
    var localView: NSView!
    // Remote video view
    var remoteView: NSView!
    // Declare a variable for the AgoraRtcEngineKit instance
    var agoraKit: AgoraRtcEngineKit!

    override func viewDidLayout() {
        super.viewDidLayout()

        // Set the position and size of the local view
        let localViewWidth: CGFloat = 135
        let localViewHeight: CGFloat = 240
        let localViewX: CGFloat = 2
        let localViewY: CGFloat = 2

        // Set the local view frame
        localView.frame = CGRect(x: localViewX, y: localViewY, width: localViewWidth, height: localViewHeight)

        // Set the remote view frame to fill the entire CustomView
        remoteView.frame = view.bounds
    }

    func initView() {
        // Initialize the remote video view
        remoteView = NSView()
        self.view.addSubview(remoteView)
        // Initialize the local video view
        localView = NSView()
        self.view.addSubview(localView)

        // Initialize the AgoraRtcEngineKit instance
        agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId: <#Your App ID#>, delegate: self)
    }

    deinit {
        agoraKit.stopPreview()
        agoraKit.leaveChannel(nil)
        AgoraRtcEngineKit.destroy()
    }

    func startPreview() {
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.view = localView
        videoCanvas.renderMode = .hidden
        agoraKit.setupLocalVideo(videoCanvas)
        agoraKit.startPreview()
    }

    func joinChannel() {
        let options = AgoraRtcChannelMediaOptions()
        // Set the channel profile 
        options.channelProfile = .communication
        // Set the user role to broadcaster; if you want to set the user role to audience, keep the default value
        options.clientRoleType = .broadcaster
        // Publish the microphone audio 
        options.publishMicrophoneTrack = true
        // Publish the camera video 
        options.publishCameraTrack = true
        // Automatically subscribe to all audio streams
        options.autoSubscribeAudio = true
        // Automatically subscribe to all video streams
        options.autoSubscribeVideo = true
        // Use a temporary token to join the channel, pass in your project's token and channel name
        // If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
        agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        initView()
        agoraKit.enableVideo()
        startPreview()
        joinChannel()
    }
}

extension ViewController: AgoraRtcEngineDelegate {

    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: \(channel), uid: \(uid)")
    }

    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int) {
        // Print debug information
        print("User \(uid) joined after \(elapsed) milliseconds")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = remoteView
        videoCanvas.renderMode = .hidden
        agoraKit.setupRemoteVideo(videoCanvas)
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Print debug information
        print("User \(uid) went offline due to \(reason)")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}
`}
</CodeBlock>
</ProductWrapper>
</details>

</PlatformWrapper>

<Admonition type="info" title="Information"> In the `appId`, `token`, and `channelName` fields, enter the app ID and temporary token you obtained from the Console, and the channel name you filled in when generating the temporary token.</Admonition>

### Import Agora components

Add the following line to the `ViewController.swift` file:

```swift
import AgoraRtcKit
```

### Initialize the engine

To initialize the SDK, call `sharedEngineWithConfig` to create and initialize an instance of `AgoraRtcEngineKit`:

<Admonition type="caution" title="Note">
Before initializing the SDK, ensure that the user has fully understood and agreed to the relevant privacy policy. 
</Admonition>

<ProductWrapper notAllowed="voice-calling">
```swift
// Enter the App ID you obtained from the Agora Console here
agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId:<#Your App ID#>, delegate: self)
```
</ProductWrapper>
<ProductWrapper product="voice-calling">
```swift
// Initialize the AgoraRtcEngineKit instance with your App ID and and set the delegate to self
agoraKit = AgoraRtcEngineKit.sharedEngine(withAppId:<#Your App ID#>, delegate: self)
```
</ProductWrapper>

<ProductWrapper notAllowed="voice-calling">

### Enable the video module

Follow the steps below to enable the video module.

1. To enable the video module, call `enableVideo` .
1. To initialize the local view and set the local video display properties, call `setupLocalVideo`.
1. To enable local video preview, call `startPreview`.

```swift
// Enable the video module
agoraKit.enableVideo()

let videoCanvas = AgoraRtcVideoCanvas()
videoCanvas.view = localView
videoCanvas.renderMode = .hidden
videoCanvas.view = localView
// Set up the local video view
agoraKit.setupLocalVideo(videoCanvas)
// Start local video preview
agoraKit.startPreview()
```

### Join a channel and publish audio and video streams

To join a channel, and set the user role, call `joinChannelByToken [2/4]`. Fill in the temporary token you obtained from <Vg k="CONSOLE"/>, and the channel name you filled in to generate the token.

<ProductWrapper product="broadcast-streaming">

```swift
let options = AgoraRtcChannelMediaOptions()
// In a live streaming scenario, set the channel profile to liveBroadcasting
option.channelProfile = .liveBroadcasting
// Set the user role to broadcaster; if you want to set the user role to audience, keep the default value
options.clientRoleType = .broadcaster
// Set the audience latency level
option.audienceLatencyLevel = .lowLatency
// Publish the microphone audio 
options.publishMicrophoneTrack = true
// Publish the camera video 
options.publishCameraTrack = true
// Automatically subscribe to all audio streams
options.autoSubscribeAudio = true
// Automatically subscribe to all video streams
options.autoSubscribeVideo = true
// Use a temporary token to join the channel, pass in your project's token and channel name
// If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)

```
</ProductWrapper>

<ProductWrapper product="interactive-live-streaming">

```swift
let options = AgoraRtcChannelMediaOptions()
// In a live streaming scenario, set the channel profile to liveBroadcasting
option.channelProfile = .liveBroadcasting
// Set the user role to broadcaster; if you want to set the user role to audience, keep the default value
options.clientRoleType = .broadcaster
// Set the audience latency level
option.audienceLatencyLevel = .ultraLowLatency
// Publish the microphone audio 
options.publishMicrophoneTrack = true
// Publish the camera video 
options.publishCameraTrack = true
// Automatically subscribe to all audio streams
options.autoSubscribeAudio = true
// Automatically subscribe to all video streams
options.autoSubscribeVideo = true
// Use a temporary token to join the channel, pass in your project's token and channel name
// If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
```
</ProductWrapper>

<ProductWrapper product="video-calling">

```swift
let options = AgoraRtcChannelMediaOptions()
// Set the channel profile 
options.channelProfile = .communication
// Set the user role to broadcaster; if you want to set the user role to audience, keep the default value
options.clientRoleType = .broadcaster
// Publish the microphone audio 
options.publishMicrophoneTrack = true
// Publish the camera video 
options.publishCameraTrack = true
// Automatically subscribe to all audio streams
options.autoSubscribeAudio = true
// Automatically subscribe to all video streams
options.autoSubscribeVideo = true
// Use a temporary token to join the channel, pass in your project's token and channel name
// If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
```
</ProductWrapper>

### Set remote user view
To initialize the remote user view, call `setupRemoteVideo` and set the local display properties for the remote user. Use the `didJoinedOfUid` callback to get the UID of the remote user.

```swift
func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int){
    // When a remote user joins the channel, display the remote video stream using the returned uid
    print("User \(uid) joined after \(elapsed) milliseconds")
    let videoCanvas = AgoraRtcVideoCanvas()
    videoCanvas.uid = uid
    videoCanvas.view = remoteView
    videoCanvas.renderMode = .hidden
    agoraKit.setupRemoteVideo(videoCanvas)
}
```

### Implement Common Callbacks

Define necessary callbacks based on the usage scenario. The following sample code demonstrates how to implement the `didJoinChannel` and `didOfflineOfUid` callbacks:

```swift
extension ViewController: AgoraRtcEngineDelegate {
    // Callback when the local user successfully joins a channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int) {
        print("didJoinChannel: (channel), uid: (uid)")
    }

    // Callback when a remote user leaves the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason) {
        // Print debug information
        print("User (uid) went offline due to (reason)")
        let videoCanvas = AgoraRtcVideoCanvas()
        videoCanvas.uid = uid
        videoCanvas.view = nil
        agoraKit.setupRemoteVideo(videoCanvas)
    }
}
```

### Start audio and video interaction
Use the `viewDidLoad` callback to join the channel and start audio and video interaction.

<PlatformWrapper platform="ios">
```swift
override func viewDidLoad() {
    super.viewDidLoad()
    // Start audio and video interaction after the view loads
    agoraKit.enableVideo()
    startPreview()
    joinChannel()
}
```
</PlatformWrapper>

<PlatformWrapper platform="macos">
```swift
override func viewDidLoad() {
    super.viewDidLoad()
    // Start audio and video interaction after the view loads
    // Initialize the video window
    initView()
    agoraKit.enableVideo()
    startPreview()
    joinChannel()
}
```
</PlatformWrapper>

### End audio and video interaction

1. To leave the channel and release the related resources, call `leaveChannel`.

    ```swift
    agoraKit.stopPreview()
    agoraKit.leaveChannel(nil)
    ```

1. To release all resources used by Agora SDK and destroy the engine, call `destroy`.

    ```swift
    AgoraRtcEngineKit.destroy()
    ```
</ProductWrapper>
<ProductWrapper product="voice-calling">

### Join the channel

To join the channel, call `joinChannelByToken`. Provide the temporary token obtained from the console and the channel name used when acquiring the token. Additionally, set the user role before joining the channel:

```swift
let options = AgoraRtcChannelMediaOptions()
options.channelProfile = .communication
// Set user role to broadcaster; to set user role to audience, keep the default value
options.clientRoleType = .broadcaster
// Publish microphone audio 
options.publishMicrophoneTrack = true
// Automatically subscribe to all audio streams
options.autoSubscribeAudio = true
// Join the channel using a temporary token and channel name
// If you set the uid of 0, a value is randomly generated by the engine; success triggers the didJoinChannel callback
agoraKit.joinChannel(byToken: <#Your Token#>, channelId: <#Your Channel Name#>, uid: 0, mediaOptions: options)
```

### Implement Common Callbacks

Define necessary callbacks based on the usage scenario. The following sample code demonstrates how to implement the `didJoinChannel`, `didJoinedOfUid`, and `didOfflineOfUid` callbacks:

```swift
extension ViewController: AgoraRtcEngineDelegate {
    // Callback when the local user successfully joins a channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didJoinChannel channel: String, withUid uid: UInt, elapsed: Int
    ) {
        print("didJoinChannel: (channel), uid: (uid)")
    }
    // Callback when a remote user joins the current channel
    func rtcEngine(_ engine: AgoraRtcEngineKit, didJoinedOfUid uid: UInt, elapsed: Int){
        // Print debug information
        print("User (uid) joined after (elapsed) milliseconds")
    }
    // Callback when a remote user leaves the current channel
    func rtcEngine(
        _ engine: AgoraRtcEngineKit, didOfflineOfUid uid: UInt, reason: AgoraUserOfflineReason
    ) {
    }
}
```

### Start and stop voice calling
When the user launches this app, it joins the channel and starts voice calling. When the user closes this app, it leaves the channel and ends voice calling. To implement this logic:

1. Call `initializeAgoraEngine` and `joinChannel`, when the view is loaded:

    ```swift
    override func viewDidLoad() {
        super.viewDidLoad()
        // After the view is loaded, you can perform other settings
        initializeAgoraEngine()
        joinChannel()
    }
    ```

1. To release all resources used by Agora SDK, call `leaveChannel` when the app is closed.

    ```swift
    // Leave the channel and release session-related resources
    agoraKit.leaveChannel(nil)
    // Release all resources used by the Agora SDK
    AgoraRtcEngineKit.destroy()
    ```
</ProductWrapper>
    
<Admonition type="caution" title="caution">After destroying the engine, you can no longer use SDK methods and callbacks. To use the real-time interaction functions again, create a new engine. See [Initialize the engine](#initialize-the-engine) for details.</Admonition>
    