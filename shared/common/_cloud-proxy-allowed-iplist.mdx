
This guide provides configuration details you need to set up <Vg k="NAME" /> Cloud Proxy services across all supported regions. Cloud Proxy enables secure communication through firewalls by using designated IP addresses and ports.

<Admonition type="info">
If you configured cloud proxy settings using an older version of this guide, you may need to update your firewall rules. Refer to the [Cloud proxy migration guide](../reference/cloud-proxy-migration-guide).
</Admonition>

## Understand the tech

The following network infrastructure components support your deploymentL

* **Access point networks**: Each access point uses a single cloud-hosted IP address.
* **Cloud machine networks**: Use single-point IPs for better security.
* **Physical machine networks**: Use a /28 subnet mask for each network segment.
* **Regional deployment**: Includes configurations for North America, Europe, India, Japan, Southeast Asia, and China.

## Implementation guidelines

* **Check your SDK version**: Configuration requirements vary depending on the SDK version you're using.
* **Configure regional IPs**: Add the correct IP addresses for your target regions.

    <Admonition type="info" >
    When adding IP addresses:
    - If you use cloud proxy with [Restricted media zones](../advanced-features/geofencing), add only the IP addresses dedicated to your specified region.
    - If you do not restrict media zones, add all IP addresses to ensure connectivity.
    </Admonition>

* **Open required ports**: Make sure all necessary firewall ports are accessible.
* **Test connectivity**: Validate your configuration before deploying to production.

### UDP cloud proxy configuration

### Network segments by region

| Region         | Cloud proxy network segments       | UDP cloud proxy ports        | UDP access port |
| -------------- | ---------------------------------- | ---------------------------- | --------------- |
| North America  | `128.14.195.192/28`, `128.14.245.16/28`, `128.14.72.80/28`, `128.14.200.208/28`         | `4590–4600`, `8001–8010`     | `8443`          |
| Europe         | `104.166.160.208/28`, `23.236.110.32/28`, `104.166.142.134`, `104.166.161.4`            | `4590–4600`, `8001–8010`     | `8443`          |
| India          | `129.227.217.128/28`, `129.227.108.208/28`, `128.1.105.112/28`                          | `4590–4600`, `8001–8010`     | `8443`          |
| Japan          | `129.227.113.112/28`, `129.227.55.96/28`, `122.10.153.74`, `129.227.234.123`            | `4590–4600`, `8001–8010`     | `8443`          |
| Southeast Asia | `128.1.186.240/28`, `129.227.73.32/28`, `103.193.127.208/28`                            | `4590–4600`, `8001–8010`     | `8443`          |
| China          | Multiple subnets (see [Region-specific configurations](#region-specific-configurations)) | `4590–4600`, `8001–8010`     | `8443`          |

#### Access point IP addresses

| SDK Version | Region  | Access Point IP Addresses |
|-------------|--------|--------------|
| `3.2.0`–`3.4.0` | North America and Global | `69.28.51.142`, `107.155.14.132`, `128.1.77.34`, `128.1.78.146`, `128.1.87.146`, `54.178.26.110`, `140.210.77.68`, `47.107.39.93`, `112.126.96.46`, `139.159.110.148` |
| `3.4.0` and later (including Linux SDK `4.0.0+`) | Global | `106.14.12.130`, `118.190.148.38`, `184.72.16.87`, `35.168.106.53`, `35.156.231.150`, `15.237.134.178`, `54.178.26.110`, `52.221.23.86`, `13.230.60.35`, `15.206.47.129`, `13.127.149.196`, `13.209.247.137`, `13.124.182.235`, `23.98.43.152`, `107.155.14.132`, `69.28.51.142` |

#### Region-specific configurations

##### North America (Subnet Deployment)

| IDC Name | Subnet               | IDC Subnet                        | Available IPs for Configuration          |
|----------------------|----------------------|------------------------------------|-------------|
| Washington           | `128.14.195.192/28`  | `128.14.195.193`–`128.14.195.206`  | `128.14.195.196`                    |
| Seattle              | `128.14.245.16/28`   | `128.14.245.17`–`128.14.245.30`    | `128.14.245.19`, `128.14.245.20`    |
| Los Angeles          | `128.14.72.80/28`    | `128.14.72.80`–`128.14.72.95`      | Any IP in range (Deployed) |
| Washington DC        | `128.14.200.208/28`  | `128.14.200.208`–`128.14.200.223`  | Any IP in range (Deployed) |

##### Europe (Subnet Deployment)

| IDC Name | Subnet               | IDC Subnet                        | Available IPs for Configuration        |
|----------------------|----------------------|------------------------------------|-------------|
| London               | `104.166.160.208/28` | `104.166.160.209`–`104.166.160.222` | Any IP in range (Deployed) |
| Frankfurt            | `23.236.110.32/28`   | `23.236.110.33`–`23.236.110.46`     | Any IP in range (Deployed) |

##### India (Subnet Deployment)

| IDC Name | Subnet               | IDC Subnet                       | Available IPs for Configuration                    |
|----------------------|----------------------|------------------------------------|-------------|
| Mumbai               | `129.227.217.128/28` | `129.227.217.129`–`129.227.217.142` | Any IP in range (Deployed) |
| Chennai              | `129.227.108.208/28` | `129.227.108.209`–`129.227.108.222` | Any IP in range (Deployed) |
| Bangalore            | `128.1.105.112/28`   | `128.1.105.113`–`128.1.105.126`     | Any IP in range (Deployed) |

##### Japan (Subnet Deployment)

| IDC Name | Subnet               | IDC Subnet                        | Available IPs for Configuration                       |
|----------------------|----------------------|------------------------------------|-------------|
| Tokyo1               | `129.227.113.112/28` | `129.227.113.113`–`129.227.113.126` | Any IP in range (Deployed) |
| Tokyo2               | `129.227.55.96/28`   | `129.227.55.97`–`129.227.55.110`    | Any IP in range (Deployed) |

##### Southeast Asia (Subnet Deployment)

| IDC Name | Subnet               | IDC Subnet                        | Available IPs for Configuration  |
|----------------------|----------------------|------------------------------------|-------------|
| Singapore1           | `128.1.186.240/28`   | `128.1.186.241`–`128.1.186.254`     | Any IP in range (Deployed) |
| Hong Kong            | `103.193.127.208/28` | `103.193.127.209`–`103.193.127.222` | Any IP in range (Deployed) |
| Singapore2           | `129.227.73.32/28`   | `129.227.73.33`–`129.227.73.46`     | Any IP in range (Deployed) |

##### China (Subnet Deployment)

| IDC Name | IDC Subnet | Subnet IP Ranges | Available IPs for Configuration |
|----------------------|-----------------------------|----------|-------|
| Foshan | CTEL: `14.29.38.144/28`<br/>CUCC: `27.45.161.144/28`<br/>CMCC: `183.232.200.144/28` | CTEL: `14.29.38.145`–`14.29.38.158`<br/>CUCC: `27.45.161.145`–`27.45.161.158`<br/>CMCC: `183.232.200.145`–`183.232.200.158` | CTEL: `14.29.38.155`, `14.29.38.156`<br/>CUCC: `27.45.161.155`, `27.45.161.156`<br/>CMCC: `183.232.200.155`, `183.232.200.156` |
| Hangzhou | CTEL: `115.238.206.0/28`<br/>CUCC: `106.3.209.0/28`<br/>CMCC: `112.13.216.0/28` | CTEL: `115.238.206.1`–`115.238.206.14`<br/>CUCC: `106.3.209.1`–`106.3.209.14`<br/>CMCC: `112.13.216.1`–`112.13.216.14` | CTEL: `115.238.206.4`, `115.238.206.5`<br/>CUCC: `106.3.209.4`, `106.3.209.5`<br/>CMCC: `112.13.216.4`, `112.13.216.5` |
| Chongqing | CTEL: `219.153.111.128/28`<br/>CUCC: `221.178.42.0/28` | CTEL: `219.153.111.129`–`219.153.111.142`<br/>CUCC: `221.178.42.1`–`221.178.42.14` | CTEL: `219.153.111.137`<br/>CUCC: `221.178.42.8`<br/>CMCC: `113.207.12.8` |

### Native TCP (TLS) cloud proxy configuration

| Region        | Network segments     | Cloud proxy port | Access point IPs   | Access Port |
| ------------- | -------------------- | ---------------- | ------------------ | ----------- |
| North America | Same as UDP segments | TCP: `443`         | `101.132.108.165`, `123.56.235.221`, `52.54.85.111`, `184.72.18.217`, `52.28.239.238`, `3.9.120.239`, `13.250.89.184`, `18.176.162.64`, `168.138.214.216`, `20.193.241.143`, `3.109.116.108`, `3.36.161.253`, `15.164.88.208`, `164.52.43.58`, `54.205.123.178`, `50.18.20.222` | TCP: 443    |
| Other Regions | Same as UDP segments | TCP: `443`         | Region-specific IPs                          | TCP: `443`    |


### Web cloud proxy configuration

#### Web SDK 3.6.4+ and NG 4.8.0+

| Region             | Network configuration           | Port Requirements  |
| ------------------ | ------------------------------- | ------------------ |
| **North America**  | **Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `47.252.17.251`, `170.106.135.177` | UDP: `443`, TCP: `443` |
| **Europe**         | **Media cloud proxy subnets:** Same as UDP plus `148.153.25.149`, `148.153.25.148`, `148.153.25.147`, `148.153.25.146`, `148.153.25.184`, `148.153.93.18`, `148.153.93.19`, `148.153.93.24`, `148.153.93.25`, `148.153.93.27`<br/>**Signal cloud proxy subnets:** `47.254.149.145`, `162.62.220.8` | UDP: `443`, TCP: `443` |
| **India**          | **Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `147.139.34.215`, `129.226.26.104` | UDP: `443`, TCP: `443` |
| **Japan**          | **Media cloud proxy subnets:** Same as UDP plus `164.52.24.41`, `164.52.6.29`, `164.52.24.44`, `164.52.24.43`, `103.101.125.21`, `103.101.125.26`, `103.101.125.20`, `103.101.125.22`, `122.10.153.90`<br/>**Signal cloud proxy subnets:** `47.245.7.250`, `43.128.248.97` | UDP: `443`, TCP: `443` |
| **Southeast Asia** | **Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `161.117.177.218`, `104.250.52.195` | UDP: `443`, TCP: `443` |
| **China**          | **Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `139.196.42.124`, `123.56.57.206` | UDP: `443`, TCP: `443` |


#### Web SDK 3.4.0–3.6.3 / NG 4.3.0–4.7.3

| Region             | Network configuration                                | Port Requirements      |
| ------------------ | ---------------------------------------------------- | ---------------------- |
| **North America**  | **Access point IP:** `47.74.211.17`, `52.52.84.170`<br/>**Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `47.252.17.251`, `170.106.135.177`  | UDP: `443`, TCP: `443` |
| **Europe**         | **Access point IP:** `47.74.211.17`, `52.52.84.170`<br/>**Media cloud proxy subnets:** Same as above for newer Web SDK<br/>**Signal cloud proxy subnets:** `47.254.149.145`, `162.62.220.8` | UDP: `443`, TCP: `443` |
| **India**          | **Access point IP:** `47.74.211.17`, `52.52.84.170`<br/>**Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `147.139.34.215`, `129.226.26.104`  | UDP: `443`, TCP: `443` |
| **Japan**          | **Access point IP:** `47.74.211.17`, `52.52.84.170`<br/>**Media cloud proxy subnets:** Same as above for newer Web SDK<br/>**Signal cloud proxy subnets:** `47.245.7.250`, `43.128.248.97`  | UDP: `443`, TCP: `443` |
| **Southeast Asia** | **Access point IP:** `47.74.211.17`, `52.52.84.170`<br/>**Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `161.117.177.218`, `104.250.52.195` | UDP: `443`, TCP: `443` |
| **China**          | **Access point IP:** `52.80.192.229`, `47.96.234.219`<br/>**Media cloud proxy subnets:** Same as UDP network segments<br/>**Signal cloud proxy subnets:** `139.196.42.124`, `123.56.57.206` | UDP: `443`, TCP: `443` |

### Signaling Web regional domains and IP addresses 

| Region | Domain | IP Addresses for Signaling and AP Service | Port Requirements |
|--------|--------|------------------------------------------|-------------------|
| Asia | `proxy-ap-web-asia.agora.io` | `47.74.211.17`, `52.221.23.86` | UDP: `443`, TCP: `443` |
| Europe | `proxy-ap-web-europe.agora.io` | `128.1.78.146`, `35.178.208.187` | UDP: `443`, TCP: `443` |
| HKMC | `proxy-ap-web-hkmc.agora.io` | `23.98.43.152`, `47.244.4.122` | UDP: `443`, TCP: `443` (Recommended) |
| India | `proxy-ap-web-india.agora.io` | `129.227.98.170`, `129.154.38.143` | UDP: `443`, TCP: `443` |
| Japan | `proxy-ap-web-japan.agora.io` | `52.68.71.190`, `168.138.222.84` | UDP: `443`, TCP: `443` |
| Korea | `proxy-ap-web-korea.agora.io` | `164.52.43.59`, `13.124.182.235` | UDP: `443`, TCP: `443` (Recommended) |
| Mainland China | `proxy-ap-web.agoraio.cn` | `52.80.192.229`, `47.96.234.219` | UDP: `443`, TCP: `443` |
| North America | `proxy-ap-web-america.agora.io`<br/>`proxy-ap-web-us.agora.io` | `35.169.70.181`, `107.155.14.132` | UDP: `443`, TCP: `443` |
| Abroad | N/A | `47.74.211.17`, `52.221.23.86` | UDP: `443`, TCP: `443` (Recommended) |

## Best practices 

### SDK version considerations

- For SDK versions prior to 3.5.0.3:
    - Some SDK versions have geofencing limitations
    - Even when media zones are restricted, APs may still be randomly accessed globally
    - Consider adding all Access Point network segments to your firewall whitelist

-	For SDK version 3.5.0.3 and above:
    - You can use a narrower AP address list with geofencing

### Regional deployment

- **Global deployments**:
    - Open network segments for all overseas regions to ensure service availability
    - Especially important for deployments without specific region requirements
  
- **Limited network segment support**:
    - If complete network segment support is unavailable, use single-point IP addresses from the provided lists

        <Admonition type="info">
        This approach requires firewall whitelist updates during service expansion.
        </Admonition>

### Domain vs IP whitelisting

- **AP and Signaling**: 
    Consider the following options
    - Enable domain name whitelisting (eliminates need for HTTPS/WSS IP whitelists)
    - Configure IP whitelisting
  
- **Media**:
  - Can only use IP whitelisting. Domain whitelisting is not available.
  
- **DNS requirements**:
  - Open DNS resolution port `53` in addition to port `443`
  - Verify connectivity by pinging the provided domain names

### Port configuration requirements

- **TCP/UDP requirements**:
    - TCP port `443`: Required for all configurations
    - UDP port `443`: Required for Proxy3 only (proxy4/5 only need TCP `443`)
  
- **Regional considerations**:
    - If your region is uncertain, configure all whitelists
    - For region-specific deployments like Japan, consider opening the entire region, such as Asia

## Validation and testing

Validate and test your configuration before rolling it out to production.

### Validate configuration

To verify that your Cloud Proxy configuration is working correctly:

1. Enable Cloud Proxy mode in your application (for example, UDP Cloud Proxy)
2. Join a channel and check for successful connection
3. Monitor the network quality metrics in your application
4. Test from multiple geographic locations if possible

### Test performance

To test your configuration:

1. **Identify SDK version**:
   Use the SDK's version identification method to confirm your current version.

2. **Test connectivity**:
   Configure the Cloud Proxy UDP mode and enable the lastmile test to check connectivity.

3. **Monitor performance**:
   - Track latency, packet loss, and jitter
   - Test across all targeted regions

### Get support

For implementation assistance, contact [support@agora.io](mailto:support@agora.io) with your specific SDK version and region requirements.

