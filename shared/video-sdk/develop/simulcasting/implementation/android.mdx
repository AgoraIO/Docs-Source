<PlatformWrapper platform="android">

Before joining a channel, set up multi-resolution video streaming by calling the `setSimulcastConfig` method and configuring the `simulcastConfig` parameters.

```java
public abstract int setSimulcastConfig(SimulcastConfig simulcastConfig);
```

The following snippet shows how `SimulcastConfig` and related classes are defined in the SDK:

```java
public class SimulcastConfig {
  // Define extended stream layers
  public static enum StreamLayerIndex {
    STREAM_LAYER_1(0),
    STREAM_LAYER_2(1),
    STREAM_LAYER_3(2),
    STREAM_LAYER_4(3),
    STREAM_LAYER_5(4),
    STREAM_LAYER_6(5),
    STREAM_LOW(6),
    STREAM_LAYER_COUNT_MAX(7);
  }

  // Configure video properties for each extended stream
  public class StreamLayerConfig {
    // Resolution
    public VideoEncoderConfiguration.VideoDimensions dimensions;
    // Frame rate
    public int framerate;
    // Whether this layer is enabled
    public boolean enable;
  }

  // Configuration for each extended stream
  public final StreamLayerConfig[] configs =
      new StreamLayerConfig[StreamLayerIndex.STREAM_LAYER_COUNT_MAX.getValue()];

  public SimulcastConfig() {
    for (int i = 0; i < StreamLayerIndex.STREAM_LAYER_COUNT_MAX.getValue(); i++) {
      configs[i] = new StreamLayerConfig();
    }
    this.publishFallbackEnable = false;
  }

  // Whether to allow disabling multiple streams dynamically
  // when the sender's performance or uplink network is poor
  public boolean publishFallbackEnable;
}
```

### Configure parameters

When configuring extended streams, follow these rules:

- Configure the resolution and frame rate of each extended stream before joining a channel. After joining, you cannot change resolution or frame rate; you can only enable or disable streams using `StreamLayerConfig.enable`.

- Set the resolution and frame rate of each extended stream lower than the source stream, defined in `VideoEncoderConfiguration`.

- Decrease resolution and frame rate layer by layer. For example, `STREAM_LAYER_2` must be lower than `STREAM_LAYER_1`, and so on.

- Enable up to three extended streams at the same time, including the small stream.

### Sample code

Set the resolution and frame rate of each layer based on your use case and bandwidth. <Vg k="COMPANY" /> recommends configuring only the `StreamLayerConfig` layers you need and setting the others to `enable = false`. The following sample shows how to configure a multi-resolution video stream: 

```java
import io.agora.rtc2.SimulcastConfig;

private SimulcastConfig simulcastConfig = new SimulcastConfig();

// Configure video resolution and frame rate for STREAM_LAYER_1
int layer1 = SimulcastConfig.StreamLayerIndex.STREAM_LAYER_1.getValue();
simulcastConfig.configs[layer1].dimensions.width = 1280;
simulcastConfig.configs[layer1].dimensions.height = 720;
simulcastConfig.configs[layer1].framerate = 30;
simulcastConfig.configs[layer1].enable = true;

// Configure video resolution and frame rate for STREAM_LAYER_2
int layer2 = SimulcastConfig.StreamLayerIndex.STREAM_LAYER_2.getValue();
simulcastConfig.configs[layer2].dimensions.width = 960;
simulcastConfig.configs[layer2].dimensions.height = 540;
simulcastConfig.configs[layer2].framerate = 15;
simulcastConfig.configs[layer2].enable = true;

// Configure video resolution and frame rate for STREAM_LAYER_3
int layer3 = SimulcastConfig.StreamLayerIndex.STREAM_LAYER_3.getValue();
simulcastConfig.configs[layer3].dimensions.width = 640;
simulcastConfig.configs[layer3].dimensions.height = 360;
simulcastConfig.configs[layer3].framerate = 15;
simulcastConfig.configs[layer3].enable = false;

// Configure video resolution and frame rate for STREAM_LAYER_4
int layer4 = SimulcastConfig.StreamLayerIndex.STREAM_LAYER_4.getValue();
simulcastConfig.configs[layer4].dimensions.width = 480;
simulcastConfig.configs[layer4].dimensions.height = 270;
simulcastConfig.configs[layer4].framerate = 15;
simulcastConfig.configs[layer4].enable = true;

// Apply the Simulcast configuration
engine.setSimulcastConfig(simulcastConfig);
```

### Subscribe to a stream

A remote user subscribes to the desired video quality level by setting the `streamType` parameter in `setRemoteVideoStreamType`. 

```java
Constants.VideoStreamType videoStreamType = Constants.VideoStreamType.valueOf(videoStream);
engine.setRemoteVideoStreamType(uid, videoStreamType);
```

To update the subscribed video quality level during real-time interaction, you can call `setRemoteVideoStreamType` multiple times.

</PlatformWrapper>
