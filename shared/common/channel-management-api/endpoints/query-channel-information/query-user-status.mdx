import Authorization from '@docs/shared/common/channel-management-api/authorization.mdx';
import CodeBlock from '@theme/CodeBlock';
import MultiCodeBlock, { CodeGroup, CodeItem } from '@app/mdx-components/MultiCodeBlock';
import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

<RestAPILayout>

<LeftColumn
  title="Query user status"
  method="GET"
  endpoint="https://api.agora.io/dev/v1/channel/user/property/{appid}/{uid}/{channelName}"
>

This method gets the status of a specified user. It checks if the specified user is in the specified channel. If the user is present, it returns the role of this user in the channel and the time of joining.

### Request

**Path parameters**

Pass the following path parameters in the request URL:


  <PathParameter name="appid" type="string" required={true}>
    The App ID of the project. You can get it through one of the following methods:
    <ul>
      <li>Copy from the <Link to="{{Global.AGORA_CONSOLE_URL}}"><Vg k="CONSOLE" /></Link></li>
      <li> Call the [Get all projects](../../agora-console-rest-api#get-all-projects) API, and read the value of the `vendor_key` field in the response body.</li>
    </ul>
  </PathParameter>
  <PathParameter name="uid" type="number" required={true}>
    The user ID. <p>**Note**: This parameter does not support string user accounts. Ensure that you use the integer user ID.</p> 
  </PathParameter>
  <PathParameter name="channelName" type="string" required={false}>
    The channel name.
  </PathParameter>

**Request header**

<Authorization/>

### Response

If the status code is `200`, the request succeeds, and the response body includes the following parameters:
<ParameterList title="OK" required={true}>
  <Parameter name="success" type="boolean" required={true}>
    The status of the request:
    <ul>
      <li>``true``: The request was successful.</li>
      <li>``false``: Reserved for future use.</li>
    </ul>
  </Parameter>
  <Parameter name="data" type="object" required={true}>
    User statistics, including the following fields:
    <Parameter name="in_channel" type="boolean" required={true}>
      Indicates whether the user is in the channel.
      <strong>Note:</strong> If ``in_channel`` is ``false``, all other fields are not returned.
    </Parameter>
    <Parameter name="uid" type="number" required={true}>
      The user ID.
    </Parameter>
    <Parameter name="join" type="number" required={true}>
      The Unix timestamp (in seconds) of when the user joined the channel.
    </Parameter>
    <Parameter name="role" type="number" required={true}>
      The role of the user in the channel:
      <ul>
        <li>``0``: Unknown user role.</li>
        <li>``1``: User in a communication channel.</li>
        <li>``2``: Host in the channel.</li>
        <li>``3``: Audience in the channel.</li>
      </ul>
    </Parameter>
    <Parameter name="platform" type="number" required={true}>
      The platform of the user's device. Common return values include:
      <ul>
        <li>``1``: Android</li>
        <li>``2``: iOS</li>
        <li>``5``: Windows</li>
        <li>``6``: Linux</li>
        <li>``7``: Web</li>
        <li>``8``: macOS</li>
        <li>``0``: Others</li>
      </ul>
    </Parameter>
  </Parameter>
</ParameterList>

If the status code is not `200`, the request fails. See the `message` field in the response body for the reason for this failure. For details about possible response status codes, see [Response status codes](../../response-status-code).

</LeftColumn>
<RightColumn>
<Section title="Authorization">
The endpoint requires [RESTful authentication](/video-calling/channel-management-api/restful-authentication).
</Section>
<Section title="Request example">
  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
    ```bash
    curl --request GET \
      --url http://api.sd-rtn.com/dev/v1/channel/user/property/appid/uid/channelName \
      --header 'Accept: application/json' \
      --header 'Authorization: '
    ```
    </TabItem>
    <TabItem value="python" label="Python" default>
    ```python
    import http.client

    conn = http.client.HTTPConnection("api.sd-rtn.com")

    headers = {
        'Authorization': "",
        'Accept': "application/json"
    }

    conn.request("GET", "/dev/v1/channel/user/property/appid/uid/channelName", headers=headers)

    res = conn.getresponse()
    data = res.read()

    print(data.decode("utf-8"))
    ```
    </TabItem>    
    <TabItem value="node" label="Node.js" default>
    ```js
    const fetch = require('node-fetch');

    const url = 'http://api.sd-rtn.com/dev/v1/channel/user/property/appid/uid/channelName';
    const options = {method: 'GET', headers: {Authorization: '', Accept: 'application/json'}};

    try {
      const response = await fetch(url, options);
      const data = await response.json();
      console.log(data);
    } catch (error) {
      console.error(error);
    }
    ```
    </TabItem>  
  </Tabs>
</Section>
<Section title="Response example">
```json
{
    "success": true,
    "data": {
        "join": 1640330382,
        "uid": 2845863044,
        "in_channel": true,
        "platform": 7,
        "role": 2
    }
}
```
</Section>
</RightColumn>
</RestAPILayout>

