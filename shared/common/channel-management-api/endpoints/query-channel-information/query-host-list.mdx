import Authorization from '@docs/shared/common/channel-management-api/authorization.mdx';
import CodeBlock from '@theme/CodeBlock';
import MultiCodeBlock, { CodeGroup, CodeItem } from '@app/mdx-components/MultiCodeBlock';

This method gets the list of hosts in the specified channel in the live broadcast scenario.

### Prototype

- Method: `GET`
- Endpoint: `https://api.agora.io/dev/v1/channel/user/{appid}/{channelName}/hosts_only`

This API is only used in the live broadcast profile (`mode` is set to `2`). Users in the same channel must use the same profile. Otherwise, the query results may be inaccurate.

This API and the [query user status](query-user-status) API can both be used to synchronize the online status of hosts. Compared to the [query user status](query-user-status) API, this API requires a lower call frequency and has a higher efficiency. Therefore, Agora recommends using this API for this purpose.

### Request parameters

**Path parameters**

Pass the following path parameters in the request URL:

| Parameter     | Type   | Required/Optional | Description                                                  |
| :------ | :-----  |:----- | :---------------------- |
| `appid` | String | Required |The App ID of the project. You can get it through one of the following methods:<li>Copy from the <Link to="{{Global.AGORA_CONSOLE_URL}}"><Vg k="CONSOLE" /></Link>.</li><li> Call the [Get all projects](/interactive-live-streaming/reference/agora-console-rest-api#get-all-projects) API, and read the value of the `vendor_key` field in the response body.</li>|
| `channelName` | String | Required | The channel name. |

**Request header**

<Authorization/>

### Request examples

<MultiCodeBlock caption="Sample request:">

<CodeGroup label="Shell">
<CodeItem language="shell" name="curl">{`curl --request GET \\
  --url https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only \\
  --header 'Accept: application/json'\ \\
  --header 'Authorization: Basic 123'`}</CodeItem>
<CodeItem language="shell" name="HTTPie">{`http GET https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only \\
  Accept:application/json \\
  Authorization:'Basic 123'`}</CodeItem>
<CodeItem language="shell" name="wget">{`wget --quiet \\
  --method GET \\
  --header 'Accept: application/json'\ \\
  --header 'Authorization: Basic 123' \\
  --output-document \\
  \- https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts`}</CodeItem>
</CodeGroup>

<CodeGroup label="Javascript">
<CodeItem language="js" name="Fetch">{`const url = 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only';
const options = {
  method\: 'GET',
  headers: {Accept: 'application/json', Authorization: 'Basic 123'}
\};\n
try {
  const response = await fetch(url, options);
  const data = await response.json();
  console.log(data);
\} catch (error) {
  console.error(error);
\}`}</CodeItem>
<CodeItem language="js" name="XMLHTTPRequest">{`const data = null;\n
const\ xhr = new XMLHttpRequest();
xhr.withCredentials = true;\n
xhr.addEventListener('readystatechange', function () {
  if (this.readyState === this.DONE) {
    console.log(this.responseText);
  }
\});\n
xhr.open('GET', 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only');
xhr.setRequestHeader('Accept', 'application/json');
xhr.setRequestHeader('Authorization', 'Basic 123');\n
xhr.send(data);`}</CodeItem>
<CodeItem language="js" name="jQuery">{`const settings = {
  async: true,
  crossDomain\: true,
  url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
  method: 'GET',
  headers: {
    Accept: 'application/json',
    Authorization: 'Basic 123'
  \}
\};\n
$.ajax(settings).done(function (response) {
  console.log(response);
\});`}</CodeItem>
<CodeItem language="js" name="Axios">{`import axios from 'axios';\n
const options = {
  method: 'GET',
  url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
  headers: { Accept: 'application/json', Authorization: 'Basic 123' }
\};\n
const fetchData = async () => {
  try {
    const { data } = await axios.request(options);
    console.log(data);
  \} catch (error) {
    console.error(error);
  \}
\};\n
fetchData();
`}</CodeItem>
</CodeGroup>

<CodeGroup label="Node">
<CodeItem language="js" name="Native">{`const http = require('https');\n
const\ options = {
  method: 'GET',
  hostname: 'api.sd-rtn.com',
  port: null,
  path: '/dev/v1/channel/user/appid/channelName/hosts_only',
  headers: {
    Accept: 'application/json',
    Authorization: 'Basic 123'
  \}
\};\n
const req = http.request(options, function (res) {
  const chunks = [];\n
  res.on('data', function (chunk) {
    chunks.push(chunk);
  \});\n
  res.on('end', function () {
    const body = Buffer.concat(chunks);
    console.log(body.toString());
  \});
\});\n
req.end();`}</CodeItem>
<CodeItem language="js" name="Request">{`const request = require('request');\n
const\ options = {
  method: 'GET',
  url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
  headers: {Accept: 'application/json', Authorization: 'Basic 123'}
\};\n
request(options, function (error, response, body) {
  if (error) throw new Error(error);\n
  console.log(body);
\});`}</CodeItem>
<CodeItem language="js" name="Unirest">{`const unirest = require('unirest');\n
const\ req = unirest('GET', 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only');\n
req.headers({
  Accept: 'application/json',
  Authorization: 'Basic 123'
\});\n
req.end(function (res) {
  if (res.error) throw new Error(res.error);\n
  console.log(res.body);
\});`}</CodeItem>
<CodeItem language="js" name="Fetch">{`const fetch = require('node-fetch');\n
const url = 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only';
const options = {
  method: 'GET',
  headers: {Accept: 'application/json', Authorization: 'Basic 123'}
\};\n
try {
  const response = await fetch(url, options);
  const data = await response.json();
  console.log(data);
\} catch (error) {
  console.error(error);
\}`}</CodeItem>
<CodeItem language="js" name="Axios">{`import axios from 'axios';\n
const options = {
  method: 'GET',
  url: 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only',
  headers: { Accept: 'application/json', Authorization: 'Basic 123' }
\};\n
try {
  const { data } = await axios.request(options);
  console.log(data);
\} catch (error) {
  console.error(error);
\}`}</CodeItem>
</CodeGroup>

<CodeGroup label="Python">
<CodeItem language="python" name="Python 3">{`import http.client\n
conn =\ http.client.HTTPSConnection("api.sd-rtn.com")\n
headers = {
    'Accept': "application/json",
    'Authorization': "Basic 123"
\}\n
conn.request("GET", "/dev/v1/channel/user/appid/channelName/hosts_only", headers=headers)\n
res = conn.getresponse()
data = res.read()\n
print(data.decode("utf-8"))`}</CodeItem>
<CodeItem language="python" name="Requests">{`import requests\n
url =\ "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"\n
headers = {
    "Accept": "application/json",
    "Authorization": "Basic 123"
\}\n
response = requests.get(url, headers=headers)\n
print(response.json())`}</CodeItem>
</CodeGroup>

<CodeGroup label="C#">
<CodeItem language="csharp" name="HTTPClient">{`using System.Net.Http.Headers;
var client = new HttpClient();
\var request = new HttpRequestMessage
\{
    Method = HttpMethod.Get,
    RequestUri = new Uri("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"),
    Headers =
    \{
        { "Accept", "application/json" },
        { "Authorization", "Basic 123" },
    \},
\};
using (var response = await client.SendAsync(request))
\{
    response.EnsureSuccessStatusCode();
    var body = await response.Content.ReadAsStringAsync();
    Console.WriteLine(body);
\}`}</CodeItem>
<CodeItem language="csharp" name="RestSharp">{`var client = new RestClient("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only");
var request = new RestRequest(Method.GET);
request\.AddHeader("Accept", "application/json");
request.AddHeader("Authorization", "Basic 123");
IRestResponse response = client.Execute(request);`}</CodeItem>
</CodeGroup>

<CodeGroup label="Java">
<CodeItem language="java" name="AsyncHttp">{`AsyncHttpClient client = new DefaultAsyncHttpClient();
client.prepare("GET", "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
  \.setHeader("Accept", "application/json")
  .setHeader("Authorization", "Basic 123")
  .execute()
  .toCompletableFuture()
  .thenAccept(System.out::println)
  .join();\n
client.close();`}</CodeItem>
<CodeItem language="java" name="NetHttp">{`HttpRequest request = HttpRequest.newBuilder()
    .uri(URI.create("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"))
    \.header("Accept", "application/json")
    .header("Authorization", "Basic 123")
    .method("GET", HttpRequest.BodyPublishers.noBody())
    .build();
HttpResponse<String> response = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());
System.out.println(response.body());`}</CodeItem>
<CodeItem language="java" name="OkHttp">{`OkHttpClient client = new OkHttpClient();\n
\Request request = new Request.Builder()
  .url("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
  .get()
  .addHeader("Accept", "application/json")
  .addHeader("Authorization", "Basic 123")
  .build();\n
Response response = client.newCall(request).execute();`}</CodeItem>
<CodeItem language="java" name="Unirest">{`HttpResponse<String> response = Unirest.get("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
  .header("Accept", "application/json")
  \.header("Authorization", "Basic 123")
  .asString();`}</CodeItem>
</CodeGroup>

<CodeGroup label="PHP">
<CodeItem language="php" name="cURL">{`<?php\n
\$curl = curl_init();\n
curl_setopt_array($curl, [
  CURLOPT_URL => "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "GET",
  CURLOPT_HTTPHEADER => [
    "Accept: application/json",
    "Authorization: Basic 123"
  ],
]);\n
$response = curl_exec($curl);
$err = curl_error($curl);\n
curl_close($curl);\n
if ($err) {
  echo "cURL Error #:" . $err;
} else {
  echo $response;
}`}</CodeItem>
<CodeItem language="php" name="Guzzle">{`<?php\n
\$client = new \GuzzleHttp\Client();\n
$response = $client->request('GET', 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only', [
  'headers' => [
    'Accept' => 'application/json',
    'Authorization' => 'Basic 123',
  ],
]);\n
echo $response->getBody();`}</CodeItem>
</CodeGroup>

<CodeGroup label="PowerShell">
<CodeItem language="shell" name="WebRequest">{`$headers=@{}
$headers.Add("Accept", "application/json")
\$headers.Add("Authorization", "Basic 123")
$response = Invoke-WebRequest -Uri 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only' -Method GET -Headers $headers`}</CodeItem>
<CodeItem language="shell" name="RestMethod">{`$headers=@{}
$headers.Add("Accept", "application/json")
\$headers.Add("Authorization", "Basic 123")
$response = Invoke-RestMethod -Uri 'https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only' -Method GET -Headers $headers`}</CodeItem>
</CodeGroup>

<CodeGroup label="Other">
<CodeItem language="go" name="Go">{`package main\n
import\ (
  "fmt"
  "net/http"
  "io"
\)\n
func main() {
  url := "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"\n
  req, _ := http.NewRequest("GET", url, nil)\n
  req.Header.Add("Accept", "application/json")
  req.Header.Add("Authorization", "Basic 123")\n
  res, _ := http.DefaultClient.Do(req)\n
  defer res.Body.Close()
  body, _ := io.ReadAll(res.Body)\n
  fmt.Println(res)
  fmt.Println(string(body))
\}`}</CodeItem>
<CodeItem language="c" name="C">{`CURL *hnd = curl_easy_init();\n
curl_easy_setopt\(hnd, CURLOPT_CUSTOMREQUEST, "GET");
curl_easy_setopt(hnd, CURLOPT_URL, "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only");\n
struct curl_slist *headers = NULL;
headers = curl_slist_append(headers, "Accept: application/json");
headers = curl_slist_append(headers, "Authorization: Basic 123");
curl_easy_setopt(hnd, CURLOPT_HTTPHEADER, headers);\n
CURLcode ret = curl_easy_perform(hnd);`}</CodeItem>
<CodeItem language="objc" name="Objective-C">{`#import <Foundation/Foundation.h>\n
NSDictionary *\headers = @{ @"Accept": @"application/json",
                            @"Authorization": @"Basic 123" };\n
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"]
                                                        cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                    timeoutInterval:10.0];
\[request setHTTPMethod:@"GET"];
\[request setAllHTTPHeaderFields:headers];\n
NSURLSession *session = [NSURLSession sharedSession];
NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request
                                            completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                                                if (error) {
                                                    NSLog(@"%@", error);
                                                \} else {
                                                    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
                                                    NSLog(@"%@", httpResponse);
                                                \}
                                            \}];
[dataTask resume];`}</CodeItem>
<CodeItem language="ocaml" name="OCaml">{`open Cohttp_lwt_unix
open Cohttp
open Lwt\n
let uri = Uri.of_string "http://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only" in
let headers = Header.add_list (Header.init ()) [
    ("Accept", "application/json");
    ("Authorization", "Basic 123");
\] in\n
let\%lwt res, body_stream = Client.call ~headers \`GET uri in
\(* Process the response and body_stream *)
Lwt.return_unit`}</CodeItem>
<CodeItem language="http" name="Http 1.1">{`GET /dev/v1/channel/user/appid/channelName/hosts_only HTTP/1.1
  Accept: application/json
  \Authorization: Basic 123
  Host: api.sd-rtn.com`}</CodeItem>
<CodeItem language="clojure" name="Clojure">{`(require '[clj-http.client :as client])\n
(client/get "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only" 
            \{:headers {:Authorization "Basic 123"
                       :Accept "application/json"}})`}</CodeItem>
<CodeItem language="kotlin" name="Kotlin">{`val client = OkHttpClient()\n
\val request = Request.Builder()
  .url("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")
  .get()
  .addHeader("Accept", "application/json")
  .addHeader("Authorization", "Basic 123")
  .build()\n
val response = client.newCall(request).execute()`}</CodeItem>
<CodeItem language="r" name="R">{`library(httr)\n
url \<- "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only"\n
response <- VERB("GET", url, add_headers('Authorization' = 'Basic 123'), content_type("application/octet-stream"), accept("application/json"))\n
content(response, "text")`}</CodeItem>
<CodeItem language="ruby" name="Ruby">{`require 'uri'
require 'net/http'\n
url = URI("https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")\n
http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true\n
request = Net::HTTP::Get.new(url)
request["Accept"] = 'application/json'
request["Authorization"] = 'Basic 123'\n
response = http.request(request)
puts response.read_body`}</CodeItem>
<CodeItem language="swift" name="Swift">{`import Foundation\n
\let headers = [
  "Accept": "application/json",
  "Authorization": "Basic 123"
\]\n
let request = NSMutableURLRequest(url: NSURL(string: "https://api.sd-rtn.com/dev/v1/channel/user/appid/channelName/hosts_only")! as URL,
                                        cachePolicy: .useProtocolCachePolicy,
                                    timeoutInterval: 10.0)
request.httpMethod = "GET"
request.allHTTPHeaderFields = headers\n
let session = URLSession.shared
let dataTask = session.dataTask(with: request as URLRequest, completionHandler: { (data, response, error) -> Void in
  if (error != nil) {
    print(error as Any)
  \} else {
    let httpResponse = response as? HTTPURLResponse
    print(httpResponse)
  \}
\})\n
dataTask.resume()`}</CodeItem>
</CodeGroup>
</MultiCodeBlock>


### Response parameters

For details about possible response status codes, see [Response status codes](../../response-status-code).

If the status code is not `200`, the request fails. See the `message` field in the response body for the reason for this failure.

If the status code is `200`, the request succeeds, and the response body includes the following parameters:

| Parameter | Type    | Description                                                  |
| :-------- | :------ | :----------------------------------------------------------- |
| `success` | Boolean | The state of this request:<li>`true`: Success.</li><li>`false`: Reserved for future use.</li> |
| `data`    | Object  | User information, including the following fields: <ul><li>`channel_exist`: Boolean. Whether the specified channel exists:<ul><li>`true`: The channel exists.</li><li>`false`: The channel does not exist.</li></ul>**Note**: All other fields are not returned when the value of `channel_exist` is `false`.</li><li>`mode`: Number. The channel profile:<ul><li>`1`：The `COMMUNICATION` profile.</li><li>`2`: The `LIVE_BROADCASTING` profile.</li></ul></li><li>`broadcasters`：Array. User IDs of all hosts in the channel. This field is returned only when `mode` is `2`.</li></ul> |

### Response example

The following is a response example for a successful request:

```json
{
  "success": true,
  "data": {
    "channel_exist": true,
    "mode": 2,
    "broadcasters": [
      574332,
      1347839
    ]
  }
}
```

