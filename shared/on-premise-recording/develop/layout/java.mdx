<PlatformWrapper platform="linux-java">

To configure the layout, call the `setVideoMixingLayout` method and pass a `VideoMixingLayout` object that defines:

- Canvas dimensions and frame rate
- Background color or image
- Layouts for each userâ€™s video


```java
VideoMixingLayout recorderLayout = new VideoMixingLayout();
recorderLayout.setCanvasWidth(1280);
recorderLayout.setCanvasHeight(720);
recorderLayout.setCanvasFps(25);

// Set layout for two users
UserMixerLayout[] layout = new UserMixerLayout[2];

// User 1 layout
layout[0] = new UserMixerLayout();
layout[0].setUserId("1234");
MixerLayoutConfig mixerLayoutConfig1 = new MixerLayoutConfig();
mixerLayoutConfig1.setX(0);
mixerLayoutConfig1.setY(0);
mixerLayoutConfig1.setWidth(640);
mixerLayoutConfig1.setHeight(360);
layout[0].setConfig(mixerLayoutConfig1);

// User 2 layout
layout[1] = new UserMixerLayout();
layout[1].setUserId("5678");
MixerLayoutConfig mixerLayoutConfig2 = new MixerLayoutConfig();
mixerLayoutConfig2.setX(720);
mixerLayoutConfig2.setY(270);
mixerLayoutConfig2.setWidth(540);
mixerLayoutConfig2.setHeight(320);
layout[1].setConfig(mixerLayoutConfig2);

// Apply the layout
recorderLayout.setUserLayoutConfigs(layout);
agoraMediaRtcRecorder.setVideoMixingLayout(recorderLayout);
```

The sample code creates the following composite layout:  
![](/images/on-premise-recording/composite-layout.svg)

## API reference

#### `VideoMixingLayout` class

```java
public class VideoMixingLayout {
    private int canvasWidth;               // Width of the canvas
    private int canvasHeight;              // Height of the canvas
    private int canvasFps;                 // Frame rate
    private long backgroundColor;          // Background color (ARGB format)
    private String backgroundImage;        // Path to the background image (optional)
    private int userLayoutConfigNum;       // Number of user video layouts
    private UserMixerLayout[] userLayoutConfigs; // Layouts for each user stream
}
```

#### `UserMixerLayout` and `MixerLayoutConfig` classes

Each user stream is configured through `UserMixerLayout`, which contains a `MixerLayoutConfig` object defining size, position, and appearance.

```java
public class UserMixerLayout {
    private String userId;                 // UID of the user to include in the mix
    private MixerLayoutConfig config;      // Layout configuration for the user stream
}
```

```java
public class MixerLayoutConfig {
    private int x;                         // X offset from the canvas origin
    private int y;                         // Y offset from the canvas origin
    private int width;                     // Width of the user video region
    private int height;                    // Height of the user video region
    private int zOrder;                    // Layer order for overlapping videos
    private float alpha;                   // Transparency (0.0 to 1.0)
    private boolean mirror;                // Whether to mirror the video
    private String imagePath;              // Optional background image
    private int rotation;                  // Clockwise rotation (0, 90, 180, 270)
}
```

</PlatformWrapper>