---
title: 'Query message notification server IP'
sidebar_position: 8
type: docs
platform_selector: false
description: >
   Get IP address list of the query message notification server.
---

import RestAPILayout from '@site/src/components/rest-api/RestAPILayout';
import LeftColumn from '@site/src/components/rest-api/LeftColumn';
import RightColumn, { Section } from '@site/src/components/rest-api/RightColumn';
import ParameterList, { Parameter } from '@site/src/components/rest-api/ParameterList';
import PathParameter from '@site/src/components/rest-api/PathParameter';
import { Tabs, TabItem } from '@site/src/components/rest-api/Tabs';

<RestAPILayout>
  <LeftColumn
    title={frontMatter.title}
    method="GET"
    endpoint="https://api.sd-rtn.com/v1/ncs/ip"
  >

Obtain the address list of the query message notification server. Add the IP addresses to your whitelist.

The Agora message notification service can notify your server of some cloud transcoding events through HTTPS requests. Agora dynamically adjusts the IP address of the message notification server in a 24-hour cycle. <Vg k="COMPANY" /> strongly recommends that you query at least once every 24 hours and automatically update your firewall configuration.

## Response

- If the returned status code is `200`, the request was successful. The response body contains the result of the request.

  <ParameterList title="OK">         
    <Parameter name="data" type="object">
      <Parameter name="service" type="object">     
        <Parameter name="hosts" type="array">
          <Parameter name="primaryIP" type="string">
            The IP address of the Agora message notification server.
          </Parameter>
        </Parameter>
      </Parameter>
    </Parameter>
  </ParameterList>

   
</LeftColumn>

<RightColumn>

<Section title="Authorization">
This endpoint requires [Basic Auth](../rest-api/restful-authentication).
</Section>

<Section title="Request example">

  <Tabs groupId="code-examples">
    <TabItem value="curl" label="curl" default>
      ```bash
      curl --request get \
        --url https://api.sd-rtn.com/v1/ncs/ip \
        --header 'Authorization: Basic <credentials>'   
      ```
    </TabItem>
    <TabItem value="python" label="Python">

    ```python
    import requests

    url = "https://api.sd-rtn.com/v1/ncs/ip"

    headers = {
        "Authorization": "Basic <credentials>"
    }

    response = requests.get(url, headers=headers)

    print(response.status_code)
    print(response.text)
    ```
    </TabItem>

    <TabItem value="node" label="Node.js">

    ```js
    const url = 'https://api.sd-rtn.com/v1/ncs/ip';
    const options = {
      method: 'GET',
      headers: {
        'Authorization': 'Basic <credentials>'
      }
    };

    fetch(url, options)
      .then(res => res.text())
      .then(data => console.log(data))
      .catch(err => console.error(err));
    ```
    </TabItem>
  </Tabs>

</Section>
<Section title="Response example">

<Tabs groupId="response-examples">
  <TabItem value="200" label="200" default>

    ```json
    {
      "data": {
        "service": {
          "hosts": [
            {
              "primaryIP": "xxx.xxx.xxx.xxx"
            },
            {
              "primaryIP": "xxx.xxx.xxx.xxx"
            }
          ]
        }
      }
    }
    ```
  </TabItem>
</Tabs>

</Section>
</RightColumn>
</RestAPILayout>