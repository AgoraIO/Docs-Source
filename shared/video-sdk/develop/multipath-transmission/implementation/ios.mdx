
<PlatformWrapper platform="ios, macos">

### Multipath APIs

The <Vpd k="SDK" /> supports enabling and configuring multipath transmission capabilities through the following parameters in `ChannelMediaOptions`:

```objc
__attribute__((visibility("default"))) @interface AgoraRtcChannelMediaOptions : NSObject
// ...
@property(assign, nonatomic) BOOL enableMultipath;
@property(assign, nonatomic) AgoraMultipathMode uplinkMultipathMode;
@property(assign, nonatomic) AgoraMultipathMode downlinkMultipathMode;
@property(assign, nonatomic) AgoraMultipathType preferMultipathType;
@end
```

Use `enableMultipath` to enable multipath transmission. Once enabled, the SDK supports two transmission modes:

- **Dynamic mode** (default): Dynamically selects the optimal transmission path based on network conditions. This mode is suitable for traffic-sensitive scenarios with high user experience requirements, such as conferences and education. In this mode, you can use `preferMultipathType` to specify a preferred network path, such as Wi-Fi or mobile network.

- **Full redundancy mode**: Sends data simultaneously across all available network paths. This mode is suitable for scenarios where traffic use is less sensitive but a highly reliable user experience is required, such as outdoor production, broadcasting, and parallel operation. This mode incurs additional fees. [Contact technical support](mailto:support@agora.io) to enable it.

You can configure the transmission mode separately for uplink (`uplinkMultipathMode`) and downlink (`downlinkMultipathMode`).

When multipath is enabled, the SDK reports transmission statistics for each path in real time through the `multiPathStats` callback. These statistics include traffic consumption for each network type and real-time performance metrics for each path, making it easier to monitor and optimize network performance.


```objc
__attribute__((visibility("default"))) @interface AgoraMultipathStats : NSObject
@property (assign, nonatomic) NSUInteger lanRxBytes;
@property (assign, nonatomic) NSUInteger lanTxBytes;
@property (assign, nonatomic) NSUInteger wifiRxBytes;
@property (assign, nonatomic) NSUInteger wifiTxBytes;
@property (assign, nonatomic) NSUInteger mobileRxBytes;
@property (assign, nonatomic) NSUInteger mobileTxBytes;
@property (assign, nonatomic) NSUInteger activePathNum;
@property (copy, nonatomic) NSArray<AgoraPathStats *> *_Nullable pathStats NS_SWIFT_NAME(pathStats);
@end
```

### Sample code

The following sample code shows how to enable and configure multipath network transmission:

```swift
// Initialize multipath transmission controller
@IBOutlet weak var selectModePicker: Picker!
func initSelectModePicker() {
    selectModePicker.label.stringValue = "Mode".localized
    selectModePicker.picker.addItems(withTitles: ["dynamic", "duplicate"])
    selectModePicker.picker.selectItem(at: 0)
}

// ...
// Enable multipath transmission
channelMediaOption.enableMultipath = (multipathSwitch.state == .on)

// Set uplink transmission mode
channelMediaOption.uplinkMultipathMode = (selectModePicker.picker.indexOfSelectedItem == 0) ? .dynamic : .duplicate

// Set downlink transmission mode
channelMediaOption.downlinkMultipathMode = (selectModePicker.picker.indexOfSelectedItem == 0) ? .dynamic : .duplicate

// Report multipath transmission statistics
func rtcEngine(_ engine: AgoraRtcEngineKit, multiPathStats stats: AgoraMultipathStats) {
    videos[0].statsInfo?.updateMultipathStats(stats)
}
```

</PlatformWrapper>