---
title: 'Composite recording'
sidebar_position: 3
type: docs
description: >
  How to record audio and video in composite recording mode using command line. 
---

export const toc = [{}];

import Implementation from '@docs/shared/on-premise-recording/develop/composite-recording/index.mdx';

The On-Premise Recording SDK supports two recording modes:

- Individual recording mode: This is the default recording mode. The SDK generates one audio and/or video file for each UID. 
- Composite recording mode: Generates a single mixed audio and video file for all UIDs in a channel, or mixes the audio of all UIDs in the channel into an audio file and the video of all UIDs into a video file.

See [Differences between individual recording mode and composite recording mode](https://docs.agora.io/en/help/integration-issues/recording_mode) to decide which mode you should use.

## Prerequisites

Before continuing, follow the [Quickstart](/on-premise-recording/get-started/quickstart) guide to integrate the Recording SDK and implement the basic recording functionality.

## Implement composite recording

The implementation of composite recording is largely similar to the steps in the [Quickstart](/on-premise-recording/get-started/quickstart) guide. The main differences are in the configuration parameters and the APIs used.

Refer to the following call sequence diagram to understand the recording workflow.

<details>
<summary>Sequence diagram</summary>

![Sequence diagram](/images/on-premise-recording/composite-recording-logic.svg)
</details>

To implement composite recording in your app, follow these steps:

<Implementation/>

## Reference

This section contains content that completes the information on this page, or points you to documentation that explains other aspects to this product.

### Considerations

The composite recording mode supports a specific set of APIs. Calling unsupported methods in the wrong mode has no effect. When using the composite recording mode, the following methods do not work:

    * [`setRecorderConfigByUid`](/on-premise-recording/reference/api-reference#setrecorderconfigbyuid)
    * [`enableAndUpdateVideoWatermarksByUid`](/on-premise-recording/reference/api-reference#enableandupdatevideowatermarksbyuid)
    * [`startSingleRecordingByUid`](/on-premise-recording/reference/api-reference#startsinglerecordingbyuid)
    * [`stopSingleRecordingByUid`](/on-premise-recording/reference/api-reference#stopsinglerecordingbyuid)
