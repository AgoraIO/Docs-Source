<PlatformWrapper platform="flutter">

1. **Enable the plugin**

    After creating and initializing `RtcEngine`, call `enableExtension` to enable the plugin, and then call other APIs ( `enableVideo`, `joinChannel` etc.).

    ```dart
    // On Android, you should load libAgoraFaceUnityExtension.so explicitly
    if (Platform.isAndroid) {
    await _rtcEngine.loadExtensionProvider(path: 'AgoraFaceUnityExtension');
    }
    await _rtcEngine.enableExtension(
        provider: "FaceUnity", extension: "Effect", enable: true);
    ```
1. **Initialize the plugin**

    After receiving the `onExtensionStarted` callback , call `setExtensionProperty` and pass in the corresponding key and value. The specific order is as follows:

    1. The corresponding key is initialized `fuSetup`, and the value is the data of the certificate file authpack.

    2. The key corresponding to loading the AI ​​model is `fuLoadAIModelFromPackage`, and the value contains `ai_xxx.bundle` the and the AI ​​capability type.

    ```dart
    Future<void> _initFUExtension() async {
    // 初始化
    await _rtcEngine.setExtensionProperty(
        provider: 'FaceUnity',
        extension: 'Effect',
        key: 'fuSetup',
        value: jsonEncode({'authdata': authpack.gAuthPackage}));

    // 加载 AI 模型
    final aiFaceProcessorPath =
        await _copyAsset('Resource/model/ai_face_processor.bundle');
    await _rtcEngine.setExtensionProperty(
        provider: 'FaceUnity',
        extension: 'Effect',
        key: 'fuLoadAIModelFromPackage',
        value: jsonEncode({'data': aiFaceProcessorPath, 'type': 1 << 10}));
    }
    ```

1. **Set the beauty effect and human body recognition**

    Call setExtensionPropertyand pass in the corresponding key and value to achieve the following functions:

    * Load props, adjust beauty intensity
    * Face, Gesture and Human Recognition

    You can make combined calls according to the needs of the scene. For the corresponding key and value, see the interface description for details .

    An example of setting the cat ears effect is as follows:

    ```dart
    Future<void> _setupCatSparksEffect() async {
    final aiFaceProcessorPath =
        await _copyAsset('Resource/model/ai_face_processor.bundle');
    await _rtcEngine.setExtensionProperty(
        provider: 'FaceUnity',
        extension: 'Effect',
        key: 'fuLoadAIModelFromPackage',
        value: jsonEncode({'data': aiFaceProcessorPath, 'type': 1 << 10}));

    final catSparksPath =
        await _copyAsset('Resource/items/ItemSticker/CatSparks.bundle');
    await _rtcEngine.setExtensionProperty(
        provider: 'FaceUnity',
        extension: 'Effect',
        key: 'fuCreateItemFromPackage',
        value: jsonEncode({'data': catSparksPath}));
    }
    ```

1. **Release resources**

    When you need to stop using a plugin, follow the steps below to release resources:

    1. Call `setExtensionProperty`, pass in the key to `fuDestroyLibData` release the resources occupied by the plug-in.
    1. After receiving the `fuDestroyLibData` callback , call the `destroy` method to `destroy` the RtcEngine object .


</PlatformWrapper>