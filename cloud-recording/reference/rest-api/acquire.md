---
title: "Get a resource ID"
sidebar_position: 2
type: docs
platform_selector: false
description: >
  Before starting a cloud recording, you need to call the `acquire` method get a resource ID.
---

- Method:POST
- Endpoint: /v1/apps/\<appid\>/cloud_recording/acquire

If this method call succeeds, you get a `resourceId` from the HTTP response body. The resource ID is valid for five minutes, so you need to [start recording](start) with this resource ID with it before it expires.

<Admonition type="info" title="Information">
* Each resource ID can only be used for one recording session.
* The request frequency limit is 10 requests per second for each [Agora account](../manage-agora-account#create-an-agora-account). Contact [Agora technical support](mailto:support@agora.io) if you want to raise the limit.
</Admonition>

## HTTP request

The following parameter is required in the URL.

| Parameter | Type   | Description                                                  |
| :-------- | :----- | :----------------------------------------------------------- |
| `appid`   | String |  Your [App ID](../manage-agora-account#get-the-app-id).<ul><li>In web page recording mode: Use the App ID for which the cloud recording service has been enabled.</li><li>In other modes: Use the same App ID as the channel to be recorded. Ensure that the cloud recording service has been enabled for this App ID.</li></ul>  |

The following parameters are required in the request body.

| Parameter       | Type   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :-------------- | :----- |:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `cname`         | String | <ul><li>In web page recording mode, use `cname` to distinguish between recording sessions. `cname` should not exceed 128 bytes. You can use a set of `appid`, `cname`, and `uid` to identify one session. As a best practice, if you want to record a web page in more than one session, you can use different user IDs to identify each session while using the same `cname` to relate to all sessions for that web page.</li><li>In other recording modes, use `cname` to set the name of the channel to be recorded.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `uid`           | String | A string that contains the user ID of the recording client, for example `"527841"`. The user ID needs to meet the following requirements: <li>It is a 32-bit unsigned integer within the range between 1 and (2<sup>32</sup>-1).</li><li><b><em>It is unique and does not duplicate any existing user ID in the channel. </em></b></li><li>It is an integer; Cloud Recording does not support user account (which is a string), so all user IDs in the channel must be integers.</li>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `clientRequest` | JSON   | A specific client request that includes the following parameters:  <ul><li>`region`: (Optional) String, which is used to specify the region for connection. If you specify a region, the cloud recording server connects only to the Agora servers within that region. The following region settings are supported: `"CN"` (Mainland China), `"AP"` (Asia, excluding Mainland China), `"EU"` (Europe), or `"NA"` (North America).</li><li> `resourceExpiredHour:` (Optional) Number. Sets the time limit (in hours) for Cloud Recording RESTful API calls. Time starts counting when you successfully start a cloud recording and get an `sid` (the recording ID).<ul><li> If you exceed the time limit, you can no longer call `query`, `update`, `updateLayout`, or `stop`. </li><li>The recording will not stop after exceeding the time limit. The maximum recording length is the value you set through the `maxRecordingHour` parameter of the `start` method.</li><li>The value range of `resourceExpiredHour` is [1, 720], and the default value is `72`.</li></ul></li> <li>`scene`: (Optional) Number. Sets the recording options. <ul><li>`0`ï¼šAudio and video recording (Default) or [Postpone Audio Mixing](../../develop/individual-nontranscoding#implement-an-postpone-audio-mixing):<ul> <li>Audio and video recording: The recording service uploads the recording files to the third-party cloud storage you specify in real time after the recording ends.</li><li>Postpone Audio Mixing: The recording service merges and transcodes the recording files of all user IDs in the specified channel within 24 hours after the recording ends to generate an MP3/M4A/AAC file, and then uploads the file to the third-party cloud storage you specify. This scene is only applicable to the individual audio non-transcoding recording mode.</li> </ul>  </li> <li>`1`: Web page recording.</li><li>`2`: Postpone transcoding. After setting this scene, the recording service transcodes the recording file to generate an MP4 file within 24 hours after recording, and uploads the MP4 file to the third-party cloud storage you specify. This scenario only applies to individual recording mode. Also set the `appsCollection` parameter in the `start` method.</li></ul> </li> <li>`startParameter`: (Optional) JSON object. Setting this parameter enhances availability and optimizes load balancing. Caution: When populating the `startParameter` object, make sure the values are valid and consistent with the `clientRequest` object in the subsequent start request body; otherwise, the start request will receive an error response.<ul><li>[`token`](../glossary#token): String. The dynamic key used for the channel to record. Ensure that you set this parameter if app certificate is enabled for your application. See [Secure authentication with tokens](../../develop/authentication-workflow).</li><li>`recordingConfig`: JSON. Configurations for subscribing to media streams.</li><li>`recordingFileConfig`: JSON. Configurations for the recorded files.</li><li>`snapshotConfig`: JSON. Video screenshot configurations.</li><li>`storageConfig`: JSON. Third-party cloud storage configurations.</li><li>`extensionServiceConfig`: JSON. Configurations for third-party extension services. </li><li>`appsCollection`: JSON. Configurations of application combinations.</li><li>`transcodeOptions`: JSON. Configuration of the recording files generated during postpone transcoding and audio mixing.</li></ul></li></ul> |

### Request example

- The request URL is `https://api.agora.io/v1/apps/<yourappid>/cloud_recording/acquire`.
- `Content-type` is `application/json;charset=utf-8`.
- `Authorization` is the basic authentication, see [RESTful API authentication](../restful-authentication) for details.
- The request body:

```json
{
    "cname": "httpClient463224",
    "uid": "527841",
    "clientRequest": {
        "region": "CN",
        "resourceExpiredHour": 24
    }
}
```

### HTTP response

If the returned HTTP status code is `200`, it means the request was successful, and the response body contains the following fields:
- `code`: Number. [Status code](../common-errors#status-codes).
- `resourceId`: String. The resource ID for cloud recording. The resource ID is valid for five minutes.


### Response example

```json
"Code": 200,
"Body":
{
    "resourceId": "JyvK8nXHuV1BE64GDkAaBGEscvtHW7v8BrQoRPCHxmeVxwY22-x-kv4GdPcjZeMzoCBUCOr9q-k6wBWMC7SaAkZ_4nO3JLqYwM1bL1n6wKnnD9EC9waxJboci9KUz2WZ4YJrmcJmA7xWkzs_L3AnNwdtcI1kr_u1cWFmi9BWAWAlNd7S7gfoGuH0tGi6CNaOomvr7-ILjPXdCYwgty1hwT6tbAuaW1eqR0kOYTO0Z1SobpBxu1czSFh1GbzGvTZG"
}
```